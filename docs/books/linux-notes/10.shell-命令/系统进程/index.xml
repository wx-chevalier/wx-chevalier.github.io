<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>系统进程 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/</link><atom:link href="https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/index.xml" rel="self" type="application/rss+xml"/><description>系统进程</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>系统进程</title><link>https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/</link></image><item><title>进程查看</title><link>https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B/</guid><description>&lt;h1 id="进程查看">进程查看&lt;/h1>
&lt;p>您需要使用 ps 命令，pstree 命令和 pgrep 命令来查看当前进程的快照。要查看当前进程，请使用 ps 命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ps aux &lt;span class="p">|&lt;/span> less
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ps aux &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;process-name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ps aux &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;httpd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ps alx &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;mysqld&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="pstree">pstree&lt;/h1>
&lt;p>要显示进程树，请使用 pstree 命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ pstree
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">init─┬─acpid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─apache2───6*&lt;span class="o">[&lt;/span>apache2&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─atd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─atop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─avahi-daemon───avahi-daemon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─bonobo-activati───&lt;span class="o">{&lt;/span>bonobo-activati&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─console-kit-dae───63*&lt;span class="o">[{&lt;/span>console-kit-dae&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─cron
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─2*&lt;span class="o">[&lt;/span>dbus-daemon&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─dbus-launch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─dd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─deluge───5*&lt;span class="o">[{&lt;/span>deluge&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─dhclient
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─dnsmasq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─evince───&lt;span class="o">{&lt;/span>evince&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─firefox───run-mozilla.sh───firefox-bin───27*&lt;span class="o">[{&lt;/span>firefox-bin&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gconfd-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gdm───gdm─┬─Xorg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─gnome-session─┬─gnome-panel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─gpg-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─metacity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─nautilus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─seahorse-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─ssh-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─tracker-applet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─trackerd───2*&lt;span class="o">[{&lt;/span>trackerd&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─update-notifier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─&lt;span class="o">{&lt;/span>gnome-session&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gedit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─6*&lt;span class="o">[&lt;/span>getty&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gnome-power-man
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gnome-screensav
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gnome-settings-───&lt;span class="o">{&lt;/span>gnome-settings-&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gnome-terminal─┬─bash───pstree
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─bash───ssltx───ssh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─gnome-pty-helpe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─&lt;span class="o">{&lt;/span>gnome-terminal&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gvfs-fuse-daemo───3*&lt;span class="o">[{&lt;/span>gvfs-fuse-daemo&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gvfs-gphoto2-vo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gvfs-hal-volume
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gvfsd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gvfsd-burn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─gvfsd-trash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─hald───hald-runner─┬─hald-addon-acpi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─hald-addon-cpuf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├─hald-addon-inpu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─hald-addon-stor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─jsvc─┬─jsvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─jsvc───39*&lt;span class="o">[{&lt;/span>jsvc&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─klogd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─lighttpd───2*&lt;span class="o">[&lt;/span>php-cgi───4*&lt;span class="o">[&lt;/span>php-cgi&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─mixer_applet2───&lt;span class="o">{&lt;/span>mixer_applet2&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─mount.ntfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─mysqld_safe─┬─logger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─mysqld───10*&lt;span class="o">[{&lt;/span>mysqld&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─netspeed_applet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─ntpd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─pppd───sh───pptpgw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─pptpcm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─pulseaudio─┬─gconf-helper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └─2*&lt;span class="o">[{&lt;/span>pulseaudio&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─squid───squid───unlinkd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─sshproxyd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─syslogd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─system-tools-ba
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─thunderbird───run-mozilla.sh───thunderbird-bin───10*&lt;span class="o">[{&lt;/span>thunderbird-bin&lt;span class="o">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─udevd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─vmnet-bridge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─2*&lt;span class="o">[&lt;/span>vmnet-dhcpd&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─vmnet-natd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─3*&lt;span class="o">[&lt;/span>vmnet-netifup&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─winbindd───winbindd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─workrave───&lt;span class="o">{&lt;/span>workrave&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─workrave-applet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─wpa_supplicant
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="pgrep">pgrep&lt;/h1>
&lt;p>pgrep 浏览当前正在运行的进程，并列出要与选择标准匹配的进程 ID。列出 vivek 用户拥有的名为 php-cgi AND 的进程。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">pgrep -u vivek php-cgi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To list the processes owned by vivek OR krish.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pgrep -u vivek,krish
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>进程控制</title><link>https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/linux-notes/10.shell-%E5%91%BD%E4%BB%A4/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/</guid><description>&lt;h1 id="进程终止">进程终止&lt;/h1>
&lt;p>Linux 支持 POSIX 可靠信号（“标准信号”）和 POSIX 实时信号。在 Linux 和 Unix 操作系统中，信号不过是某种进程间通信（一种或多种进程或命令中的多个线程之间交换数据的技术）。信号被发送到进程或命令以通知发生的事件。
例如，在运行名为 &lt;code>ls -R /&lt;/code> 的命令时，您可以按 CTRL + C（或 Break）以取消命令执行。按下 CTRL + C 后，就会发送一个称为 SIGINT（2）的信号来指示键盘中断。当 SIGINT 发送到 ls 命令时，Linux 中断了进程的正常执行流程。在此示例中，ls 命令被终止。&lt;/p>
&lt;p>但是，您可以为 CTRL + C 注册一个信号处理程序，并采取某种措施，例如忽略它，或者在 ls 命令被 SIGINT 中断时在屏幕上显示一条消息。您需要使用 trap 命令在 Linux Shell 脚本下捕获信号并处理错误。您可以将各种信号发送到命令和过程。例如，要终止前台进程，您可以按 Ctrl + C 组合键。要终止后台进程，可以使用 kill 命令并发送 SIGTERM（终止命令）：&lt;/p>
&lt;h2 id="kill">kill&lt;/h2>
&lt;p>默认的终止信号是 TERM。要列出可用信号，请输入：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">kill&lt;/span> -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> SIGHUP 2&lt;span class="o">)&lt;/span> SIGINT 3&lt;span class="o">)&lt;/span> SIGQUIT 4&lt;span class="o">)&lt;/span> SIGILL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5&lt;span class="o">)&lt;/span> SIGTRAP 6&lt;span class="o">)&lt;/span> SIGABRT 7&lt;span class="o">)&lt;/span> SIGBUS 8&lt;span class="o">)&lt;/span> SIGFPE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 9&lt;span class="o">)&lt;/span> SIGKILL 10&lt;span class="o">)&lt;/span> SIGUSR1 11&lt;span class="o">)&lt;/span> SIGSEGV 12&lt;span class="o">)&lt;/span> SIGUSR2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">13&lt;span class="o">)&lt;/span> SIGPIPE 14&lt;span class="o">)&lt;/span> SIGALRM 15&lt;span class="o">)&lt;/span> SIGTERM 16&lt;span class="o">)&lt;/span> SIGSTKFLT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">17&lt;span class="o">)&lt;/span> SIGCHLD 18&lt;span class="o">)&lt;/span> SIGCONT 19&lt;span class="o">)&lt;/span> SIGSTOP 20&lt;span class="o">)&lt;/span> SIGTSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21&lt;span class="o">)&lt;/span> SIGTTIN 22&lt;span class="o">)&lt;/span> SIGTTOU 23&lt;span class="o">)&lt;/span> SIGURG 24&lt;span class="o">)&lt;/span> SIGXCPU
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">25&lt;span class="o">)&lt;/span> SIGXFSZ 26&lt;span class="o">)&lt;/span> SIGVTALRM 27&lt;span class="o">)&lt;/span> SIGPROF 28&lt;span class="o">)&lt;/span> SIGWINCH
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">29&lt;span class="o">)&lt;/span> SIGIO 30&lt;span class="o">)&lt;/span> SIGPWR 31&lt;span class="o">)&lt;/span> SIGSYS 34&lt;span class="o">)&lt;/span> SIGRTMIN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">35&lt;span class="o">)&lt;/span> SIGRTMIN+1 36&lt;span class="o">)&lt;/span> SIGRTMIN+2 37&lt;span class="o">)&lt;/span> SIGRTMIN+3 38&lt;span class="o">)&lt;/span> SIGRTMIN+4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">39&lt;span class="o">)&lt;/span> SIGRTMIN+5 40&lt;span class="o">)&lt;/span> SIGRTMIN+6 41&lt;span class="o">)&lt;/span> SIGRTMIN+7 42&lt;span class="o">)&lt;/span> SIGRTMIN+8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">43&lt;span class="o">)&lt;/span> SIGRTMIN+9 44&lt;span class="o">)&lt;/span> SIGRTMIN+10 45&lt;span class="o">)&lt;/span> SIGRTMIN+11 46&lt;span class="o">)&lt;/span> SIGRTMIN+12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">47&lt;span class="o">)&lt;/span> SIGRTMIN+13 48&lt;span class="o">)&lt;/span> SIGRTMIN+14 49&lt;span class="o">)&lt;/span> SIGRTMIN+15 50&lt;span class="o">)&lt;/span> SIGRTMAX-14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">51&lt;span class="o">)&lt;/span> SIGRTMAX-13 52&lt;span class="o">)&lt;/span> SIGRTMAX-12 53&lt;span class="o">)&lt;/span> SIGRTMAX-11 54&lt;span class="o">)&lt;/span> SIGRTMAX-10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">55&lt;span class="o">)&lt;/span> SIGRTMAX-9 56&lt;span class="o">)&lt;/span> SIGRTMAX-8 57&lt;span class="o">)&lt;/span> SIGRTMAX-7 58&lt;span class="o">)&lt;/span> SIGRTMAX-6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">59&lt;span class="o">)&lt;/span> SIGRTMAX-5 60&lt;span class="o">)&lt;/span> SIGRTMAX-4 61&lt;span class="o">)&lt;/span> SIGRTMAX-3 62&lt;span class="o">)&lt;/span> SIGRTMAX-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">63&lt;span class="o">)&lt;/span> SIGRTMAX-1 64&lt;span class="o">)&lt;/span> SIGRTMAX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>kill 命令可以将上述所有信号发送到命令和进程。但是，仅当命令被编程为识别那些信号时，它们才会给出响应。特别有用的信号包括：&lt;/p>
&lt;ul>
&lt;li>SIGHUP (1) - Hangup detected on controlling terminal or death of controlling process.&lt;/li>
&lt;li>SIGINT (2) - Interrupt from keyboard.&lt;/li>
&lt;li>SIGKILL (9) - Kill signal i.e. kill running process.&lt;/li>
&lt;li>SIGSTOP (19) - Stop process.&lt;/li>
&lt;li>SIGCONT (18) - Continue process if stopped.&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Number&lt;/th>
&lt;th>Constant&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Default action&lt;/th>
&lt;th>Trappable (Yes/No)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>0&lt;/td>
&lt;td>0&lt;/td>
&lt;td>Success&lt;/td>
&lt;td>Terminate the process.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/wiki/index.php?title=SIGHUP&amp;amp;action=edit&amp;amp;redlink=1" target="_blank" rel="noopener">SIGHUP&lt;/a>&lt;/td>
&lt;td>Hangup detected on controlling terminal or death of controlling process. Also, used to reload configuration files for many &lt;a href="https://bash.cyberciti.biz/guide/UNIX" target="_blank" rel="noopener">UNIX&lt;/a> / &lt;a href="https://bash.cyberciti.biz/guide/Linux" target="_blank" rel="noopener">Linux&lt;/a> &lt;a href="https://bash.cyberciti.biz/guide/Daemons" target="_blank" rel="noopener">daemons&lt;/a>.&lt;/td>
&lt;td>Terminate the process.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/guide/SIGINT" target="_blank" rel="noopener">SIGINT&lt;/a>&lt;/td>
&lt;td>Interrupt from keyboard (Ctrl+C)&lt;/td>
&lt;td>Terminate the process.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/wiki/index.php?title=SIGQUIT&amp;amp;action=edit&amp;amp;redlink=1" target="_blank" rel="noopener">SIGQUIT&lt;/a>&lt;/td>
&lt;td>Quit from keyboard (Ctrl-. or, Ctrl-4 or, on the virtual console, the SysRq key)&lt;/td>
&lt;td>Terminate the process and dump core.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/guide/SIGILL" target="_blank" rel="noopener">SIGILL&lt;/a>&lt;/td>
&lt;td>Terminate the process and dump core.&lt;/td>
&lt;td>Illegal instruction.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/wiki/index.php?title=SIGABRT&amp;amp;action=edit&amp;amp;redlink=1" target="_blank" rel="noopener">SIGABRT&lt;/a>&lt;/td>
&lt;td>Abort signal from abort(3) - software generated.&lt;/td>
&lt;td>Terminate the process and dump core.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/wiki/index.php?title=SIGFPE&amp;amp;action=edit&amp;amp;redlink=1" target="_blank" rel="noopener">SIGFPE&lt;/a>&lt;/td>
&lt;td>Floating point exception.&lt;/td>
&lt;td>Terminate the process and dump core.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/guide/SIGKILL" target="_blank" rel="noopener">SIGKILL&lt;/a>&lt;/td>
&lt;td>Kill signal&lt;/td>
&lt;td>Terminate the process.&lt;/td>
&lt;td>No&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>15&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/wiki/index.php?title=SIGTERM&amp;amp;action=edit&amp;amp;redlink=1" target="_blank" rel="noopener">SIGTERM&lt;/a>&lt;/td>
&lt;td>Termination signal&lt;/td>
&lt;td>Terminate the process.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>20&lt;/td>
&lt;td>&lt;a href="https://bash.cyberciti.biz/wiki/index.php?title=SIGSTP&amp;amp;action=edit&amp;amp;redlink=1" target="_blank" rel="noopener">SIGSTP&lt;/a>&lt;/td>
&lt;td>Stop typed at tty (CTRL+z)&lt;/td>
&lt;td>Stop the process.&lt;/td>
&lt;td>Yes&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>要将终止信号发送给 PID＃1234，请使用：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">kill&lt;/span> -9 &lt;span class="m">1234&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">kill&lt;/span> -KILL &lt;span class="m">1234&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">kill&lt;/span> -SIGKILL &lt;span class="m">1234&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="killall---kill-processes-by-name">killall - kill processes by name&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">killall processName
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall firefox-bin&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To send a KILL signal to firefox&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall -s SIGKILL firefox-bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="pkill---kill-process">pkill - kill process&lt;/h2>
&lt;p>pkill 命令是另一个具有附加选项的命令，可以通过其名称，用户名，组名，终端，UID，EUID 和 GID 终止进程。它将向每个进程发送指定的信号（默认为 SIGTERM），而不是在 stdout 上列出它们。要将终止信号发送到 php-cgi 进程，请输入：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-s" data-lang="s">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pkill&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">KILL&lt;/span> &lt;span class="n">php&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cgi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上面的示例将杀死所有用户的 php-cgi 进程。但是，-u 选项将仅杀死其有效用户标识设置为 vivek 的进程：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-s" data-lang="s">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pkill&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">KILL&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">vivek&lt;/span> &lt;span class="n">php&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cgi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>使 sshd 重新读取其配置文件，输入：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-s" data-lang="s">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pkill&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">HUP&lt;/span> &lt;span class="n">sshd&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="案例受控的-apache-服务端">案例：受控的 Apache 服务端&lt;/h2>
&lt;p>创建一个名为 phpjail.sh 的 shell 脚本。此脚本用于在 Jail 中启动 php 服务。这样做是为了提高 Apache 或 Lighttpd Web 服务器的安全性。该脚本演示了 pgrep 命令，pkill 命令以及到目前为止所学的其他技能的用法。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A shell script to start / stop php-cgi process.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Author: Vivek Gite &amp;lt;vivek@gite.in&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Last updated on June-23-2007.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ----------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fFCGI&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/spawn-fcgi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fIP&lt;/span>&lt;span class="o">=&lt;/span>127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fPORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">9000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fUSER&lt;/span>&lt;span class="o">=&lt;/span>phpjail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fGROUP&lt;/span>&lt;span class="o">=&lt;/span>phpjail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fCHILD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fJAILDIR&lt;/span>&lt;span class="o">=&lt;/span>/phpjail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fPID&lt;/span>&lt;span class="o">=&lt;/span>/var/run/fcgi.php.pid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fPHPCGI&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/php-cgi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># path to binary files.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PKILL&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/pkill
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">RM&lt;/span>&lt;span class="o">=&lt;/span>/bin/rm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PGREP&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/pgrep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GREP&lt;/span>&lt;span class="o">=&lt;/span>/bin/grep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ID&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Must be run as root else die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ID&lt;/span>&lt;span class="si">}&lt;/span> -u&lt;span class="k">)&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: Only root may run this script.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 1&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Jail user must exits else die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="si">${&lt;/span>&lt;span class="nv">GREP&lt;/span>&lt;span class="si">}&lt;/span> -q &lt;span class="nv">$fUSER&lt;/span> /etc/passwd &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: User &lt;/span>&lt;span class="nv">$fUSER&lt;/span>&lt;span class="s2"> not found in /etc/passwd.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 2&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Jail group must exits else die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="si">${&lt;/span>&lt;span class="nv">GREP&lt;/span>&lt;span class="si">}&lt;/span> -q &lt;span class="nv">$fGROUP&lt;/span> /etc/passwd &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: Group &lt;/span>&lt;span class="nv">$fGROUP&lt;/span>&lt;span class="s2"> not found in /etc/group.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 3&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Jail directory must exits else die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> ! -d &lt;span class="si">${&lt;/span>&lt;span class="nv">fJAILDIR&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: php-cgi jail directory \&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">fJAILDIR&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">\&amp;#34; not found.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 4&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Use case to make decision&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> start&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># start php-cgi in jail at given IP and server port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$fFCGI&lt;/span> -a &lt;span class="nv">$fIP&lt;/span> -p &lt;span class="nv">$fPORT&lt;/span> -u &lt;span class="nv">$fUSER&lt;/span> -g &lt;span class="nv">$fGROUP&lt;/span> -C &lt;span class="nv">$fCHILD&lt;/span> -c &lt;span class="nv">$fJAILDIR&lt;/span> -P &lt;span class="nv">$fPID&lt;/span> -- &lt;span class="nv">$fPHPCGI&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$?&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Starting php-cgi .. [ OK ]&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Starting php-cgi .. [ FAILED ]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stop&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># make sure php-cgi is running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> line &amp;lt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$fPID&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -d /proc/&lt;span class="nv">$line&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># kill php-cgi owned by user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="si">${&lt;/span>&lt;span class="nv">PKILL&lt;/span>&lt;span class="si">}&lt;/span> -KILL -u &lt;span class="nv">$fUSER&lt;/span> php-cgi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$?&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Stopping php-cgi .. [ OK ]&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Stopping php-cgi .. [ FAILED ]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="si">${&lt;/span>&lt;span class="nv">RM&lt;/span>&lt;span class="si">}&lt;/span> -f &lt;span class="nv">$fPID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: php-cgi is not running.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># find out if php-cgi is running or not&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="si">${&lt;/span>&lt;span class="nv">PGREP&lt;/span>&lt;span class="si">}&lt;/span> -u &lt;span class="si">${&lt;/span>&lt;span class="nv">fUSER&lt;/span>&lt;span class="si">}&lt;/span> php-cgi &amp;gt;/dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$?&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: php-cgi is running at &lt;/span>&lt;span class="nv">$fIP&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="nv">$fPORT&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: php-cgi is not running at &lt;/span>&lt;span class="nv">$fIP&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="nv">$fPORT&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># display usage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Usage: &lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2"> {start|stop|status}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="trap">Trap&lt;/h1>
&lt;p>在运行脚本时，用户可以按 Break 或 CTRL + C 终止该过程。用户也可以通过按 CTRL + Z 停止该过程。可能会发生错误，从而导致 Shell 脚本中的错误，例如算术溢出。这可能会导致错误或不可预测的输出。每当用户中断时，信号就会发送到命令或脚本。信号迫使脚本退出。但是，trap 命令捕获一个中断。trap 命令提供脚本来捕获中断（信号），然后在脚本中清除该中断。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> arg signal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="nb">command&lt;/span> signal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;action&amp;#39;&lt;/span> signal1 signal2 signalN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;action&amp;#39;&lt;/span> SIGINT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;action&amp;#39;&lt;/span> SIGTERM SIGINT SIGFPE SIGSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;action&amp;#39;&lt;/span> &lt;span class="m">15&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">8&lt;/span> &lt;span class="m">20&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>创建一个名为 testtrap.sh 的 shell 脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># capture an interrupt # 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo &amp;#34;Exit 0 signal detected...&amp;#34;&amp;#39;&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># display something&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;This is a test&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># exit shell script with 0 signal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>当脚本试图以状态 0 退出时，第一行设置一个陷阱。然后脚本以 0 退出 shell，这将导致运行 echo 命令。在 shell 提示符下尝试以下示例（确保/tmp/rap54ibs2sap.txt 不退出）。定义一个名为 $file 的 shell 变量：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">file&lt;/span>&lt;span class="o">=&lt;/span>/tmp/rap54ibs2sap.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>现在，尝试删除 $file，输入：&lt;/p>
&lt;pre tabindex="0">&lt;code>rm $file
&lt;/code>&lt;/pre>&lt;p>样本输出：&lt;/p>
&lt;pre tabindex="0">&lt;code>rm: cannot remove `/tmp/rap54ibs2sap.txt&amp;#39;: No such file or directory
&lt;/code>&lt;/pre>&lt;p>现在为 rm 命令设置一个 Trap：&lt;/p>
&lt;pre tabindex="0">&lt;code>trap &amp;#34;rm $file; exit&amp;#34; 0 1 2 3 15
&lt;/code>&lt;/pre>&lt;p>显示已定义 Trap 的列表，输入：&lt;/p>
&lt;pre tabindex="0">&lt;code>trap
&lt;/code>&lt;/pre>&lt;p>样本输出：&lt;/p>
&lt;pre tabindex="0">&lt;code>trap -- &amp;#39;rm /tmp/rap54ibs2sap.txt; exit&amp;#39; EXIT
trap -- &amp;#39;rm /tmp/rap54ibs2sap.txt; exit&amp;#39; SIGHUP
trap -- &amp;#39;rm /tmp/rap54ibs2sap.txt; exit&amp;#39; SIGINT
trap -- &amp;#39;rm /tmp/rap54ibs2sap.txt; exit&amp;#39; SIGQUIT
trap -- &amp;#39;rm /tmp/rap54ibs2sap.txt; exit&amp;#39; SIGTERM
&lt;/code>&lt;/pre>&lt;p>现在，再次尝试删除 $file，输入：&lt;/p>
&lt;pre tabindex="0">&lt;code>rm $file
&lt;/code>&lt;/pre>&lt;p>这次 rm 命令未显示错误。$file 尚不存在。trap 命令只要收到 0、1、2、3 或 15 信号就退出。尝试捕获 CTRL + C：&lt;/p>
&lt;pre tabindex="0">&lt;code>#!/bin/bash
# capture an interrupt # 2 (SIGINT)
trap &amp;#39;&amp;#39; 2
# read CTRL+C from keyboard with 30 second timeout
read -t 30 -p &amp;#34;I&amp;#39;m sleeping hit CTRL+C to exit...&amp;#34;
&lt;/code>&lt;/pre>&lt;p>样本输出：&lt;/p>
&lt;pre tabindex="0">&lt;code>I&amp;#39;m sleeping hit CTRL+C to exit...^C^C^C^C
&lt;/code>&lt;/pre>&lt;h2 id="清理-trap">清理 Trap&lt;/h2>
&lt;p>要清除 Trap，请使用以下语法：&lt;/p>
&lt;pre tabindex="0">&lt;code>trap - signal
trap - signal1 signal2
&lt;/code>&lt;/pre>&lt;p>例如，为 rm 命令设置一个 Trap：&lt;/p>
&lt;pre tabindex="0">&lt;code>file=/tmp/test4563.txt
trap &amp;#39;rm $file&amp;#39; 1 2 3 15
trap
&lt;/code>&lt;/pre>&lt;p>要清除 SIGINT（2），请输入：&lt;/p>
&lt;pre tabindex="0">&lt;code>trap - SIGINT
trap
&lt;/code>&lt;/pre>&lt;p>要清除所有 Trap，请输入：&lt;/p>
&lt;pre tabindex="0">&lt;code>trap - 1 2 3 15
trap
&lt;/code>&lt;/pre>&lt;p>创建一个名为 stroreven.sh 的 shell 脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># Shell script to find out odd or even number provided by the user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ----&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set variables to an integer attribute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">declare&lt;/span> -i &lt;span class="nv">times&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">declare&lt;/span> -i &lt;span class="nv">n&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># capture CTRL+C, CTRL+Z and quit singles using the trap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo &amp;#34; disabled&amp;#34;&amp;#39;&lt;/span> SIGINT SIGQUIT SIGTSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set an infinite while loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># user need to enter -9999 to exit the loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># get date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Enter number (-9999 to exit) : &amp;#34;&lt;/span> n
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if it is -9999 die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$n&lt;/span> -eq -9999 &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Bye!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> break&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># find out if $n is odd or even&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ans&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span> n &lt;span class="o">%&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># display result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$ans&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$n&lt;/span>&lt;span class="s2"> is an even number.&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$n&lt;/span>&lt;span class="s2"> is an odd number.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># increase counter by 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">times&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="nb">times&lt;/span> &lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reset all traps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> - SIGINT SIGQUIT SIGTSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># display counter&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;You played &lt;/span>&lt;span class="nv">$times&lt;/span>&lt;span class="s2"> times.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Save and close the file. Run it as follows:&lt;/p>
&lt;pre tabindex="0">&lt;code>chmod +x oddoreven.sh
./oddoreven.sh
&lt;/code>&lt;/pre>&lt;p>Sample outputs:&lt;/p>
&lt;pre tabindex="0">&lt;code>Enter number (-9999 to exit) : 2
2 is an even number.
Enter number (-9999 to exit) : 999
999 is an odd number.
Enter number (-9999 to exit) : ^C disabled
0 is an even number.
Enter number (-9999 to exit) : -9999
Bye!
You played 3 times.
&lt;/code>&lt;/pre>&lt;h2 id="函数">函数&lt;/h2>
&lt;p>您可以将 trap 命令与 shell 函数一起使用，如下所示：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define die()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">die&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set trap and call die()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;die&amp;#39;&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">....
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以下是如何清除 Trap 部分的更新后的 Shell 脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># Shell script to find out odd or even number provided by the user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set variables to an integer attribute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">declare&lt;/span> -i &lt;span class="nv">times&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">declare&lt;/span> -i &lt;span class="nv">n&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define function&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">warning&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\n*** CTRL+C and CTRL+Z keys are disabled. Please enter number only. Hit [Enter] key to continue...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># capture CTRL+C, CTRL+Z and quit singles using the trap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;warning&amp;#39;&lt;/span> SIGINT SIGQUIT SIGTSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set an infinite while loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># user need to enter -9999 to exit the loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># get date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Enter number (-9999 to exit) : &amp;#34;&lt;/span> n
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if it is -9999 die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$n&lt;/span> -eq -9999 &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Bye!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> break&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># $n is 0, just get next number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$n&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># find out if $n is odd or evern&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ans&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span> n &lt;span class="o">%&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># display result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> &lt;span class="nv">$ans&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$n&lt;/span>&lt;span class="s2"> is an even number.&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$n&lt;/span>&lt;span class="s2"> is an odd number.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># increase counter by 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">times&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="nb">times&lt;/span> &lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reset all traps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> - SIGINT SIGQUIT SIGTSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># display counter&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;You played &lt;/span>&lt;span class="nv">$times&lt;/span>&lt;span class="s2"> times.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以下示例通过更新 /etc/passwd 文件并在 /home 上为用户创建主目录，将用户添加到 Linux 系统。它会捕获各种单一消息，以避免在创建用户帐户时出错。如果用户按下 CTRL + C 或脚本终止，它将尝试回滚对系统文件所做的更改。陷阱在外壳程序脚本中的 useradd 命令之前打开，然后在 chpasswd 行之后关闭陷阱。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># setupaccounts.sh: A Shell script to add user to the Linux system.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set path to binary files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ADD&lt;/span>&lt;span class="o">=&lt;/span>/usr/sbin/useradd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">SETPASSWORD&lt;/span>&lt;span class="o">=&lt;/span>/usr/sbin/chpasswd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">USERDEL&lt;/span>&lt;span class="o">=&lt;/span>/usr/sbin/userdel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOMEBASE&lt;/span>&lt;span class="o">=&lt;/span>/home
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOMEDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">username&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># define function to clean up useradd procedure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># handle errors using this function&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clean_up_useradd&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># remove dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span> -d &lt;span class="nv">$HOMEDIR&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> /bin/rm -rf &lt;span class="nv">$HOMEDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># remove user from passwd if exits&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> grep -q &lt;span class="s2">&amp;#34;^&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> /etc/passwd &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$USERDEL&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># now exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># make sure script is run by root else die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span> -eq &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: Only root may add a user or group to the system.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 1&lt;span class="p">;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># get username and password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Enter user name : &amp;#34;&lt;/span> username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># create homedir path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOMEDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">HOMEBASE&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># capture 0 2 3 15 signals&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># if script failed while adding user make sure we clean up mess from&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /home directory and /etc/passwd file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># catch signals using clean_up_useradd()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;clean_up_useradd&amp;#39;&lt;/span> SIGINT SIGQUIT SIGTERM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># get password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -sp &lt;span class="s2">&amp;#34;Enter user password : &amp;#34;&lt;/span> password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># make sure user doesn&amp;#39;t exits else die&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grep -q &lt;span class="s2">&amp;#34;^&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> /etc/passwd &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: The user &amp;#39;&lt;/span>&lt;span class="nv">$username&lt;/span>&lt;span class="s2">&amp;#39; already exits.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 2&lt;span class="p">;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># create a home dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Creating home directory for &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> at &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">HOMEDIR&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> ! -d &lt;span class="si">${&lt;/span>&lt;span class="nv">HOMEDIR&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> mkdir -p &lt;span class="si">${&lt;/span>&lt;span class="nv">HOMEDIR&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Add user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Adding user &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="si">${&lt;/span>&lt;span class="nv">ADD&lt;/span>&lt;span class="si">}&lt;/span> -s /bin/bash -d &lt;span class="si">${&lt;/span>&lt;span class="nv">HOMEDIR&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: User addition failed.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 3&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set a password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Setting up the password for &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#printf &amp;#34;%s|%s\n&amp;#34; $username $password | ${SETPASSWORD} || { echo &amp;#34;$0: Failed to set password for the user.&amp;#34;; exit 3; }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$username&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="nv">$password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">SETPASSWORD&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2">: Failed to set password for the user.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 3&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reset all traps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> - &lt;span class="m">0&lt;/span> SIGINT SIGQUIT SIGTERM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># add rest of the script...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="案例菜单">案例：菜单&lt;/h2>
&lt;p>您可以按以下方式在 shell 脚本中使用 trap 命令。创建一个名为 mainmenu01.sh 的 shell 脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># capture CTRL+C, CTRL+Z and quit singles using the trap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo &amp;#34;Control-C disabled.&amp;#34;&amp;#39;&lt;/span> SIGINT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo &amp;#34;Cannot terminate this script.&amp;#34;&amp;#39;&lt;/span> SIGQUIT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo &amp;#34;Control-Z disabled.&amp;#34;&amp;#39;&lt;/span> SIGTSTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create infinite while loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clear
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># display menu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Server Name - &lt;/span>&lt;span class="k">$(&lt;/span>hostname&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; M A I N - M E N U&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;1. Display date and time.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;2. Display what users are doing.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;3. Display network connections.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;4. Exit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># get input from the user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Enter your choice [ 1 -4 ] &amp;#34;&lt;/span> choice
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># make decision using case..in..esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nv">$choice&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Today is &lt;/span>&lt;span class="k">$(&lt;/span>date&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Press [Enter] key to continue...&amp;#34;&lt;/span> readEnterKey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> w
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Press [Enter] key to continue...&amp;#34;&lt;/span> readEnterKey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netstat -nat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Press [Enter] key to continue...&amp;#34;&lt;/span> readEnterKey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Bye!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Error: Invalid option...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Press [Enter] key to continue...&amp;#34;&lt;/span> readEnterKey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>