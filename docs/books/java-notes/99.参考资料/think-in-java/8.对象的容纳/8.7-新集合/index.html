<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="8.7 新集合 对我来说，集合类属于最强大的一种工具，特别适合在原创编程中使用。大家可能已感觉到我对 Java 1.1 提供的集合多少有点儿失望。因此，看到 Java 1.2 对集合重新引起了正确的注意后，确实令人非常愉快。这个版本的集合也"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.7-%E6%96%B0%E9%9B%86%E5%90%88/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.7-%E6%96%B0%E9%9B%86%E5%90%88/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.7-%E6%96%B0%E9%9B%86%E5%90%88/"><meta property="og:title" content="8.7 新集合 | Next-gen Tech Edu"><meta property="og:description" content="8.7 新集合 对我来说，集合类属于最强大的一种工具，特别适合在原创编程中使用。大家可能已感觉到我对 Java 1.1 提供的集合多少有点儿失望。因此，看到 Java 1.2 对集合重新引起了正确的注意后，确实令人非常愉快。这个版本的集合也"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>8.7 新集合 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=1bb46d5cc43171f3d000322aea3f810f><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">8.对象的容纳</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id775c4a5ac3467743f5bb8deee7e9fdbf")' href=#id775c4a5ac3467743f5bb8deee7e9fdbf aria-expanded=false aria-controls=id775c4a5ac3467743f5bb8deee7e9fdbf aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/>Think in Java</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id775c4a5ac3467743f5bb8deee7e9fdbf aria-expanded=false aria-controls=id775c4a5ac3467743f5bb8deee7e9fdbf><i class="fa-solid fa-angle-down" id=caret-id775c4a5ac3467743f5bb8deee7e9fdbf></i></a></div><ul class="nav docs-sidenav collapse show" id=id775c4a5ac3467743f5bb8deee7e9fdbf><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2b44115f2aa79bbc0f20c93f548e1b6a")' href=#id2b44115f2aa79bbc0f20c93f548e1b6a aria-expanded=false aria-controls=id2b44115f2aa79bbc0f20c93f548e1b6a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/>1.对象入门</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2b44115f2aa79bbc0f20c93f548e1b6a aria-expanded=false aria-controls=id2b44115f2aa79bbc0f20c93f548e1b6a><i class="fa-solid fa-angle-right" id=caret-id2b44115f2aa79bbc0f20c93f548e1b6a></i></a></div><ul class="nav docs-sidenav collapse" id=id2b44115f2aa79bbc0f20c93f548e1b6a><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.1-%E6%8A%BD%E8%B1%A1%E7%9A%84%E8%BF%9B%E6%AD%A5/>1.1 抽象的进步</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.10-%E6%B0%B8%E4%B9%85%E6%80%A7/>1.10 永久性</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.11-java%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91/>1.11 Java和因特网</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.12-%E5%88%86%E6%9E%90%E5%92%8C%E8%AE%BE%E8%AE%A1/>1.12 分析和设计</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.13-java%E8%BF%98%E6%98%AFc++/>1.13 Java还是C++</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.2-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8E%A5%E5%8F%A3/>1.2 对象的接口</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.3-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88%E7%9A%84%E9%9A%90%E8%97%8F/>1.3 实现方案的隐藏</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.4-%E6%96%B9%E6%A1%88%E7%9A%84%E9%87%8D%E5%A4%8D%E4%BD%BF%E7%94%A8/>1.4 方案的重复使用</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.5-%E7%BB%A7%E6%89%BF%E9%87%8D%E6%96%B0%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/>1.5 继承：重新使用接口</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.6-%E5%A4%9A%E6%80%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BA%92%E6%8D%A2%E4%BD%BF%E7%94%A8/>1.6 多态对象的互换使用</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%AD%98%E5%9C%A8%E6%97%B6%E9%97%B4/>1.7 对象的创建和存在时间</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/1.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.9-%E5%A4%9A%E7%BA%BF%E7%A8%8B/>1.9 多线程</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idcac6e18458602ce17bd9b0b2c3e18daa")' href=#idcac6e18458602ce17bd9b0b2c3e18daa aria-expanded=false aria-controls=idcac6e18458602ce17bd9b0b2c3e18daa aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/>10.Java IO 系统</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idcac6e18458602ce17bd9b0b2c3e18daa aria-expanded=false aria-controls=idcac6e18458602ce17bd9b0b2c3e18daa><i class="fa-solid fa-angle-right" id=caret-idcac6e18458602ce17bd9b0b2c3e18daa></i></a></div><ul class="nav docs-sidenav collapse" id=idcac6e18458602ce17bd9b0b2c3e18daa><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.1-%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA/>10.1 输入和输出</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.10-%E6%80%BB%E7%BB%93/>10.10 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.11-%E7%BB%83%E4%B9%A0/>10.11 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.2-%E5%A2%9E%E6%B7%BB%E5%B1%9E%E6%80%A7%E5%92%8C%E6%9C%89%E7%94%A8%E7%9A%84%E6%8E%A5%E5%8F%A3/>10.2 增添属性和有用的接口</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.3-%E6%9C%AC%E8%BA%AB%E7%9A%84%E7%BC%BA%E9%99%B7randomaccessfile/>10.3 本身的缺陷：RandomAccessFile</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.4-file%E7%B1%BB/>10.4 File类</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.5-io%E6%B5%81%E7%9A%84%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8/>10.5 IO流的典型应用</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.6-streamtokenizer/>10.6 StreamTokenizer</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.7-java-1.1%E7%9A%84io%E6%B5%81/>10.7 Java 1.1的IO流</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.8-%E5%8E%8B%E7%BC%A9/>10.8 压缩</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.9-%E5%AF%B9%E8%B1%A1%E5%BA%8F%E5%88%97%E5%8C%96/>10.9 对象序列化</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idfe15c0b7d69e1eea4a39a92683a168d4")' href=#idfe15c0b7d69e1eea4a39a92683a168d4 aria-expanded=false aria-controls=idfe15c0b7d69e1eea4a39a92683a168d4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/>11.运行期类型鉴定</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idfe15c0b7d69e1eea4a39a92683a168d4 aria-expanded=false aria-controls=idfe15c0b7d69e1eea4a39a92683a168d4><i class="fa-solid fa-angle-right" id=caret-idfe15c0b7d69e1eea4a39a92683a168d4></i></a></div><ul class="nav docs-sidenav collapse" id=idfe15c0b7d69e1eea4a39a92683a168d4><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.1-%E5%AF%B9rtti%E7%9A%84%E9%9C%80%E8%A6%81/>11.1 对RTTI的需要</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.2-rtti-%E8%AF%AD%E6%B3%95/>11.2 RTTI 语法</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.3-%E5%8F%8D%E5%B0%84%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E4%BF%A1%E6%81%AF/>11.3 反射：运行期类信息</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.4-%E6%80%BB%E7%BB%93/>11.4 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.5-%E7%BB%83%E4%B9%A0/>11.5 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-iddf7cc690622f50701352bac88f5de264")' href=#iddf7cc690622f50701352bac88f5de264 aria-expanded=false aria-controls=iddf7cc690622f50701352bac88f5de264 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/>12.传递和返回对象</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#iddf7cc690622f50701352bac88f5de264 aria-expanded=false aria-controls=iddf7cc690622f50701352bac88f5de264><i class="fa-solid fa-angle-right" id=caret-iddf7cc690622f50701352bac88f5de264></i></a></div><ul class="nav docs-sidenav collapse" id=iddf7cc690622f50701352bac88f5de264><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.1-%E4%BC%A0%E9%80%92%E6%8C%87%E9%92%88/>12.1 传递指针</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.2-%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0%E5%89%AF%E6%9C%AC/>12.2 制作本地副本</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.3-%E5%85%8B%E9%9A%86%E7%9A%84%E6%8E%A7%E5%88%B6/>12.3 克隆的控制</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.4-%E5%8F%AA%E8%AF%BB%E7%B1%BB/>12.4 只读类</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.5-%E6%80%BB%E7%BB%93/>12.5 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.6-%E7%BB%83%E4%B9%A0/>12.6 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb1a9edc38a9b424eca8c6736e315c5f2")' href=#idb1a9edc38a9b424eca8c6736e315c5f2 aria-expanded=false aria-controls=idb1a9edc38a9b424eca8c6736e315c5f2 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id80c764609525f094184dd5b161c7244d")' href=#id80c764609525f094184dd5b161c7244d aria-expanded=false aria-controls=id80c764609525f094184dd5b161c7244d aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/>14.多线程</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id80c764609525f094184dd5b161c7244d aria-expanded=false aria-controls=id80c764609525f094184dd5b161c7244d><i class="fa-solid fa-angle-right" id=caret-id80c764609525f094184dd5b161c7244d></i></a></div><ul class="nav docs-sidenav collapse" id=id80c764609525f094184dd5b161c7244d><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.1-%E5%8F%8D%E5%BA%94%E7%81%B5%E6%95%8F%E7%9A%84%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/>14.1 反应灵敏的用户界面</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.2-%E5%85%B1%E4%BA%AB%E6%9C%89%E9%99%90%E7%9A%84%E8%B5%84%E6%BA%90/>14.2 共享有限的资源</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.3-%E5%A0%B5%E5%A1%9E/>14.3 堵塞</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.4-%E4%BC%98%E5%85%88%E7%BA%A7/>14.4 优先级</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.5-%E5%9B%9E%E9%A1%BErunnable/>14.5 回顾runnable</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.6-%E6%80%BB%E7%BB%93/>14.6 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.7-%E7%BB%83%E4%B9%A0/>14.7 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id72c1a5699f783ea8a67f0eb1d1d396e1")' href=#id72c1a5699f783ea8a67f0eb1d1d396e1 aria-expanded=false aria-controls=id72c1a5699f783ea8a67f0eb1d1d396e1 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/>15.网络编程</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id72c1a5699f783ea8a67f0eb1d1d396e1 aria-expanded=false aria-controls=id72c1a5699f783ea8a67f0eb1d1d396e1><i class="fa-solid fa-angle-right" id=caret-id72c1a5699f783ea8a67f0eb1d1d396e1></i></a></div><ul class="nav docs-sidenav collapse" id=id72c1a5699f783ea8a67f0eb1d1d396e1><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.1-%E6%9C%BA%E5%99%A8%E7%9A%84%E6%A0%87%E8%AF%86/>15.1 机器的标识</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.10-%E7%BB%83%E4%B9%A0/>15.10 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.2-%E5%A5%97%E6%8E%A5%E5%AD%97/>15.2 套接字</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.3-%E6%9C%8D%E5%8A%A1%E5%A4%9A%E4%B8%AA%E5%AE%A2%E6%88%B7/>15.3 服务多个客户</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.4-%E6%95%B0%E6%8D%AE%E6%8A%A5/>15.4 数据报</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.5-%E4%B8%80%E4%B8%AAweb%E5%BA%94%E7%94%A8/>15.5 一个Web应用</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.6-java%E4%B8%8Ecgi%E7%9A%84%E6%B2%9F%E9%80%9A/>15.6 Java与CGI的沟通</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.7-%E7%94%A8jdbc%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/>15.7 用JDBC连接数据库</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.8-%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95/>15.8 远程方法</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.9-%E6%80%BB%E7%BB%93/>15.9 总结</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idbee59bdc5aaf46677af95b12ea99ff64")' href=#idbee59bdc5aaf46677af95b12ea99ff64 aria-expanded=false aria-controls=idbee59bdc5aaf46677af95b12ea99ff64 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/>16.设计范式</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idbee59bdc5aaf46677af95b12ea99ff64 aria-expanded=false aria-controls=idbee59bdc5aaf46677af95b12ea99ff64><i class="fa-solid fa-angle-right" id=caret-idbee59bdc5aaf46677af95b12ea99ff64></i></a></div><ul class="nav docs-sidenav collapse" id=idbee59bdc5aaf46677af95b12ea99ff64><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.1-%E8%8C%83%E5%BC%8F%E7%9A%84%E6%A6%82%E5%BF%B5/>16.1 范式的概念</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.10-%E7%BB%83%E4%B9%A0/>16.10 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.2-%E8%A7%82%E5%AF%9F%E5%99%A8%E8%8C%83%E5%BC%8F/>16.2 观察器范式</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.3-%E6%A8%A1%E6%8B%9F%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AB%99/>16.3 模拟垃圾回收站</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.4-%E6%94%B9%E8%BF%9B%E8%AE%BE%E8%AE%A1/>16.4 改进设计</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.5-%E6%8A%BD%E8%B1%A1%E7%9A%84%E5%BA%94%E7%94%A8/>16.5 抽象的应用</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.6-%E5%A4%9A%E9%87%8D%E6%B4%BE%E9%81%A3/>16.6 多重派遣</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.7-%E8%AE%BF%E9%97%AE%E5%99%A8%E8%8C%83%E5%BC%8F/>16.7 访问器范式</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.8-rtti%E7%9C%9F%E7%9A%84%E6%9C%89%E5%AE%B3%E5%90%97/>16.8 RTTI真的有害吗</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.9-%E6%80%BB%E7%BB%93/>16.9 总结</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida6b4113de6e02470653070d2ebd17b83")' href=#ida6b4113de6e02470653070d2ebd17b83 aria-expanded=false aria-controls=ida6b4113de6e02470653070d2ebd17b83 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/>17.项目</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida6b4113de6e02470653070d2ebd17b83 aria-expanded=false aria-controls=ida6b4113de6e02470653070d2ebd17b83><i class="fa-solid fa-angle-right" id=caret-ida6b4113de6e02470653070d2ebd17b83></i></a></div><ul class="nav docs-sidenav collapse" id=ida6b4113de6e02470653070d2ebd17b83><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.1-%E6%96%87%E5%AD%97%E5%A4%84%E7%90%86/>17.1 文字处理</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.2-%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%B7%A5%E5%85%B7/>17.2 方法查找工具</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.3-%E5%A4%8D%E6%9D%82%E6%80%A7%E7%90%86%E8%AE%BA/>17.3 复杂性理论</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.4-%E6%80%BB%E7%BB%93/>17.4 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.5-%E7%BB%83%E4%B9%A0/>17.5 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id7eddf7632d476449e059010f2022c9e0")' href=#id7eddf7632d476449e059010f2022c9e0 aria-expanded=false aria-controls=id7eddf7632d476449e059010f2022c9e0 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/>2.一切都是对象</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id7eddf7632d476449e059010f2022c9e0 aria-expanded=false aria-controls=id7eddf7632d476449e059010f2022c9e0><i class="fa-solid fa-angle-right" id=caret-id7eddf7632d476449e059010f2022c9e0></i></a></div><ul class="nav docs-sidenav collapse" id=id7eddf7632d476449e059010f2022c9e0><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.1-%E7%94%A8%E6%8C%87%E9%92%88%E6%93%8D%E7%BA%B5%E5%AF%B9%E8%B1%A1/>2.1 用指针操纵对象</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.10-%E6%80%BB%E7%BB%93/>2.10 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.11-%E7%BB%83%E4%B9%A0/>2.11 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.2-%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E5%BF%85%E9%A1%BB%E5%88%9B%E5%BB%BA/>2.2 所有对象都必须创建</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.3-%E7%BB%9D%E5%AF%B9%E4%B8%8D%E8%A6%81%E6%B8%85%E9%99%A4%E5%AF%B9%E8%B1%A1/>2.3 绝对不要清除对象</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.4-%E6%96%B0%E5%BB%BA%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%B1%BB/>2.4 新建数据类型：类</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.5-%E6%96%B9%E6%B3%95%E8%87%AA%E5%8F%98%E9%87%8F%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC/>2.5 方法、自变量和返回值</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.6-%E6%9E%84%E5%BB%BAjava%E7%A8%8B%E5%BA%8F/>2.6 构建Java程序</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.7-%E6%88%91%E4%BB%AC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAjava%E7%A8%8B%E5%BA%8F/>2.7 我们的第一个Java程序</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.8-%E6%B3%A8%E9%87%8A%E5%92%8C%E5%B5%8C%E5%85%A5%E6%96%87%E6%A1%A3/>2.8 注释和嵌入文档</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/2.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.9-%E7%BC%96%E7%A0%81%E6%A0%B7%E5%BC%8F/>2.9 编码样式</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idcdaeeaa8c89d4672f982b270803f52c5")' href=#idcdaeeaa8c89d4672f982b270803f52c5 aria-expanded=false aria-controls=idcdaeeaa8c89d4672f982b270803f52c5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/3.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/>3.控制程序流程</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idcdaeeaa8c89d4672f982b270803f52c5 aria-expanded=false aria-controls=idcdaeeaa8c89d4672f982b270803f52c5><i class="fa-solid fa-angle-right" id=caret-idcdaeeaa8c89d4672f982b270803f52c5></i></a></div><ul class="nav docs-sidenav collapse" id=idcdaeeaa8c89d4672f982b270803f52c5><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/3.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.1-%E4%BD%BF%E7%94%A8java%E8%BF%90%E7%AE%97%E7%AC%A6/>3.1 使用Java运算符</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/3.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.2-%E6%89%A7%E8%A1%8C%E6%8E%A7%E5%88%B6/>3.2 执行控制</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/3.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.3-%E6%80%BB%E7%BB%93/>3.3 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/3.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.4-%E7%BB%83%E4%B9%A0/>3.4 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id88269c6bb72139bcdc3f10b0e1c5b240")' href=#id88269c6bb72139bcdc3f10b0e1c5b240 aria-expanded=false aria-controls=id88269c6bb72139bcdc3f10b0e1c5b240 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/>4.初始化和清除</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id88269c6bb72139bcdc3f10b0e1c5b240 aria-expanded=false aria-controls=id88269c6bb72139bcdc3f10b0e1c5b240><i class="fa-solid fa-angle-right" id=caret-id88269c6bb72139bcdc3f10b0e1c5b240></i></a></div><ul class="nav docs-sidenav collapse" id=id88269c6bb72139bcdc3f10b0e1c5b240><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.1-%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E8%87%AA%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96/>4.1 用构造器自动初始化</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.2-%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD/>4.2 方法重载</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.3-%E6%B8%85%E9%99%A4%E6%94%B6%E5%B0%BE%E5%92%8C%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86/>4.3 清除：收尾和垃圾收集</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.4-%E6%88%90%E5%91%98%E5%88%9D%E5%A7%8B%E5%8C%96/>4.4 成员初始化</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.5-%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96/>4.5 数组初始化</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.6-%E6%80%BB%E7%BB%93/>4.6 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/4.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.7-%E7%BB%83%E4%B9%A0/>4.7 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id5374d7d4da5f7fa0f2bd293ebab854c7")' href=#id5374d7d4da5f7fa0f2bd293ebab854c7 aria-expanded=false aria-controls=id5374d7d4da5f7fa0f2bd293ebab854c7 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/>5.隐藏实施过程</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id5374d7d4da5f7fa0f2bd293ebab854c7 aria-expanded=false aria-controls=id5374d7d4da5f7fa0f2bd293ebab854c7><i class="fa-solid fa-angle-right" id=caret-id5374d7d4da5f7fa0f2bd293ebab854c7></i></a></div><ul class="nav docs-sidenav collapse" id=id5374d7d4da5f7fa0f2bd293ebab854c7><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.1-%E5%8C%85%E5%BA%93%E5%8D%95%E5%85%83/>5.1 包：库单元</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.2-java%E8%AE%BF%E9%97%AE%E6%8C%87%E7%A4%BA%E7%AC%A6/>5.2 Java访问指示符</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.3-%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%AE%9E%E7%8E%B0/>5.3 接口与实现</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.4-%E7%B1%BB%E8%AE%BF%E9%97%AE/>5.4 类访问</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.5-%E6%80%BB%E7%BB%93/>5.5 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/5.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.6-%E7%BB%83%E4%B9%A0/>5.6 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idcb8ede52c0ccd6a66f6b59e5d738fd67")' href=#idcb8ede52c0ccd6a66f6b59e5d738fd67 aria-expanded=false aria-controls=idcb8ede52c0ccd6a66f6b59e5d738fd67 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/>6.类再生</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idcb8ede52c0ccd6a66f6b59e5d738fd67 aria-expanded=false aria-controls=idcb8ede52c0ccd6a66f6b59e5d738fd67><i class="fa-solid fa-angle-right" id=caret-idcb8ede52c0ccd6a66f6b59e5d738fd67></i></a></div><ul class="nav docs-sidenav collapse" id=idcb8ede52c0ccd6a66f6b59e5d738fd67><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.1-%E5%90%88%E6%88%90%E7%9A%84%E8%AF%AD%E6%B3%95/>6.1 合成的语法</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.10-%E6%80%BB%E7%BB%93/>6.10 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.11-%E7%BB%83%E4%B9%A0/>6.11 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.2-%E7%BB%A7%E6%89%BF%E7%9A%84%E8%AF%AD%E6%B3%95/>6.2 继承的语法</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.3-%E5%90%88%E6%88%90%E4%B8%8E%E7%BB%A7%E6%89%BF%E7%9A%84%E7%BB%93%E5%90%88/>6.3 合成与继承的结合</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.4-%E5%88%B0%E5%BA%95%E9%80%89%E6%8B%A9%E5%90%88%E6%88%90%E8%BF%98%E6%98%AF%E7%BB%A7%E6%89%BF/>6.4 到底选择合成还是继承</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.5-protected/>6.5 protected</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.6-%E7%B4%AF%E7%A7%AF%E5%BC%80%E5%8F%91/>6.6 累积开发</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.7-%E4%B8%8A%E6%BA%AF%E9%80%A0%E5%9E%8B/>6.7 上溯造型</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.8-final%E5%85%B3%E9%94%AE%E5%AD%97/>6.8 final关键字</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/6.%E7%B1%BB%E5%86%8D%E7%94%9F/6.9-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E7%B1%BB%E8%A3%85%E8%BD%BD/>6.9 初始化和类装载</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3192b557c504c5032f3213a000631925")' href=#id3192b557c504c5032f3213a000631925 aria-expanded=false aria-controls=id3192b557c504c5032f3213a000631925 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/>7.多态性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id3192b557c504c5032f3213a000631925 aria-expanded=false aria-controls=id3192b557c504c5032f3213a000631925><i class="fa-solid fa-angle-right" id=caret-id3192b557c504c5032f3213a000631925></i></a></div><ul class="nav docs-sidenav collapse" id=id3192b557c504c5032f3213a000631925><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.1-%E4%B8%8A%E6%BA%AF%E9%80%A0%E5%9E%8B/>7.1 上溯造型</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.10-%E7%BB%83%E4%B9%A0/>7.10 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.2-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/>7.2 深入理解</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.3-%E8%A6%86%E7%9B%96%E4%B8%8E%E9%87%8D%E8%BD%BD/>7.3 覆盖与重载</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.4-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95/>7.4 抽象类和方法</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.5-%E6%8E%A5%E5%8F%A3/>7.5 接口</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.6-%E5%86%85%E9%83%A8%E7%B1%BB/>7.6 内部类</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.7-%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8C%E5%A4%9A%E6%80%81%E6%80%A7/>7.7 构造器和多态性</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.8-%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E8%BF%9B%E8%A1%8C%E8%AE%BE%E8%AE%A1/>7.8 通过继承进行设计</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/7.%E5%A4%9A%E6%80%81%E6%80%A7/7.9-%E6%80%BB%E7%BB%93/>7.9 总结</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf8aaefd2efcbd5783cd72d9b10e4475c")' href=#idf8aaefd2efcbd5783cd72d9b10e4475c aria-expanded=false aria-controls=idf8aaefd2efcbd5783cd72d9b10e4475c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/>8.对象的容纳</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf8aaefd2efcbd5783cd72d9b10e4475c aria-expanded=false aria-controls=idf8aaefd2efcbd5783cd72d9b10e4475c><i class="fa-solid fa-angle-down" id=caret-idf8aaefd2efcbd5783cd72d9b10e4475c></i></a></div><ul class="nav docs-sidenav collapse show" id=idf8aaefd2efcbd5783cd72d9b10e4475c><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.1-%E6%95%B0%E7%BB%84/>8.1 数组</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.2-%E9%9B%86%E5%90%88/>8.2 集合</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.3-%E8%BF%AD%E4%BB%A3%E5%99%A8/>8.3 迭代器</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.4-%E9%9B%86%E5%90%88%E7%9A%84%E7%B1%BB%E5%9E%8B/>8.4 集合的类型</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.5-%E6%8E%92%E5%BA%8F/>8.5 排序</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.6-%E9%80%9A%E7%94%A8%E9%9B%86%E5%90%88%E5%BA%93/>8.6 通用集合库</a></li><li class="child level active"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.7-%E6%96%B0%E9%9B%86%E5%90%88/>8.7 新集合</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.8-%E6%80%BB%E7%BB%93/>8.8 总结</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.9-%E7%BB%83%E4%B9%A0/>8.9 练习</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc52b950da3d5ac1014840c5acb4de098")' href=#idc52b950da3d5ac1014840c5acb4de098 aria-expanded=false aria-controls=idc52b950da3d5ac1014840c5acb4de098 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/9.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/>9.异常差错控制</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc52b950da3d5ac1014840c5acb4de098 aria-expanded=false aria-controls=idc52b950da3d5ac1014840c5acb4de098><i class="fa-solid fa-angle-right" id=caret-idc52b950da3d5ac1014840c5acb4de098></i></a></div><ul class="nav docs-sidenav collapse" id=idc52b950da3d5ac1014840c5acb4de098><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/9.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.10-%E7%BB%83%E4%B9%A0/>9.10 练习</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/9.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.6-%E7%94%A8finally%E6%B8%85%E9%99%A4/>9.6 用finally清除</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/9.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.7-%E6%9E%84%E9%80%A0%E5%99%A8/>9.7 构造器</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/9.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.9-%E6%80%BB%E7%BB%93/>9.9 总结</a></li></ul></div><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95a-%E4%BD%BF%E7%94%A8%E9%9D%9Ejava%E4%BB%A3%E7%A0%81/>附录A 使用非JAVA代码</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95b-%E5%AF%B9%E6%AF%94c++%E5%92%8Cjava/>附录B 对比C++和Java</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95c-java%E7%BC%96%E7%A8%8B%E8%A7%84%E5%88%99/>附录C Java编程规则</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95d-%E6%80%A7%E8%83%BD/>附录D 性能</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95e-%E5%85%B3%E4%BA%8E%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%9D/>附录E 关于垃圾收集的一些话</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95f-%E6%8E%A8%E8%8D%90%E8%AF%BB%E7%89%A9/>附录F 推荐读物</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D/>写在前面的话</a></li><li class="child level"><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E5%BC%95%E8%A8%80/>引言</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>8.7 新集合</h1><div class=article-style><h1 id=87-新集合>8.7 新集合</h1><p>对我来说，集合类属于最强大的一种工具，特别适合在原创编程中使用。大家可能已感觉到我对 Java 1.1 提供的集合多少有点儿失望。因此，看到 Java 1.2 对集合重新引起了正确的注意后，确实令人非常愉快。这个版本的集合也得到了完全的重新设计（由 Sun 公司的 Joshua Bloch）。我认为新设计的集合是 Java 1.2 中两项最主要的特性之一（另一项是 Swing 库，将在第 13 章叙述），因为它们极大方便了我们的编程，也使 Java 变成一种更成熟的编程系统。</p><p>有些设计使得元素间的结合变得更紧密，也更容易让人理解。例如，许多名字都变得更短、更明确了，而且更易使用；类型同样如此。有些名字进行了修改，更接近于通俗：我感觉特别好的一个是用“迭代器”（Inerator）代替了“枚举”（Enumeration）。</p><p>此次重新设计也加强了集合库的功能。现在新增的行为包括链接列表、队列以及撤消组队（即“双终点队列”）。</p><p>集合库的设计是相当困难的（会遇到大量库设计问题）。在 C++中，STL 用多个不同的类来覆盖基础。这种做法比起 STL 以前是个很大的进步，那时根本没做这方面的考虑。但仍然没有很好地转换到 Java 里面。结果就是一大堆特别容易混淆的类。在另一个极端，我曾发现一个集合库由单个类构成：colleciton，它同时作为 Vector 和 Hashtable 使用。新集合库的设计者则希望达到一种新的平衡：实现人们希望从一个成熟集合库上获得的完整功能，同时又要比 STL 和其他类似的集合库更易学习和使用。这样得到的结果在某些场合显得有些古怪。但和早期 Java 库的一些决策不同，这些古怪之处并非偶然出现的，而是以复杂性作为代价，在进行仔细权衡之后得到的结果。这样做也许会延长人们掌握一些库概念的时间，但很快就会发现自己很乐于使用那些新工具，而且变得越来越离不了它。</p><p>新的集合库考虑到了“容纳自己对象”的问题，并将其分割成两个明确的概念：</p><p>(1) 集合（Collection）：一组单独的元素，通常应用了某种规则。在这里，一个 List（列表）必须按特定的顺序容纳元素，而一个 Set（集）不可包含任何重复的元素。相反，“包”（Bag）的概念未在新的集合库中实现，因为“列表”已提供了类似的功能。</p><p>(2) 映射（Map）：一系列“键－值”对（这已在散列表身上得到了充分的体现）。从表面看，这似乎应该成为一个“键－值”对的“集合”，但假若试图按那种方式实现它，就会发现实现过程相当笨拙。这进一步证明了应该分离成单独的概念。另一方面，可以方便地查看 Map 的某个部分。只需创建一个集合，然后用它表示那一部分即可。这样一来，Map 就可以返回自己键的一个 Set、一个包含自己值的 List 或者包含自己“键－值”对的一个 List。和数组相似，Map 可方便扩充到多个“维”，毋需涉及任何新概念。只需简单地在一个 Map 里包含其他 Map（后者又可以包含更多的 Map，以此类推）。</p><p>Collection 和 Map 可通过多种形式实现，具体由编程要求决定。下面列出的是一个帮助大家理解的新集合示意图：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=8-1.gif alt loading=lazy data-zoomable></div></div></figure></p><p>这张图刚开始的时候可能让人有点儿摸不着头脑，但在通读了本章以后，相信大家会真正理解它实际只有三个集合组件：Map，List 和 Set。而且每个组件实际只有两、三种实现方式（注释 ⑥），而且通常都只有一种特别好的方式。只要看出了这一点，集合就不会再令人生畏。</p><p>⑥：写作本章时，Java 1.2 尚处于 β 测试阶段，所以这张示意图没有包括以后会加入的 TreeSet。</p><p>虚线框代表“接口”，点线框代表“抽象”类，而实线框代表普通（实际）类。点线箭头表示一个特定的类准备实现一个接口（在抽象类的情况下，则是“部分”实现一个接口）。双线箭头表示一个类可生成箭头指向的那个类的对象。例如，任何集合都可以生成一个迭代器（Iterator），而一个列表可以生成一个 ListIterator（以及原始的迭代器，因为列表是从集合继承的）。</p><p>致力于容纳对象的接口是 Collection，List，Set 和 Map。在传统情况下，我们需要写大量代码才能同这些接口打交道。而且为了指定自己想使用的准确类型，必须在创建之初进行设置。所以可能创建下面这样的一个 List：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span> <span class=n>x</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedList</span><span class=o>();</span>
</span></span></code></pre></div><p>当然，也可以决定将 x 作为一个 LinkedList 使用（而不是一个普通的 List），并用 x 负载准确的类型信息。使用接口的好处就是一旦决定改变自己的实施细节，要做的全部事情就是在创建的时候改变它，就象下面这样：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span> <span class=n>x</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span></code></pre></div><p>其余代码可以保持原封不动。</p><p>在类的分级结构中，可看到大量以“Abstract”（抽象）开头的类，这刚开始可能会使人感觉迷惑。它们实际上是一些工具，用于“部分”实现一个特定的接口。举个例子来说，假如想生成自己的 Set，就不是从 Set 接口开始，然后自行实现所有方法。相反，我们可以从 AbstractSet 继承，只需极少的工作即可得到自己的新类。尽管如此，新集合库仍然包含了足够的功能，可满足我们的几乎所有需求。所以考虑到我们的目的，可忽略所有以“Abstract”开头的类。</p><p>因此，在观看这张示意图时，真正需要关心的只有位于最顶部的“接口”以及普通（实际）类——均用实线方框包围。通常需要生成实际类的一个对象，将其上溯造型为对应的接口。以后即可在代码的任何地方使用那个接口。下面是一个简单的例子，它用 String 对象填充一个集合，然后打印出集合内的每一个元素：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: SimpleCollection.java
</span></span></span><span class=line><span class=cl><span class=c1>// A simple example using the new Collections
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>SimpleCollection</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection</span> <span class=n>c</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>c</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>i</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>Iterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>新集合库的所有代码示例都置于子目录 newcollections 下，这样便可提醒自己这些工作只对于 Java 1.2 有效。这样一来，我们必须用下述代码来调用程序：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>java</span> <span class=n>c08</span><span class=o>.</span><span class=na>newcollections</span><span class=o>.</span><span class=na>SimpleCollection</span>
</span></span></code></pre></div><p>采用的语法与其他程序是差不多的。</p><p>大家可以看到新集合属于 java.util 库的一部分，所以在使用时不需要再添加任何额外的 import 语句。</p><p>main()的第一行创建了一个 ArrayList 对象，然后将其上溯造型成为一个集合。由于这个例子只使用了 Collection 方法，所以从 Collection 继承的一个类的任何对象都可以正常工作。但 ArrayList 是一个典型的 Collection，它代替了 Vector 的位置。
显然，add()方法的作用是将一个新元素置入集合里。然而，用户文档谨慎地指出 add()“保证这个集合包含了指定的元素”。这一点是为 Set 作铺垫的，后者只有在元素不存在的前提下才会真的加入那个元素。对于 ArrayList 以及其他任何形式的 List，add()肯定意味着“直接加入”。</p><p>利用 iterator()方法，所有集合都能生成一个“迭代器”（Iterator）。迭代器其实就象一个“枚举”（Enumeration），是后者的一个替代物，只是：</p><p>(1) 它采用了一个历史上默认、而且早在 OOP 中得到广泛采纳的名字（迭代器）。</p><p>(2) 采用了比 Enumeration 更短的名字：hasNext()代替了 hasMoreElement()，而 next()代替了 nextElement()。</p><p>(3) 添加了一个名为 remove()的新方法，可删除由 Iterator 生成的上一个元素。所以每次调用 next()的时候，只需调用 remove()一次。</p><p>在 SimpleCollection.java 中，大家可看到创建了一个迭代器，并用它在集合里遍历，打印出每个元素。</p><p>8.7.1 使用 Collections</p><p>下面这张表格总结了用一个集合能做的所有事情（亦可对 Set 和 List 做同样的事情，尽管 List 还提供了一些额外的功能）。Map 不是从 Collection 继承的，所以要单独对待。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>Object</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>Ensures</span> <span class=n>that</span> <span class=n>the</span> <span class=n>Collection</span> <span class=n>contains</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span> <span class=n>Returns</span> <span class=kc>false</span> <span class=k>if</span> <span class=n>it</span> <span class=n>doesn</span><span class=err>’</span><span class=n>t</span> <span class=n>add</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>Adds</span> <span class=n>all</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span> <span class=n>Returns</span> <span class=kc>true</span> <span class=k>if</span> <span class=n>any</span> <span class=n>elements</span> <span class=n>were</span> <span class=n>added</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>clear</span><span class=o>(</span> <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>Removes</span> <span class=n>all</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>True</span> <span class=k>if</span> <span class=n>the</span> <span class=n>Collection</span> <span class=n>contains</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>containsAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>True</span> <span class=k>if</span> <span class=n>the</span> <span class=n>Collection</span> <span class=n>contains</span> <span class=n>all</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>isEmpty</span><span class=o>(</span> <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>True</span> <span class=k>if</span> <span class=n>the</span> <span class=n>Collection</span> <span class=n>has</span> <span class=n>no</span> <span class=n>elements</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Iterator</span> <span class=nf>iterator</span><span class=o>(</span> <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Returns</span> <span class=n>an</span> <span class=n>Iterator</span> <span class=n>that</span> <span class=n>you</span> <span class=n>can</span> <span class=n>use</span> <span class=n>to</span> <span class=n>move</span> <span class=n>through</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>If</span> <span class=n>the</span> <span class=n>argument</span> <span class=n>is</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>,</span> <span class=n>one</span> <span class=n>instance</span> <span class=n>of</span> <span class=n>that</span> <span class=n>element</span> <span class=n>is</span> <span class=n>removed</span><span class=o>.</span> <span class=n>Returns</span> <span class=kc>true</span> <span class=k>if</span> <span class=n>a</span> <span class=n>removal</span> <span class=n>occurred</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>removeAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>Removes</span> <span class=n>all</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>that</span> <span class=n>are</span> <span class=n>contained</span> <span class=n>in</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span> <span class=n>Returns</span> <span class=kc>true</span> <span class=k>if</span> <span class=n>any</span> <span class=n>removals</span> <span class=n>occurred</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Boolean</span> <span class=nf>retainAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>Retains</span> <span class=n>only</span> <span class=n>elements</span> <span class=n>that</span> <span class=n>are</span> <span class=n>contained</span> <span class=n>in</span> <span class=n>the</span> <span class=nf>argument</span> <span class=o>(</span><span class=n>an</span> <span class=err>“</span><span class=n>intersection</span><span class=err>”</span> <span class=n>from</span> <span class=n>set</span> <span class=n>theory</span><span class=o>).</span> <span class=n>Returns</span> <span class=kc>true</span> <span class=k>if</span> <span class=n>any</span> <span class=n>changes</span> <span class=n>occurred</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>size</span><span class=o>(</span> <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Returns</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>(</span> <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Returns</span> <span class=n>an</span> <span class=n>array</span> <span class=n>containing</span> <span class=n>all</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>(</span><span class=n>Object</span><span class=o>[]</span> <span class=n>a</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Returns</span> <span class=n>an</span> <span class=n>array</span> <span class=n>containing</span> <span class=n>all</span> <span class=n>the</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>,</span> <span class=n>whose</span> <span class=n>type</span> <span class=n>is</span> <span class=n>that</span> <span class=n>of</span> <span class=n>the</span> <span class=n>array</span> <span class=n>a</span> <span class=n>rather</span> <span class=n>than</span> <span class=n>plain</span> <span class=nf>Object</span> <span class=o>(</span><span class=n>you</span> <span class=n>must</span> <span class=n>cast</span> <span class=n>the</span> <span class=n>array</span> <span class=n>to</span> <span class=n>the</span> <span class=n>right</span> <span class=n>type</span><span class=o>).</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>This</span> <span class=n>is</span> <span class=n>an</span> <span class=err>“</span><span class=n>optional</span><span class=err>”</span> <span class=n>method</span><span class=o>,</span> <span class=n>which</span> <span class=n>means</span> <span class=n>it</span> <span class=n>might</span> <span class=n>not</span> <span class=n>be</span> <span class=n>implemented</span> <span class=n>by</span> <span class=n>a</span> <span class=n>particular</span> <span class=n>Collection</span><span class=o>.</span> <span class=n>If</span> <span class=n>not</span><span class=o>,</span> <span class=n>that</span> <span class=n>method</span> <span class=kd>throws</span> <span class=n>an</span> <span class=n>UnsupportedOperationException</span><span class=o>.</span> <span class=n>Exceptions</span> <span class=n>will</span> <span class=n>be</span> <span class=n>covered</span> <span class=n>in</span> <span class=n>Chapter</span> <span class=mf>9.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>Object</span><span class=o>)</span> <span class=err>＊保证集合内包含了自变量。如果它没有添加自变量，就返回</span><span class=kc>false</span><span class=err>（假）</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span> <span class=err>＊添加自变量内的所有元素。如果没有添加元素，则返回</span><span class=kc>true</span><span class=err>（真）</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>clear</span><span class=o>()</span> <span class=err>＊删除集合内的所有元素</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span><span class=o>)</span> <span class=err>若集合包含自变量，就返回“真”</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>containsAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span> <span class=err>若集合包含了自变量内的所有元素，就返回“真”</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>()</span> <span class=err>若集合内没有元素，就返回“真”</span>
</span></span><span class=line><span class=cl><span class=n>Iterator</span> <span class=nf>iterator</span><span class=o>()</span> <span class=err>返回一个迭代器，以用它遍历集合的各元素</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span><span class=o>)</span> <span class=err>＊如自变量在集合里，就删除那个元素的一个实例。如果已进行了删除，就返回“真”</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>removeAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span> <span class=err>＊删除自变量里的所有元素。如果已进行了任何删除，就返回“真”</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>retainAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span> <span class=err>＊只保留包含在一个自变量里的元素（一个理论的“交集”）。如果已进行了任何改变，就返回“真”</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>size</span><span class=o>()</span> <span class=err>返回集合内的元素数量</span>
</span></span><span class=line><span class=cl><span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>()</span> <span class=err>返回包含了集合内所有元素的一个数组</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>＊这是一个“可选的”方法，有的集合可能并未实现它。若确实如此，该方法就会遇到一个</span><span class=n>UnsupportedOperatiionException</span><span class=err>，即一个“操作不支持”异常，详见第</span><span class=mi>9</span><span class=err>章。</span>
</span></span></code></pre></div><p>下面这个例子向大家演示了所有方法。同样地，它们只对从集合继承的东西有效，一个 ArrayList 作为一种“不常用的分母”使用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Collection1.java
</span></span></span><span class=line><span class=cl><span class=c1>// Things you can do with all Collections
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Collection1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Fill with &#39;size&#39; elements, start
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// counting at &#39;start&#39;:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Collection</span>
</span></span><span class=line><span class=cl>  <span class=nf>fill</span><span class=o>(</span><span class=n>Collection</span> <span class=n>c</span><span class=o>,</span> <span class=kt>int</span> <span class=n>start</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>start</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>start</span> <span class=o>+</span> <span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>c</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>i</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Default to a &#34;start&#34; of 0:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Collection</span>
</span></span><span class=line><span class=cl>  <span class=nf>fill</span><span class=o>(</span><span class=n>Collection</span> <span class=n>c</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fill</span><span class=o>(</span><span class=n>c</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Default to 10 elements:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Collection</span> <span class=nf>fill</span><span class=o>(</span><span class=n>Collection</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fill</span><span class=o>(</span><span class=n>c</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create &amp; upcast to Collection:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Collection</span> <span class=nf>newCollection</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ArrayList is used for simplicity, but it&#39;s
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// only seen as a generic Collection
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// everywhere else in the program.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Fill a Collection with a range of values:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Collection</span>
</span></span><span class=line><span class=cl>  <span class=nf>newCollection</span><span class=o>(</span><span class=kt>int</span> <span class=n>start</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>(),</span> <span class=n>start</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Moving through a List with an iterator:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=o>(</span><span class=n>Collection</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=n>Iterator</span> <span class=n>x</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span> <span class=n>x</span><span class=o>.</span><span class=na>hasNext</span><span class=o>();)</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection</span> <span class=n>c</span> <span class=o>=</span> <span class=n>newCollection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;ten&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;eleven&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Make an array from the List:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Object</span><span class=o>[]</span> <span class=n>array</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>toArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Make a String array from the List:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>String</span><span class=o>[]</span> <span class=n>str</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>      <span class=o>(</span><span class=n>String</span><span class=o>[])</span><span class=n>c</span><span class=o>.</span><span class=na>toArray</span><span class=o>(</span><span class=k>new</span> <span class=n>String</span><span class=o>[</span><span class=mi>1</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Find max and min elements; this means
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// different things depending on the way
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// the Comparable interface is implemented:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Collections.max(c) = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>Collections</span><span class=o>.</span><span class=na>max</span><span class=o>(</span><span class=n>c</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Collections.min(c) = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>Collections</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>c</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Add a Collection to another Collection
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>c</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>newCollection</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=s>&#34;3&#34;</span><span class=o>);</span> <span class=c1>// Removes the first one
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=s>&#34;3&#34;</span><span class=o>);</span> <span class=c1>// Removes the second one
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Remove all components that are in the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// argument collection:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>c</span><span class=o>.</span><span class=na>removeAll</span><span class=o>(</span><span class=n>newCollection</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>newCollection</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Is an element in this Collection?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;c.contains(\&#34;4\&#34;) = &#34;</span> <span class=o>+</span> <span class=n>c</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;4&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Is a Collection in this Collection?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;c.containsAll(newCollection()) = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>c</span><span class=o>.</span><span class=na>containsAll</span><span class=o>(</span><span class=n>newCollection</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection</span> <span class=n>c2</span> <span class=o>=</span> <span class=n>newCollection</span><span class=o>(</span><span class=mi>5</span><span class=o>,</span> <span class=mi>3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Keep all the elements that are in both
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// c and c2 (an intersection of sets):
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>c</span><span class=o>.</span><span class=na>retainAll</span><span class=o>(</span><span class=n>c2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Throw away all the elements in c that
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// also appear in c2:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>c</span><span class=o>.</span><span class=na>removeAll</span><span class=o>(</span><span class=n>c2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;c.isEmpty() = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>c</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span> <span class=o>=</span> <span class=n>newCollection</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span> <span class=c1>// Remove all elements
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;after c.clear():&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>通过第一个方法，我们可用测试数据填充任何集合。在当前这种情况下，只是将 int 转换成 String。第二个方法将在本章其余的部分经常采用。</p><p>newCollection()的两个版本都创建了 ArrayList，用于包含不同的数据集，并将它们作为集合对象返回。所以很明显，除了 Collection 接口之外，不会再用到其他什么。</p><p>print()方法也会在本节经常用到。由于它用一个迭代器（Iterator）在一个集合内遍历，而任何集合都可以产生这样的一个迭代器，所以它适用于 List 和 Set，也适用于由一个 Map 生成的 Collection。</p><p>main()用简单的手段显示出了集合内的所有方法。</p><p>在后续的小节里，我们将比较 List，Set 和 Map 的不同实现方案，同时指出在各种情况下哪一种方案应成为首选（带有星号的那个）。大家会发现这里并未包括一些传统的类，如 Vector，Stack 以及 Hashtable 等。因为不管在什么情况下，新集合内都有自己首选的类。</p><p>8.7.2 使用 Lists</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span> <span class=o>(</span><span class=n>interface</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Order</span> <span class=n>is</span> <span class=n>the</span> <span class=n>most</span> <span class=n>important</span> <span class=n>feature</span> <span class=n>of</span> <span class=n>a</span> <span class=n>List</span><span class=o>;</span> <span class=n>it</span> <span class=n>promises</span> <span class=n>to</span> <span class=n>maintain</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>a</span> <span class=n>particular</span> <span class=n>sequence</span><span class=o>.</span> <span class=n>List</span> <span class=n>adds</span> <span class=n>a</span> <span class=n>number</span> <span class=n>of</span> <span class=n>methods</span> <span class=n>to</span> <span class=n>Collection</span> <span class=n>that</span> <span class=n>allow</span> <span class=n>insertion</span> <span class=n>and</span> <span class=n>removal</span> <span class=n>of</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>middle</span> <span class=n>of</span> <span class=n>a</span> <span class=n>List</span><span class=o>.</span> <span class=o>(</span><span class=n>This</span> <span class=n>is</span> <span class=n>recommended</span> <span class=n>only</span> <span class=k>for</span> <span class=n>a</span> <span class=n>LinkedList</span><span class=o>.)</span> <span class=n>A</span> <span class=n>List</span> <span class=n>will</span> <span class=n>produce</span> <span class=n>a</span> <span class=n>ListIterator</span><span class=o>,</span> <span class=n>and</span> <span class=n>using</span> <span class=k>this</span> <span class=n>you</span> <span class=n>can</span> <span class=n>traverse</span> <span class=n>the</span> <span class=n>List</span> <span class=n>in</span> <span class=n>both</span> <span class=n>directions</span><span class=o>,</span> <span class=n>as</span> <span class=n>well</span> <span class=n>as</span> <span class=n>insert</span> <span class=n>and</span> <span class=n>remove</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>the</span> <span class=n>middle</span> <span class=n>of</span> <span class=n>the</span> <span class=nf>list</span> <span class=o>(</span><span class=n>again</span><span class=o>,</span> <span class=n>recommended</span> <span class=n>only</span> <span class=k>for</span> <span class=n>a</span> <span class=n>LinkedList</span><span class=o>).</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ArrayList</span><span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>A</span> <span class=n>List</span> <span class=n>backed</span> <span class=n>by</span> <span class=n>an</span> <span class=n>array</span><span class=o>.</span> <span class=n>Use</span> <span class=n>instead</span> <span class=n>of</span> <span class=n>Vector</span> <span class=n>as</span> <span class=n>a</span> <span class=n>general</span><span class=o>-</span><span class=n>purpose</span> <span class=n>object</span> <span class=n>holder</span><span class=o>.</span> <span class=n>Allows</span> <span class=n>rapid</span> <span class=n>random</span> <span class=n>access</span> <span class=n>to</span> <span class=n>elements</span><span class=o>,</span> <span class=n>but</span> <span class=n>is</span> <span class=n>slow</span> <span class=n>when</span> <span class=n>inserting</span> <span class=n>and</span> <span class=n>removing</span> <span class=n>elements</span> <span class=n>from</span> <span class=n>the</span> <span class=n>middle</span> <span class=n>of</span> <span class=n>a</span> <span class=n>list</span><span class=o>.</span> <span class=n>ListIterator</span> <span class=n>should</span> <span class=n>be</span> <span class=n>used</span> <span class=n>only</span> <span class=k>for</span> <span class=n>back</span><span class=o>-</span><span class=n>and</span><span class=o>-</span><span class=n>forth</span> <span class=n>traversal</span> <span class=n>of</span> <span class=n>an</span> <span class=n>ArrayList</span><span class=o>,</span> <span class=n>but</span> <span class=n>not</span> <span class=k>for</span> <span class=n>inserting</span> <span class=n>and</span> <span class=n>removing</span> <span class=n>elements</span><span class=o>,</span> <span class=n>which</span> <span class=n>is</span> <span class=n>expensive</span> <span class=n>compared</span> <span class=n>to</span> <span class=n>LinkedList</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>LinkedList</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Provides</span> <span class=n>optimal</span> <span class=n>sequential</span> <span class=n>access</span><span class=o>,</span> <span class=n>with</span> <span class=n>inexpensive</span> <span class=n>insertions</span> <span class=n>and</span> <span class=n>deletions</span> <span class=n>from</span> <span class=n>the</span> <span class=n>middle</span> <span class=n>of</span> <span class=n>the</span> <span class=n>list</span><span class=o>.</span> <span class=n>Relatively</span> <span class=n>slow</span> <span class=k>for</span> <span class=n>random</span> <span class=n>access</span><span class=o>.</span> <span class=o>(</span><span class=n>Use</span> <span class=n>ArrayList</span> <span class=n>instead</span><span class=o>.)</span> <span class=n>Also</span> <span class=n>has</span> <span class=nf>addFirst</span><span class=o>(</span> <span class=o>),</span> <span class=n>addLast</span><span class=o>(</span> <span class=o>),</span> <span class=n>getFirst</span><span class=o>(</span> <span class=o>),</span> <span class=n>getLast</span><span class=o>(</span> <span class=o>),</span> <span class=n>removeFirst</span><span class=o>(</span> <span class=o>),</span> <span class=n>and</span> <span class=nf>removeLast</span><span class=o>(</span> <span class=o>)</span> <span class=o>(</span><span class=n>which</span> <span class=n>are</span> <span class=n>not</span> <span class=n>defined</span> <span class=n>in</span> <span class=n>any</span> <span class=n>interfaces</span> <span class=n>or</span> <span class=n>base</span> <span class=n>classes</span><span class=o>)</span> <span class=n>to</span> <span class=n>allow</span> <span class=n>it</span> <span class=n>to</span> <span class=n>be</span> <span class=n>used</span> <span class=n>as</span> <span class=n>a</span> <span class=n>stack</span><span class=o>,</span> <span class=n>a</span> <span class=n>queue</span><span class=o>,</span> <span class=n>and</span> <span class=n>a</span> <span class=n>dequeue</span><span class=o>.</span>
</span></span></code></pre></div><p>List（接口） 顺序是 List 最重要的特性；它可保证元素按照规定的顺序排列。List 为 Collection 添加了大量方法，以便我们在 List 中部插入和删除元素（只推荐对 LinkedList 这样做）。List 也会生成一个 ListIterator（列表迭代器），利用它可在一个列表里朝两个方向遍历，同时插入和删除位于列表中部的元素（同样地，只建议对 LinkedList 这样做）</p><p>ArrayList＊ 由一个数组后推得到的 List。作为一个常规用途的对象容器使用，用于替换原先的 Vector。允许我们快速访问元素，但在从列表中部插入和删除元素时，速度却嫌稍慢。一般只应该用 ListIterator 对一个 ArrayList 进行向前和向后遍历，不要用它删除和插入元素；与 LinkedList 相比，它的效率要低许多</p><p>LinkedList 提供优化的顺序访问性能，同时可以高效率地在列表中部进行插入和删除操作。但在进行随机访问时，速度却相当慢，此时应换用 ArrayList。也提供了 addFirst()，addLast()，getFirst()，getLast()，removeFirst()以及 removeLast()（未在任何接口或基础类中定义），以便将其作为一个规格、队列以及一个双向队列使用</p><p>下面这个例子中的方法每个都覆盖了一组不同的行为：每个列表都能做的事情（basicTest()），通过一个迭代器遍历（iterMotion()）、用一个迭代器改变某些东西（iterManipulation()）、体验列表处理的效果（testVisual()）以及只有 LinkedList 才能做的事情等：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: List1.java
</span></span></span><span class=line><span class=cl><span class=c1>// Things you can do with Lists
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>List1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Wrap Collection1.fill() for convenience:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>List</span> <span class=nf>fill</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>(</span><span class=n>List</span><span class=o>)</span><span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// You can use an Iterator, just as with a
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// Collection, but you can also use random
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// access with get():
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>i</span><span class=o>)</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=kt>boolean</span> <span class=n>b</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>Object</span> <span class=n>o</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=kt>int</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>Iterator</span> <span class=n>it</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>ListIterator</span> <span class=n>lit</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>basicTest</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span> <span class=s>&#34;x&#34;</span><span class=o>);</span> <span class=c1>// Add at location 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;x&#34;</span><span class=o>);</span> <span class=c1>// Add at end
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Add a collection:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Add a collection starting at location 3:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=mi>3</span><span class=o>,</span> <span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>);</span> <span class=c1>// Is it in there?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Is the entire collection in there?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>b</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>containsAll</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Lists allow random access, which is cheap
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// for ArrayList, expensive for LinkedList:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>o</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=mi>1</span><span class=o>);</span> <span class=c1>// Get object at location 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>i</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>indexOf</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>);</span> <span class=c1>// Tell index of object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// indexOf, starting search at location 2:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>i</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>indexOf</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>,</span> <span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>();</span> <span class=c1>// Any elements inside?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span> <span class=c1>// Ordinary Iterator
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>lit</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>();</span> <span class=c1>// ListIterator
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>lit</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>(</span><span class=mi>3</span><span class=o>);</span> <span class=c1>// Start at loc 3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>i</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>lastIndexOf</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>);</span> <span class=c1>// Last match
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>i</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>lastIndexOf</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>,</span> <span class=mi>2</span><span class=o>);</span> <span class=c1>// ...after loc 2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=mi>1</span><span class=o>);</span> <span class=c1>// Remove location 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=s>&#34;3&#34;</span><span class=o>);</span> <span class=c1>// Remove this object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>set</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span> <span class=s>&#34;y&#34;</span><span class=o>);</span> <span class=c1>// Set location 1 to &#34;y&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Keep everything that&#39;s in the argument
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// (the intersection of the two sets):
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>retainAll</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Remove elements in this range:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>removeRange</span><span class=o>(</span><span class=mi>0</span><span class=o>,</span> <span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Remove everything that&#39;s in the argument:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>removeAll</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=c1>// How big is it?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span> <span class=c1>// Remove all elements
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>iterMotion</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ListIterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=n>it</span><span class=o>.</span><span class=na>hasPrevious</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span> <span class=o>=</span> <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span> <span class=o>=</span> <span class=n>it</span><span class=o>.</span><span class=na>nextIndex</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>o</span> <span class=o>=</span> <span class=n>it</span><span class=o>.</span><span class=na>previous</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span> <span class=o>=</span> <span class=n>it</span><span class=o>.</span><span class=na>previousIndex</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>iterManipulation</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ListIterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>it</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;47&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Must move to an element after add():
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Remove the element that was just produced:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>it</span><span class=o>.</span><span class=na>remove</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Must move to an element after remove():
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Change the element that was just produced:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>it</span><span class=o>.</span><span class=na>set</span><span class=o>(</span><span class=s>&#34;47&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>testVisual</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span> <span class=n>b</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>fill</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;b = &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Shrink the list by removing all the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// elements beyond the first 1/2 of the list
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>()/</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>removeRange</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>()/</span><span class=mi>2</span><span class=o>,</span> <span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>()/</span><span class=mi>2</span> <span class=o>+</span> <span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Insert, remove, and replace elements
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// using a ListIterator:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ListIterator</span> <span class=n>x</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>()/</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=o>.</span><span class=na>remove</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=o>.</span><span class=na>set</span><span class=o>(</span><span class=s>&#34;47&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Traverse the list backwards:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>x</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>hasPrevious</span><span class=o>())</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>previous</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;testVisual finished&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// There are some things that only
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// LinkedLists can do:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>testLinkedList</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>LinkedList</span> <span class=n>ll</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>ll</span><span class=o>,</span> <span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>ll</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Treat it like a stack, pushing:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ll</span><span class=o>.</span><span class=na>addFirst</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span><span class=o>.</span><span class=na>addFirst</span><span class=o>(</span><span class=s>&#34;two&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>ll</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Like &#34;peeking&#34; at the top of a stack:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>ll</span><span class=o>.</span><span class=na>getFirst</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Like popping a stack:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>ll</span><span class=o>.</span><span class=na>removeFirst</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>ll</span><span class=o>.</span><span class=na>removeFirst</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Treat it like a queue, pulling elements
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// off the tail end:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>ll</span><span class=o>.</span><span class=na>removeLast</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=c1>// With the above operations, it&#39;s a dequeue!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>print</span><span class=o>(</span><span class=n>ll</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span> <span class=n>args</span><span class=o>[])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Make and fill a new list each time:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>basicTest</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>LinkedList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>basicTest</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>iterMotion</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>LinkedList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>iterMotion</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>iterManipulation</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>LinkedList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>iterManipulation</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>testVisual</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>LinkedList</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>testLinkedList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>在 basicTest()和 iterMotiion()中，只是简单地发出调用，以便揭示出正确的语法。而且尽管捕获了返回值，但是并未使用它。在某些情况下，之所以不捕获返回值，是由于它们没有什么特别的用处。在正式使用它们前，应仔细研究一下自己的联机文档，掌握这些方法完整、正确的用法。</p><p>8.7.3 使用 Sets</p><p>Set 拥有与 Collection 完全相同的接口，所以和两种不同的 List 不同，它没有什么额外的功能。相反，Set 完全就是一个 Collection，只是具有不同的行为（这是实例和多态性最理想的应用：用于表达不同的行为）。在这里，一个 Set 只允许每个对象存在一个实例（正如大家以后会看到的那样，一个对象的“值”的构成是相当复杂的）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Set</span> <span class=o>(</span><span class=n>interface</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Each</span> <span class=n>element</span> <span class=n>that</span> <span class=n>you</span> <span class=n>add</span> <span class=n>to</span> <span class=n>the</span> <span class=n>Set</span> <span class=n>must</span> <span class=n>be</span> <span class=n>unique</span><span class=o>;</span> <span class=n>otherwise</span> <span class=n>the</span> <span class=n>Set</span> <span class=n>doesn</span><span class=err>’</span><span class=n>t</span> <span class=n>add</span> <span class=n>the</span> <span class=n>duplicate</span> <span class=n>element</span><span class=o>.</span> <span class=n>Objects</span> <span class=n>added</span> <span class=n>to</span> <span class=n>a</span> <span class=n>Set</span> <span class=n>must</span> <span class=n>define</span> <span class=nf>equals</span><span class=o>(</span> <span class=o>)</span> <span class=n>to</span> <span class=n>establish</span> <span class=n>object</span> <span class=n>uniqueness</span><span class=o>.</span> <span class=n>Set</span> <span class=n>has</span> <span class=n>exactly</span> <span class=n>the</span> <span class=n>same</span> <span class=kd>interface</span> <span class=nc>as</span> <span class=n>Collection</span><span class=o>.</span> <span class=n>The</span> <span class=n>Set</span> <span class=kd>interface</span> <span class=nc>does</span> <span class=n>not</span> <span class=n>guarantee</span> <span class=n>it</span> <span class=n>will</span> <span class=n>maintain</span> <span class=n>its</span> <span class=n>elements</span> <span class=n>in</span> <span class=n>any</span> <span class=n>particular</span> <span class=n>order</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>HashSet</span><span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>For</span> <span class=n>Sets</span> <span class=n>where</span> <span class=n>fast</span> <span class=n>lookup</span> <span class=n>time</span> <span class=n>is</span> <span class=n>important</span><span class=o>.</span> <span class=n>Objects</span> <span class=n>must</span> <span class=n>also</span> <span class=n>define</span> <span class=nf>hashCode</span><span class=o>(</span> <span class=o>).</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>TreeSet</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>An</span> <span class=n>ordered</span> <span class=n>Set</span> <span class=n>backed</span> <span class=n>by</span> <span class=n>a</span> <span class=n>red</span><span class=o>-</span><span class=n>black</span> <span class=n>tree</span><span class=o>.</span> <span class=n>This</span> <span class=n>way</span><span class=o>,</span> <span class=n>you</span> <span class=n>can</span> <span class=n>extract</span> <span class=n>an</span> <span class=n>ordered</span> <span class=n>sequence</span> <span class=n>from</span> <span class=n>a</span> <span class=n>Set</span><span class=o>.</span>
</span></span></code></pre></div><p>Set（接口） 添加到 Set 的每个元素都必须是独一无二的；否则 Set 就不会添加重复的元素。添加到 Set 里的对象必须定义 equals()，从而建立对象的唯一性。Set 拥有与 Collection 完全相同的接口。一个 Set 不能保证自己可按任何特定的顺序维持自己的元素</p><p>HashSet＊ 用于除非常小的以外的所有 Set。对象也必须定义 hashCode()
ArraySet 由一个数组后推得到的 Set。面向非常小的 Set 设计，特别是那些需要频繁创建和删除的。对于小 Set，与 HashSet 相比，ArraySet 创建和反复所需付出的代价都要小得多。但随着 Set 的增大，它的性能也会大打折扣。不需要 HashCode()
TreeSet 由一个“红黑树”后推得到的顺序 Set（注释 ⑦）。这样一来，我们就可以从一个 Set 里提到一个顺序集合</p><p>⑦：直至本书写作的时候，TreeSet 仍然只是宣布，尚未正式实现。所以这里没有提供使用 TreeSet 的例子。</p><p>下面这个例子并没有列出用一个 Set 能够做的全部事情，因为接口与 Collection 是相同的，前例已经练习过了。相反，我们要例示的重点在于使一个 Set 独一无二的行为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Set1.java
</span></span></span><span class=line><span class=cl><span class=c1>// Things you can do with Sets
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Set1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>testVisual</span><span class=o>(</span><span class=n>Set</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span> <span class=c1>// No duplicates!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Add another set to this one:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Look something up:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;a.contains(\&#34;one\&#34;): &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>testVisual</span><span class=o>(</span><span class=k>new</span> <span class=n>HashSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>testVisual</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>重复的值被添加到 Set，但在打印的时候，我们会发现 Set 只接受每个值的一个实例。</p><p>运行这个程序时，会注意到由 HashSet 维持的顺序与 ArraySet 是不同的。这是由于它们采用了不同的方法来保存元素，以便它们以后的定位。ArraySet 保持着它们的顺序状态，而 HashSet 使用一个散列函数，这是特别为快速检索设计的）。创建自己的类型时，一定要注意 Set 需要通过一种方式来维持一种存储顺序，就象本章早些时候展示的“groundhog”（土拔鼠）例子那样。下面是一个例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Set2.java
</span></span></span><span class=line><span class=cl><span class=c1>// Putting your own type in a Set
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MyType</span> <span class=kd>implements</span> <span class=n>Comparable</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>int</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>MyType</span><span class=o>(</span><span class=kt>int</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>equals</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span><span class=line><span class=cl>      <span class=o>(</span><span class=n>o</span> <span class=k>instanceof</span> <span class=n>MyType</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>i</span> <span class=o>==</span> <span class=o>((</span><span class=n>MyType</span><span class=o>)</span><span class=n>o</span><span class=o>).</span><span class=na>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>hashCode</span><span class=o>()</span> <span class=o>{</span> <span class=k>return</span> <span class=n>i</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span> <span class=k>return</span> <span class=n>i</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compareTo</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i2</span> <span class=o>=</span> <span class=o>((</span><span class=n>MyType</span><span class=o>)</span> <span class=n>o</span><span class=o>).</span><span class=na>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>(</span><span class=n>i2</span> <span class=o>&lt;</span> <span class=n>i</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=o>(</span><span class=n>i2</span> <span class=o>==</span> <span class=n>i</span> <span class=o>?</span> <span class=mi>0</span> <span class=o>:</span> <span class=mi>1</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Set2</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Set</span> <span class=nf>fill</span><span class=o>(</span><span class=n>Set</span> <span class=n>a</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>MyType</span><span class=o>(</span><span class=n>i</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Set</span> <span class=nf>fill</span><span class=o>(</span><span class=n>Set</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fill</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Set</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span> <span class=c1>// Try to add duplicates
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeSet</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>对 equals()及 hashCode()的定义遵照“groundhog”例子已经给出的形式。在两种情况下都必须定义一个 equals()。但只有要把类置入一个 HashSet 的前提下，才有必要使用 hashCode()——这种情况是完全有可能的，因为通常应先选择作为一个 Set 实现。</p><p>8.7.4 使用 Maps</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span> <span class=o>(</span><span class=n>interface</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Maintains</span> <span class=n>key</span><span class=o>-</span><span class=n>value</span> <span class=nf>associations</span> <span class=o>(</span><span class=n>pairs</span><span class=o>),</span> <span class=n>so</span> <span class=n>you</span> <span class=n>can</span> <span class=n>look</span> <span class=n>up</span> <span class=n>a</span> <span class=n>value</span> <span class=n>using</span> <span class=n>a</span> <span class=n>key</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>HashMap</span><span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Implementation</span> <span class=n>based</span> <span class=n>on</span> <span class=n>a</span> <span class=n>hash</span> <span class=n>table</span><span class=o>.</span> <span class=o>(</span><span class=n>Use</span> <span class=k>this</span> <span class=n>instead</span> <span class=n>of</span> <span class=n>Hashtable</span><span class=o>.)</span> <span class=n>Provides</span> <span class=n>constant</span><span class=o>-</span><span class=n>time</span> <span class=n>performance</span> <span class=k>for</span> <span class=n>inserting</span> <span class=n>and</span> <span class=n>locating</span> <span class=n>pairs</span><span class=o>.</span> <span class=n>Performance</span> <span class=n>can</span> <span class=n>be</span> <span class=n>adjusted</span> <span class=n>via</span> <span class=n>constructors</span> <span class=n>that</span> <span class=n>allow</span> <span class=n>you</span> <span class=n>to</span> <span class=n>set</span> <span class=n>the</span> <span class=n>capacity</span> <span class=n>and</span> <span class=n>load</span> <span class=n>factor</span> <span class=n>of</span> <span class=n>the</span> <span class=n>hash</span> <span class=n>table</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>TreeMap</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Implementation</span> <span class=n>based</span> <span class=n>on</span> <span class=n>a</span> <span class=n>red</span><span class=o>-</span><span class=n>black</span> <span class=n>tree</span><span class=o>.</span> <span class=n>When</span> <span class=n>you</span> <span class=n>view</span> <span class=n>the</span> <span class=n>keys</span> <span class=n>or</span> <span class=n>the</span> <span class=n>pairs</span><span class=o>,</span> <span class=n>they</span> <span class=n>will</span> <span class=n>be</span> <span class=n>in</span> <span class=n>sorted</span> <span class=nf>order</span> <span class=o>(</span><span class=n>determined</span> <span class=n>by</span> <span class=n>Comparable</span> <span class=n>or</span> <span class=n>Comparator</span><span class=o>,</span> <span class=n>discussed</span> <span class=n>later</span><span class=o>).</span> <span class=n>The</span> <span class=n>point</span> <span class=n>of</span> <span class=n>a</span> <span class=n>TreeMap</span> <span class=n>is</span> <span class=n>that</span> <span class=n>you</span> <span class=n>get</span> <span class=n>the</span> <span class=n>results</span> <span class=n>in</span> <span class=n>sorted</span> <span class=n>order</span><span class=o>.</span> <span class=n>TreeMap</span> <span class=n>is</span> <span class=n>the</span> <span class=n>only</span> <span class=n>Map</span> <span class=n>with</span> <span class=n>the</span> <span class=nf>subMap</span><span class=o>(</span> <span class=o>)</span> <span class=n>method</span><span class=o>,</span> <span class=n>which</span> <span class=n>allows</span> <span class=n>you</span> <span class=n>to</span> <span class=k>return</span> <span class=n>a</span> <span class=n>portion</span> <span class=n>of</span> <span class=n>the</span> <span class=n>tree</span><span class=o>.</span>
</span></span></code></pre></div><p>Map（接口） 维持“键－值”对应关系（对），以便通过一个键查找相应的值</p><p><code>HashMap＊</code> 基于一个散列表实现（用它代替 Hashtable）。针对“键－值”对的插入和检索，这种形式具有最稳定的性能。可通过构造器对这一性能进行调整，以便设置散列表的“能力”和“装载因子”</p><p>ArrayMap 由一个 ArrayList 后推得到的 Map。对反复的顺序提供了精确的控制。面向非常小的 Map 设计，特别是那些需要经常创建和删除的。对于非常小的 Map，创建和反复所付出的代价要比 HashMap 低得多。但在 Map 变大以后，性能也会相应地大幅度降低</p><p>TreeMap 在一个“红－黑”树的基础上实现。查看键或者“键－值”对时，它们会按固定的顺序排列（取决于 Comparable 或
Comparator，稍后即会讲到）。TreeMap 最大的好处就是我们得到的是已排好序的结果。TreeMap 是含有 subMap()方法的唯一一种 Map，利用它可以返回树的一部分</p><p>下例包含了两套测试数据以及一个 fill()方法，利用该方法可以用任何两维数组（由 Object 构成）填充任何 Map。这些工具也会在其他 Map 例子中用到。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Map1.java
</span></span></span><span class=line><span class=cl><span class=c1>// Things you can do with Maps
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Map1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>final</span> <span class=kd>static</span> <span class=n>String</span><span class=o>[][]</span> <span class=n>testData1</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Happy&#34;</span><span class=o>,</span> <span class=s>&#34;Cheerful disposition&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Sleepy&#34;</span><span class=o>,</span> <span class=s>&#34;Prefers dark, quiet places&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Grumpy&#34;</span><span class=o>,</span> <span class=s>&#34;Needs to work on attitude&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Doc&#34;</span><span class=o>,</span> <span class=s>&#34;Fantasizes about advanced degree&#34;</span><span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Dopey&#34;</span><span class=o>,</span> <span class=s>&#34;&#39;A&#39; for effort&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Sneezy&#34;</span><span class=o>,</span> <span class=s>&#34;Struggles with allergies&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Bashful&#34;</span><span class=o>,</span> <span class=s>&#34;Needs self-esteem workshop&#34;</span><span class=o>},</span>
</span></span><span class=line><span class=cl>  <span class=o>};</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>final</span> <span class=kd>static</span> <span class=n>String</span><span class=o>[][]</span> <span class=n>testData2</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Belligerent&#34;</span><span class=o>,</span> <span class=s>&#34;Disruptive influence&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Lazy&#34;</span><span class=o>,</span> <span class=s>&#34;Motivational problems&#34;</span> <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=s>&#34;Comatose&#34;</span><span class=o>,</span> <span class=s>&#34;Excellent behavior&#34;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>};</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Map</span> <span class=nf>fill</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=n>Object</span><span class=o>[][]</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>o</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>m</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>o</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=mi>0</span><span class=o>],</span> <span class=n>o</span><span class=o>[</span><span class=n>i</span><span class=o>][</span><span class=mi>1</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>m</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Producing a Set of the keys:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>printKeys</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;Size = &#34;</span> <span class=o>+</span> <span class=n>m</span><span class=o>.</span><span class=na>size</span><span class=o>()</span> <span class=o>+</span><span class=s>&#34;, &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;Keys: &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>m</span><span class=o>.</span><span class=na>keySet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Producing a Collection of the values:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>printValues</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;Values: &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>m</span><span class=o>.</span><span class=na>values</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Iterating through Map.Entry objects (pairs):
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection</span> <span class=n>entries</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=na>entries</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Iterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>entries</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>Map</span><span class=o>.</span><span class=na>Entry</span> <span class=n>e</span> <span class=o>=</span> <span class=o>(</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>)</span><span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Key = &#34;</span> <span class=o>+</span> <span class=n>e</span><span class=o>.</span><span class=na>getKey</span><span class=o>()</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;, Value = &#34;</span> <span class=o>+</span> <span class=n>e</span><span class=o>.</span><span class=na>getValue</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>fill</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>testData1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Map has &#39;Set&#39; behavior for keys:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>fill</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>testData1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printKeys</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printValues</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>key</span> <span class=o>=</span> <span class=n>testData1</span><span class=o>[</span><span class=mi>4</span><span class=o>][</span><span class=mi>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>value</span> <span class=o>=</span> <span class=n>testData1</span><span class=o>[</span><span class=mi>4</span><span class=o>][</span><span class=mi>1</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m.containsKey(\&#34;&#34;</span> <span class=o>+</span> <span class=n>key</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;\&#34;): &#34;</span> <span class=o>+</span> <span class=n>m</span><span class=o>.</span><span class=na>containsKey</span><span class=o>(</span><span class=n>key</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m.get(\&#34;&#34;</span> <span class=o>+</span> <span class=n>key</span> <span class=o>+</span> <span class=s>&#34;\&#34;): &#34;</span>
</span></span><span class=line><span class=cl>      <span class=o>+</span> <span class=n>m</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>key</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m.containsValue(\&#34;&#34;</span>
</span></span><span class=line><span class=cl>      <span class=o>+</span> <span class=n>value</span> <span class=o>+</span> <span class=s>&#34;\&#34;): &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>m</span><span class=o>.</span><span class=na>containsValue</span><span class=o>(</span><span class=n>value</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span> <span class=n>m2</span> <span class=o>=</span> <span class=n>fill</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeMap</span><span class=o>(),</span> <span class=n>testData2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>m</span><span class=o>.</span><span class=na>putAll</span><span class=o>(</span><span class=n>m2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printKeys</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>m</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>testData2</span><span class=o>[</span><span class=mi>0</span><span class=o>][</span><span class=mi>0</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=n>printKeys</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>m</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m.isEmpty(): &#34;</span>
</span></span><span class=line><span class=cl>      <span class=o>+</span> <span class=n>m</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>fill</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>testData1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Operations on the Set change the Map:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>m</span><span class=o>.</span><span class=na>keySet</span><span class=o>().</span><span class=na>removeAll</span><span class=o>(</span><span class=n>m</span><span class=o>.</span><span class=na>keySet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m.isEmpty(): &#34;</span>
</span></span><span class=line><span class=cl>      <span class=o>+</span> <span class=n>m</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span> <span class=n>args</span><span class=o>[])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Testing HashMap&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashMap</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Testing TreeMap&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeMap</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>printKeys()，printValues()以及 print()方法并不只是有用的工具，它们也清楚地揭示了一个 Map 的 Collection“景象”的产生过程。keySet()方法会产生一个 Set，它由 Map 中的键后推得来。在这儿，它只被当作一个 Collection 对待。values()也得到了类似的对待，它的作用是产生一个 List，其中包含了 Map 中的所有值（注意键必须是独一无二的，而值可以有重复）。由于这些 Collection 是由 Map 后推得到的，所以一个 Collection 中的任何改变都会在相应的 Map 中反映出来。</p><p>print()方法的作用是收集由 entries 产生的 Iterator（迭代器），并用它同时打印出每个“键－值”对的键和值。程序剩余的部分提供了每种 Map 操作的简单示例，并对每种类型的 Map 进行了测试。</p><p>当创建自己的类，将其作为 Map 中的一个键使用时，必须注意到和以前的 Set 相同的问题。</p><p>8.7.5 决定实施方案</p><p>从早些时候的那幅示意图可以看出，实际上只有三个集合组件：Map，List 和 Set。而且每个接口只有两种或三种实施方案。若需使用由一个特定的接口提供的功能，如何才能决定到底采取哪一种方案呢？</p><p>为理解这个问题，必须认识到每种不同的实施方案都有自己的特点、优点和缺点。比如在那张示意图中，可以看到 Hashtable，Vector 和 Stack 的“特点”是它们都属于“传统”类，所以不会干扰原有的代码。但在另一方面，应尽量避免为新的（Java 1.2）代码使用它们。</p><p>其他集合间的差异通常都可归纳为它们具体是由什么“后推”的。换言之，取决于物理意义上用于实施目标接口的数据结构是什么。例如，ArrayList，LinkedList 以及 Vector（大致等价于 ArrayList）都实现了 List 接口，所以无论选用哪一个，我们的程序都会得到类似的结果。然而，ArrayList（以及 Vector）是由一个数组后推得到的；而 LinkedList 是根据常规的双重链接列表方式实现的，因为每个单独的对象都包含了数据以及指向列表内前后元素的指针。正是由于这个原因，假如想在一个列表中部进行大量插入和删除操作，那么 LinkedList 无疑是最恰当的选择（LinkedList 还有一些额外的功能，建立于 AbstractSequentialList 中）。若非如此，就情愿选择 ArrayList，它的速度可能要快一些。</p><p>作为另一个例子，Set 既可作为一个 ArraySet 实现，亦可作为 HashSet 实现。ArraySet 是由一个 ArrayList 后推得到的，设计成只支持少量元素，特别适合要求创建和删除大量 Set 对象的场合使用。然而，一旦需要在自己的 Set 中容纳大量元素，ArraySet 的性能就会大打折扣。写一个需要 Set 的程序时，应默认选择 HashSet。而且只有在某些特殊情况下（对性能的提升有迫切的需求），才应切换到 ArraySet。</p><ol><li>决定使用何种 List</li></ol><p>为体会各种 List 实施方案间的差异，最简便的方法就是进行一次性能测验。下述代码的作用是建立一个内部基础类，将其作为一个测试床使用。然后为每次测验都创建一个匿名内部类。每个这样的内部类都由一个 test()方法调用。利用这种方法，可以方便添加和删除测试项目。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: ListPerformance.java
</span></span></span><span class=line><span class=cl><span class=c1>// Demonstrates performance differences in Lists
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ListPerformance</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>REPS</span> <span class=o>=</span> <span class=mi>100</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>abstract</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Tester</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>size</span><span class=o>;</span> <span class=c1>// Test quantity
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Tester</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>.</span><span class=na>size</span> <span class=o>=</span> <span class=n>size</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=n>Tester</span><span class=o>[]</span> <span class=n>tests</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;get&#34;</span><span class=o>,</span> <span class=mi>300</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=n>j</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>a</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>j</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;iteration&#34;</span><span class=o>,</span> <span class=mi>300</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=n>Iterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>          <span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;insert&#34;</span><span class=o>,</span> <span class=mi>1000</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>half</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>()/</span><span class=mi>2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=s>&#34;test&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>ListIterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>(</span><span class=n>half</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span> <span class=o>*</span> <span class=mi>10</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>          <span class=n>it</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;remove&#34;</span><span class=o>,</span> <span class=mi>5000</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>ListIterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>(</span><span class=mi>3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>          <span class=n>it</span><span class=o>.</span><span class=na>remove</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>  <span class=o>};</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>List</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// A trick to print out the class name:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Testing &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>getClass</span><span class=o>().</span><span class=na>getName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>tests</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=kt>long</span> <span class=n>t1</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>test</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=kt>long</span> <span class=n>t2</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;: &#34;</span> <span class=o>+</span> <span class=o>(</span><span class=n>t2</span> <span class=o>-</span> <span class=n>t1</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>LinkedList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>内部类 Tester 是一个抽象类，用于为特定的测试提供一个基础类。它包含了一个要在测试开始时打印的字串、一个用于计算测试次数或元素数量的 size 参数、用于初始化字段的一个构造器以及一个抽象方法 test()。test()做的是最实际的测试工作。各种类型的测试都集中到一个地方：tests 数组。我们用继承于 Tester 的不同匿名内部类来初始化该数组。为添加或删除一个测试项目，只需在数组里简单地添加或移去一个内部类定义即可，其他所有工作都是自动进行的。</p><p>首先用元素填充传递给 test()的 List，然后对 tests 数组中的测试计时。由于测试用机器的不同，结果当然也会有所区别。这个程序的宗旨是揭示出不同集合类型的相对性能比较。下面是某一次运行得到的结果：</p><p>类型 获取 反复 插入 删除</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArrayList</span> <span class=mi>110</span> <span class=mi>270</span> <span class=mi>1920</span> <span class=mi>4780</span>
</span></span><span class=line><span class=cl><span class=n>LinkedList</span> <span class=mi>1870</span> <span class=mi>7580</span> <span class=mi>170</span> <span class=mi>110</span>
</span></span></code></pre></div><p>可以看出，在 ArrayList 中进行随机访问（即 get()）以及循环反复是最划得来的；但对于 LinkedList 却是一个不小的开销。但另一方面，在列表中部进行插入和删除操作对于 LinkedList 来说却比 ArrayList 划算得多。我们最好的做法也许是先选择一个 ArrayList 作为自己的默认起点。以后若发现由于大量的插入和删除造成了性能的降低，再考虑换成 LinkedList 不迟。</p><ol start=2><li>决定使用何种 Set</li></ol><p>可在 ArraySet 以及 HashSet 间作出选择，具体取决于 Set 的大小（如果需要从一个 Set 中获得一个顺序列表，请用 TreeSet；注释 ⑧）。下面这个测试程序将有助于大家作出这方面的抉择：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: SetPerformance.java
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>SetPerformance</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>REPS</span> <span class=o>=</span> <span class=mi>200</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>abstract</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Tester</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Tester</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span> <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Set</span> <span class=n>s</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=n>Tester</span><span class=o>[]</span> <span class=n>tests</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;add&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Set</span> <span class=n>s</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=n>s</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>          <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;contains&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Set</span> <span class=n>s</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>          <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>s</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>j</span><span class=o>));</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;iteration&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Set</span> <span class=n>s</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span> <span class=o>*</span> <span class=mi>10</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=n>Iterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>          <span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>  <span class=o>};</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Set</span> <span class=n>s</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// A trick to print out the class name:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Testing &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>s</span><span class=o>.</span><span class=na>getClass</span><span class=o>().</span><span class=na>getName</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; size &#34;</span> <span class=o>+</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>tests</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=kt>long</span> <span class=n>t1</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>test</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=kt>long</span> <span class=n>t2</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;: &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=o>((</span><span class=kt>double</span><span class=o>)(</span><span class=n>t2</span> <span class=o>-</span> <span class=n>t1</span><span class=o>)/(</span><span class=kt>double</span><span class=o>)</span><span class=n>size</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Small:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeSet</span><span class=o>(),</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashSet</span><span class=o>(),</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Medium:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeSet</span><span class=o>(),</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashSet</span><span class=o>(),</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Large:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashSet</span><span class=o>(),</span> <span class=mi>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeSet</span><span class=o>(),</span> <span class=mi>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>⑧：TreeSet 在本书写作时尚未成为一个正式的特性，但在这个例子中可以很轻松地为其添加一个测试。</p><p>最后对 ArraySet 的测试只有 500 个元素，而不是 1000 个，因为它太慢了。</p><p>类型 测试大小 添加 包含 反复</p><p>Type</p><p>Test size</p><p>Add</p><p>Contains</p><p>Iteration</p><p>10</p><p>22.0</p><p>11.0</p><p>16.0</p><p>TreeSet</p><p>100</p><p>22.5</p><p>13.2</p><p>12.1</p><p>1000</p><p>31.1</p><p>18.7</p><p>11.8</p><p>10</p><p>5.0</p><p>6.0</p><p>27.0</p><p>HashSet</p><p>100</p><p>6.6</p><p>6.6</p><p>10.9</p><p>1000</p><p>7.4</p><p>6.6</p><p>9.5</p><p>进行 add()以及 contains()操作时，HashSet 显然要比 ArraySet 出色得多，而且性能明显与元素的多寡关系不大。一般编写程序的时候，几乎永远用不着使用 ArraySet。</p><ol start=3><li>决定使用何种 Map</li></ol><p>选择不同的 Map 实施方案时，注意 Map 的大小对于性能的影响是最大的，下面这个测试程序清楚地阐示了这一点：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: MapPerformance.java
</span></span></span><span class=line><span class=cl><span class=c1>// Demonstrates performance differences in Maps
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MapPerformance</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>REPS</span> <span class=o>=</span> <span class=mi>200</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>Map</span> <span class=nf>fill</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>String</span> <span class=n>x</span> <span class=o>=</span> <span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=n>m</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>x</span><span class=o>,</span> <span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>m</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>abstract</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Tester</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Tester</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span> <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=n>Tester</span><span class=o>[]</span> <span class=n>tests</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;put&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=n>m</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>          <span class=n>fill</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;get&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>          <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>m</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>j</span><span class=o>));</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Tester</span><span class=o>(</span><span class=s>&#34;iteration&#34;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span> <span class=o>*</span> <span class=mi>10</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=n>Iterator</span> <span class=n>it</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=na>entries</span><span class=o>().</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>          <span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>},</span>
</span></span><span class=line><span class=cl>  <span class=o>};</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>(</span><span class=n>Map</span> <span class=n>m</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// A trick to print out the class name:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Testing &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>m</span><span class=o>.</span><span class=na>getClass</span><span class=o>().</span><span class=na>getName</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; size &#34;</span> <span class=o>+</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>fill</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>tests</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=kt>long</span> <span class=n>t1</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>tests</span><span class=o>[</span><span class=n>i</span><span class=o>].</span><span class=na>test</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>      <span class=kt>long</span> <span class=n>t2</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;: &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=o>((</span><span class=kt>double</span><span class=o>)(</span><span class=n>t2</span> <span class=o>-</span> <span class=n>t1</span><span class=o>)/(</span><span class=kt>double</span><span class=o>)</span><span class=n>size</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Small:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>Hashtable</span><span class=o>(),</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashMap</span><span class=o>(),</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeMap</span><span class=o>(),</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Medium:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>Hashtable</span><span class=o>(),</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashMap</span><span class=o>(),</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeMap</span><span class=o>(),</span> <span class=mi>100</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Large:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>HashMap</span><span class=o>(),</span> <span class=mi>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>Hashtable</span><span class=o>(),</span> <span class=mi>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>test</span><span class=o>(</span><span class=k>new</span> <span class=n>TreeMap</span><span class=o>(),</span> <span class=mi>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>由于 Map 的大小是最严重的问题，所以程序的计时测试按 Map 的大小（或容量）来分割时间，以便得到令人信服的测试结果。下面列出一系列结果（在你的机器上可能不同）：</p><p>类型 测试大小 置入 取出 反复
Type</p><p>Test size</p><p>Put</p><p>Get</p><p>Iteration</p><p>10</p><p>11.0</p><p>5.0</p><p>44.0</p><p>Hashtable</p><p>100</p><p>7.7</p><p>7.7</p><p>16.5</p><p>1000</p><p>8.0</p><p>8.0</p><p>14.4</p><p>10</p><p>16.0</p><p>11.0</p><p>22.0</p><p>TreeMap</p><p>100</p><p>25.8</p><p>15.4</p><p>13.2</p><p>1000</p><p>33.8</p><p>20.9</p><p>13.6</p><p>10</p><p>11.0</p><p>6.0</p><p>33.0</p><p>HashMap</p><p>100</p><p>8.2</p><p>7.7</p><p>13.7</p><p>1000</p><p>8.0</p><p>7.8</p><p>11.9</p><p>即使大小为 10，ArrayMap 的性能也要比 HashMap 差——除反复循环时以外。而在使用 Map 时，反复的作用通常并不重要（get()通常是我们时间花得最多的地方）。TreeMap 提供了出色的 put()以及反复时间，但 get()的性能并不佳。但是，我们为什么仍然需要使用 TreeMap 呢？这样一来，我们可以不把它作为 Map 使用，而作为创建顺序列表的一种途径。树的本质在于它总是顺序排列的，不必特别进行排序（它的排序方式马上就要讲到）。一旦填充了一个 TreeMap，就可以调用 keySet()来获得键的一个 Set“景象”。然后用 toArray()产生包含了那些键的一个数组。随后，可用 static 方法 Array.binarySearch()快速查找排好序的数组中的内容。当然，也许只有在 HashMap 的行为不可接受的时候，才需要采用这种做法。因为 HashMap 的设计宗旨就是进行快速的检索操作。最后，当我们使用 Map 时，首要的选择应该是 HashMap。只有在极少数情况下才需要考虑其他方法。
此外，在上面那张表里，有另一个性能问题没有反映出来。下述程序用于测试不同类型 Map 的创建速度：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: MapCreation.java
</span></span></span><span class=line><span class=cl><span class=c1>// Demonstrates time differences in Map creation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MapCreation</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=kt>long</span> <span class=n>REPS</span> <span class=o>=</span> <span class=mi>100000</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>long</span> <span class=n>t1</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;Hashtable&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>long</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=n>Hashtable</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>long</span> <span class=n>t2</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;: &#34;</span> <span class=o>+</span> <span class=o>(</span><span class=n>t2</span> <span class=o>-</span> <span class=n>t1</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>t1</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;TreeMap&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>long</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=n>TreeMap</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>t2</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;: &#34;</span> <span class=o>+</span> <span class=o>(</span><span class=n>t2</span> <span class=o>-</span> <span class=n>t1</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>t1</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;HashMap&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>long</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>REPS</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=n>HashMap</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>t2</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;: &#34;</span> <span class=o>+</span> <span class=o>(</span><span class=n>t2</span> <span class=o>-</span> <span class=n>t1</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>在写这个程序期间，TreeMap 的创建速度比其他两种类型明显快得多（但你应亲自尝试一下，因为据说新版本可能会改善 ArrayMap 的性能）。考虑到这方面的原因，同时由于前述 TreeMap 出色的 put()性能，所以如果需要创建大量 Map，而且只有在以后才需要涉及大量检索操作，那么最佳的策略就是：创建和填充 TreeMap；以后检索量增大的时候，再将重要的 TreeMap 转换成 HashMap——使用 HashMap(Map)构造器。同样地，只有在事实证明确实存在性能瓶颈后，才应关心这些方面的问题——先用起来，再根据需要加快速度。</p><p>8.7.6 未支持的操作</p><p>利用 static（静态）数组 Arrays.toList()，也许能将一个数组转换成 List，如下所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Unsupported.java
</span></span></span><span class=line><span class=cl><span class=c1>// Sometimes methods defined in the Collection
</span></span></span><span class=line><span class=cl><span class=c1>// interfaces don&#39;t work!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Unsupported</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kd>static</span> <span class=n>String</span><span class=o>[]</span> <span class=n>s</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;one&#34;</span><span class=o>,</span> <span class=s>&#34;two&#34;</span><span class=o>,</span> <span class=s>&#34;three&#34;</span><span class=o>,</span> <span class=s>&#34;four&#34;</span><span class=o>,</span> <span class=s>&#34;five&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;six&#34;</span><span class=o>,</span> <span class=s>&#34;seven&#34;</span><span class=o>,</span> <span class=s>&#34;eight&#34;</span><span class=o>,</span> <span class=s>&#34;nine&#34;</span><span class=o>,</span> <span class=s>&#34;ten&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>  <span class=o>};</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>List</span> <span class=n>a</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>toList</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>List</span> <span class=n>a2</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>toList</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>String</span><span class=o>[]</span> <span class=o>{</span> <span class=n>s</span><span class=o>[</span><span class=mi>3</span><span class=o>],</span> <span class=n>s</span><span class=o>[</span><span class=mi>4</span><span class=o>],</span> <span class=n>s</span><span class=o>[</span><span class=mi>5</span><span class=o>]</span> <span class=o>});</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span> <span class=c1>// Iteration
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;a.contains(&#34;</span> <span class=o>+</span> <span class=n>s</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span> <span class=o>+</span> <span class=s>&#34;) = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=n>s</span><span class=o>[</span><span class=mi>0</span><span class=o>]));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;a.containsAll(a2) = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>containsAll</span><span class=o>(</span><span class=n>a2</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;a.isEmpty() = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;a.indexOf(&#34;</span> <span class=o>+</span> <span class=n>s</span><span class=o>[</span><span class=mi>5</span><span class=o>]</span> <span class=o>+</span> <span class=s>&#34;) = &#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>indexOf</span><span class=o>(</span><span class=n>s</span><span class=o>[</span><span class=mi>5</span><span class=o>]));</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Traverse backwards:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ListIterator</span> <span class=n>lit</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>(</span><span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=o>(</span><span class=n>lit</span><span class=o>.</span><span class=na>hasPrevious</span><span class=o>())</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>lit</span><span class=o>.</span><span class=na>previous</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Set the elements to different values:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>a</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>set</span><span class=o>(</span><span class=n>i</span><span class=o>,</span> <span class=s>&#34;47&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Compiles, but won&#39;t run:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>lit</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;X&#34;</span><span class=o>);</span> <span class=c1>// Unsupported operation
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span> <span class=c1>// Unsupported
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;eleven&#34;</span><span class=o>);</span> <span class=c1>// Unsupported
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>a2</span><span class=o>);</span> <span class=c1>// Unsupported
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>retainAll</span><span class=o>(</span><span class=n>a2</span><span class=o>);</span> <span class=c1>// Unsupported
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>s</span><span class=o>[</span><span class=mi>0</span><span class=o>]);</span> <span class=c1>// Unsupported
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>a</span><span class=o>.</span><span class=na>removeAll</span><span class=o>(</span><span class=n>a2</span><span class=o>);</span> <span class=c1>// Unsupported
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>从中可以看出，实际只实现了 Collection 和 List 接口的一部分。剩余的方法导致了不受欢迎的一种情况，名为 UnsupportedOperationException。在下一章里，我们会讲述异常的详细情况，但在这里有必要进行一下简单说明。这里的关键在于“集合接口”，以及新集合库内的另一些接口，它们都包含了“可选的”方法。在实现那些接口的集合类中，或者提供、或者没有提供对那些方法的支持。若调用一个未获支持的方法，就会导致一个 UnsupportedOperationException（操作未支持异常），这表明出现了一个编程错误。</p><p>大家或许会觉得奇怪，不是说“接口”和基础类最大的“卖点”就是它们许诺这些方法能产生一些有意义的行为吗？上述异常破坏了那个许诺——它调用的一部分方法不仅不能产生有意义的行为，而且还会中止程序的运行。在这些情况下，类型的所谓安全保证似乎显得一钱不值！但是，情况并没有想象的那么坏。通过 Collection，List，Set 或者 Map，编译器仍然限制我们只能调用那个接口中的方法，所以它和 Smalltalk 还是存在一些区别的（在 Smalltalk 中，可为任何对象调用任何方法，而且只有在运行程序时才知道这些调用是否可行）。除此以外，以 Collection 作为自变量的大多数方法只能从那个集合中读取数据——Collection 的所有“read”方法都不是可选的。</p><p>这样一来，系统就可避免在设计期间出现接口的冲突。而在集合库的其他设计方案中，最终经常都会得到数量过多的接口，用它们描述基本方案的每一种变化形式，所以学习和掌握显得非常困难。有些时候，甚至难于捕捉接口中的所有特殊情况，因为人们可能设计出任何新接口。但 Java 的“不支持的操作”方法却达到了新集合库的一个重要设计目标：易于学习和使用。但是，为了使这一方法真正有效，却需满足下述条件：</p><p>(1) UnsupportedOperationException 必须属于一种“非常”事件。也就是说，对于大多数类来说，所有操作都应是可行的。只有在一些特殊情况下，一、两个操作才可能未获支持。新集合库满足了这一条件，因为绝大多数时候用到的类——ArrayList，LinkedList，HashList 和 HashMap，以及其他集合方案——都提供了对所有操作的支持。但是，如果想新建一个集合，同时不想为集合接口中的所有方法都提供有意义的定义，同时令其仍与现有库配合，这种设计方法也确实提供了一个“后门”可以利用。</p><p>(2) 若一个操作未获支持，那么 UnsupportedOperationException（未支持的操作异常）极有可能在实现期间出现，则不是在产品已交付给客户以后才会出现。它毕竟指出的是一个编程错误——不正确地使用了一个类。这一点不能十分确定，通过也可以看出这种方案的“试验”特征——只有经过多次试验，才能找出最理想的工作方式。</p><p>在上面的例子中，Arrays.toList()产生了一个 List（列表），该列表是由一个固定长度的数组后推出来的。因此唯一能够支持的就是那些不改变数组长度的操作。在另一方面，若请求一个新接口表达不同种类的行为（可能叫作“FixedSizeList”——固定长度列表），就有遭遇更大的复杂程度的危险。这样一来，以后试图使用库的时候，很快就会发现自己不知从何处下手。</p><p>对那些采用 Collection，List，Set 或者 Map 作为参数的方法，它们的文档应当指出哪些可选的方法是必须实现的。举个例子来说，排序要求实现 set()和 Iterator.set()方法，但不包括 add()和 remove()。</p><p>8.7.7 排序和搜索</p><p>Java 1.2 添加了自己的一套实用工具，可用来对数组或列表进行排列和搜索。这些工具都属于两个新类的“静态”方法。这两个类分别是用于排序和搜索数组的 Arrays，以及用于排序和搜索列表的 Collections。</p><ol><li>数组</li></ol><p>Arrays 类为所有基本数据类型的数组提供了一个重载的 sort()和 binarySearch()，它们亦可用于 String 和 Object。下面这个例子显示出如何排序和搜索一个字节数组（其他所有基本数据类型都是类似的）以及一个 String 数组：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Array1.java
</span></span></span><span class=line><span class=cl><span class=c1>// Testing the sorting &amp; searching in Arrays
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Array1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>Random</span> <span class=n>r</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=n>String</span> <span class=n>ssource</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;abcdefghijklmnopqrstuvwxyz&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>static</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>src</span> <span class=o>=</span> <span class=n>ssource</span><span class=o>.</span><span class=na>toCharArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a random String
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>randString</span><span class=o>(</span><span class=kt>int</span> <span class=n>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span><span class=o>[]</span> <span class=n>buf</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>char</span><span class=o>[</span><span class=n>length</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>rnd</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>rnd</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>abs</span><span class=o>(</span><span class=n>r</span><span class=o>.</span><span class=na>nextInt</span><span class=o>())</span> <span class=o>%</span> <span class=n>src</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>      <span class=n>buf</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>src</span><span class=o>[</span><span class=n>rnd</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>buf</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a random array of Strings:
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>public</span> <span class=kd>static</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span><span class=o>[]</span> <span class=nf>randStrings</span><span class=o>(</span><span class=kt>int</span> <span class=n>length</span><span class=o>,</span> <span class=kt>int</span> <span class=n>size</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span><span class=o>[]</span> <span class=n>s</span> <span class=o>=</span> <span class=k>new</span> <span class=n>String</span><span class=o>[</span><span class=n>size</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>s</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>randString</span><span class=o>(</span><span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>s</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=o>(</span><span class=kt>byte</span><span class=o>[]</span> <span class=n>b</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>b</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>b</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>s</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>s</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>s</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>byte</span><span class=o>[]</span> <span class=n>b</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>byte</span><span class=o>[</span><span class=mi>15</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=n>r</span><span class=o>.</span><span class=na>nextBytes</span><span class=o>(</span><span class=n>b</span><span class=o>);</span> <span class=c1>// Fill with random bytes
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>print</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>loc</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>binarySearch</span><span class=o>(</span><span class=n>b</span><span class=o>,</span> <span class=n>b</span><span class=o>[</span><span class=mi>10</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Location of &#34;</span> <span class=o>+</span> <span class=n>b</span><span class=o>[</span><span class=mi>10</span><span class=o>]</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34; = &#34;</span> <span class=o>+</span> <span class=n>loc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Test String sort &amp; search:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>String</span><span class=o>[]</span> <span class=n>s</span> <span class=o>=</span> <span class=n>randStrings</span><span class=o>(</span><span class=mi>4</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>loc</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>binarySearch</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>s</span><span class=o>[</span><span class=mi>4</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Location of &#34;</span> <span class=o>+</span> <span class=n>s</span><span class=o>[</span><span class=mi>4</span><span class=o>]</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34; = &#34;</span> <span class=o>+</span> <span class=n>loc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>类的第一部分包含了用于产生随机字串对象的实用工具，可供选择的随机字母保存在一个字符数组中。randString()返回一个任意长度的字串；而 readStrings()创建随机字串的一个数组，同时给定每个字串的长度以及希望的数组大小。两个 print()方法简化了对示范数组的显示。在 main()中，Random.nextBytes()用随机选择的字节填充数组自变量（没有对应的 Random 方法用于创建其他基本数据类型的数组）。获得一个数组后，便可发现为了执行 sort()或者 binarySearch()，只需发出一次方法调用即可。与 binarySearch()有关的还有一个重要的警告：若在执行一次 binarySearch()之前不调用 sort()，便会发生不可预测的行为，其中甚至包括无限循环。</p><p>对 String 的排序以及搜索是相似的，但在运行程序的时候，我们会注意到一个有趣的现象：排序遵守的是字典顺序，亦即大写字母在字符集中位于小写字母的前面。因此，所有大写字母都位于列表的最前面，后面再跟上小写字母——Z 居然位于 a 的前面。似乎连电话簿也是这样排序的。</p><ol start=2><li>可比较与比较器</li></ol><p>但假若我们不满足这一排序方式，又该如何处理呢？例如本书后面的索引，如果必须对以 A 或 a 开头的词条分别到两处地方查看，那么肯定会使读者颇不耐烦。</p><p>若想对一个 Object 数组进行排序，那么必须解决一个问题。根据什么来判定两个 Object 的顺序呢？不幸的是，最初的 Java 设计者并不认为这是一个重要的问题，否则就已经在根类 Object 里定义它了。这样造成的一个后果便是：必须从外部进行 Object 的排序，而且新的集合库提供了实现这一操作的标准方式（最理想的是在 Object 里定义它）。</p><p>针对 Object 数组（以及 String，它当然属于 Object 的一种），可使用一个 sort()，并令其接纳另一个参数：实现了 Comparator 接口（即“比较器”接口，新集合库的一部分）的一个对象，并用它的单个 compare()方法进行比较。这个方法将两个准备比较的对象作为自己的参数使用——若第一个参数小于第二个，返回一个负整数；若相等，返回零；若第一个参数大于第二个，则返回正整数。基于这一规则，上述例子的 String 部分便可重新写过，令其进行真正按字母顺序的排序：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: AlphaComp.java
</span></span></span><span class=line><span class=cl><span class=c1>// Using Comparator to perform an alphabetic sort
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AlphaComp</span> <span class=kd>implements</span> <span class=n>Comparator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>Object</span> <span class=n>o1</span><span class=o>,</span> <span class=n>Object</span> <span class=n>o2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Assume it&#39;s used only for Strings...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>String</span> <span class=n>s1</span> <span class=o>=</span> <span class=o>((</span><span class=n>String</span><span class=o>)</span><span class=n>o1</span><span class=o>).</span><span class=na>toLowerCase</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>s2</span> <span class=o>=</span> <span class=o>((</span><span class=n>String</span><span class=o>)</span><span class=n>o2</span><span class=o>).</span><span class=na>toLowerCase</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>s1</span><span class=o>.</span><span class=na>compareTo</span><span class=o>(</span><span class=n>s2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span><span class=o>[]</span> <span class=n>s</span> <span class=o>=</span> <span class=n>Array1</span><span class=o>.</span><span class=na>randStrings</span><span class=o>(</span><span class=mi>4</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Array1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>AlphaComp</span> <span class=n>ac</span> <span class=o>=</span> <span class=k>new</span> <span class=n>AlphaComp</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>ac</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Array1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Must use the Comparator to search, also:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>loc</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>binarySearch</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>s</span><span class=o>[</span><span class=mi>3</span><span class=o>],</span> <span class=n>ac</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Location of &#34;</span> <span class=o>+</span> <span class=n>s</span><span class=o>[</span><span class=mi>3</span><span class=o>]</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>     <span class=s>&#34; = &#34;</span> <span class=o>+</span> <span class=n>loc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>通过造型为 String，compare()方法会进行“暗示”性的测试，保证自己操作的只能是 String 对象——运行期系统会捕获任何差错。将两个字串都强迫换成小写形式后，String.compareTo()方法会产生预期的结果。</p><p>若用自己的 Comparator 来进行一次 sort()，那么在使用 binarySearch()时必须使用那个相同的 Comparator。</p><p>Arrays 类提供了另一个 sort()方法，它会采用单个自变量：一个 Object 数组，但没有 Comparator。这个 sort()方法也必须用同样的方式来比较两个 Object。通过实现 Comparable 接口，它采用了赋予一个类的“自然比较方法”。这个接口含有单独一个方法——compareTo()，能分别根据它小于、等于或者大于自变量而返回负数、零或者正数，从而实现对象的比较。下面这个例子简单地阐示了这一点：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: CompClass.java
</span></span></span><span class=line><span class=cl><span class=c1>// A class that implements Comparable
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>CompClass</span> <span class=kd>implements</span> <span class=n>Comparable</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>int</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>CompClass</span><span class=o>(</span><span class=kt>int</span> <span class=n>ii</span><span class=o>)</span> <span class=o>{</span> <span class=n>i</span> <span class=o>=</span> <span class=n>ii</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compareTo</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Implicitly tests for correct type:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>argi</span> <span class=o>=</span> <span class=o>((</span><span class=n>CompClass</span><span class=o>)</span><span class=n>o</span><span class=o>).</span><span class=na>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=o>(</span><span class=n>i</span> <span class=o>==</span> <span class=n>argi</span><span class=o>)</span> <span class=k>return</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=o>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>argi</span><span class=o>)</span> <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=o>(</span><span class=n>Object</span><span class=o>[]</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>a</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>+</span> <span class=s>&#34; &#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span> <span class=k>return</span> <span class=n>i</span> <span class=o>+</span> <span class=s>&#34;&#34;</span><span class=o>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>CompClass</span><span class=o>[]</span> <span class=n>a</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CompClass</span><span class=o>[</span><span class=mi>20</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>a</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CompClass</span><span class=o>(</span>
</span></span><span class=line><span class=cl>        <span class=o>(</span><span class=kt>int</span><span class=o>)(</span><span class=n>Math</span><span class=o>.</span><span class=na>random</span><span class=o>()</span> <span class=o>*</span><span class=mi>100</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>loc</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>binarySearch</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>a</span><span class=o>[</span><span class=mi>3</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Location of &#34;</span> <span class=o>+</span> <span class=n>a</span><span class=o>[</span><span class=mi>3</span><span class=o>]</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>     <span class=s>&#34; = &#34;</span> <span class=o>+</span> <span class=n>loc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>当然，我们的 compareTo()方法亦可根据实际情况增大复杂程度。</p><ol start=3><li>列表</li></ol><p>可用与数组相同的形式排序和搜索一个列表（List）。用于排序和搜索列表的静态方法包含在类 Collections 中，但它们拥有与 Arrays 中差不多的签名：sort(List)用于对一个实现了 Comparable 的对象列表进行排序；binarySearch(List,Object)用于查找列表中的某个对象；sort(List,Comparator)利用一个“比较器”对一个列表进行排序；</p><p>而 binarySearch(List,Object,Comparator)则用于查找那个列表中的一个对象（注释 ⑨）。下面这个例子利用了预先定义好的 CompClass 和 AlphaComp 来示范 Collections 中的各种排序工具：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: ListSort.java
</span></span></span><span class=line><span class=cl><span class=c1>// Sorting and searching Lists with &#39;Collections&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ListSort</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=kt>int</span> <span class=n>SZ</span> <span class=o>=</span> <span class=mi>20</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Using &#34;natural comparison method&#34;:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>List</span> <span class=n>a</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>SZ</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>a</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>CompClass</span><span class=o>(</span>
</span></span><span class=line><span class=cl>        <span class=o>(</span><span class=kt>int</span><span class=o>)(</span><span class=n>Math</span><span class=o>.</span><span class=na>random</span><span class=o>()</span> <span class=o>*</span><span class=mi>100</span><span class=o>)));</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collections</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Object</span> <span class=n>find</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>SZ</span><span class=o>/</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>loc</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>binarySearch</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>find</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Location of &#34;</span> <span class=o>+</span> <span class=n>find</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>     <span class=s>&#34; = &#34;</span> <span class=o>+</span> <span class=n>loc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Using a Comparator:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>List</span> <span class=n>b</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>SZ</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>      <span class=n>b</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>Array1</span><span class=o>.</span><span class=na>randString</span><span class=o>(</span><span class=mi>4</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>AlphaComp</span> <span class=n>ac</span> <span class=o>=</span> <span class=k>new</span> <span class=n>AlphaComp</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Collections</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>b</span><span class=o>,</span> <span class=n>ac</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>b</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>find</span> <span class=o>=</span> <span class=n>b</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>SZ</span><span class=o>/</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Must use the Comparator to search, also:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>loc</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>binarySearch</span><span class=o>(</span><span class=n>b</span><span class=o>,</span> <span class=n>find</span><span class=o>,</span> <span class=n>ac</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Location of &#34;</span> <span class=o>+</span> <span class=n>find</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>     <span class=s>&#34; = &#34;</span> <span class=o>+</span> <span class=n>loc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>⑨：在本书写作时，已宣布了一个新的 Collections.stableSort()，可用它进行合并式排序，但还没有它的测试版问世。</p><p>这些方法的用法与在 Arrays 中的用法是完全一致的，只是用一个列表代替了数组。</p><p>TreeMap 也必须根据 Comparable 或者 Comparator 对自己的对象进行排序。</p><p>8.7.8 实用工具</p><p>Collections 类中含有其他大量有用的实用工具：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>enumeration</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Produces</span> <span class=n>an</span> <span class=n>old</span><span class=o>-</span><span class=n>style</span> <span class=n>Enumeration</span> <span class=k>for</span> <span class=n>the</span> <span class=n>argument</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>max</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>min</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Produces</span> <span class=n>the</span> <span class=n>maximum</span> <span class=n>or</span> <span class=n>minimum</span> <span class=n>element</span> <span class=n>in</span> <span class=n>the</span> <span class=n>argument</span> <span class=n>using</span> <span class=n>the</span> <span class=n>natural</span> <span class=n>comparison</span> <span class=n>method</span> <span class=n>of</span> <span class=n>the</span> <span class=n>objects</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>max</span><span class=o>(</span><span class=n>Collection</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>min</span><span class=o>(</span><span class=n>Collection</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Produces</span> <span class=n>the</span> <span class=n>maximum</span> <span class=n>or</span> <span class=n>minimum</span> <span class=n>element</span> <span class=n>in</span> <span class=n>the</span> <span class=n>Collection</span> <span class=n>using</span> <span class=n>the</span> <span class=n>Comparator</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>nCopies</span><span class=o>(</span><span class=kt>int</span> <span class=n>n</span><span class=o>,</span> <span class=n>Object</span> <span class=n>o</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Returns</span> <span class=n>an</span> <span class=n>immutable</span> <span class=n>List</span> <span class=n>of</span> <span class=n>size</span> <span class=n>n</span> <span class=n>whose</span> <span class=n>handles</span> <span class=n>all</span> <span class=n>point</span> <span class=n>to</span> <span class=n>o</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>subList</span><span class=o>(</span><span class=n>List</span><span class=o>,</span> <span class=kt>int</span> <span class=n>min</span><span class=o>,</span> <span class=kt>int</span> <span class=n>max</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Returns</span> <span class=n>a</span> <span class=k>new</span> <span class=n>List</span> <span class=n>backed</span> <span class=n>by</span> <span class=n>the</span> <span class=n>specified</span> <span class=n>argument</span> <span class=n>List</span> <span class=n>that</span> <span class=n>is</span> <span class=n>a</span> <span class=n>window</span> <span class=n>into</span> <span class=n>that</span> <span class=n>argument</span> <span class=n>with</span> <span class=n>indexes</span> <span class=n>starting</span> <span class=n>at</span> <span class=n>min</span> <span class=n>and</span> <span class=n>stopping</span> <span class=n>just</span> <span class=n>before</span> <span class=n>max</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=err>```</span> <span class=n>java</span>
</span></span><span class=line><span class=cl><span class=nf>enumeration</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span> <span class=err>为自变量产生原始风格的</span><span class=n>Enumeration</span><span class=err>（枚举）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>max</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span><span class=err>，</span><span class=n>min</span><span class=o>(</span><span class=n>Collection</span><span class=o>)</span> <span class=err>在自变量中用集合内对象的自然比较方法产生最大或最小元素</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>max</span><span class=o>(</span><span class=n>Collection</span><span class=o>,</span><span class=n>Comparator</span><span class=o>)</span><span class=err>，</span><span class=n>min</span><span class=o>(</span><span class=n>Collection</span><span class=o>,</span><span class=n>Comparator</span><span class=o>)</span> <span class=err>在集合内用比较器产生最大或最小元素</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>nCopies</span><span class=o>(</span><span class=kt>int</span> <span class=n>n</span><span class=o>,</span> <span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=err>返回长度为</span><span class=n>n</span><span class=err>的一个不可变列表，它的所有指针均指向</span><span class=n>o</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>subList</span><span class=o>(</span><span class=n>List</span><span class=o>,</span><span class=kt>int</span> <span class=n>min</span><span class=o>,</span><span class=kt>int</span> <span class=n>max</span><span class=o>)</span> <span class=err>返回由指定参数列表后推得到的一个新列表。可将这个列表想象成一个“窗口”，它自索引为</span><span class=n>min</span><span class=err>的地方开始，正好结束于</span><span class=n>max</span><span class=err>的前面</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>注意</span><span class=n>min</span><span class=o>()</span><span class=err>和</span><span class=n>max</span><span class=o>()</span><span class=err>都是随同</span><span class=n>Collection</span><span class=err>对象工作的，而非随同</span><span class=n>List</span><span class=err>，所以不必担心</span><span class=n>Collection</span><span class=err>是否需要排序（就象早先指出的那样，在执行一次</span><span class=n>binarySearch</span><span class=o>()</span><span class=err>——即二进制搜索——之前，必须对一个</span><span class=n>List</span><span class=err>或者一个数组执行</span><span class=n>sort</span><span class=o>()</span><span class=err>）。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mf>1.</span> <span class=err>使</span><span class=n>Collection</span><span class=err>或</span><span class=n>Map</span><span class=err>不可修改</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>通常，创建</span><span class=n>Collection</span><span class=err>或</span><span class=n>Map</span><span class=err>的一个“只读”版本显得更有利一些。</span><span class=n>Collections</span><span class=err>类允许我们达到这个目标，方法是将原始容器传递进入一个方法，并令其传回一个只读版本。这个方法共有四种变化形式，分别用于</span><span class=n>Collection</span><span class=err>（如果不想把集合当作一种更特殊的类型对待）、</span><span class=n>List</span><span class=err>、</span><span class=n>Set</span><span class=err>以及</span><span class=n>Map</span><span class=err>。下面这个例子演示了为它们分别构建只读版本的正确方法：</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>```</span> <span class=n>java</span>
</span></span><span class=line><span class=cl><span class=c1>//: ReadOnly.java
</span></span></span><span class=line><span class=cl><span class=c1>// Using the Collections.unmodifiable methods
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ReadOnly</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection</span> <span class=n>c</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>c</span><span class=o>);</span> <span class=c1>// Insert useful data
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>c</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableCollection</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>c</span><span class=o>);</span> <span class=c1>// Reading is OK
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//! c.add(&#34;one&#34;); // Can&#39;t change it
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>List</span> <span class=n>a</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableList</span><span class=o>(</span><span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>ListIterator</span> <span class=n>lit</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=na>listIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>lit</span><span class=o>.</span><span class=na>next</span><span class=o>());</span> <span class=c1>// Reading OK
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//! lit.add(&#34;one&#34;); // Can&#39;t change it
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>Set</span> <span class=n>s</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashSet</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableSet</span><span class=o>(</span><span class=n>s</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>s</span><span class=o>);</span> <span class=c1>// Reading OK
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//! s.add(&#34;one&#34;); // Can&#39;t change it
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span> <span class=n>m</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Map1</span><span class=o>.</span><span class=na>fill</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=n>Map1</span><span class=o>.</span><span class=na>testData1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>m</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableMap</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Map1</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=n>m</span><span class=o>);</span> <span class=c1>// Reading OK
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//! m.put(&#34;Ralph&#34;, &#34;Howdy!&#34;);
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>对于每种情况，在将其正式变为只读以前，都必须用有有效的数据填充容器。一旦载入成功，最佳的做法就是用“不可修改”调用产生的指针替换现有的指针。这样做可有效避免将其变成不可修改后不慎改变其中的内容。在另一方面，该工具也允许我们在一个类中将能够修改的容器保持为 private 状态，并可从一个方法调用中返回指向那个容器的一个只读指针。这样一来，虽然我们可在类里修改它，但其他任何人都只能读。</p><p>为特定类型调用“不可修改”的方法不会造成编译期间的检查，但一旦发生任何变化，对修改特定容器的方法的调用便会产生一个 UnsupportedOperationException 异常。</p><ol start=2><li>Collection 或 Map 的同步</li></ol><p>synchronized 关键字是“多线程”机制一个非常重要的部分。我们到第 14 章才会对这一机制作深入的探讨。在这儿，大家只需注意到 Collections 类提供了对整个容器进行自动同步的一种途径。它的语法与“不可修改”的方法是类似的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//: Synchronization.java
</span></span></span><span class=line><span class=cl><span class=c1>// Using the Collections.synchronized methods
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>c08.newcollections</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Synchronization</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Collection</span> <span class=n>c</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>      <span class=n>Collections</span><span class=o>.</span><span class=na>synchronizedCollection</span><span class=o>(</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>ArrayList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>List</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>synchronizedList</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=n>ArrayList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>Set</span> <span class=n>s</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>synchronizedSet</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=n>HashSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span> <span class=n>m</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>synchronizedMap</span><span class=o>(</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=n>HashMap</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=c1>///:~
</span></span></span></code></pre></div><p>在这种情况下，我们通过适当的“同步”方法直接传递新容器；这样做可避免不慎暴露出未同步的版本。</p><p>新集合也提供了能防止多个进程同时修改一个容器内容的机制。若在一个容器里反复，同时另一些进程介入，并在那个容器中插入、删除或修改一个对象，便会面临发生冲突的危险。我们可能已传递了那个对象，可能它位位于我们前面，可能容器的大小在我们调用 size()后已发生了收缩——我们面临各种各样可能的危险。针对这个问题，新的集合库集成了一套解决的机制，能查出除我们的进程自己需要负责的之外的、对容器的其他任何修改。若探测到有其他方面也准备修改容器，便会立即产生一个 ConcurrentModificationException（并发修改异常）。我们将这一机制称为“立即失败”——它并不用更复杂的算法在“以后”侦测问题，而是“立即”产生异常。</p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.6-%E9%80%9A%E7%94%A8%E9%9B%86%E5%90%88%E5%BA%93/ rel=next>8.6 通用集合库</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/8.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.8-%E6%80%BB%E7%BB%93/ rel=prev>8.8 总结</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>