<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="15.6 Java 与 CGI 的沟通 Java 程序可向一个服务器发出一个 CGI 请求，这与 HTML 表单页没什么两样。而且和 HTML 页一样，这个请求既可以设为 GET（下载），亦可设为 POST（上传）。除此以外，Java 程序还可拦截 CGI 程序的输出，所以不" />

  
  <link rel="alternate" hreflang="zh" href="https://ng-tech.icu/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.6-java%E4%B8%8Ecgi%E7%9A%84%E6%B2%9F%E9%80%9A/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.0d97305106da5efa530e28b021b4c580.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-40NYXJ8823");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://ng-tech.icu/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.6-java%E4%B8%8Ecgi%E7%9A%84%E6%B2%9F%E9%80%9A/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@wx-chevalier" />
    <meta property="twitter:creator" content="@wx-chevalier" />
  
  <meta property="og:site_name" content="Next-gen Tech Edu" />
  <meta property="og:url" content="https://ng-tech.icu/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.6-java%E4%B8%8Ecgi%E7%9A%84%E6%B2%9F%E9%80%9A/" />
  <meta property="og:title" content="15.6 Java与CGI的沟通 | Next-gen Tech Edu" />
  <meta property="og:description" content="15.6 Java 与 CGI 的沟通 Java 程序可向一个服务器发出一个 CGI 请求，这与 HTML 表单页没什么两样。而且和 HTML 页一样，这个请求既可以设为 GET（下载），亦可设为 POST（上传）。除此以外，Java 程序还可拦截 CGI 程序的输出，所以不" /><meta property="og:image" content="https://ng-tech.icu/media/sharing.png" />
    <meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
    
  

  



  

  

  





  <title>15.6 Java与CGI的沟通 | Next-gen Tech Edu</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="38f331822145f665b60e37ad24676edf" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/books-gallery"><span>笔记（万篇）</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#knowledge-map"><span>知识图谱</span></a>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>实验室</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/galaxy-home/gh-craft"><span>Craft 方块世界</span></a>
              
                <a class="dropdown-item" href="/galaxy-home/glossary-cards"><span>3D 知识卡牌</span></a>
              
            </div>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>其他阅读渠道</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png"></img><span>知乎</span></a>
              
                <a class="dropdown-item" href="https://segmentfault.com/blog/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png"></img><span>SegmentFault</span></a>
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png"></img><span>掘金</span></a>
              
            </div>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/wx-chevalier" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        
        
        <div></div>
        
        <style>
        @media only screen and (max-width: 600px) {
          .jimmysong-template {
            display: none!important;
          }
        }
        </style>
        
        <li class="jimmysong-template" style="color: white;font-size: 12px;">
          <a href="https://jimmysong.io" style="color: white">By Jimmy Song's Template</a>
        </li>
      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">
<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          15.网络编程
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li style="display: inline-flex">
          <a style="cursor: pointer;" onclick="window.history.back()">
            <i class="fas fa-arrow-left pr-1"></i>
            Back
          </a>
          <span>|</span>
          <a href="/books/">
            <i class="fa-solid fa-house" style="margin-right: 4px"></i>
            Books
          </a>
        </li>
      </ul>

      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id775c4a5ac3467743f5bb8deee7e9fdbf&#34;)" href="#id775c4a5ac3467743f5bb8deee7e9fdbf" aria-expanded="false" aria-controls="id775c4a5ac3467743f5bb8deee7e9fdbf" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/">Think in Java</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id775c4a5ac3467743f5bb8deee7e9fdbf" aria-expanded="false" aria-controls="id775c4a5ac3467743f5bb8deee7e9fdbf">
    
    <i class="fa-solid fa-angle-down" id="caret-id775c4a5ac3467743f5bb8deee7e9fdbf"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id775c4a5ac3467743f5bb8deee7e9fdbf">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id525871933f7d0cc39b215ee01317566e&#34;)" href="#id525871933f7d0cc39b215ee01317566e" aria-expanded="false" aria-controls="id525871933f7d0cc39b215ee01317566e" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/">01.对象入门</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id525871933f7d0cc39b215ee01317566e" aria-expanded="false" aria-controls="id525871933f7d0cc39b215ee01317566e">
    
        <i class="fa-solid fa-angle-right" id="caret-id525871933f7d0cc39b215ee01317566e"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id525871933f7d0cc39b215ee01317566e">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.1-%E6%8A%BD%E8%B1%A1%E7%9A%84%E8%BF%9B%E6%AD%A5/">1.1 抽象的进步</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.10-%E6%B0%B8%E4%B9%85%E6%80%A7/">1.10 永久性</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.11-java%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91/">1.11 Java和因特网</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.12-%E5%88%86%E6%9E%90%E5%92%8C%E8%AE%BE%E8%AE%A1/">1.12 分析和设计</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.13-java%E8%BF%98%E6%98%AFc&#43;&#43;/">1.13 Java还是C&#43;&#43;</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.2-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8E%A5%E5%8F%A3/">1.2 对象的接口</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.3-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88%E7%9A%84%E9%9A%90%E8%97%8F/">1.3 实现方案的隐藏</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.4-%E6%96%B9%E6%A1%88%E7%9A%84%E9%87%8D%E5%A4%8D%E4%BD%BF%E7%94%A8/">1.4 方案的重复使用</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.5-%E7%BB%A7%E6%89%BF%E9%87%8D%E6%96%B0%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3/">1.5 继承：重新使用接口</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.6-%E5%A4%9A%E6%80%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BA%92%E6%8D%A2%E4%BD%BF%E7%94%A8/">1.6 多态对象的互换使用</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%AD%98%E5%9C%A8%E6%97%B6%E9%97%B4/">1.7 对象的创建和存在时间</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/01.%E5%AF%B9%E8%B1%A1%E5%85%A5%E9%97%A8/1.9-%E5%A4%9A%E7%BA%BF%E7%A8%8B/">1.9 多线程</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id6e74b2031f353ee0d7c0be1f38b16030&#34;)" href="#id6e74b2031f353ee0d7c0be1f38b16030" aria-expanded="false" aria-controls="id6e74b2031f353ee0d7c0be1f38b16030" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/">02.一切都是对象</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id6e74b2031f353ee0d7c0be1f38b16030" aria-expanded="false" aria-controls="id6e74b2031f353ee0d7c0be1f38b16030">
    
        <i class="fa-solid fa-angle-right" id="caret-id6e74b2031f353ee0d7c0be1f38b16030"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id6e74b2031f353ee0d7c0be1f38b16030">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.1-%E7%94%A8%E6%8C%87%E9%92%88%E6%93%8D%E7%BA%B5%E5%AF%B9%E8%B1%A1/">2.1 用指针操纵对象</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.10-%E6%80%BB%E7%BB%93/">2.10 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.11-%E7%BB%83%E4%B9%A0/">2.11 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.2-%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E5%BF%85%E9%A1%BB%E5%88%9B%E5%BB%BA/">2.2 所有对象都必须创建</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.3-%E7%BB%9D%E5%AF%B9%E4%B8%8D%E8%A6%81%E6%B8%85%E9%99%A4%E5%AF%B9%E8%B1%A1/">2.3 绝对不要清除对象</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.4-%E6%96%B0%E5%BB%BA%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%B1%BB/">2.4 新建数据类型：类</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.5-%E6%96%B9%E6%B3%95%E8%87%AA%E5%8F%98%E9%87%8F%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC/">2.5 方法、自变量和返回值</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.6-%E6%9E%84%E5%BB%BAjava%E7%A8%8B%E5%BA%8F/">2.6 构建Java程序</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.7-%E6%88%91%E4%BB%AC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAjava%E7%A8%8B%E5%BA%8F/">2.7 我们的第一个Java程序</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.8-%E6%B3%A8%E9%87%8A%E5%92%8C%E5%B5%8C%E5%85%A5%E6%96%87%E6%A1%A3/">2.8 注释和嵌入文档</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/02.%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E5%AF%B9%E8%B1%A1/2.9-%E7%BC%96%E7%A0%81%E6%A0%B7%E5%BC%8F/">2.9 编码样式</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0b455eccb2d5251702c12cae8b51f71f&#34;)" href="#id0b455eccb2d5251702c12cae8b51f71f" aria-expanded="false" aria-controls="id0b455eccb2d5251702c12cae8b51f71f" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/03.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/">03.控制程序流程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0b455eccb2d5251702c12cae8b51f71f" aria-expanded="false" aria-controls="id0b455eccb2d5251702c12cae8b51f71f">
    
        <i class="fa-solid fa-angle-right" id="caret-id0b455eccb2d5251702c12cae8b51f71f"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0b455eccb2d5251702c12cae8b51f71f">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/03.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.1-%E4%BD%BF%E7%94%A8java%E8%BF%90%E7%AE%97%E7%AC%A6/">3.1 使用Java运算符</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/03.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.2-%E6%89%A7%E8%A1%8C%E6%8E%A7%E5%88%B6/">3.2 执行控制</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/03.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.3-%E6%80%BB%E7%BB%93/">3.3 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/03.%E6%8E%A7%E5%88%B6%E7%A8%8B%E5%BA%8F%E6%B5%81%E7%A8%8B/3.4-%E7%BB%83%E4%B9%A0/">3.4 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc03315e84905a55e301cb35219ba082d&#34;)" href="#idc03315e84905a55e301cb35219ba082d" aria-expanded="false" aria-controls="idc03315e84905a55e301cb35219ba082d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/">04.初始化和清除</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc03315e84905a55e301cb35219ba082d" aria-expanded="false" aria-controls="idc03315e84905a55e301cb35219ba082d">
    
        <i class="fa-solid fa-angle-right" id="caret-idc03315e84905a55e301cb35219ba082d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idc03315e84905a55e301cb35219ba082d">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.1-%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8%E8%87%AA%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96/">4.1 用构造器自动初始化</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.2-%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD/">4.2 方法重载</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.3-%E6%B8%85%E9%99%A4%E6%94%B6%E5%B0%BE%E5%92%8C%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86/">4.3 清除：收尾和垃圾收集</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.4-%E6%88%90%E5%91%98%E5%88%9D%E5%A7%8B%E5%8C%96/">4.4 成员初始化</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.5-%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96/">4.5 数组初始化</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.6-%E6%80%BB%E7%BB%93/">4.6 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/04.%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E6%B8%85%E9%99%A4/4.7-%E7%BB%83%E4%B9%A0/">4.7 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id6fef31548d834cfab9ca7921ca0ffbc7&#34;)" href="#id6fef31548d834cfab9ca7921ca0ffbc7" aria-expanded="false" aria-controls="id6fef31548d834cfab9ca7921ca0ffbc7" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/">05.隐藏实施过程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id6fef31548d834cfab9ca7921ca0ffbc7" aria-expanded="false" aria-controls="id6fef31548d834cfab9ca7921ca0ffbc7">
    
        <i class="fa-solid fa-angle-right" id="caret-id6fef31548d834cfab9ca7921ca0ffbc7"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id6fef31548d834cfab9ca7921ca0ffbc7">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.1-%E5%8C%85%E5%BA%93%E5%8D%95%E5%85%83/">5.1 包：库单元</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.2-java%E8%AE%BF%E9%97%AE%E6%8C%87%E7%A4%BA%E7%AC%A6/">5.2 Java访问指示符</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.3-%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%AE%9E%E7%8E%B0/">5.3 接口与实现</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.4-%E7%B1%BB%E8%AE%BF%E9%97%AE/">5.4 类访问</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.5-%E6%80%BB%E7%BB%93/">5.5 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/05.%E9%9A%90%E8%97%8F%E5%AE%9E%E6%96%BD%E8%BF%87%E7%A8%8B/5.6-%E7%BB%83%E4%B9%A0/">5.6 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1e5c8731a846b682af97a54cf15b18cd&#34;)" href="#id1e5c8731a846b682af97a54cf15b18cd" aria-expanded="false" aria-controls="id1e5c8731a846b682af97a54cf15b18cd" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/">06.类再生</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1e5c8731a846b682af97a54cf15b18cd" aria-expanded="false" aria-controls="id1e5c8731a846b682af97a54cf15b18cd">
    
        <i class="fa-solid fa-angle-right" id="caret-id1e5c8731a846b682af97a54cf15b18cd"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id1e5c8731a846b682af97a54cf15b18cd">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.1-%E5%90%88%E6%88%90%E7%9A%84%E8%AF%AD%E6%B3%95/">6.1 合成的语法</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.10-%E6%80%BB%E7%BB%93/">6.10 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.11-%E7%BB%83%E4%B9%A0/">6.11 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.2-%E7%BB%A7%E6%89%BF%E7%9A%84%E8%AF%AD%E6%B3%95/">6.2 继承的语法</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.3-%E5%90%88%E6%88%90%E4%B8%8E%E7%BB%A7%E6%89%BF%E7%9A%84%E7%BB%93%E5%90%88/">6.3 合成与继承的结合</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.4-%E5%88%B0%E5%BA%95%E9%80%89%E6%8B%A9%E5%90%88%E6%88%90%E8%BF%98%E6%98%AF%E7%BB%A7%E6%89%BF/">6.4 到底选择合成还是继承</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.5-protected/">6.5 protected</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.6-%E7%B4%AF%E7%A7%AF%E5%BC%80%E5%8F%91/">6.6 累积开发</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.7-%E4%B8%8A%E6%BA%AF%E9%80%A0%E5%9E%8B/">6.7 上溯造型</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.8-final%E5%85%B3%E9%94%AE%E5%AD%97/">6.8 final关键字</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/06.%E7%B1%BB%E5%86%8D%E7%94%9F/6.9-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E7%B1%BB%E8%A3%85%E8%BD%BD/">6.9 初始化和类装载</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id45922a3318a25b4e4144ca245e79e889&#34;)" href="#id45922a3318a25b4e4144ca245e79e889" aria-expanded="false" aria-controls="id45922a3318a25b4e4144ca245e79e889" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/">07.多态性</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id45922a3318a25b4e4144ca245e79e889" aria-expanded="false" aria-controls="id45922a3318a25b4e4144ca245e79e889">
    
        <i class="fa-solid fa-angle-right" id="caret-id45922a3318a25b4e4144ca245e79e889"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id45922a3318a25b4e4144ca245e79e889">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.1-%E4%B8%8A%E6%BA%AF%E9%80%A0%E5%9E%8B/">7.1 上溯造型</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.10-%E7%BB%83%E4%B9%A0/">7.10 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.2-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/">7.2 深入理解</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.3-%E8%A6%86%E7%9B%96%E4%B8%8E%E9%87%8D%E8%BD%BD/">7.3 覆盖与重载</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.4-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95/">7.4 抽象类和方法</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.5-%E6%8E%A5%E5%8F%A3/">7.5 接口</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.6-%E5%86%85%E9%83%A8%E7%B1%BB/">7.6 内部类</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.7-%E6%9E%84%E9%80%A0%E5%99%A8%E5%92%8C%E5%A4%9A%E6%80%81%E6%80%A7/">7.7 构造器和多态性</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.8-%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E8%BF%9B%E8%A1%8C%E8%AE%BE%E8%AE%A1/">7.8 通过继承进行设计</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/07.%E5%A4%9A%E6%80%81%E6%80%A7/7.9-%E6%80%BB%E7%BB%93/">7.9 总结</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id27abd1286c9d000b592443d2141c9a55&#34;)" href="#id27abd1286c9d000b592443d2141c9a55" aria-expanded="false" aria-controls="id27abd1286c9d000b592443d2141c9a55" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/">08.对象的容纳</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id27abd1286c9d000b592443d2141c9a55" aria-expanded="false" aria-controls="id27abd1286c9d000b592443d2141c9a55">
    
        <i class="fa-solid fa-angle-right" id="caret-id27abd1286c9d000b592443d2141c9a55"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id27abd1286c9d000b592443d2141c9a55">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.1-%E6%95%B0%E7%BB%84/">8.1 数组</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.2-%E9%9B%86%E5%90%88/">8.2 集合</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.3-%E8%BF%AD%E4%BB%A3%E5%99%A8/">8.3 迭代器</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.4-%E9%9B%86%E5%90%88%E7%9A%84%E7%B1%BB%E5%9E%8B/">8.4 集合的类型</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.5-%E6%8E%92%E5%BA%8F/">8.5 排序</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.6-%E9%80%9A%E7%94%A8%E9%9B%86%E5%90%88%E5%BA%93/">8.6 通用集合库</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.7-%E6%96%B0%E9%9B%86%E5%90%88/">8.7 新集合</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.8-%E6%80%BB%E7%BB%93/">8.8 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/08.%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B9%E7%BA%B3/8.9-%E7%BB%83%E4%B9%A0/">8.9 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id223a02026171e117fd7610f7a814d5db&#34;)" href="#id223a02026171e117fd7610f7a814d5db" aria-expanded="false" aria-controls="id223a02026171e117fd7610f7a814d5db" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/09.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/">09.异常差错控制</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id223a02026171e117fd7610f7a814d5db" aria-expanded="false" aria-controls="id223a02026171e117fd7610f7a814d5db">
    
        <i class="fa-solid fa-angle-right" id="caret-id223a02026171e117fd7610f7a814d5db"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id223a02026171e117fd7610f7a814d5db">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/09.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.10-%E7%BB%83%E4%B9%A0/">9.10 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/09.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.6-%E7%94%A8finally%E6%B8%85%E9%99%A4/">9.6 用finally清除</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/09.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.7-%E6%9E%84%E9%80%A0%E5%99%A8/">9.7 构造器</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/09.%E5%BC%82%E5%B8%B8%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6/9.9-%E6%80%BB%E7%BB%93/">9.9 总结</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idcac6e18458602ce17bd9b0b2c3e18daa&#34;)" href="#idcac6e18458602ce17bd9b0b2c3e18daa" aria-expanded="false" aria-controls="idcac6e18458602ce17bd9b0b2c3e18daa" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/">10.Java IO 系统</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idcac6e18458602ce17bd9b0b2c3e18daa" aria-expanded="false" aria-controls="idcac6e18458602ce17bd9b0b2c3e18daa">
    
        <i class="fa-solid fa-angle-right" id="caret-idcac6e18458602ce17bd9b0b2c3e18daa"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idcac6e18458602ce17bd9b0b2c3e18daa">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.1-%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA/">10.1 输入和输出</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.10-%E6%80%BB%E7%BB%93/">10.10 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.11-%E7%BB%83%E4%B9%A0/">10.11 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.2-%E5%A2%9E%E6%B7%BB%E5%B1%9E%E6%80%A7%E5%92%8C%E6%9C%89%E7%94%A8%E7%9A%84%E6%8E%A5%E5%8F%A3/">10.2 增添属性和有用的接口</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.3-%E6%9C%AC%E8%BA%AB%E7%9A%84%E7%BC%BA%E9%99%B7randomaccessfile/">10.3 本身的缺陷：RandomAccessFile</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.4-file%E7%B1%BB/">10.4 File类</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.5-io%E6%B5%81%E7%9A%84%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8/">10.5 IO流的典型应用</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.6-streamtokenizer/">10.6 StreamTokenizer</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.7-java-1.1%E7%9A%84io%E6%B5%81/">10.7 Java 1.1的IO流</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.8-%E5%8E%8B%E7%BC%A9/">10.8 压缩</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/10.java-io-%E7%B3%BB%E7%BB%9F/10.9-%E5%AF%B9%E8%B1%A1%E5%BA%8F%E5%88%97%E5%8C%96/">10.9 对象序列化</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idfe15c0b7d69e1eea4a39a92683a168d4&#34;)" href="#idfe15c0b7d69e1eea4a39a92683a168d4" aria-expanded="false" aria-controls="idfe15c0b7d69e1eea4a39a92683a168d4" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/">11.运行期类型鉴定</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idfe15c0b7d69e1eea4a39a92683a168d4" aria-expanded="false" aria-controls="idfe15c0b7d69e1eea4a39a92683a168d4">
    
        <i class="fa-solid fa-angle-right" id="caret-idfe15c0b7d69e1eea4a39a92683a168d4"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idfe15c0b7d69e1eea4a39a92683a168d4">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.1-%E5%AF%B9rtti%E7%9A%84%E9%9C%80%E8%A6%81/">11.1 对RTTI的需要</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.2-rtti-%E8%AF%AD%E6%B3%95/">11.2 RTTI 语法</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.3-%E5%8F%8D%E5%B0%84%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E4%BF%A1%E6%81%AF/">11.3 反射：运行期类信息</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.4-%E6%80%BB%E7%BB%93/">11.4 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/11.%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%B1%BB%E5%9E%8B%E9%89%B4%E5%AE%9A/11.5-%E7%BB%83%E4%B9%A0/">11.5 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-iddf7cc690622f50701352bac88f5de264&#34;)" href="#iddf7cc690622f50701352bac88f5de264" aria-expanded="false" aria-controls="iddf7cc690622f50701352bac88f5de264" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/">12.传递和返回对象</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#iddf7cc690622f50701352bac88f5de264" aria-expanded="false" aria-controls="iddf7cc690622f50701352bac88f5de264">
    
        <i class="fa-solid fa-angle-right" id="caret-iddf7cc690622f50701352bac88f5de264"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="iddf7cc690622f50701352bac88f5de264">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.1-%E4%BC%A0%E9%80%92%E6%8C%87%E9%92%88/">12.1 传递指针</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.2-%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0%E5%89%AF%E6%9C%AC/">12.2 制作本地副本</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.3-%E5%85%8B%E9%9A%86%E7%9A%84%E6%8E%A7%E5%88%B6/">12.3 克隆的控制</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.4-%E5%8F%AA%E8%AF%BB%E7%B1%BB/">12.4 只读类</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.5-%E6%80%BB%E7%BB%93/">12.5 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/12.%E4%BC%A0%E9%80%92%E5%92%8C%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1/12.6-%E7%BB%83%E4%B9%A0/">12.6 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idb1a9edc38a9b424eca8c6736e315c5f2&#34;)" href="#idb1a9edc38a9b424eca8c6736e315c5f2" aria-expanded="false" aria-controls="idb1a9edc38a9b424eca8c6736e315c5f2" aria-hidden="false" data-toggle="collapse">
    
    </div>
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id80c764609525f094184dd5b161c7244d&#34;)" href="#id80c764609525f094184dd5b161c7244d" aria-expanded="false" aria-controls="id80c764609525f094184dd5b161c7244d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/">14.多线程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id80c764609525f094184dd5b161c7244d" aria-expanded="false" aria-controls="id80c764609525f094184dd5b161c7244d">
    
        <i class="fa-solid fa-angle-right" id="caret-id80c764609525f094184dd5b161c7244d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id80c764609525f094184dd5b161c7244d">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.1-%E5%8F%8D%E5%BA%94%E7%81%B5%E6%95%8F%E7%9A%84%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/">14.1 反应灵敏的用户界面</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.2-%E5%85%B1%E4%BA%AB%E6%9C%89%E9%99%90%E7%9A%84%E8%B5%84%E6%BA%90/">14.2 共享有限的资源</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.3-%E5%A0%B5%E5%A1%9E/">14.3 堵塞</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.4-%E4%BC%98%E5%85%88%E7%BA%A7/">14.4 优先级</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.5-%E5%9B%9E%E9%A1%BErunnable/">14.5 回顾runnable</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.6-%E6%80%BB%E7%BB%93/">14.6 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/14.%E5%A4%9A%E7%BA%BF%E7%A8%8B/14.7-%E7%BB%83%E4%B9%A0/">14.7 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id72c1a5699f783ea8a67f0eb1d1d396e1&#34;)" href="#id72c1a5699f783ea8a67f0eb1d1d396e1" aria-expanded="false" aria-controls="id72c1a5699f783ea8a67f0eb1d1d396e1" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">15.网络编程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id72c1a5699f783ea8a67f0eb1d1d396e1" aria-expanded="false" aria-controls="id72c1a5699f783ea8a67f0eb1d1d396e1">
    
    <i class="fa-solid fa-angle-down" id="caret-id72c1a5699f783ea8a67f0eb1d1d396e1"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id72c1a5699f783ea8a67f0eb1d1d396e1">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.1-%E6%9C%BA%E5%99%A8%E7%9A%84%E6%A0%87%E8%AF%86/">15.1 机器的标识</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.10-%E7%BB%83%E4%B9%A0/">15.10 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.2-%E5%A5%97%E6%8E%A5%E5%AD%97/">15.2 套接字</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.3-%E6%9C%8D%E5%8A%A1%E5%A4%9A%E4%B8%AA%E5%AE%A2%E6%88%B7/">15.3 服务多个客户</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.4-%E6%95%B0%E6%8D%AE%E6%8A%A5/">15.4 数据报</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.5-%E4%B8%80%E4%B8%AAweb%E5%BA%94%E7%94%A8/">15.5 一个Web应用</a></li>




  <li class="child level active"><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.6-java%E4%B8%8Ecgi%E7%9A%84%E6%B2%9F%E9%80%9A/">15.6 Java与CGI的沟通</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.7-%E7%94%A8jdbc%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/">15.7 用JDBC连接数据库</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.8-%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95/">15.8 远程方法</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.9-%E6%80%BB%E7%BB%93/">15.9 总结</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idbee59bdc5aaf46677af95b12ea99ff64&#34;)" href="#idbee59bdc5aaf46677af95b12ea99ff64" aria-expanded="false" aria-controls="idbee59bdc5aaf46677af95b12ea99ff64" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/">16.设计范式</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idbee59bdc5aaf46677af95b12ea99ff64" aria-expanded="false" aria-controls="idbee59bdc5aaf46677af95b12ea99ff64">
    
        <i class="fa-solid fa-angle-right" id="caret-idbee59bdc5aaf46677af95b12ea99ff64"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idbee59bdc5aaf46677af95b12ea99ff64">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.1-%E8%8C%83%E5%BC%8F%E7%9A%84%E6%A6%82%E5%BF%B5/">16.1 范式的概念</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.10-%E7%BB%83%E4%B9%A0/">16.10 练习</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.2-%E8%A7%82%E5%AF%9F%E5%99%A8%E8%8C%83%E5%BC%8F/">16.2 观察器范式</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.3-%E6%A8%A1%E6%8B%9F%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AB%99/">16.3 模拟垃圾回收站</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.4-%E6%94%B9%E8%BF%9B%E8%AE%BE%E8%AE%A1/">16.4 改进设计</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.5-%E6%8A%BD%E8%B1%A1%E7%9A%84%E5%BA%94%E7%94%A8/">16.5 抽象的应用</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.6-%E5%A4%9A%E9%87%8D%E6%B4%BE%E9%81%A3/">16.6 多重派遣</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.7-%E8%AE%BF%E9%97%AE%E5%99%A8%E8%8C%83%E5%BC%8F/">16.7 访问器范式</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.8-rtti%E7%9C%9F%E7%9A%84%E6%9C%89%E5%AE%B3%E5%90%97/">16.8 RTTI真的有害吗</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/16.%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F/16.9-%E6%80%BB%E7%BB%93/">16.9 总结</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ida6b4113de6e02470653070d2ebd17b83&#34;)" href="#ida6b4113de6e02470653070d2ebd17b83" aria-expanded="false" aria-controls="ida6b4113de6e02470653070d2ebd17b83" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/">17.项目</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ida6b4113de6e02470653070d2ebd17b83" aria-expanded="false" aria-controls="ida6b4113de6e02470653070d2ebd17b83">
    
        <i class="fa-solid fa-angle-right" id="caret-ida6b4113de6e02470653070d2ebd17b83"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ida6b4113de6e02470653070d2ebd17b83">
      



  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.1-%E6%96%87%E5%AD%97%E5%A4%84%E7%90%86/">17.1 文字处理</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.2-%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%B7%A5%E5%85%B7/">17.2 方法查找工具</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.3-%E5%A4%8D%E6%9D%82%E6%80%A7%E7%90%86%E8%AE%BA/">17.3 复杂性理论</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.4-%E6%80%BB%E7%BB%93/">17.4 总结</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/17.%E9%A1%B9%E7%9B%AE/17.5-%E7%BB%83%E4%B9%A0/">17.5 练习</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95a-%E4%BD%BF%E7%94%A8%E9%9D%9Ejava%E4%BB%A3%E7%A0%81/">附录A 使用非JAVA代码</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95b-%E5%AF%B9%E6%AF%94c&#43;&#43;%E5%92%8Cjava/">附录B 对比C&#43;&#43;和Java</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95c-java%E7%BC%96%E7%A8%8B%E8%A7%84%E5%88%99/">附录C Java编程规则</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95d-%E6%80%A7%E8%83%BD/">附录D 性能</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95e-%E5%85%B3%E4%BA%8E%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%9D/">附录E 关于垃圾收集的一些话</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E9%99%84%E5%BD%95f-%E6%8E%A8%E8%8D%90%E8%AF%BB%E7%89%A9/">附录F 推荐读物</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D/">写在前面的话</a></li>




  <li class="child level "><a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/%E5%BC%95%E8%A8%80/">引言</a></li>

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents"></nav>

      
<div class="subscribe-module col-24 mt-1">
    <img src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png" alt="image" title="王下邀月熊的微信公众号"/>
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>15.6 Java与CGI的沟通</h1>

          <div class="article-style">
            <h1 id="156-java-与-cgi-的沟通">15.6 Java 与 CGI 的沟通</h1>
<p>Java 程序可向一个服务器发出一个 CGI 请求，这与 HTML 表单页没什么两样。而且和 HTML 页一样，这个请求既可以设为 GET（下载），亦可设为 POST（上传）。除此以外，Java 程序还可拦截 CGI 程序的输出，所以不必依赖程序来格式化一个新页，也不必在出错的时候强迫用户从一个页回转到另一个页。事实上，程序的外观可以做得跟以前的版本别无二致。</p>
<p>代码也要简单一些，毕竟用 CGI 也不是很难就能写出来（前提是真正地理解它）。所以在这一节里，我们准备办个 CGI 编程速成班。为解决常规问题，将用 C++创建一些 CGI 工具，以便我们编写一个能解决所有问题的 CGI 程序。这样做的好处是移植能力特别强——即将看到的例子能在支持 CGI 的任何系统上运行，而且不存在防火墙的问题。</p>
<p>这个例子也阐示了如何在程序片（Applet）和 CGI 程序之间建立连接，以便将其方便地改编到自己的项目中。</p>
<p>15.6.1 CGI 数据的编码</p>
<p>在这个版本中，我们将收集名字和电子函件地址，并用下述形式将其保存到文件中：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">First</span> <span class="n">Last</span> <span class="o">&lt;</span><span class="n">email</span><span class="nd">@domain.com</span><span class="o">&gt;;</span>
</span></span></code></pre></div><p>这对任何 E-mail 程序来说都是一种非常方便的格式。由于只需收集两个字段，而且 CGI 为字段中的编码采用了一种特殊的格式，所以这里没有简便的方法。如果自己动手编制一个原始的 HTML 页，并加入下述代码行，即可正确地理解这一点：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">Form</span> <span class="n">method</span><span class="o">=</span><span class="s">&#34;GET&#34;</span> <span class="n">ACTION</span><span class="o">=</span><span class="s">&#34;/cgi-bin/Listmgr2.exe&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Name</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;name&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Email</span> <span class="n">Address</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;email&#34;</span> <span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;submit&#34;</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;submit&#34;</span> <span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">Form</span><span class="o">&gt;</span>
</span></span></code></pre></div><p>上述代码创建了两个数据输入字段（区），名为 name 和 email。另外还有一个 submit（提交）按钮，用于收集数据，并将其发给 CGI 程序。Listmgr2.exe 是驻留在特殊程序目录中的一个可执行文件。在我们的 Web 服务器上，该目录一般都叫作“cgi-bin”（注释 ③）。如果在那个目录里找不到该程序，结果就无法出现。填好这个表单，然后按下提交按钮，即可在浏览器的 URL 地址窗口里看到象下面这样的内容：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nl">http:</span><span class="c1">//www.myhome.com/cgi-bin/Listmgr2.exe?name=First+Last&amp;email=email@domain.com&amp;submit=Submit
</span></span></span></code></pre></div><p>③：在 Windows32 平台下，可利用与 Microsoft Office 97 或其他产品配套提供的 Microsoft Personal Web Server（微软个人 Web 服务器）进行测试。这是进行试验的最好方法，因为不必正式连入网络，可在本地环境中完成测试（速度也非常快）。如果使用的是不同的平台，或者没有 Office 97 或者 FrontPage 98 那样的产品，可到网上找一个免费的 Web 服务器供自己测试。</p>
<p>当然，上述 URL 实际显示时是不会拆行的。从中可稍微看出如何对数据编码并传给 CGI。至少有一件事情能够肯定——空格是不允许的（因为它通常用于分隔命令行参数）。所有必需的空格都用“+”号替代，每个字段都包含了字段名（具体由 HTML 页决定），后面跟随一个“=”号以及正式的字段数据，最后用一个“&amp;”结束。</p>
<p>到这时，大家也许会对“+”，“=”以及“&amp;”的使用产生疑惑。假如必须在字段里使用这些字符，那么该如何声明呢？例如，我们可能使用“John &amp; MarshaSmith”这个名字，其中的“&amp;”代表“And”。事实上，它会编码成下面这个样子：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">John</span><span class="o">+%</span><span class="mi">26</span><span class="o">+</span><span class="n">Marsha</span><span class="o">+</span><span class="n">Smith</span>
</span></span></code></pre></div><p>也就是说，特殊字符会转换成一个“%”，并在后面跟上它的十六进制 ASCII 编码。</p>
<p>幸运的是，Java 有一个工具来帮助我们进行这种编码。这是 URLEncoder 类的一个静态方法，名为 encode()。可用下述程序来试验这个方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: EncodeDemo.java
</span></span></span><span class="line"><span class="cl"><span class="c1">// Demonstration of URLEncoder.encode()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EncodeDemo</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
</span></span><span class="line"><span class="cl">      <span class="n">s</span> <span class="o">+=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span> <span class="o">=</span> <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>该程序将获取一些命令行参数，把它们合并成一个由多个词构成的字串，各词之间用空格分隔（最后一个空格用 String.trim()剔除了）。随后对它们进行编码，并打印出来。</p>
<p>为调用一个 CGI 程序，程序片要做的全部事情就是从自己的字段或其他地方收集数据，将所有数据都编码成正确的 URL 样式，然后汇编到单独一个字串里。每个字段名后面都加上一个“=”符号，紧跟正式数据，再紧跟一个“&amp;”。为构建完整的 CGI 命令，我们将这个字串置于 CGI 程序的 URL 以及一个“?”后。这是调用所有 CGI 程序的标准方法。大家马上就会看到，用一个程序片能够很轻松地完成所有这些编码与合并。</p>
<p>15.6.2 程序片</p>
<p>程序片实际要比 NameSender.java 简单一些。这部分是由于很容易即可发出一个 GET 请求。此外，也不必等候回复信息。现在有两个字段，而非一个，但大家会发现许多程序片都是熟悉的，请比较 NameSender.java。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: NameSender2.java
</span></span></span><span class="line"><span class="cl"><span class="c1">// An applet that sends an email address
</span></span></span><span class="line"><span class="cl"><span class="c1">// via a CGI GET, using Java 1.02.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.applet.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameSender2</span> <span class="kd">extends</span> <span class="n">Applet</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">final</span> <span class="n">String</span> <span class="n">CGIProgram</span> <span class="o">=</span> <span class="s">&#34;Listmgr2.exe&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Button</span> <span class="n">send</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Button</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;Add email address to mailing list&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">TextField</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextField</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;type your name here&#34;</span><span class="o">,</span> <span class="mi">40</span><span class="o">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">email</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextField</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;type your email address here&#34;</span><span class="o">,</span> <span class="mi">40</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">Label</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Label</span><span class="o">(),</span> <span class="n">l2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Label</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">vcount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">BorderLayout</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Panel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Panel</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">GridLayout</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">send</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="o">(</span><span class="s">&#34;North&#34;</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">Panel</span> <span class="n">labels</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Panel</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">labels</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">GridLayout</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">labels</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">l</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">labels</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">l2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="o">(</span><span class="s">&#34;Center&#34;</span><span class="o">,</span> <span class="n">labels</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Ready to send email address&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">action</span> <span class="o">(</span><span class="n">Event</span> <span class="n">evt</span><span class="o">,</span> <span class="n">Object</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">evt</span><span class="o">.</span><span class="na">target</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">send</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Check for errors in data:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">         <span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39; &#39;</span><span class="o">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;Please give first and last name&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">str</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39; &#39;</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;Spaces not allowed in email name&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;,&#39;</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;Commas not allowed in email name&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;@&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Email name must include &#39;@&#39;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;@&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;Name must preceed &#39;@&#39; in email name&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">String</span> <span class="n">end</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">        <span class="n">str</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;@&#39;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="o">(</span><span class="n">end</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;.&#39;</span><span class="o">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Portion after &#39;@&#39; must &#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;have an extension, such as &#39;.com&#39;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Build and encode the email data:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">String</span> <span class="n">emailData</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;name=&#34;</span> <span class="o">+</span> <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">name</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;&amp;email=&#34;</span> <span class="o">+</span> <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">email</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">().</span><span class="na">toLowerCase</span><span class="o">())</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;&amp;submit=Submit&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Send the name using CGI&#39;s GET process:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Sending...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">URL</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">getDocumentBase</span><span class="o">(),</span> <span class="s">&#34;cgi-bin/&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">          <span class="n">CGIProgram</span> <span class="o">+</span> <span class="s">&#34;?&#34;</span> <span class="o">+</span> <span class="n">emailData</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Sent: &#34;</span> <span class="o">+</span> <span class="n">email</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">send</span><span class="o">.</span><span class="na">setLabel</span><span class="o">(</span><span class="s">&#34;Re-send&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;Waiting for reply &#34;</span> <span class="o">+</span> <span class="o">++</span><span class="n">vcount</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">DataInputStream</span> <span class="n">server</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">          <span class="k">new</span> <span class="n">DataInputStream</span><span class="o">(</span><span class="n">u</span><span class="o">.</span><span class="na">openStream</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span><span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">          <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">MalformedURLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Bad URl&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;IO Exception&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span> <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">action</span><span class="o">(</span><span class="n">evt</span><span class="o">,</span> <span class="n">arg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>CGI 程序（不久即可看到）的名字是 Listmgr2.exe。许多 Web 服务器都在 Unix 机器上运行（Linux 也越来越受到青睐）。根据传统，它们一般不为自己的可执行程序采用.exe 扩展名。但在 Unix 操作系统中，可以把自己的程序称呼为自己希望的任何东西。若使用的是.exe 扩展名，程序毋需任何修改即可通过 Unix 和 Win32 的运行测试。</p>
<p>和往常一样，程序片设置了自己的用户界面（这次是两个输入字段，不是一个）。唯一显著的区别是在 action()方法内产生的。该方法的作用是对按钮按下事件进行控制。名字检查过以后，大家会发现下述代码行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">      <span class="n">String</span> <span class="n">emailData</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;name=&#34;</span> <span class="o">+</span> <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">name</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;&amp;email=&#34;</span> <span class="o">+</span> <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">email</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">().</span><span class="na">toLowerCase</span><span class="o">())</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;&amp;submit=Submit&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Send the name using CGI&#39;s GET process:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Sending...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">URL</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">getDocumentBase</span><span class="o">(),</span> <span class="s">&#34;cgi-bin/&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">          <span class="n">CGIProgram</span> <span class="o">+</span> <span class="s">&#34;?&#34;</span> <span class="o">+</span> <span class="n">emailData</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;Sent: &#34;</span> <span class="o">+</span> <span class="n">email</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">send</span><span class="o">.</span><span class="na">setLabel</span><span class="o">(</span><span class="s">&#34;Re-send&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;Waiting for reply &#34;</span> <span class="o">+</span> <span class="o">++</span><span class="n">vcount</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">DataInputStream</span> <span class="n">server</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">          <span class="k">new</span> <span class="n">DataInputStream</span><span class="o">(</span><span class="n">u</span><span class="o">.</span><span class="na">openStream</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span><span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">          <span class="n">l2</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span></code></pre></div><p>name 和 email 数据都是它们对应的文字框里提取出来，而且两端多余的空格都用 trim()剔去了。为了进入列表，email 名字被强制换成小写形式，以便能够准确地对比（防止基于大小写形式的错误判断）。来自每个字段的数据都编码为 URL 形式，随后采用与 HTML 页中一样的方式汇编 GET 字串（这样一来，我们可将 Java 程序片与现有的任何 CGI 程序结合使用，以满足常规的 HTML GET 请求）。</p>
<p>到这时，一些 Java 的魔力已经开始发挥作用了：如果想同任何 URL 连接，只需创建一个 URL 对象，并将地址传递给构造器即可。构造器会负责建立同服务器的连接（对 Web 服务器来说，所有连接行动都是根据作为 URL 使用的字串来判断的）。就目前这种情况来说，URL 指向的是当前 Web 站点的 cgi-bin 目录（当前 Web 站点的基础地址是用 getDocumentBase()设定的）。一旦 Web 服务器在 URL 中看到了一个“cgi-bin”，会接着希望在它后面跟随了 cgi-bin 目录内的某个程序的名字，那是我们要运行的目标程序。程序名后面是一个问号以及 CGI 程序会在 QUERY_STRING 环境变量中查找的一个参数字串（马上就要学到）。</p>
<p>我们发出任何形式的请求后，一般都会得到一个回应的 HTML 页。但若使用 Java 的 URL 对象，我们可以拦截自 CGI 程序传回的任何东西，只需从 URL 对象里取得一个 InputStream（输入数据流）即可。这是用 URL 对象的 openStream()方法实现，它要封装到一个 DataInputStream 里。随后就可以读取数据行，若 readLine()返回一个 null（空值），就表明 CGI 程序已结束了它的输出。
我们即将看到的 CGI 程序返回的仅仅是一行，它是用于标志成功与否（以及失败的具体原因）的一个字串。这一行会被捕获并置放第二个 Label 字段里，使用户看到具体发生了什么事情。</p>
<ol>
<li>从程序片里显示一个 Web 页</li>
</ol>
<p>程序亦可将 CGI 程序的结果作为一个 Web 页显示出来，就象它们在普通 HTML 模式中运行那样。可用下述代码做到这一点：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">getAppletContext</span><span class="o">().</span><span class="na">showDocument</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
</span></span></code></pre></div><p>其中，u 代表 URL 对象。这是将我们重新定向于另一个 Web 页的一个简单例子。那个页凑巧是一个 CGI 程序的输出，但可以非常方便地进入一个原始的 HTML 页，所以可以构建这个程序片，令其产生一个由密码保护的网关，通过它进入自己 Web 站点的特殊部分：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: ShowHTML.java
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.applet.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShowHTML</span> <span class="kd">extends</span> <span class="n">Applet</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CGIProgram</span> <span class="o">=</span> <span class="s">&#34;MyCGIProgram&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Button</span> <span class="n">send</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Button</span><span class="o">(</span><span class="s">&#34;Go&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">Label</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Label</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="o">(</span><span class="n">send</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="o">(</span><span class="n">l</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">action</span> <span class="o">(</span><span class="n">Event</span> <span class="n">evt</span><span class="o">,</span> <span class="n">Object</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">evt</span><span class="o">.</span><span class="na">target</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">send</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// This could be an HTML page instead of
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// a CGI program. Notice that this CGI
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// program doesn&#39;t use arguments, but
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// you can add them in the usual way.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">URL</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">getDocumentBase</span><span class="o">(),</span>
</span></span><span class="line"><span class="cl">          <span class="s">&#34;cgi-bin/&#34;</span> <span class="o">+</span> <span class="n">CGIProgram</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Display the output of the URL using
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// the Web browser, as an ordinary page:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">getAppletContext</span><span class="o">().</span><span class="na">showDocument</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span> <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">action</span><span class="o">(</span><span class="n">evt</span><span class="o">,</span> <span class="n">arg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>URL 类的最大的特点就是有效地保护了我们的安全。可以同一个 Web 服务器建立连接，毋需知道幕后的任何东西。</p>
<p>15.6.3 用 C++写的 CGI 程序</p>
<p>经过前面的学习，大家应该能够根据例子用 ANSI C 为自己的服务器写出 CGI 程序。之所以选用 ANSI C，是因为它几乎随处可见，是最流行的 C 语言标准。当然，现在的 C++也非常流行了，特别是采用 GNU C++编译器（g++）形式的那一些（注释 ④）。可从网上许多地方免费下载 g++，而且可选用几乎所有平台的版本（通常与 Linux 那样的操作系统配套提供，且已预先安装好）。正如大家即将看到的那样，从 CGI 程序可获得面向对象程序设计的许多好处。</p>
<p>④：GNU 的全称是“Gnu&rsquo;s Not Unix”。这最早是由“自由软件基金会”（FSF）负责开发的一个项目，致力于用一个免费的版本取代原有的 Unix 操作系统。现在的 Linux 似乎正在做前人没有做到的事情。但 GNU 工具在 Linux 的开发中扮演了至关重要的角色。事实上，Linux 的整套软件包附带了数量非常多的 GNU 组件。</p>
<p>为避免第一次就提出过多的新概念，这个程序并未打算成为一个“纯”C++程序；有些代码是用普通 C 写成的——尽管还可选用 C++的一些替用形式。但这并不是个突出的问题，因为该程序用 C++制作最大的好处就是能够创建类。在解析 CGI 信息的时候，由于我们最关心的是字段的“名称／值”对，所以要用一个类（Pair）来代表单个名称／值对；另一个类（CGI_vector）则将 CGI 字串自动解析到它会容纳的 Pair 对象里（作为一个 vector），这样即可在有空的时候把每个 Pair（对）都取出来。</p>
<p>这个程序同时也非常有趣，因为它演示了 C++与 Java 相比的许多优缺点。大家会看到一些相似的东西；比如 class 关键字。访问控制使用的是完全相同的关键字 public 和 private，但用法却有所不同。它们控制的是一个块，而非单个方法或字段（也就是说，如果指定 private:，后续的每个定义都具有 private 属性，直到我们再指定 public:为止）。另外在创建一个类的时候，所有定义都自动默认为 private。</p>
<p>在这儿使用 C++的一个原因是要利用 C++“标准模板库”（STL）提供的便利。至少，STL 包含了一个 vector 类。这是一个 C++模板，可在编译期间进行配置，令其只容纳一种特定类型的对象（这里是 Pair 对象）。和 Java 的 Vector 不同，如果我们试图将除 Pair 对象之外的任何东西置入 vector，C++的 vector 模板都会造成一个编译期错误；而 Java 的 Vector 能够照单全收。而且从 vector 里取出什么东西的时候，它会自动成为一个 Pair 对象，毋需进行造型处理。所以检查在编译期进行，这使程序显得更为“健壮”。此外，程序的运行速度也可以加快，因为没有必要进行运行期间的造型。vector 也会重载 operator[]，所以可以利用非常方便的语法来提取 Pair 对象。vector 模板将在 CGI_vector 创建时使用；在那时，大家就可以体会到如此简短的一个定义居然蕴藏有那么巨大的能量。</p>
<p>若提到缺点，就一定不要忘记 Pair 在下列代码中定义时的复杂程度。与我们在 Java 代码中看到的相比，Pair 的方法定义要多得多。这是由于 C++的程序员必须提前知道如何用副本构造器控制复制过程，而且要用重载的 operator=完成赋值。正如第 12 章解释的那样，我们有时也要在 Java 中考虑同样的事情。但在 C++中，几乎一刻都不能放松对这些问题的关注。
这个项目首先创建一个可以重复使用的部分，由 C++头文件中的 Pair 和 CGI_vector 构成。从技术角度看，确实不应把这些东西都塞到一个头文件里。但就目前的例子来说，这样做不会造成任何方面的损害，而且更具有 Java 风格，所以大家阅读理解代码时要显得轻松一些：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: CGITools.h
</span></span></span><span class="line"><span class="cl"><span class="c1">// Automatically extracts and decodes data
</span></span></span><span class="line"><span class="cl"><span class="c1">// from CGI GETs and POSTs. Tested with GNU C++
</span></span></span><span class="line"><span class="cl"><span class="c1">// (available for most server machines).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">#</span><span class="n">include</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="n">include</span> <span class="o">&lt;</span><span class="n">vector</span><span class="o">&gt;</span> <span class="c1">// STL vector
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// A class to hold a single name-value pair from
</span></span></span><span class="line"><span class="cl"><span class="c1">// a CGI query. CGI_vector holds Pair objects and
</span></span></span><span class="line"><span class="cl"><span class="c1">// returns them from its operator[].
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">class</span> <span class="nc">Pair</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span><span class="o">*</span> <span class="n">nm</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span><span class="o">*</span> <span class="n">val</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">Pair</span><span class="o">()</span> <span class="o">{</span> <span class="n">nm</span> <span class="o">=</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">Pair</span><span class="o">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="o">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Creates new memory:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">nm</span> <span class="o">=</span> <span class="n">decodeURLString</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">val</span> <span class="o">=</span> <span class="n">decodeURLString</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span> <span class="k">return</span> <span class="n">nm</span><span class="o">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">value</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span> <span class="k">return</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Test for &#34;emptiness&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">bool</span> <span class="nf">empty</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">(</span><span class="n">nm</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Automatic type conversion for boolean test:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">operator</span> <span class="nf">bool</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">(</span><span class="n">nm</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">val</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// The following constructors &amp; destructor are
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// necessary for bookkeeping in C++.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// Copy-constructor:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Pair</span><span class="o">(</span><span class="kd">const</span> <span class="n">Pair</span><span class="o">&amp;</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">nm</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">p</span><span class="o">.</span><span class="na">val</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">nm</span> <span class="o">=</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Create storage &amp; copy rhs values:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">nm</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">strlen</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">nm</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">      <span class="n">strcpy</span><span class="o">(</span><span class="n">nm</span><span class="o">,</span> <span class="n">p</span><span class="o">.</span><span class="na">nm</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">val</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">strlen</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">val</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">      <span class="n">strcpy</span><span class="o">(</span><span class="n">val</span><span class="o">,</span> <span class="n">p</span><span class="o">.</span><span class="na">val</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Assignment operator:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Pair</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=(</span><span class="kd">const</span> <span class="n">Pair</span><span class="o">&amp;</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Clean up old lvalues:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">delete</span> <span class="n">nm</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">delete</span> <span class="n">val</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">nm</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">p</span><span class="o">.</span><span class="na">val</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">nm</span> <span class="o">=</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Create storage &amp; copy rhs values:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">nm</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">strlen</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">nm</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">      <span class="n">strcpy</span><span class="o">(</span><span class="n">nm</span><span class="o">,</span> <span class="n">p</span><span class="o">.</span><span class="na">nm</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">val</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">strlen</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">val</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">      <span class="n">strcpy</span><span class="o">(</span><span class="n">val</span><span class="o">,</span> <span class="n">p</span><span class="o">.</span><span class="na">val</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">~</span><span class="n">Pair</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Destructor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">delete</span> <span class="n">nm</span><span class="o">;</span> <span class="c1">// 0 value OK
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">delete</span> <span class="n">val</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// If you use this method outide this class,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// you&#39;re responsible for calling &#39;delete&#39; on
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// the pointer that&#39;s returned:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">static</span> <span class="kt">char</span><span class="o">*</span>
</span></span><span class="line"><span class="cl">  <span class="n">decodeURLString</span><span class="o">(</span><span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">URLstr</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="o">(</span><span class="n">URLstr</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span><span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">len</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">memset</span><span class="o">(</span><span class="n">result</span><span class="o">,</span> <span class="n">len</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">len</span><span class="o">;</span> <span class="n">i</span><span class="o">++,</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="o">(</span><span class="n">URLstr</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39; &#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">URLstr</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;%&#39;</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">          <span class="n">translateHex</span><span class="o">(</span><span class="n">URLstr</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">])</span> <span class="o">*</span> <span class="mi">16</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">          <span class="n">translateHex</span><span class="o">(</span><span class="n">URLstr</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="o">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">// Move past hex code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="o">}</span> <span class="k">else</span> <span class="c1">// An ordinary character
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">result</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">URLstr</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Translate a single hex character; used by
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// decodeURLString():
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">static</span> <span class="kt">char</span> <span class="nf">translateHex</span><span class="o">(</span><span class="kt">char</span> <span class="n">hex</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">hex</span> <span class="o">&gt;=</span> <span class="sc">&#39;A&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="o">(</span><span class="n">hex</span> <span class="o">&amp;</span> <span class="mh">0xdf</span><span class="o">)</span> <span class="o">-</span> <span class="sc">&#39;A&#39;</span> <span class="o">+</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">hex</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Parses any CGI query and turns it
</span></span></span><span class="line"><span class="cl"><span class="c1">// into an STL vector of Pair objects:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">class</span> <span class="nc">CGI_vector</span> <span class="o">:</span> <span class="kd">public</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">Pair</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span><span class="o">*</span> <span class="n">qry</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">start</span><span class="o">;</span> <span class="c1">// Save starting position
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// Prevent assignment and copy-construction:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="n">operator</span><span class="o">=(</span><span class="n">CGI_vector</span><span class="o">&amp;);</span>
</span></span><span class="line"><span class="cl">  <span class="n">CGI_vector</span><span class="o">(</span><span class="n">CGI_vector</span><span class="o">&amp;);</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// const fields must be initialized in the C++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// &#34;Constructor initializer list&#34;:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">CGI_vector</span><span class="o">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">query</span><span class="o">)</span> <span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">start</span><span class="o">(</span><span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">strlen</span><span class="o">(</span><span class="n">query</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">])</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">qry</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">*)</span><span class="n">start</span><span class="o">;</span> <span class="c1">// Cast to non-const
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">strcpy</span><span class="o">(</span><span class="n">qry</span><span class="o">,</span> <span class="n">query</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">Pair</span> <span class="n">p</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="o">((</span><span class="n">p</span> <span class="o">=</span> <span class="n">nextPair</span><span class="o">())</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="n">push_back</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Destructor:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="o">~</span><span class="n">CGI_vector</span><span class="o">()</span> <span class="o">{</span> <span class="n">delete</span> <span class="n">start</span><span class="o">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Produces name-value pairs from the query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// string. Returns an empty Pair when there&#39;s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// no more query string left:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Pair</span> <span class="nf">nextPair</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span><span class="o">*</span> <span class="n">name</span> <span class="o">=</span> <span class="n">qry</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="o">*</span><span class="n">name</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">Pair</span><span class="o">();</span> <span class="c1">// End, return null Pair
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">char</span><span class="o">*</span> <span class="n">value</span> <span class="o">=</span> <span class="n">strchr</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="sc">&#39;=&#39;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">Pair</span><span class="o">();</span> <span class="c1">// Error, return null Pair
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Null-terminate name, move value to start
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// of its set of characters:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">*</span><span class="n">value</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">value</span><span class="o">++;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Look for end of value, marked by &#39;&amp;&#39;:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">qry</span> <span class="o">=</span> <span class="n">strchr</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="sc">&#39;&amp;&#39;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">qry</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="n">qry</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span> <span class="c1">// Last pair found
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="o">*</span><span class="n">qry</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="o">;</span> <span class="c1">// Terminate value string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">qry</span><span class="o">++;</span> <span class="c1">// Move to next pair
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Pair</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">};</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>在#include 语句后，可看到有一行是：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="o">;</span>
</span></span></code></pre></div><p>C++中的“命名空间”（Namespace）解决了由 Java 的 package 负责的一个问题：将库名隐藏起来。std 命名空间引用的是标准 C++库，而 vector 就在这个库中，所以这一行是必需的。</p>
<p>Pair 类表面看异常简单，只是容纳了两个（private）字符指针而已——一个用于名字，另一个用于值。默认构造器将这两个指针简单地设为零。这是由于在 C++中，对象的内存不会自动置零。第二个构造器调用方法 decodeURLString()，在新分配的堆内存中生成一个解码过后的字串。这个内存区域必须由对象负责管理及清除，这与“破坏器”中见到的相同。name()和 value()方法为相关的字段产生只读指针。利用 empty()方法，我们查询 Pair 对象它的某个字段是否为空；返回的结果是一个 bool——C++内建的基本布尔数据类型。operator bool()使用的是 C++“运算符重载”的一种特殊形式。它允许我们控制自动类型转换。如果有一个名为 p 的 Pair 对象，而且在一个本来希望是布尔结果的表达式中使用，比如 if(p){//&hellip;，那么编译器能辨别出它有一个 Pair，而且需要的是个布尔值，所以自动调用 operator bool()，进行必要的转换。</p>
<p>接下来的三个方法属于常规编码，在 C++中创建类时必须用到它们。根据 C++类采用的所谓“经典形式”，我们必须定义必要的“原始”构造器，以及一个副本构造器和赋值运算符——operator=（以及破坏器，用于清除内存）。之所以要作这样的定义，是由于编译器会“默默”地调用它们。在对象传入、传出一个函数的时候，需要调用副本构造器；而在分配对象时，需要调用赋值运算符。只有真正掌握了副本构造器和赋值运算符的工作原理，才能在 C++里写出真正“健壮”的类，但这需要需要一个比较艰苦的过程（注释 ⑤）。</p>
<p>⑤：我的《Thinking in C++》（Prentice-Hall,1995）用了一整章的地方来讨论这个主题。若需更多的帮助，请务必看看那一章。</p>
<p>只要将一个对象按值传入或传出函数，就会自动调用副本构造器 Pair(const Pair&amp;)。也就是说，对于准备为其制作一个完整副本的那个对象，我们不准备在函数框架中传递它的地址。这并不是 Java 提供的一个选项，由于我们只能传递指针，所以在 Java 里没有所谓的副本构造器（如果想制作一个本地副本，可以“克隆”那个对象——使用 clone()，参见第 12 章）。类似地，如果在 Java 里分配一个指针，它会简单地复制。但 C++中的赋值意味着整个对象都会复制。在副本构造器中，我们创建新的存储空间，并复制原始数据。但对于赋值运算符，我们必须在分配新存储空间之前释放老存储空间。我们要见到的也许是 C++类最复杂的一种情况，但那正是 Java 的支持者们论证 Java 比 C++简单得多的有力证据。在 Java 中，我们可以自由传递指针，善后工作则由垃圾收集器负责，所以可以轻松许多。</p>
<p>但事情并没有完。Pair 类为 nm 和 val 使用的是 char*，最复杂的情况主要是围绕指针展开的。如果用较时髦的 C++ string 类来代替 <code>char*</code> ，事情就要变得简单得多（当然，并不是所有编译器都提供了对 string 的支持）。那么，Pair 的第一部分看起来就象下面这样：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Pair</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">string</span> <span class="n">nm</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">string</span> <span class="n">val</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">Pair</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">Pair</span><span class="o">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="o">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">nm</span> <span class="o">=</span> <span class="n">decodeURLString</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">val</span> <span class="o">=</span> <span class="n">decodeURLString</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span> <span class="k">return</span> <span class="n">nm</span><span class="o">.</span><span class="na">c_str</span><span class="o">();</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">value</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="na">c_str</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Test for &#34;emptiness&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">bool</span> <span class="nf">empty</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">(</span><span class="n">nm</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">||</span> <span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Automatic type conversion for boolean test:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">operator</span> <span class="nf">bool</span><span class="o">()</span> <span class="kd">const</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">(</span><span class="n">nm</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span></code></pre></div><p>（此外，对这个类 decodeURLString()会返回一个 string，而不是一个 char*）。我们不必定义副本构造器、operator=或者破坏器，因为编译器已帮我们做了，而且做得非常好。但即使有些事情是自动进行的，C++程序员也必须了解副本构建以及赋值的细节。</p>
<p>Pair 类剩下的部分由两个方法构成：decodeURLString()以及一个“帮助器”方法 translateHex()——将由 decodeURLString()使用。注意 translateHex()并不能防范用户的恶意输入，比如“%1H”。分配好足够的存储空间后（必须由破坏器释放），decodeURLString()就会其中遍历，将所有“+”都换成一个空格；将所有十六进制代码（以一个“%”打头）换成对应的字符。</p>
<p>CGI_vector 用于解析和容纳整个 CGI GET 命令。它是从 STL vector 里继承的，后者例示为容纳 Pair。C++中的继承是用一个冒号表示，在 Java 中则要用 extends。此外，继承默认为 private 属性，所以几乎肯定需要用到 public 关键字，就象这样做的那样。大家也会发现 CGI_vector 有一个副本构造器以及一个 operator=，但它们都声明成 private。这样做是为了防止编译器同步两个函数（如果不自己声明它们，两者就会同步）。但这同时也禁止了客户程序员按值或者通过赋值传递一个 CGI_vector。</p>
<p>CGI_vector 的工作是获取 QUERY_STRING，并把它解析成“名称／值”对，这需要在 Pair 的帮助下完成。它首先将字串复制到本地分配的内存，并用常数指针 start 跟踪起始地址（稍后会在破坏器中用于释放内存）。随后，它用自己的 nextPair()方法将字串解析成原始的“名称／值”对，各个对之间用一个“=”和“&amp;”符号分隔。这些对由 nextPair()传递给 Pair 构造器，所以 nextPair()返回的是一个 Pair 对象。随后用 push_back()将该对象加入 vector。nextPair()遍历完整个 QUERY_STRING 后，会返回一个零值。</p>
<p>现在基本工具已定义好，它们可以简单地在一个 CGI 程序中使用，就象下面这样：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: Listmgr2.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1">// CGI version of Listmgr.c in C++, which
</span></span></span><span class="line"><span class="cl"><span class="c1">// extracts its input via the GET submission
</span></span></span><span class="line"><span class="cl"><span class="c1">// from the associated applet. Also works as
</span></span></span><span class="line"><span class="cl"><span class="c1">// an ordinary CGI program with HTML forms.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">#</span><span class="n">include</span> <span class="o">&lt;</span><span class="n">stdio</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="n">include</span> <span class="s">&#34;CGITools.h&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">dataFile</span> <span class="o">=</span> <span class="s">&#34;list2.txt&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">notify</span> <span class="o">=</span> <span class="s">&#34;Bruce@EckelObjects.com&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="n">undef</span> <span class="n">DEBUG</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Similar code as before, except that it looks
</span></span></span><span class="line"><span class="cl"><span class="c1">// for the email name inside of &#39;&lt;&gt;&#39;:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">inList</span><span class="o">(</span><span class="n">FILE</span><span class="o">*</span> <span class="n">list</span><span class="o">,</span> <span class="kd">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">emailName</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">const</span> <span class="kt">int</span> <span class="n">BSIZE</span> <span class="o">=</span> <span class="mi">255</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span> <span class="n">lbuf</span><span class="o">[</span><span class="n">BSIZE</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span> <span class="n">emname</span><span class="o">[</span><span class="n">BSIZE</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Put the email name in &#39;&lt;&gt;&#39; so there&#39;s no
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// possibility of a match within another name:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">sprintf</span><span class="o">(</span><span class="n">emname</span><span class="o">,</span> <span class="s">&#34;&lt;%s&gt;&#34;</span><span class="o">,</span> <span class="n">emailName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Go to the beginning of the list:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">fseek</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">SEEK_SET</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Read each line in the list:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">while</span><span class="o">(</span><span class="n">fgets</span><span class="o">(</span><span class="n">lbuf</span><span class="o">,</span> <span class="n">BSIZE</span><span class="o">,</span> <span class="n">list</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Strip off the newline:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">char</span> <span class="o">*</span> <span class="n">newline</span> <span class="o">=</span> <span class="n">strchr</span><span class="o">(</span><span class="n">lbuf</span><span class="o">,</span> <span class="sc">&#39;\n&#39;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">newline</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">*</span><span class="n">newline</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">strstr</span><span class="o">(</span><span class="n">lbuf</span><span class="o">,</span> <span class="n">emname</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// You MUST print this out, otherwise the
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// server will not send the response:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">printf</span><span class="o">(</span><span class="s">&#34;Content-type: text/plain\n\n&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">FILE</span><span class="o">*</span> <span class="n">list</span> <span class="o">=</span> <span class="n">fopen</span><span class="o">(</span><span class="n">dataFile</span><span class="o">,</span> <span class="s">&#34;a+t&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="o">(</span><span class="n">list</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="o">(</span><span class="s">&#34;error: could not open database. &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="o">(</span><span class="s">&#34;Notify %s&#34;</span><span class="o">,</span> <span class="n">notify</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// For a CGI &#34;GET,&#34; the server puts the data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// in the environment variable QUERY_STRING:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">CGI_vector</span> <span class="nf">query</span><span class="o">(</span><span class="n">getenv</span><span class="o">(</span><span class="s">&#34;QUERY_STRING&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span><span class="k">if</span> <span class="n">defined</span><span class="o">(</span><span class="n">DEBUG</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Test: dump all names and values
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">query</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="o">(</span><span class="s">&#34;query[%d].name() = [%s], &#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">      <span class="n">i</span><span class="o">,</span> <span class="n">query</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">name</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="o">(</span><span class="s">&#34;query[%d].value() = [%s]\n&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">      <span class="n">i</span><span class="o">,</span> <span class="n">query</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">value</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span><span class="n">endif</span><span class="o">(</span><span class="n">DEBUG</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">Pair</span> <span class="n">name</span> <span class="o">=</span> <span class="n">query</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">  <span class="n">Pair</span> <span class="n">email</span> <span class="o">=</span> <span class="n">query</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">empty</span><span class="o">()</span> <span class="o">||</span> <span class="n">email</span><span class="o">.</span><span class="na">empty</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="o">(</span><span class="s">&#34;error: null name or email&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="o">(</span><span class="n">inList</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">email</span><span class="o">.</span><span class="na">value</span><span class="o">()))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="o">(</span><span class="s">&#34;Already in list: %s&#34;</span><span class="o">,</span> <span class="n">email</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// It&#39;s not in the list, add it:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">fseek</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">SEEK_END</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">fprintf</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&#34;%s &lt;%s&gt;;\n&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span><span class="o">.</span><span class="na">value</span><span class="o">(),</span> <span class="n">email</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">  <span class="n">fflush</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">fclose</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">printf</span><span class="o">(</span><span class="s">&#34;%s &lt;%s&gt; added to list\n&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span><span class="o">.</span><span class="na">value</span><span class="o">(),</span> <span class="n">email</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>alreadyInList()函数与前一个版本几乎是完全相同的，只是它假定所有电子函件地址都在一个“&lt;&gt;”内。
在使用 GET 方法时（通过在 FORM 引导命令的 METHOD 标记内部设置，但这在这里由数据发送的方式控制），Web 服务器会收集位于“?”后面的所有信息，并把它们置入环境变量 QUERY_STRING（查询字串）里。所以为了读取那些信息，必须获得 QUERY_STRING 的值，这是用标准的 C 库函数 getnv()完成的。在 main()中，注意对 QUERY_STRING 的解析有多么容易：只需把它传递给用于 CGI_vector 对象的构造器（名为 query），剩下的所有工作都会自动进行。从这时开始，我们就可以从 query 中取出名称和值，把它们当作数组看待（这是由于 operator[]在 vector 里已经重载了）。在调试代码中，大家可看到这一切是如何运作的；调试代码封装在预处理器引导命令#if defined(DEBUG)和#endif(DEBUG)之间。</p>
<p>现在，我们迫切需要掌握一些与 CGI 有关的东西。CGI 程序用两个方式之一传递它们的输入：在 GET 执行期间通过 QUERY_STRING 传递（目前用的这种方式），或者在 POST 期间通过标准输入。但 CGI 程序通过标准输出发送自己的输出，这通常是用 C 程序的 printf()命令实现的。那么这个输出到哪里去了呢？它回到了 Web 服务器，由服务器决定该如何处理它。服务器作出决定的依据是 content-type（内容类型）头数据。这意味着假如 content-type 头不是它看到的第一件东西，就不知道该如何处理收到的数据。因此，我们无论如何也要使所有 CGI 程序都从 content-type 头开始输出。</p>
<p>在目前这种情况下，我们希望服务器将所有信息都直接反馈回客户程序（亦即我们的程序片，它们正在等候给自己的回复）。信息应该原封不动，所以 content-type 设为 text/plain（纯文本）。一旦服务器看到这个头，就会将所有字串都直接发还给客户。所以每个字串（三个用于出错条件，一个用于成功的加入）都会返回程序片。</p>
<p>我们用相同的代码添加电子函件名称（用户的姓名）。但在 CGI 脚本的情况下，并不存在无限循环——程序只是简单地响应，然后就中断。每次有一个 CGI 请求抵达时，程序都会启动，对那个请求作出反应，然后自行关闭。所以 CPU 不可能陷入空等待的尴尬境地，只有启动程序和打开文件时才存在性能上的隐患。Web 服务器对 CGI 请求进行控制时，它的开销会将这种隐患减轻到最低程度。
这种设计的另一个好处是由于 Pair 和 CGI_vector 都得到了定义，大多数工作都帮我们自动完成了，所以只需修改 main()即可轻松创建自己的 CGI 程序。尽管小服务程序（Servlet）最终会变得越来越流行，但为了创建快速的 CGI 程序，C++仍然显得非常方便。</p>
<p>15.6.4 POST 的概念</p>
<p>在许多应用程序中使用 GET 都没有问题。但是，GET 要求通过一个环境变量将自己的数据传递给 CGI 程序。但假如 GET 字串过长，有些 Web 服务器可能用光自己的环境空间（若字串长度超过 200 字符，就应开始关心这方面的问题）。CGI 为此提供了一个解决方案：POST。通过 POST，数据可以编码，并按与 GET 相同的方法连结起来。但 POST 利用标准输入将编码过后的查询字串传递给 CGI 程序。我们要做的全部事情就是判断查询字串的长度，而这个长度已在环境变量 CONTENT_LENGTH 中保存好了。一旦知道了长度，就可自由分配存储空间，并从标准输入中读入指定数量的字符。</p>
<p>对一个用来控制 POST 的 CGI 程序，由 CGITools.h 提供的 Pair 和 CGI_vector 均可不加丝毫改变地使用。下面这段程序揭示了写这样的一个 CGI 程序有多么简单。这个例子将采用“纯”C++，所以 studio.h 库被 iostream（IO 数据流）代替。对于 iostream，我们可以使用两个预先定义好的对象：cin，用于同标准输入连接；以及 cout，用于同标准输出连接。有几个办法可从 cin 中读入数据以及向 cout 中写入。但下面这个程序准备采用标准方法：用“&laquo;”将信息发给 cout，并用一个成员函数（此时是 read()）从 cin 中读入数据：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: POSTtest.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1">// CGI_vector works as easily with POST as it
</span></span></span><span class="line"><span class="cl"><span class="c1">// does with GET. Written in &#34;pure&#34; C++.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">#</span><span class="n">include</span> <span class="o">&lt;</span><span class="n">iostream</span><span class="o">.</span><span class="na">h</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="n">include</span> <span class="s">&#34;CGITools.h&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Content-type: text/plain\n&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// For a CGI &#34;POST,&#34; the server puts the length
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// of the content string in the environment
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// variable CONTENT_LENGTH:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">char</span><span class="o">*</span> <span class="n">clen</span> <span class="o">=</span> <span class="n">getenv</span><span class="o">(</span><span class="s">&#34;CONTENT_LENGTH&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span><span class="o">(</span><span class="n">clen</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Zero CONTENT_LENGTH&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">atoi</span><span class="o">(</span><span class="n">clen</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span><span class="o">*</span> <span class="n">query_str</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">len</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">  <span class="n">cin</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">query_str</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">query_str</span><span class="o">[</span><span class="n">len</span><span class="o">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">CGI_vector</span> <span class="nf">query</span><span class="o">(</span><span class="n">query_str</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Test: dump all names and values
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">query</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;query[&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;].name() = [&#34;</span> <span class="o">&lt;&lt;</span>
</span></span><span class="line"><span class="cl">      <span class="n">query</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">name</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;], &#34;</span> <span class="o">&lt;&lt;</span>
</span></span><span class="line"><span class="cl">      <span class="s">&#34;query[&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;].value() = [&#34;</span> <span class="o">&lt;&lt;</span>
</span></span><span class="line"><span class="cl">      <span class="n">query</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">value</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;]&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">delete</span> <span class="n">query_str</span><span class="o">;</span> <span class="c1">// Release storage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>getenv()函数返回指向一个字串的指针，那个字串指示着内容的长度。若指针为零，表明 CONTENT_LENGTH 环境变量尚未设置，所以肯定某个地方出了问题。否则就必须用 ANSI C 库函数 atoi()将字串转换成一个整数。这个长度将与 new 一起运用，分配足够的存储空间，以便容纳查询字串（另加它的空中止符）。随后为 cin()调用 read()。read()函数需要取得指向目标缓冲区的一个指针以及要读入的字节数。随后用空字符（null）中止 query_str，指出已经抵达字串的末尾，这就叫作“空中止”。</p>
<p>到这个时候，我们得到的查询字串与 GET 查询字串已经没有什么区别，所以把它传递给用于 CGI_vector 的构造器。随后便和前例一样，我们可以自由 vector 内不同的字段。</p>
<p>为测试这个程序，必须把它编译到主机 Web 服务器的 cgi-bin 目录下。然后就可以写一个简单的 HTML 页进行测试，就象下面这样：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">HTML</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">HEAD</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">META</span> <span class="n">CONTENT</span><span class="o">=</span><span class="s">&#34;text/html&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">TITLE</span><span class="o">&gt;</span><span class="n">A</span> <span class="n">test</span> <span class="n">of</span> <span class="n">standard</span> <span class="n">HTML</span> <span class="n">POST</span><span class="o">&lt;/</span><span class="n">TITLE</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">HEAD</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">Test</span><span class="o">,</span> <span class="n">uses</span> <span class="n">standard</span> <span class="n">html</span> <span class="n">POST</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">Form</span> <span class="n">method</span><span class="o">=</span><span class="s">&#34;POST&#34;</span> <span class="n">ACTION</span><span class="o">=</span><span class="s">&#34;/cgi-bin/POSTtest&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Field1</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;Field1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Field2</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;Field2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Field3</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;Field3&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Field4</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;Field4&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Field5</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;Field5&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span><span class="n">Field6</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">INPUT</span> <span class="n">TYPE</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#34;Field6&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">VALUE</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="n">size</span> <span class="o">=</span> <span class="s">&#34;40&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;submit&#34;</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;submit&#34;</span> <span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">Form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">HTML</span><span class="o">&gt;</span>
</span></span></code></pre></div><p>填好这个表单并提交出去以后，会得到一个简单的文本页，其中包含了解析出来的结果。从中可知道 CGI 程序是否在正常工作。
当然，用一个程序片来提交数据显得更有趣一些。然而，POST 数据的提交属于一个不同的过程。在用常规方式调用了 CGI 程序以后，必须另行建立与服务器的一个连接，以便将查询字串反馈给它。服务器随后会进行一番处理，再通过标准输入将查询字串反馈回 CGI 程序。</p>
<p>为建立与服务器的一个直接连接，必须取得自己创建的 URL，然后调用 openConnection()创建一个 URLConnection。但是，由于 URLConnection 一般不允许我们把数据发给它，所以必须很可笑地调用 setDoOutput(true)函数，同时调用的还包括 setDoInput(true)以及 setAllowUserInteraction(false)——注释 ⑥。最后，可调用 getOutputStream()来创建一个 OutputStream（输出数据流），并把它封装到一个 DataOutputStream 里，以便能按传统方式同它通信。下面列出的便是一个用于完成上述工作的程序片，必须在从它的各个字段里收集了数据之后再执行它：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//: POSTtest.java
</span></span></span><span class="line"><span class="cl"><span class="c1">// An applet that sends its data via a CGI POST
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.applet.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">POSTtest</span> <span class="kd">extends</span> <span class="n">Applet</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">final</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">SIZE</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Button</span> <span class="n">submit</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Button</span><span class="o">(</span><span class="s">&#34;Submit&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">TextField</span><span class="o">[]</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextField</span><span class="o">[</span><span class="n">SIZE</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">  <span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">Label</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Label</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">TextArea</span> <span class="n">ta</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextArea</span><span class="o">(</span><span class="mi">15</span><span class="o">,</span> <span class="mi">60</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Panel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Panel</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">GridLayout</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="na">length</span> <span class="o">+</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Label</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;Field &#34;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&#34;  &#34;</span><span class="o">,</span> <span class="n">Label</span><span class="o">.</span><span class="na">RIGHT</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">      <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">t</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextField</span><span class="o">(</span><span class="mi">30</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">l</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">submit</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="o">(</span><span class="s">&#34;North&#34;</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="o">(</span><span class="s">&#34;South&#34;</span><span class="o">,</span> <span class="n">ta</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">action</span> <span class="o">(</span><span class="n">Event</span> <span class="n">evt</span><span class="o">,</span> <span class="n">Object</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">evt</span><span class="o">.</span><span class="na">target</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">submit</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">query</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="n">ta</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Encode the query from the field data:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
</span></span><span class="line"><span class="cl">         <span class="n">query</span> <span class="o">+=</span> <span class="s">&#34;Field&#34;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&#34;=&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">           <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">             <span class="n">t</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">           <span class="s">&#34;&amp;&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="n">query</span> <span class="o">+=</span> <span class="s">&#34;submit=Submit&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// Send the name using CGI&#39;s POST process:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">URL</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">          <span class="n">getDocumentBase</span><span class="o">(),</span> <span class="s">&#34;cgi-bin/POSTtest&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">URLConnection</span> <span class="n">urlc</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">urlc</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">urlc</span><span class="o">.</span><span class="na">setDoInput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">urlc</span><span class="o">.</span><span class="na">setAllowUserInteraction</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">DataOutputStream</span> <span class="n">server</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">          <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">urlc</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Send the data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">server</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Read and display the response. You
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// cannot use
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// getAppletContext().showDocument(u);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// to display the results as a Web page!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">DataInputStream</span> <span class="n">in</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">          <span class="k">new</span> <span class="n">DataInputStream</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">urlc</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">s</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span><span class="o">((</span><span class="n">s</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">ta</span><span class="o">.</span><span class="na">appendText</span><span class="o">(</span><span class="n">s</span> <span class="o">+</span> <span class="s">&#34;\n&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">l</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span> <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">action</span><span class="o">(</span><span class="n">evt</span><span class="o">,</span> <span class="n">arg</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> <span class="c1">///:~
</span></span></span></code></pre></div><p>⑥：我不得不说自己并没有真正理解这儿都发生了什么事情，这些概念都是从 Elliotte Rusty Harold 编著的《Java Network Programming》里得来的，该书由 O&rsquo;Reilly 于 1997 年出版。他在书中提到了 Java 连网函数库中出现的许多令人迷惑的 Bug。所以一旦涉足这些领域，事情就不是编写代码，然后让它自己运行那么简单。一定要警惕潜在的陷阱！</p>
<p>信息发送到服务器后，我们调用 getInputStream()，并把返回值封装到一个 DataInputStream 里，以便自己能读取结果。要注意的一件事情是结果以文本行的形式显示在一个 TextArea（文本区域）中。为什么不简单地使用 getAppletContext().showDocument(u)呢？事实上，这正是那些陷阱中的一个。上述代码可以很好地工作，但假如试图换用 showDocument()，几乎一切都会停止运行。也就是说，showDocument()确实可以运行，但从 POSTtest 得到的返回结果是“Zero CONTENT_LENGTH”（内容长度为零）。所以不知道为什么原因，showDocument()阻止了 POST 查询向 CGI 程序的传递。我很难判断这到底是一个在以后版本里会修复的 Bug，还是由于我的理解不够（我看过的书对此讲得都很模糊）。但无论在哪种情况下，只要能坚持在文本区域里观看自 CGI 程序返回的内容，上述程序片运行时就没有问题。</p>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">上一页</div>
    <a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.5-%E4%B8%80%E4%B8%AAweb%E5%BA%94%E7%94%A8/" rel="next">15.5 一个Web应用</a>
  </div>
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">下一页</div>
    <a href="/books/java-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/think-in-java/15.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.7-%E7%94%A8jdbc%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="prev">15.7 用JDBC连接数据库</a>
  </div>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 0001-01-01</p>

          



          


  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); 
    s.async = true;
    s.src = 'https://' + "ngte" + '.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2022 NGTE all rights reserved</p>
        </div>
    </div>
  </div>

  <script type="text/javascript" id="clstr_globe" async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script>
  
</footer>


    </main>
  </div>
</div>
<script src="//unpkg.com/heti/umd/heti-addon.min.js"></script>
<script>
  const heti = new Heti('.article');
  heti.autoSpacing();
</script>
<script type="text/javascript">
  window.$crisp = [];
  window.CRISP_WEBSITE_ID = "12adcc35-9621-4313-8262-62dc654b29d8";
  (function () {
    setTimeout(function() {
      d = document;
      s = d.createElement("script");
      s.src = "https://client.crisp.chat/l.js";
      s.async = 1;
      d.getElementsByTagName("head")[0].appendChild(s);
    }, 2500);
  })();
</script>
  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
      

    

    
    
    

    
    
    
      
      <script id="search-hit-algolia-template" type="text/html">
        <div class="search-hit">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a>
            </div>
            <div class="article-metadata search-hit-type">{{type}}</div>
            <p class="search-hit-description">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js" crossorigin="anonymous"></script>
      
      
    

    
    

    
    
    
    
      <script id="dsq-count-scr" src="https://ngte.disqus.com/count.js" async></script>
      
    

    
    
      
      
      
      
      
      
      
    

    
    <script src="/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js" type="module"></script>
    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
    
    <script src="/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js"></script>

    
    
    
    
    
    
    <script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>


    

    
    
    <script src="https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    <script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>

    


</body>
</html>
