<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="ObjectMapper Jackson ObjectMapper 类（com.fasterxml.jackson.databind.ObjectMapper）是使用 Jackson 解析 JSON 的最简单方法。Jackson ObjectMapper 可以从字符串，流或文件中解析 JSON，并创建表示已解析的 JSON"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/objectmapper/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.fab3cd1900ae35687457073b2d518207.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/objectmapper/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/objectmapper/"><meta property="og:title" content="ObjectMapper | Next-gen Tech Edu"><meta property="og:description" content="ObjectMapper Jackson ObjectMapper 类（com.fasterxml.jackson.databind.ObjectMapper）是使用 Jackson 解析 JSON 的最简单方法。Jackson ObjectMapper 可以从字符串，流或文件中解析 JSON，并创建表示已解析的 JSON"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>ObjectMapper | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=468c218d2fb06a0bf79713b8b7a5a6e2><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">Jackson</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id63ac952359e025ec98da787ff8b82aad")' href=#id63ac952359e025ec98da787ff8b82aad aria-expanded=false aria-controls=id63ac952359e025ec98da787ff8b82aad aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/>Json</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id63ac952359e025ec98da787ff8b82aad aria-expanded=false aria-controls=id63ac952359e025ec98da787ff8b82aad><i class="fa-solid fa-angle-down" id=caret-id63ac952359e025ec98da787ff8b82aad></i></a></div><ul class="nav docs-sidenav collapse show" id=id63ac952359e025ec98da787ff8b82aad><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb9cda1b6914015c37b04697f00e9768c")' href=#idb9cda1b6914015c37b04697f00e9768c aria-expanded=false aria-controls=idb9cda1b6914015c37b04697f00e9768c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/fastjson/>FastJson</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb9cda1b6914015c37b04697f00e9768c aria-expanded=false aria-controls=idb9cda1b6914015c37b04697f00e9768c><i class="fa-solid fa-angle-right" id=caret-idb9cda1b6914015c37b04697f00e9768c></i></a></div><ul class="nav docs-sidenav collapse" id=idb9cda1b6914015c37b04697f00e9768c><li class="child level"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/fastjson/%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/>基本使用</a></li></ul></div><li class="child level"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/gson/>GSON</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idcad0b4bea84d5049998b8cf36309aea0")' href=#idcad0b4bea84d5049998b8cf36309aea0 aria-expanded=false aria-controls=idcad0b4bea84d5049998b8cf36309aea0 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/>Jackson</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idcad0b4bea84d5049998b8cf36309aea0 aria-expanded=false aria-controls=idcad0b4bea84d5049998b8cf36309aea0><i class="fa-solid fa-angle-down" id=caret-idcad0b4bea84d5049998b8cf36309aea0></i></a></div><ul class="nav docs-sidenav collapse show" id=idcad0b4bea84d5049998b8cf36309aea0><li class="child level"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/json-tree-model/>JSON Tree Model</a></li><li class="child level active"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/objectmapper/>ObjectMapper</a></li><li class="child level"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/%E6%B3%9B%E5%9E%8B/>泛型</a></li><li class="child level"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/>基础使用</a></li><li class="child level"><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/%E7%B1%BB%E6%B3%A8%E8%A7%A3/>类注解</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#apis>APIs</a><ul><li><a href=#读取为对象>读取为对象</a></li><li><a href=#序列化为字符串>序列化为字符串</a></li></ul></li><li><a href=#annotations>Annotations</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>ObjectMapper</h1><div class=article-style><h1 id=objectmapper>ObjectMapper</h1><p>Jackson ObjectMapper 类（com.fasterxml.jackson.databind.ObjectMapper）是使用 Jackson 解析 JSON 的最简单方法。Jackson ObjectMapper 可以从字符串，流或文件中解析 JSON，并创建表示已解析的 JSON 的 Java 对象或对象图。将 JSON 解析为 Java 对象也称为从 JSON 反序列化 Java 对象。Jackson ObjectMapper 也可以从 Java 对象创建 JSON。从 Java 对象生成 JSON 也称为将 Java 对象序列化为 JSON。Jackson Object 映射器可以将 JSON 解析为您开发的类的对象，也可以解析为本教程稍后说明的内置 JSON 树模型的对象。顺便说一下，之所以称为 ObjectMapper 是因为它将 JSON 映射到 Java 对象（反序列化），或者将 Java 对象映射到 JSON（序列化）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Car</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>brand</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>doors</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ObjectMapper</span> <span class=n>objectMapper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectMapper</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>carJson</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;{ \&#34;brand\&#34; : \&#34;Mercedes\&#34;, \&#34;doors\&#34; : 5 }&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>carJson</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;car brand = &#34;</span> <span class=o>+</span> <span class=n>car</span><span class=o>.</span><span class=na>getBrand</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;car doors = &#34;</span> <span class=o>+</span> <span class=n>car</span><span class=o>.</span><span class=na>getDoors</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>IOException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Car.class 是我们自定义的类，其作为第二个参数传入到 readValue 函数中。为了使用 Jackson 正确地从 JSON 读取 Java 对象，重要的是要知道 Jackson 如何将 JSON 对象的字段映射到 Java 对象的字段，因此我将解释 Jackson 是如何做到的。默认情况下，Jackson 通过将 JSON 字段的名称与 Java 对象中的 getter 和 setter 方法进行匹配，将 JSON 对象的字段映射到 Java 对象中的字段。Jackson 删除了 getter 和 setter 方法名称的“ get”和“ set”部分，并将其余名称的第一个字符转换为小写。</p><p>例如，名为 brand 的 JSON 字段与名为 getBrand() 和 setBrand() 的 Java getter 和 setter 方法匹配。名为 engineNumber 的 JSON 字段将与名为 getEngineNumber() 和 setEngineNumber() 的 getter 和 setter 匹配。如果需要以其他方式将 JSON 对象字段与 Java 对象字段匹配，则需要使用自定义序列化器和反序列化器，或者使用许多 Jackson 注释中的一些。</p><h2 id=apis>APIs</h2><h3 id=读取为对象>读取为对象</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ObjectMapper</span> <span class=n>objectMapper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectMapper</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>carJson</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;{ \&#34;brand\&#34; : \&#34;Mercedes\&#34;, \&#34;doors\&#34; : 5 }&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 来自于 JSON 字符串
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>carJson</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 来自于 JSON 数组
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>String</span> <span class=n>jsonArray</span> <span class=o>=</span> <span class=s>&#34;[{\&#34;brand\&#34;:\&#34;ford\&#34;}, {\&#34;brand\&#34;:\&#34;Fiat\&#34;}]&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Car</span><span class=o>[]</span> <span class=n>cars2</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>jsonArray</span><span class=o>,</span> <span class=n>Car</span><span class=o>[].</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Car</span><span class=o>&gt;</span> <span class=n>cars1</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>jsonArray</span><span class=o>,</span> <span class=k>new</span> <span class=n>TypeReference</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Car</span><span class=o>&gt;&gt;(){});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 从 JSON Byte Array 读取
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>byte</span><span class=o>[]</span> <span class=n>bytes</span> <span class=o>=</span> <span class=n>carJson</span><span class=o>.</span><span class=na>getBytes</span><span class=o>(</span><span class=s>&#34;UTF-8&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 读取为 Map
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>String</span> <span class=n>jsonObject</span> <span class=o>=</span> <span class=s>&#34;{\&#34;brand\&#34;:\&#34;ford\&#34;, \&#34;doors\&#34;:5}&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Object</span><span class=o>&gt;</span> <span class=n>jsonMap</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>jsonObject</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>TypeReference</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>Object</span><span class=o>&gt;&gt;(){});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 来自于 StringReader
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Reader</span> <span class=n>reader</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringReader</span><span class=o>(</span><span class=n>carJson</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>reader</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 来自于 JSON 文件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>File</span> <span class=n>file</span> <span class=o>=</span> <span class=k>new</span> <span class=n>File</span><span class=o>(</span><span class=s>&#34;data/car.json&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>file</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 从 URL 读取
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>InputStream</span> <span class=n>input</span> <span class=o>=</span> <span class=k>new</span> <span class=n>FileInputStream</span><span class=o>(</span><span class=s>&#34;data/car.json&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>input</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span></code></pre></div><p>我们可以设置在读取到 Null 的原始类型时抛出异常：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>objectMapper</span><span class=o>.</span><span class=na>configure</span><span class=o>(</span><span class=n>DeserializationFeature</span><span class=o>.</span><span class=na>FAIL_ON_NULL_FOR_PRIMITIVES</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>carJson</span> <span class=o>=</span> <span class=s>&#34;{ \&#34;brand\&#34;:\&#34;Toyota\&#34;, \&#34;doors\&#34;:null }&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>carJson</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Exception</span> <span class=n>in</span> <span class=n>thread</span> <span class=s>&#34;main&#34;</span> <span class=n>com</span><span class=o>.</span><span class=na>fasterxml</span><span class=o>.</span><span class=na>jackson</span><span class=o>.</span><span class=na>databind</span><span class=o>.</span><span class=na>exc</span><span class=o>.</span><span class=na>MismatchedInputException</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>Cannot</span> <span class=n>map</span> <span class=err>`</span><span class=kc>null</span><span class=err>`</span> <span class=n>into</span> <span class=n>type</span> <span class=nf>int</span>
</span></span><span class=line><span class=cl>    <span class=o>(</span><span class=n>set</span> <span class=n>DeserializationConfig</span><span class=o>.</span><span class=na>DeserializationFeature</span><span class=o>.</span><span class=na>FAIL_ON_NULL_FOR_PRIMITIVES</span> <span class=n>to</span> <span class=err>&#39;</span><span class=kc>false</span><span class=err>&#39;</span> <span class=n>to</span> <span class=n>allow</span><span class=o>)</span>
</span></span><span class=line><span class=cl> <span class=n>at</span> <span class=o>[</span><span class=n>Source</span><span class=o>:</span> <span class=o>(</span><span class=n>String</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;{ &#34;</span><span class=n>brand</span><span class=s>&#34;:&#34;</span><span class=n>Toyota</span><span class=s>&#34;, &#34;</span><span class=n>doors</span><span class=s>&#34;:null }&#34;</span><span class=o>;</span> <span class=n>line</span><span class=o>:</span> <span class=mi>1</span><span class=o>,</span> <span class=n>column</span><span class=o>:</span> <span class=mi>29</span><span class=o>]</span> <span class=o>(</span><span class=n>through</span> <span class=n>reference</span> <span class=n>chain</span><span class=o>:</span> <span class=n>jackson</span><span class=o>.</span><span class=na>Car</span><span class=o>[</span><span class=s>&#34;doors&#34;</span><span class=o>])</span>
</span></span></code></pre></div><p>最后，我们也可以注册自定义的解释器：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>CarDeserializer</span> <span class=kd>extends</span> <span class=n>StdDeserializer</span><span class=o>&lt;</span><span class=n>Car</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>CarDeserializer</span><span class=o>(</span><span class=n>Class</span><span class=o>&lt;?&gt;</span> <span class=n>vc</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>vc</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Car</span> <span class=nf>deserialize</span><span class=o>(</span><span class=n>JsonParser</span> <span class=n>parser</span><span class=o>,</span> <span class=n>DeserializationContext</span> <span class=n>deserializer</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>IOException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Car</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span><span class=o>(!</span><span class=n>parser</span><span class=o>.</span><span class=na>isClosed</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>            <span class=n>JsonToken</span> <span class=n>jsonToken</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=na>nextToken</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>JsonToken</span><span class=o>.</span><span class=na>FIELD_NAME</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>jsonToken</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                <span class=n>String</span> <span class=n>fieldName</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=na>getCurrentName</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>fieldName</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>jsonToken</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=na>nextToken</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=o>(</span><span class=s>&#34;brand&#34;</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>fieldName</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                    <span class=n>car</span><span class=o>.</span><span class=na>setBrand</span><span class=o>(</span><span class=n>parser</span><span class=o>.</span><span class=na>getValueAsString</span><span class=o>());</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=s>&#34;doors&#34;</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>fieldName</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                    <span class=n>car</span><span class=o>.</span><span class=na>setDoors</span><span class=o>(</span><span class=n>parser</span><span class=o>.</span><span class=na>getValueAsInt</span><span class=o>());</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>car</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>json</span> <span class=o>=</span> <span class=s>&#34;{ \&#34;brand\&#34; : \&#34;Ford\&#34;, \&#34;doors\&#34; : 6 }&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SimpleModule</span> <span class=n>module</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>SimpleModule</span><span class=o>(</span><span class=s>&#34;CarDeserializer&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>Version</span><span class=o>(</span><span class=mi>3</span><span class=o>,</span> <span class=mi>1</span><span class=o>,</span> <span class=mi>8</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=kc>null</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=n>module</span><span class=o>.</span><span class=na>addDeserializer</span><span class=o>(</span><span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=k>new</span> <span class=n>CarDeserializer</span><span class=o>(</span><span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ObjectMapper</span> <span class=n>mapper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectMapper</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>mapper</span><span class=o>.</span><span class=na>registerModule</span><span class=o>(</span><span class=n>module</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=n>mapper</span><span class=o>.</span><span class=na>readValue</span><span class=o>(</span><span class=n>json</span><span class=o>,</span> <span class=n>Car</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span></code></pre></div><h3 id=序列化为字符串>序列化为字符串</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ObjectMapper</span> <span class=n>objectMapper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectMapper</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Car</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>car</span><span class=o>.</span><span class=na>brand</span> <span class=o>=</span> <span class=s>&#34;BMW&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>car</span><span class=o>.</span><span class=na>doors</span> <span class=o>=</span> <span class=mi>4</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>objectMapper</span><span class=o>.</span><span class=na>writeValue</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>FileOutputStream</span><span class=o>(</span><span class=s>&#34;data/output-2.json&#34;</span><span class=o>),</span> <span class=n>car</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ObjectMapper</span> <span class=n>objectMapper</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ObjectMapper</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>car</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Car</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>car</span><span class=o>.</span><span class=na>brand</span> <span class=o>=</span> <span class=s>&#34;BMW&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>car</span><span class=o>.</span><span class=na>doors</span> <span class=o>=</span> <span class=mi>4</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>json</span> <span class=o>=</span> <span class=n>objectMapper</span><span class=o>.</span><span class=na>writeValueAsString</span><span class=o>(</span><span class=n>car</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>json</span><span class=o>);</span>
</span></span></code></pre></div><h2 id=annotations>Annotations</h2><p>Jackson 包含一组 Java 批注，您可以使用这些批注来修改 Jackson 到 Java 对象之间读写 JSON 的方式。Jackson 批注 @JsonIgnore 用于告诉 Jackson 忽略 Java 对象的某个属性（字段）。在将 JSON 读取到 Java 对象中以及将 Java 对象写入 JSON 时，都将忽略该属性。这是使用 @JsonIgnore 批注的示例类：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>com.fasterxml.jackson.annotation.JsonIgnore</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>PersonIgnore</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@JsonIgnore</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>long</span>    <span class=n>personId</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span>  <span class=n>name</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/json-tree-model/ rel=next>JSON Tree Model</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/java-notes/02.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/20.%E5%BA%8F%E5%88%97%E5%8C%96/json/jackson/%E6%B3%9B%E5%9E%8B/ rel=prev>泛型</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>