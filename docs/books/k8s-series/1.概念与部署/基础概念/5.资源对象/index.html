<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="应用对象 类别 名称 资源对象 Pod、ReplicaSet、ReplicationController、Deployment、StatefulSet、DaemonSet、Job、CronJob、Horizo"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/5.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/5.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/5.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/"><meta property="og:title" content="5.资源对象 | Next-gen Tech Edu"><meta property="og:description" content="应用对象 类别 名称 资源对象 Pod、ReplicaSet、ReplicationController、Deployment、StatefulSet、DaemonSet、Job、CronJob、Horizo"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>5.资源对象 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=30c83524aea26bc84f5b70e43992932a><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">基础概念</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idba2bd2c893144baac8d82109e9d627f8")' href=#idba2bd2c893144baac8d82109e9d627f8 aria-expanded=false aria-controls=idba2bd2c893144baac8d82109e9d627f8 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/>1.概念与部署</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idba2bd2c893144baac8d82109e9d627f8 aria-expanded=false aria-controls=idba2bd2c893144baac8d82109e9d627f8><i class="fa-solid fa-angle-down" id=caret-idba2bd2c893144baac8d82109e9d627f8></i></a></div><ul class="nav docs-sidenav collapse show" id=idba2bd2c893144baac8d82109e9d627f8><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id26c0102dee47534761cae5d2fae13c07")' href=#id26c0102dee47534761cae5d2fae13c07 aria-expanded=false aria-controls=id26c0102dee47534761cae5d2fae13c07 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/kubectl/>kubectl</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id26c0102dee47534761cae5d2fae13c07 aria-expanded=false aria-controls=id26c0102dee47534761cae5d2fae13c07><i class="fa-solid fa-angle-right" id=caret-id26c0102dee47534761cae5d2fae13c07></i></a></div><ul class="nav docs-sidenav collapse" id=id26c0102dee47534761cae5d2fae13c07><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/kubectl/%E9%9B%86%E7%BE%A4%E4%B8%8A%E4%B8%8B%E6%96%87/>集群上下文</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/kubectl/%E8%BF%90%E8%A1%8C%E4%B8%8E%E7%AE%A1%E7%90%86/>运行与管理</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/kubectl/%E8%B5%84%E6%BA%90%E6%93%8D%E4%BD%9C/>资源操作</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf84570e7bf66d0c51151c98736fca224")' href=#idf84570e7bf66d0c51151c98736fca224 aria-expanded=false aria-controls=idf84570e7bf66d0c51151c98736fca224 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/>安装配置</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf84570e7bf66d0c51151c98736fca224 aria-expanded=false aria-controls=idf84570e7bf66d0c51151c98736fca224><i class="fa-solid fa-angle-right" id=caret-idf84570e7bf66d0c51151c98736fca224></i></a></div><ul class="nav docs-sidenav collapse" id=idf84570e7bf66d0c51151c98736fca224><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idef79a506db23ac5f3f773368308069b1")' href=#idef79a506db23ac5f3f773368308069b1 aria-expanded=false aria-controls=idef79a506db23ac5f3f773368308069b1 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id4f9542a055c527a07b6a91bc292efa1d")' href=#id4f9542a055c527a07b6a91bc292efa1d aria-expanded=false aria-controls=id4f9542a055c527a07b6a91bc292efa1d aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id4a232ede660ffd34f8cb42087880b3ed")' href=#id4a232ede660ffd34f8cb42087880b3ed aria-expanded=false aria-controls=id4a232ede660ffd34f8cb42087880b3ed aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8ecae682b654d414af748dc73a28d7fa")' href=#id8ecae682b654d414af748dc73a28d7fa aria-expanded=false aria-controls=id8ecae682b654d414af748dc73a28d7fa aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/%E9%9B%86%E7%BE%A4/>集群</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8ecae682b654d414af748dc73a28d7fa aria-expanded=false aria-controls=id8ecae682b654d414af748dc73a28d7fa><i class="fa-solid fa-angle-right" id=caret-id8ecae682b654d414af748dc73a28d7fa></i></a></div><ul class="nav docs-sidenav collapse" id=id8ecae682b654d414af748dc73a28d7fa><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/%E9%9B%86%E7%BE%A4/rancher-%E6%90%AD%E5%BB%BA%E9%9B%86%E7%BE%A4/>Rancher 搭建集群</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/%E9%9B%86%E7%BE%A4/ubuntu-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/>Ubuntu 集群搭建</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id58d80ef6e357a3ce0db89ffc4dbd52d9")' href=#id58d80ef6e357a3ce0db89ffc4dbd52d9 aria-expanded=false aria-controls=id58d80ef6e357a3ce0db89ffc4dbd52d9 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/>典型案例</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id58d80ef6e357a3ce0db89ffc4dbd52d9 aria-expanded=false aria-controls=id58d80ef6e357a3ce0db89ffc4dbd52d9><i class="fa-solid fa-angle-right" id=caret-id58d80ef6e357a3ce0db89ffc4dbd52d9></i></a></div><ul class="nav docs-sidenav collapse" id=id58d80ef6e357a3ce0db89ffc4dbd52d9><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/caddy/>Caddy</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/dokuwiki/>DokuWiki</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/elk/>ELK</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/mean/>MEAN</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/minio/>Minio</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/mysql/>MySQL</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/prometheus/>Prometheus</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/traefik/>Traefik</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%85%B8%E5%9E%8B%E6%A1%88%E4%BE%8B/web-%E5%BA%94%E7%94%A8/>Web 应用</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idceb0da8275d8bba27ae2a518e58f7275")' href=#idceb0da8275d8bba27ae2a518e58f7275 aria-expanded=false aria-controls=idceb0da8275d8bba27ae2a518e58f7275 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/>基础概念</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idceb0da8275d8bba27ae2a518e58f7275 aria-expanded=false aria-controls=idceb0da8275d8bba27ae2a518e58f7275><i class="fa-solid fa-angle-down" id=caret-idceb0da8275d8bba27ae2a518e58f7275></i></a></div><ul class="nav docs-sidenav collapse show" id=idceb0da8275d8bba27ae2a518e58f7275><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/1.%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5/>1.设计理念</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/2.%E4%B8%BA%E4%BD%95%E4%BD%BF%E7%94%A8-k8s/>2.为何使用 K8s</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/3.%E9%9B%86%E7%BE%A4%E7%BB%84%E4%BB%B6/>3.集群组件</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/4.%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/>4.开放接口</a></li><li class="child level active"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/5.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/>5.资源对象</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/label-%E4%B8%8E-selector/>Label 与 Selector</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/%E9%9B%86%E7%BE%A4%E7%BB%84%E4%BB%B6/>集群组件</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/>开放接口</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5/>设计理念</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/%E4%B8%BA%E4%BD%95%E4%BD%BF%E7%94%A8-k8s/>为何使用 K8s</a></li><li class="child level"><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/>资源对象</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#basic>Basic</a><ul><li><a href=#pod>Pod</a></li><li><a href=#命名空间namespace>命名空间（Namespace）</a></li><li><a href=#节点node>节点（Node）</a></li><li><a href=#label>Label</a></li></ul></li><li><a href=#workloads>Workloads</a><ul><li><a href=#rc--rs>RC & RS</a></li><li><a href=#部署deployment>部署（Deployment）</a></li><li><a href=#任务job-定时任务cronjob>任务（Job）& 定时任务（CronJob）</a></li><li><a href=#后台支撑服务集daemonset>后台支撑服务集（DaemonSet）</a></li><li><a href=#有状态服务集statefulset>有状态服务集（StatefulSet）</a></li></ul></li><li><a href=#服务发现与负载均衡service-discovery--load-balancing>服务发现与负载均衡（Service Discovery & Load Balancing）</a><ul><li><a href=#服务service>服务（Service）</a></li><li><a href=#ingress>Ingress</a></li></ul></li></ul><ul><li><a href=#存储卷volume>存储卷（Volume）</a></li><li><a href=#持久存储卷persistent-volumepv和持久存储卷声明persistent-volume-claimpvc>持久存储卷（Persistent Volume，PV）和持久存储卷声明（Persistent Volume Claim，PVC）</a></li><li><a href=#配置对象configmap>配置对象（ConfigMap）</a></li><li><a href=#密钥对象secret>密钥对象（Secret）</a></li></ul><ul><li><a href=#用户帐户user-account和服务帐户service-account>用户帐户（User Account）和服务帐户（Service Account）</a></li><li><a href=#rbac-访问授权>RBAC 访问授权</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>5.资源对象</h1><div class=article-style><h1 id=应用对象>应用对象</h1><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://i.postimg.cc/PrF8smNg/image.png alt="K8s 对象协作图" loading=lazy data-zoomable></div></div></figure></p><table><thead><tr><th style=text-align:left>类别</th><th>名称</th></tr></thead><tbody><tr><td style=text-align:left>资源对象</td><td>Pod、ReplicaSet、ReplicationController、Deployment、StatefulSet、DaemonSet、Job、CronJob、HorizontalPodAutoscaling、Node、Namespace、Service、Ingress、Label、CustomResourceDefinition</td></tr><tr><td style=text-align:left>存储对象</td><td>Volume、PersistentVolume、Secret、ConfigMap</td></tr><tr><td style=text-align:left>策略对象</td><td>SecurityContext、ResourceQuota、LimitRange</td></tr><tr><td style=text-align:left>身份对象</td><td>ServiceAccount、Role、ClusterRole</td></tr></tbody></table><h1 id=对象基础>对象基础</h1><p>Kubernetes 使用对象去描述整个集群的状态，集群的状态包括了：什么容器化应用在运行以及在哪个 Node 上、可以被应用使用的资源、关于应用如何表现的策略，比如重启策略、升级策略，以及容错策略等。一旦创建对象，Kubernetes 系统将持续工作以确保对象存在。通过创建对象，可以有效地告知 Kubernetes 系统，所需要的集群工作负载看起来是什么样子的，这就是 Kubernetes 集群的期望状态。
API 对象是 Kubernetes 集群中的管理操作单元。Kubernetes 集群系统每支持一项新功能，引入一项新技术，一定会新引入对应的 API 对象，支持对该功能的管理操作。例如副本集 Replica Set 对应的 API 对象是 RS。每个 API 对象都有 3 大类属性：元数据 metadata、规范 spec 和状态 status。</p><ul><li><p>元数据是用来标识 API 对象的，每个对象都至少有 3 个元数据：namespace，name 和 uid；除此以外还有各种各样的标签 labels 用来标识和匹配不同的对象，例如用户可以用标签 env 来标识区分不同的服务部署环境，分别用 env=dev、env=testing、env=production 来标识开发、测试、生产的不同服务。</p></li><li><p>spec 规范描述了用户期望 Kubernetes 集群中的分布式系统达到的理想状态（Desired State），例如用户可以通过复制控制器 Replication Controller 设置期望的 Pod 副本数为 3；</p></li><li><p>status 描述了系统实际当前达到的状态（Status），例如系统当前实际的 Pod 副本数为 2；那么复制控制器当前的程序逻辑就是自动启动新的 Pod，争取达到副本数为 3。</p></li></ul><p>spec 必须提供，它描述了对象的期望状态，即希望对象所具有的特征，而 status 描述了对象的实际状态，它是由 Kubernetes 系统提供和更新。在任何时刻，Kubernetes 控制平面一直处于活跃状态，管理着对象的实际状态以与我们所期望的状态相匹配。当创建 Kubernetes 对象时，必须提供对象的 spec，用来描述该对象的期望状态，以及关于对象的一些基本信息（例如，名称）。当使用 Kubernetes API 创建对象时（或者直接创建，或者基于 kubectl），API 请求必须在请求体中包含 JSON 格式的信息。更常用的是，需要在 .yaml 文件中为 kubectl 提供这些信息。kubectl 在执行 API 请求时，将这些信息转换成 JSON 格式。这里有一个 .yaml 示例文件，展示了 Kubernetes Deployment 的必需字段和对象 spec：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w> </span><span class=c># for versions before 1.9.0 use apps/v1beta2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx:1.7.9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span></code></pre></div><h1 id=资源对象>资源对象</h1><h2 id=basic>Basic</h2><h3 id=pod>Pod</h3><p>Pod 可谓 Kubernetes 中最为基础与重要的概念，Pod 是在 Kubernetes 集群中运行部署应用或服务的最小单元，可以支持包含多容器。Pod 的设计理念是支持多个容器在一个 Pod 中共享网络地址和文件系统，可以通过进程间通信和文件共享这种简单高效的方式组合完成服务。</p><p>每个 Pod 都包含一个“根容器”（Pause 容器）和多个紧密相关的用户业务容器。每个 Pod 都会提供一个独立的 Endpoint（Pod IP + Container Port）以供调用方访问。在一组容器作为一个单元的情况下难以对这个“整体”简单进行判断以及进行行动。Pod 内用一个业务无关的容器来代表这个整体的状态。业务容器之间的通信与文件共享问题。Pod 基于虚拟二层网络技术（Flannel）实现任意两个跨主机的 Pod 之间可直接通信；同一个 Pod 里的容器共享同一个网络命名空间，可以使用 localhost 互相通信。Pod 是短暂的，不是持续性实体。</p><h3 id=命名空间namespace>命名空间（Namespace）</h3><p>命名空间为 Kubernetes 集群提供虚拟的隔离作用，Kubernetes 集群初始有两个命名空间，分别是默认命名空间 default 和系统命名空间 kube-system，除此以外，管理员可以可以创建新的命名空间满足需要。</p><h3 id=节点node>节点（Node）</h3><p>Kubernetes 集群中的计算能力由 Node 提供，最初 Node 称为服务节点 Minion，后来改名为 Node。Kubernetes 集群中的 Node 也就等同于 Mesos 集群中的 Slave 节点，是所有 Pod 运行所在的工作主机，可以是物理机也可以是虚拟机。不论是物理机还是虚拟机，工作主机的统一特征是上面要运行 kubelet 管理节点上运行的容器。</p><h3 id=label>Label</h3><p>一个 Label 是 attach 到 Pod 的一对键/值对，用来传递用户定义的属性。比如，你可能创建了一个"tier"和“app”标签，通过 Label（tier=frontend, app=myapp）来标记前端 Pod 容器，使用 Label（tier=backend, app=myapp）标记后台 Pod。然后可以使用 Selectors 选择带有特定 Label 的 Pod，并且将 Service 或者 Replication Controller 应用到上面。</p><p>一个 Label 是一个 key=value 的键值对，由用于自行指定。Label 可以附加到各种 Kubernetes 资源上，例如 Node、Pod、Service、RC 等，Label 与资源对象是多对多的关系，其可以在资源对象定义是确定，也可以在资源对象创建后动态添加、删除。Kubernetes 中非常核心重要的功能之一，用于分类、检索资源。重要使用场景有以下几处：</p><ul><li><p>kube-controller 进程通过 RC 上定义的 Label Selector 来筛选要监控的 Pod 副本数量，从而实现 Pod 副本数量始终符合预期设定的全自动控制流程。</p></li><li><p>kube-proxy 进程通过 Service 的 Label Selector 来选择对应的 Pod，自动建立起每个 Service 到对应 Pod 的请求转发路由表，从而实现 Service 的智能负载均衡机制。</p></li><li><p>kube-scheduler 基于 Pod 的 NodeSelector 标签调度策略实现 Pod“定向调度”的特性。</p></li></ul><h2 id=workloads>Workloads</h2><p>Pods 通常由更高级的抽象对象进行控制，进行常见的副本、认证、持久化存储、自定义调度、滚动更新等操作。</p><ul><li><p>Deployments (Stateless Applications): replication + rollouts</p></li><li><p>StatefulSets (Stateful Applications): replication + rollouts + persistent storage + identity</p></li><li><p>Jobs (Batch Work): run to completion</p></li><li><p>CronJobs (Scheduled Batch Work): scheduled run to completion</p></li><li><p>DaemonSets (Per-Machine): per-Node scheduling</p></li></ul><h3 id=rc--rs>RC & RS</h3><p>副本控制器（Replication Controller，RC）是 Kubernetes 集群中最早的保证 Pod 高可用的 API 对象。通过监控运行中的 Pod 来保证集群中运行指定数目的 Pod 副本。指定的数目可以是多个也可以是 1 个；少于指定数目，RC 就会启动运行新的 Pod 副本；多于指定数目，RC 就会杀死多余的 Pod 副本。即使在指定数目为 1 的情况下，通过 RC 运行 Pod 也比直接运行 Pod 更明智，因为 RC 也可以发挥它高可用的能力，保证永远有 1 个 Pod 在运行。RC 是 Kubernetes 较早期的技术概念，只适用于长期伺服型的业务类型。</p><p>副本集（Replication Set，RS）是新一代 RC，提供同样的高可用能力，区别主要在于 RS 后来居上，能支持更多种类的匹配模式。副本集对象一般不单独使用，而是作为 Deployment 的理想状态参数使用。</p><h3 id=部署deployment>部署（Deployment）</h3><p>部署表示用户对 Kubernetes 集群的一次更新操作。部署是一个比 RS 应用模式更广的 API 对象，可以是创建一个新的服务，更新一个新的服务，也可以是滚动升级一个服务。滚动升级一个服务，实际是创建一个新的 RS，然后逐渐将新 RS 中副本数增加到理想状态，将旧 RS 中的副本数减小到 0 的复合操作；这样一个复合操作用一个 RS 是不太好描述的，所以用一个更通用的 Deployment 来描述。以 Kubernetes 的发展方向，未来对所有长期伺服型的的业务的管理，都会通过 Deployment 来管理。</p><h3 id=任务job-定时任务cronjob>任务（Job）& 定时任务（CronJob）</h3><p>Job 是 Kubernetes 用来控制批处理型任务的 API 对象。批处理业务与长期伺服业务的主要区别是批处理业务的运行有头有尾，而长期伺服业务在用户不停止的情况下永远运行。Job 管理的 Pod 根据用户的设置把任务成功完成就自动退出了。成功完成的标志根据不同的 spec.completions 策略而不同：单 Pod 型任务有一个 Pod 成功就标志完成；定数成功型任务保证有 N 个任务全部成功；工作队列型任务根据应用确认的全局成功而标志成功。</p><h3 id=后台支撑服务集daemonset>后台支撑服务集（DaemonSet）</h3><p>长期伺服型和批处理型服务的核心在业务应用，可能有些节点运行多个同类业务的 Pod，有些节点上又没有这类 Pod 运行；而后台支撑型服务的核心关注点在 Kubernetes 集群中的节点（物理机或虚拟机），要保证每个节点上都有一个此类 Pod 运行。节点可能是所有集群节点也可能是通过 nodeSelector 选定的一些特定节点。典型的后台支撑型服务包括，存储，日志和监控等在每个节点上支持 Kubernetes 集群运行的服务。</p><h3 id=有状态服务集statefulset>有状态服务集（StatefulSet）</h3><p>RC 和 RS 主要是控制提供无状态服务的，其所控制的 Pod 的名字是随机设置的，一个 Pod 出故障了就被丢弃掉，在另一个地方重启一个新的 Pod，名字变了。名字和启动在哪儿都不重要，重要的只是 Pod 总数；而 StatefulSet 是用来控制有状态服务，StatefulSet 中的每个 Pod 的名字都是事先确定的，不能更改。</p><p>对于 RC 和 RS 中的 Pod，一般不挂载存储或者挂载共享存储，保存的是所有 Pod 共享的状态，Pod 像牲畜一样没有分别（这似乎也确实意味着失去了人性特征）；对于 StatefulSet 中的 Pod，每个 Pod 挂载自己独立的存储，如果一个 Pod 出现故障，从其他节点启动一个同样名字的 Pod，要挂载上原来 Pod 的存储继续以它的状态提供服务。</p><p>适合于 StatefulSet 的业务包括数据库服务 MySQL 和 PostgreSQL，集群化管理服务 ZooKeeper、etcd 等有状态服务。StatefulSet 的另一种典型应用场景是作为一种比普通容器更稳定可靠的模拟虚拟机的机制。传统的虚拟机正是一种有状态的宠物，运维人员需要不断地维护它，容器刚开始流行时，我们用容器来模拟虚拟机使用，所有状态都保存在容器里，而这已被证明是非常不安全、不可靠的。使用 StatefulSet，Pod 仍然可以通过漂移到不同节点提供高可用，而存储也可以通过外挂的存储来提供高可靠性，StatefulSet 做的只是将确定的 Pod 与确定的存储关联起来保证状态的连续性。</p><h2 id=服务发现与负载均衡service-discovery--load-balancing>服务发现与负载均衡（Service Discovery & Load Balancing）</h2><p>服务发现与负载均衡往往是由某个 Service 对象所管理，Service 听了某个虚拟 IP 地址，并且允许以 Label 等选择方式将流量重定向到后端的 Pods。</p><ul><li><p>Services Resources (L4) may expose Pods internally within a cluster or externally through an HA proxy.</p></li><li><p>Ingress Resources (L7) may expose URI endpoints and route them to Services.</p></li></ul><h3 id=服务service>服务（Service）</h3><p>RC、RS 和 Deployment 只是保证了支撑服务的微服务 Pod 的数量，但是没有解决如何访问这些服务的问题。如果说 Deployment 是负责保证 Pod 组的正常运行，那么 Service 就是用于保证以合理的网络来连接到该组 Pod。一个 Pod 只是一个运行服务的实例，随时可能在一个节点上停止，在另一个节点以一个新的 IP 启动一个新的 Pod，因此不能以确定的 IP 和端口号提供服务。要稳定地提供服务需要服务发现和负载均衡能力。服务发现完成的工作，是针对客户端访问的服务，找到对应的的后端服务实例。</p><p>在 K8 集群中，客户端需要访问的服务就是 Service 对象。每个 Service 会对应一个集群内部有效的虚拟 IP，集群内部通过虚拟 IP 访问一个服务。Service 由 kube-proxy 实现软件负载均衡器，负责将对 Service 的请求转发到后端的某个 Pod 实例上。且 Kubernetes 为每个 Service 分配了一个全局唯一的虚拟 IP 地址(Cluster IP)，每个服务在 Kubernetes 架构上即变成了具备唯一 IP 地址的通信节点。Service 有三种类型：</p><ul><li><p>ClusterIP：默认类型，自动分配一个仅 Cluster 内部可以访问的虚拟 IP。</p></li><li><p>NodePort：在 ClusterIP 基础上为 Service 在每台机器上绑定一个端口，这样就可以通过 <code>&lt;NodeIP>:NodePort</code> 来访问该服务。</p></li><li><p>LoadBalancer：在 NodePort 的基础上，借助 Cloud Provider 创建一个外部的负载均衡器，并将请求转发到 <code>&lt;NodeIP>:NodePort</code>。</p></li></ul><p>基于上述这点，Kubernetes 将 Service Name 与 Service Cluster IP 做一个 DNS 域名映射，优雅的解决了服务发现的问题。Kubernetes 提供了内置的 dns 机制和 ClusterIP 机制，每个 Service 都自动注册域名，分配 ClusterIP，这样服务间的依赖可以从 IP 变为 name。DNS server 通过 kubernetes api server 来观测是否有新 Service 建立，并为其建立对应的 dns 记录。如果集群已经 enable DNS，那么 Pod 可以自动对 Service 做 name 解析。</p><h3 id=ingress>Ingress</h3><p>Ingress 是从 Kubernetes 集群外部访问集群内部服务的入口。Service 虽然解决了服务发现和负载均衡的问题，但它在使用上还是有一些限制，比如对外访问的时候，NodePort 类型需要在外部搭建额外的负载均衡，而 LoadBalancer 要求 Kubernetes 必须跑在支持的 Cloud Provider 上面。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://user-images.githubusercontent.com/5803001/50947031-4cc4c980-14d7-11e9-8bb4-5da3b9da1dea.png alt="Ingress 访问架构" loading=lazy data-zoomable></div></div></figure></p><p>Ingress 就是为了解决这些限制而引入的新资源，主要用来将服务暴露到 Cluster 外面，并且可以自定义服务的访问策略。比如想要通过负载均衡器实现不同子域名到不同服务的访问：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>foo.bar.com --|                 |-&gt; foo.bar.com s1:80
</span></span><span class=line><span class=cl>              | 178.91.123.132  |
</span></span><span class=line><span class=cl>bar.foo.com --|                 |-&gt; bar.foo.com s2:80
</span></span></code></pre></div><h1 id=存储对象>存储对象</h1><h2 id=存储卷volume>存储卷（Volume）</h2><p>Kubernetes 集群中的存储卷跟 Docker 的存储卷有些类似，只不过 Docker 的存储卷作用范围为一个容器，而 Kubernetes 的存储卷的生命周期和作用范围是一个 Pod。每个 Pod 中声明的存储卷由 Pod 中的所有容器共享。Kubernetes 支持非常多的存储卷类型，特别的，支持多种公有云平台的存储，包括 AWS，Google 和 Azure 云；支持多种分布式存储包括 GlusterFS 和 Ceph；也支持较容易使用的主机本地目录 emptyDir, hostPath 和 NFS。</p><p>Kubernetes 还支持使用 Persistent Volume Claim 即 PVC 这种逻辑存储，使用这种存储，使得存储的使用者可以忽略后台的实际存储技术（例如 AWS，Google 或 GlusterFS 和 Ceph），而将有关存储实际技术的配置交给存储管理员通过 Persistent Volume 来配置。</p><h2 id=持久存储卷persistent-volumepv和持久存储卷声明persistent-volume-claimpvc>持久存储卷（Persistent Volume，PV）和持久存储卷声明（Persistent Volume Claim，PVC）</h2><p>PV 和 PVC 使得 Kubernetes 集群具备了存储的逻辑抽象能力，使得在配置 Pod 的逻辑里可以忽略对实际后台存储技术的配置，而把这项配置的工作交给 PV 的配置者，即集群的管理者。存储的 PV 和 PVC 的这种关系，跟计算的 Node 和 Pod 的关系是非常类似的；PV 和 Node 是资源的提供者，根据集群的基础设施变化而变化，由 Kubernetes 集群管理员配置；而 PVC 和 Pod 是资源的使用者，根据业务服务的需求变化而变化，有 Kubernetes 集群的使用者即服务的管理员来配置。</p><h2 id=配置对象configmap>配置对象（ConfigMap）</h2><p>为 Pod 提供了非敏感的数据。</p><h2 id=密钥对象secret>密钥对象（Secret）</h2><p>Secret 是用来保存和传递密码、密钥、认证凭证这些敏感信息的对象。使用 Secret 的好处是可以避免把敏感信息明文写在配置文件里。在 Kubernetes 集群中配置和使用服务不可避免的要用到各种敏感信息实现登录、认证等功能，例如访问 AWS 存储的用户名密码。为了避免将类似的敏感信息明文写在所有需要使用的配置文件中，可以将这些信息存入一个 Secret 对象，而在配置文件中通过 Secret 对象引用这些敏感信息。这种方式的好处包括：意图明确，避免重复，减少暴漏机会。</p><h1 id=身份对象>身份对象</h1><h2 id=用户帐户user-account和服务帐户service-account>用户帐户（User Account）和服务帐户（Service Account）</h2><p>顾名思义，用户帐户为人提供账户标识，而服务账户为计算机进程和 Kubernetes 集群中运行的 Pod 提供账户标识。用户帐户和服务帐户的一个区别是作用范围；用户帐户对应的是人的身份，人的身份与服务的 namespace 无关，所以用户账户是跨 namespace 的；而服务帐户对应的是一个运行中程序的身份，与特定 namespace 是相关的。</p><h2 id=rbac-访问授权>RBAC 访问授权</h2><p>Kubernetes 在 1.3 版本中发布了 alpha 版的基于角色的访问控制（Role-based Access Control，RBAC）的授权模式。相对于基于属性的访问控制（Attribute-based Access Control，ABAC），RBAC 主要是引入了角色（Role）和角色绑定（RoleBinding）的抽象概念。在 ABAC 中，Kubernetes 集群中的访问策略只能跟用户直接关联；而在 RBAC 中，访问策略可以跟某个角色关联，具体的用户在跟一个或多个角色相关联。显然，RBAC 像其他新功能一样，每次引入新功能，都会引入新的 API 对象，从而引入新的概念抽象，而这一新的概念抽象一定会使集群服务管理和使用更容易扩展和重用。</p><h1 id=集群联邦federation>集群联邦（Federation）</h1><p>Kubernetes 在 1.3 版本里发布了 beta 版的 Federation 功能。在云计算环境中，服务的作用距离范围从近到远一般可以有：同主机（Host，Node）、跨主机同可用区（Available Zone）、跨可用区同地区（Region）、跨地区同服务商（Cloud Service Provider）、跨云平台。Kubernetes 的设计定位是单一集群在同一个地域内，因为同一个地区的网络性能才能满足 Kubernetes 的调度和计算存储连接要求。而联合集群服务就是为提供跨 Region 跨服务商 Kubernetes 集群服务而设计的。</p><p>每个 Kubernetes Federation 有自己的分布式存储、API Server 和 Controller Manager。用户可以通过 Federation 的 API Server 注册该 Federation 的成员 Kubernetes Cluster。当用户通过 Federation 的 API Server 创建、更改 API 对象时，Federation API Server 会在自己所有注册的子 Kubernetes Cluster 都创建一份对应的 API 对象。在提供业务请求服务时，Kubernetes Federation 会先在自己的各个子 Cluster 之间做负载均衡，而对于发送到某个具体 Kubernetes Cluster 的业务请求，会依照这个 Kubernetes Cluster 独立提供服务时一样的调度模式去做 Kubernetes Cluster 内部的负载均衡。而 Cluster 之间的负载均衡是通过域名服务的负载均衡来实现的。</p><p>Federation V1 的设计是尽量不影响 Kubernetes Cluster 现有的工作机制，这样对于每个子 Kubernetes 集群来说，并不需要更外层的有一个 Kubernetes Federation，也就是意味着所有现有的 Kubernetes 代码和机制不需要因为 Federation 功能有任何变化。</p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/4.%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/ rel=next>4.开放接口</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/k8s-series/1.%E6%A6%82%E5%BF%B5%E4%B8%8E%E9%83%A8%E7%BD%B2/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/label-%E4%B8%8E-selector/ rel=prev>Label 与 Selector</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>