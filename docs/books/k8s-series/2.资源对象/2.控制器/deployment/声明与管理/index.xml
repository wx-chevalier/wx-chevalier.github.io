<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Â£∞Êòé‰∏éÁÆ°ÁêÜ | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/</link><atom:link href="https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/index.xml" rel="self" type="application/rss+xml"/><description>Â£∞Êòé‰∏éÁÆ°ÁêÜ</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>Â£∞Êòé‰∏éÁÆ°ÁêÜ</title><link>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/</link></image><item><title>DaemonSet</title><link>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/daemonset/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/daemonset/</guid><description>&lt;h1 id="daemonset">DaemonSet&lt;/h1>
&lt;p>** DaemonSet ** is basically the same as ReplicaSet, with the difference that when you use DaemonSet you do not specify the number of replicas, it will go up one pod per node in your cluster.&lt;/p>
&lt;p>It is always interesting when creating, using and abusing labels, so you will be able to have better flexibility in the most appropriate distribution of your application.&lt;/p>
&lt;p>It is very interesting for services that need to run on all nodes in the cluster, such as log collectors and monitoring agents.&lt;/p>
&lt;p>Let&amp;rsquo;s create our first DaemonSet:&lt;/p>
&lt;p>&lt;code>I came first daemonset.yaml&lt;/code>&lt;/p>
&lt;p>The content should be as follows:&lt;/p>
&lt;p>&lt;code>yaml apiVersion: apps / v1 kind: DaemonSet metadata: name: daemon-set-first spec: selector: matchLabels: system: Strigus template: metadata: labels: system: Strigus spec: containers: - name: nginx image: nginx: 1.7.9 ports: - containerPort: 80&lt;/code>&lt;/p>
&lt;p>But first let‚Äôs allow all of our nodes to run pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl taint nodes --all node-role.kubernetes.io/master-
node / elliot-01 untainted
taint &amp;#34;node-role.kubernetes.io/master:&amp;#34; not found
taint &amp;#34;node-role.kubernetes.io/master:&amp;#34; not found
&lt;/code>&lt;/pre>&lt;p>Now we can create our DaemonSet:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl create -f first-daemonset.yaml
daemonset.extensions / daemon-set-first created
&lt;/code>&lt;/pre>&lt;p>Let&amp;rsquo;s list our DaemonSet:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get daemonset
NAME DESIRED CURRENT READY UP-TO-DATE ... AGE
daemon-set-first 3 3 3 3 30s
&lt;/code>&lt;/pre>&lt;p>Viewing the DaemonSet details:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe ds daemon-set-first
Name: daemon-set-first
Selector: system = Strigus
Node-Selector: &amp;lt;none&amp;gt;
Labels: system = Strigus
Annotations: &amp;lt;none&amp;gt;
Desired Number of Nodes Scheduled: 3
Current Number of Nodes Scheduled: 3
Number of Nodes Scheduled with Up-to-date Pods: 3
Number of Nodes Scheduled with Available Pods: 3
Number of Nodes Misscheduled: 0
Pods Status: 3 Running / 0 Waiting / 0 Succeeded / 0 Failed
Pod Template:
Labels: system = Strigus
Containers:
nginx:
Image: nginx: 1.7.9
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
Events:
Type Reason Age From Message
---
Normal SuccessfulCreate 41s daemonset-controller Created pod: daemon-set-first-jl6f5
Normal SuccessfulCreate 412 daemonset-controller Created pod: daemon-set-first-jh2sp
Normal SuccessfulCreate 412 daemonset-controller Created pod: daemon-set-first-t9rv9
&lt;/code>&lt;/pre>&lt;p>Viewing pod details:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get pods -o wide
NAME READY STATUS RESTARTS AGE .. NODE
daemon-set-first .. 1/1 Running 0 1m elliot-01
daemon-set-first .. 1/1 Running 0 1m elliot-02
daemon-set-first .. 1/1 Running 0 1m elliot-03
&lt;/code>&lt;/pre>&lt;p>As we can see we have one pod per node running our &lt;code> daemon-set-first&lt;/code>.&lt;/p>
&lt;p>Let&amp;rsquo;s change the image of this pod directly in DaemonSet, using the command &lt;code> kubectl set&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl set image ds daemon-set-first nginx = nginx: 1.15.0
daemonset.extensions / daemon-set-first image updated
&lt;/code>&lt;/pre>&lt;p>Let&amp;rsquo;s confirm that the image has really been changed:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe ds daemon-set-first
Name: daemon-set-first
Selector: system = Strigus
Node-Selector: &amp;lt;none&amp;gt;
Labels: system = Strigus
Annotations: &amp;lt;none&amp;gt;
Desired Number of Nodes Scheduled: 3
Current Number of Nodes Scheduled: 3
Number of Nodes Scheduled with Up-to-date Pods: 0
Number of Nodes Scheduled with Available Pods: 3
Number of Nodes Misscheduled: 0
Pods Status: 3 Running / 0 Waiting / 0 Succeeded / 0 Failed
Pod Template:
Labels: system = Strigus
Containers:
nginx:
Image: nginx: 1.15.0
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
Events:
Type Reason Age From Message
---
Normal SuccessfulCreate 2m daemonset-controller Created pod: daemon-set-first-jl6f5
Normal SuccessfulCreate 2m daemonset-controller Created pod: daemon-set-first-jh2sp
Normal SuccessfulCreate 2m daemonset-controller Created pod: daemon-set-first-t9rv9
&lt;/code>&lt;/pre>&lt;p>Now let&amp;rsquo;s check if the pod images are up to date:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get pods
NAME READY STATUS RESTARTS AGE
daemon-set-first-jh2sp 1/1 Running 0 2m
daemon-set-first-jl6f5 1/1 Running 0 2m
daemon-set-first-t9rv9 1/1 running 0 2m
&lt;/code>&lt;/pre>&lt;p>As we can see, we had no restart on the pods.&lt;/p>
&lt;p>Let&amp;rsquo;s check the image running on one of the pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-jh2sp | grep -i image:
Image: nginx: 1.7.9
&lt;/code>&lt;/pre>&lt;p>Exactly, we were unable to change information from the running DaemonSet.&lt;/p>
&lt;p>What if the pod is deleted?&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl delete pod daemon-set-first-jh2sp
pod &amp;#34;daemon-set-first-jh2sp&amp;#34; deleted
&lt;/code>&lt;/pre>&lt;p>Viewing the pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get pods
NAME READY STATUS RESTARTS AGE
daemon-set-first-hp4qc 1/1 Running 0 3s
daemon-set-first-jl6f5 1/1 running 0 10m
daemon-set-first-t9rv9 1/1 running 0 10m
&lt;/code>&lt;/pre>&lt;p>Let&amp;rsquo;s list the new Pod that was created, after deleting the old Pod:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-hp4qc | grep -i image:
Image: nginx: 1.15.0
&lt;/code>&lt;/pre>&lt;p>Now a Pod that was already running:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-jl6f5 | grep -i image:
Image: nginx: 1.7.9
&lt;/code>&lt;/pre>&lt;p>As we can see, to update all the pods in DaemonSet we need to recreate it or destroy all the pods related to it, but isn&amp;rsquo;t that too bad? Yes, it&amp;rsquo;s really bad. To improve our lives we have the option &lt;code> RollingUpdate&lt;/code> that we will see in the next chapter.&lt;/p>
&lt;h1 id="rollouts-and-rollbacks">Rollouts and Rollbacks&lt;/h1>
&lt;p>Now let&amp;rsquo;s imagine that our last edition using the command &lt;code> kubectl set&lt;/code> in DaemonSet was not correct and we need to go back to the previous configuration, where the image version was different, how do we do it?&lt;/p>
&lt;p>It&amp;rsquo;s very simple, for that there is &lt;em>Rollout&lt;/em>. With it you can check what were the changes that happened in your Deployment or DaemonSet, as if it were a version. Look! (With the voice of Nelson Rubens)&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout history ds daemon-set-first
daemonsets &amp;#34;daemon-set-first&amp;#34;
REVISION CHANGE-CAUSE
1 &amp;lt;none&amp;gt;
2 &amp;lt;none&amp;gt;
&lt;/code>&lt;/pre>&lt;p>It will show two lines, the first which is the original, with the image of &lt;code> nginx: 1.7.9&lt;/code> and the second already with the image &lt;code> nginx: 1.15.0&lt;/code>. The information is not very detailed, do you agree?&lt;/p>
&lt;p>Here&amp;rsquo;s how to check the details of each of these entries, which are called ** revision **.&lt;/p>
&lt;p>Viewing revision 1:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout history ds daemon-set-first --revision = 1
daemonsets &amp;#34;daemon-set-first&amp;#34; with revision # 1
Pod Template:
Labels: system = DaemonOne
Containers:
nginx:
Image: nginx: 1.7.9
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Viewing revision 2:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout history ds daemon-set-first --revision = 2
daemonsets &amp;#34;daemon-set-first&amp;#34; with revision # 2
Pod Template:
Labels: system = DaemonOne
Containers:
nginx:
Image: nginx: 1.15.0
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
&lt;/code>&lt;/pre>&lt;p>To return to the desired revision, simply do the following:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout undo ds daemon-set-first --to-revision = 1
daemonset.extensions / daemon-set-first rolled back
&lt;/code>&lt;/pre>&lt;p>Notice that we changed the &lt;code> history&lt;/code> for &lt;code> undo&lt;/code> and the &lt;code> revision&lt;/code> for &lt;code> to-revision&lt;/code>, so we will do the ** rollback ** in our DaemonSet, and return the version of the image that we wish. üòÉ&lt;/p>
&lt;hr>
&lt;blockquote>
&lt;p>NOTE: By default, DaemonSet stores only the last 10 revisions. To change the maximum number of revisions in our Daemonset, run the following command.
Source: &lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#clean-up-policy" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#clean-up-policy&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;p>&lt;code>kubectl edit daemonsets.apps daemon-set-first&lt;/code>&lt;/p>
&lt;p>Change the quantity in the &lt;code> revisionHistoryLimit&lt;/code> parameter:&lt;/p>
&lt;p>&lt;code>yaml revisionHistoryLimit: 10&lt;/code>&lt;/p>
&lt;hr>
&lt;p>Returning to our line of reasoning, to follow the rollout, execute the following command:&lt;/p>
&lt;p>&lt;code>kubectl rollout status ds daemon-set-first&lt;/code>&lt;/p>
&lt;p>Let&amp;rsquo;s confirm that we are already running the new image and one of our pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-hp4qc | grep -i image:
Image: nginx: 1.15.0
&lt;/code>&lt;/pre>&lt;p>It didn&amp;rsquo;t work, why? Because we will have to kill the Pod to be recreated with the new settings.&lt;/p>
&lt;p>Let&amp;rsquo;s fine-tune our DaemonSet, add the RollingUpdate and this guy will automatically update the Pods when there are changes.&lt;/p>
&lt;p>Come on, first let&amp;rsquo;s remove the &lt;code> DaemonSet&lt;/code>, add two new information to our yaml manifest and then create another DaemonSet instead:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl delete -f first-daemonset.yaml
daemonset.extensions &amp;#34;daemon-set-first&amp;#34; deleted
&lt;/code>&lt;/pre>&lt;p>Edit the &lt;code> first-daemonset.yaml&lt;/code> file.&lt;/p>
&lt;p>&lt;code>I came first daemonset.yaml&lt;/code>&lt;/p>
&lt;p>The content should be as follows:&lt;/p>
&lt;p>&lt;code>yaml apiVersion: apps / v1 kind: DaemonSet metadata: name: daemon-set-first spec: selector: matchLabels: system: Strigus template: metadata: labels: system: Strigus spec: containers: - name: nginx image: nginx: 1.7.9 ports: - containerPort: 80 updateStrategy: type: RollingUpdate&lt;/code>&lt;/p>
&lt;p>Create the DaemonSet:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl create -f first-daemonset.yaml
daemonset.extensions / daemon-set-first created
&lt;/code>&lt;/pre>&lt;p>Success, let&amp;rsquo;s check if our DaemonSet has started up correctly.&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get daemonset
NAME DESIRED CURRENT READY ... AGE
daemon-set-first 3 3 3 ... 5m
&lt;/code>&lt;/pre>&lt;p>Viewing the DaemonSet details:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe ds daemon-set-first
Name: daemon-set-first
Selector: system = DaemonOne
Node-Selector: &amp;lt;none&amp;gt;
Labels: system = DaemonOne
Annotations: &amp;lt;none&amp;gt;
Desired Number of Nodes Scheduled: 3
Current Number of Nodes Scheduled: 3
Number of Nodes Scheduled with Up-to-date Pods: 3
Number of Nodes Scheduled with Available Pods: 3
Number of Nodes Misscheduled: 0
Pods Status: 3 Running / 0 Waiting / 0 Succeeded / 0 Failed
Pod Template:
Labels: system = DaemonOne
Containers:
nginx:
Image: nginx: 1.7.9
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
Events:
Type Reason Age From Message
---
Normal SuccessfulCreate 5m daemonset-controller Created pod: daemon-set-first-52k8k
Normal SuccessfulCreate 5m daemonset-controller Created pod: daemon-set-first-6sln2
Normal SuccessfulCreate 5m daemonset-controller Created pod: daemon-set-first-9v2w9
daemonset-controller Created pod: daemon-set-first-9dktj
&lt;/code>&lt;/pre>&lt;p>Let&amp;rsquo;s check out our newly added &lt;code> RollingUpdate&lt;/code> configuration:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get ds daemon-set-first -o yaml | grep -A 2 Strategy
updateStrategy:
rollingUpdate:
maxUnavailable: 1
&lt;/code>&lt;/pre>&lt;p>Now with our DaemonSet already configured, let&amp;rsquo;s change that same &lt;code> nginx&lt;/code> image and see what actually happens:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl set image ds daemon-set-first nginx = nginx: 1.15.0
daemonset.extensions / daemon-set-first image updated
&lt;/code>&lt;/pre>&lt;p>Let&amp;rsquo;s list the DaemonSet and the Pods to make sure nothing is broken:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get daemonset
NAME DESIRED CURRENT READY ... AGE
daemon-set-first 3 3 3 ... 6m
&lt;/code>&lt;/pre>&lt;p>Viewing the pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get pods -o wide
NAME READY STATUS RESTARTS AGE NODE
daemon-set-first-7m ... 1/1 Running 0 10s elliot-02
daemon-set-first-j7 ... 1/1 Running 0 10s elliot-03
daemon-set-first-v5 ... 1/1 Running 0 10s elliot-01
&lt;/code>&lt;/pre>&lt;p>As we can see, our DaemonSet has remained the same, but the Pods have been recreated, we will detail the DaemonSet to see the changes made.&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe ds daemon-set-first
Name: daemon-set-first
Selector: system = DaemonOne
Node-Selector: &amp;lt;none&amp;gt;
Labels: system = DaemonOne
Annotations: &amp;lt;none&amp;gt;
Desired Number of Nodes Scheduled: 3
Current Number of Nodes Scheduled: 3
Number of Nodes Scheduled with Up-to-date Pods: 3
Number of Nodes Scheduled with Available Pods: 3
Number of Nodes Misscheduled: 0
Pods Status: 3 Running / 0 Waiting / 0 Succeeded / 0 Failed
Pod Template:
Labels: system = DaemonOne
Containers:
nginx:
Image: nginx: 1.15.0
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
Events:
Type Reason Age From Message
---
Normal SuccessfulCreate 8m daemonset-controller Created pod: daemon-set-first-52k8k
Normal SuccessfulCreate 8m daemonset-controller Created pod: daemon-set-first-6sln2
Normal SuccessfulCreate 8m daemonset-controller Created pod: daemon-set-first-9v2w9
Normal SuccessfulDelete 10m daemonset-controller Deleted pod: daemon-set-first-6sln2
Normal SuccessfulCreate 1m daemonset-controller Created pod: daemon-set-first-j788v
Normal SuccessfulDelete 10m daemonset-controller Deleted pod: daemon-set-first-52k8k
Normal SuccessfulCreate 1m daemonset-controller Created pod: daemon-set-first-7mpwr
Normal SuccessfulDelete 10m daemonset-controller Deleted pod: daemon-set-first-9v2w9
Normal SuccessfulCreate 1m daemonset-controller Created pod: daemon-set-first-v5m47
&lt;/code>&lt;/pre>&lt;p>Look how cool! If we look at the ** Events ** field we can see that the &lt;code> RollingUpdate&lt;/code> killed the old pods and recreated with the new image that we changed using the &lt;code> kubectl set&lt;/code>.&lt;/p>
&lt;p>We can also check in one of the Pods if this change really happened.&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-j788v | grep -i image:
Image: nginx: 1.15.0
&lt;/code>&lt;/pre>&lt;p>See? Very sensational this business of &lt;code> RollingUpdate&lt;/code>.&lt;/p>
&lt;p>Let&amp;rsquo;s check out our change history:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout history ds daemon-set-first
daemonsets &amp;#34;daemon-set-first&amp;#34;
REVISION CHANGE-CAUSE
1 &amp;lt;none&amp;gt;
2 &amp;lt;none&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Yes, we have two changes. Let&amp;rsquo;s drill down to see which is which.&lt;/p>
&lt;p>Viewing revision 1:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout history ds daemon-set-first --revision = 1
daemonsets &amp;#34;daemon-set-first&amp;#34; with revision # 1
Pod Template:
Labels: system = DaemonOne
Containers:
nginx:
Image: nginx: 1.7.9
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Viewing revision 2:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout history ds daemon-set-first --revision = 2
daemonsets &amp;#34;daemon-set-first&amp;#34; with revision # 2
Pod Template:
Labels: system = DaemonOne
Containers:
nginx:
Image: nginx: 1.15.0
Port: 80 / TCP
Host Port: 0 / TCP
Environment: &amp;lt;none&amp;gt;
Mounts: &amp;lt;none&amp;gt;
Volumes: &amp;lt;none&amp;gt;
&lt;/code>&lt;/pre>&lt;p>Now let&amp;rsquo;s rollback our DaemonSet to revision 1:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout undo ds daemon-set-first --to-revision = 1
daemonset.extensions / daemon-set-first rolled back
kubectl rollout undo ds daem kubectl rollout undo ds daem
&lt;/code>&lt;/pre>&lt;p>Viewing the pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get pods
NAME READY STATUS RESTARTS AGE
daemon-set-first-c2jjk 1/1 Running 0 19s
daemon-set-first-hrn48 1/1 Running 0 19s
daemon-set-first-t6mr9 1/1 Running 0 19s
&lt;/code>&lt;/pre>&lt;p>Viewing pod details:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-c2jjk | grep -i image:
Image: nginx: 1.7.9
&lt;/code>&lt;/pre>&lt;p>Sensational isn&amp;rsquo;t it?&lt;/p>
&lt;p>Did it go bad?&lt;/p>
&lt;p>Just return to the other setting:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout undo ds daemon-set-first --to-revision = 2
daemonset.extensions / daemon-set-first rolled back
&lt;/code>&lt;/pre>&lt;p>Viewing the rollout status:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl rollout status ds daemon-set-first
daemon set &amp;#34;daemon-set-first&amp;#34; successfully rolled out
&lt;/code>&lt;/pre>&lt;p>Viewing the pods:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl get pods
NAME READY STATUS RESTARTS AGE
daemon-set-first-jzck9 1/1 Running 0 32s
daemon-set-first-td7h5 1/1 Running 0 29s
daemon-set-first-v5c86 1/1 Running 0 40s
&lt;/code>&lt;/pre>&lt;p>Viewing pod details:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl describe pod daemon-set-first-jzck9 | grep -i image:
Image: nginx: 1.15.0
&lt;/code>&lt;/pre>&lt;p>Now let&amp;rsquo;s delete our DaemonSet:&lt;/p>
&lt;pre tabindex="0">&lt;code>kubectl delete ds daemon-set-first
daemonset.extensions &amp;#34;daemon-set-first&amp;#34; deleted
&lt;/code>&lt;/pre></description></item><item><title>Deployment</title><link>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/deployment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/deployment/</guid><description>&lt;h1 id="deployment-Êìç‰Ωú">Deployment Êìç‰Ωú&lt;/h1>
&lt;p>ÂΩì‰Ω†‰ΩøÁî® &lt;code>kubectl create deployment&lt;/code> Êó∂Ôºå‰Ω†Ê≠£Âú®ÈÉ®ÁΩ≤‰∏Ä‰∏™Âêç‰∏∫ Deployment ÁöÑÂØπË±°„ÄÇ‰∏éÂÖ∂‰ªñÂØπË±°‰∏ÄÊ†∑ÔºåDeployment ‰πüÂèØ‰ª•‰ΩøÁî® YAML Êàñ JSON Êñá‰ª∂ÔºàÂç≥ manifestsÔºâÂàõÂª∫„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥ÊîπÂèòÂØπË±°ÁöÑ‰ªª‰ΩïÈÖçÁΩÆÔºå‰æãÂ¶Ç podÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® kubectl applyÔºåÈÄöËøá manifestÔºåÁîöËá≥ÈÄöËøá kubectl edit„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂΩìÊÇ®ÂØπ Deployment ËøõË°åÊõ¥ÊîπÊó∂Ôºå‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁâàÊú¨ÁöÑ ReplicaSetÔºåÂÆÉÂ∞ÜÊàê‰∏∫ËµÑ‰∫ßÂπ∂ÂØºËá¥ÂÖ∂ÂâçË∫´Ë¢´Á¶ÅÁî®„ÄÇËæÉÊó©ÁâàÊú¨ÁöÑ ReplicaSets Â∞ÜË¢´‰øùÁïôÔºå‰ªéËÄåÂú®ÂèëÁîüÊïÖÈöúÊó∂ÂèØ‰ª•ÂõûÊªö„ÄÇ&lt;/p>
&lt;p>Ê†áÁ≠æÂØπ‰∫éÈõÜÁæ§ÁöÑÁÆ°ÁêÜÊòØÂæàÈáçË¶ÅÁöÑÔºåÂõ†‰∏∫Êúâ‰∫ÜÊ†áÁ≠æÂ∞±ÂèØ‰ª•ÊêúÁ¥¢ÊàñÈÄâÊã©ÈõÜÁæ§‰∏≠ÁöÑËµÑÊ∫êÔºå‰Ωø‰Ω†ËÉΩÂ§ü‰ª•Â∞èÁ±ªÊù•ÁªÑÁªáÔºå‰ªéËÄåÊñπ‰æø‰Ω†ÁöÑÊêúÁ¥¢ÂíåÁªÑÁªá‰Ω†ÁöÑË±ÜËçöÂíåÈõÜÁæ§ËµÑÊ∫ê„ÄÇÊ†áÁ≠æ‰∏çÊòØ API ÊúçÂä°Âô®ÁöÑÂäüËÉΩÔºåÂÆÉ‰ª¨ÊòØ‰ª•ÈîÆÂÄºÊ†ºÂºèÂ≠òÂÇ®Âú®ÂÖÉÊï∞ÊçÆ‰∏≠ÁöÑ„ÄÇ&lt;/p>
&lt;h1 id="ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ">ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ&lt;/h1>
&lt;h2 id="ÂàõÂª∫">ÂàõÂª∫&lt;/h2>
&lt;p>ÊØîÂ¶Ç‰∏Ä‰∏™ÁÆÄÂçïÁöÑ Nginx Â∫îÁî®ÂèØ‰ª•ÂÆö‰πâ‰∏∫Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">extensions/v1beta1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx-deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx:1.7.9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁÑ∂ÂêéÈÄöËøáÂ¶Ç‰∏ãÊìç‰ΩúËøõË°åÂàõÂª∫Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl create -f https://raw.githubusercontent.com/kubernetes-client/python/master/examples/nginx-deployment.yaml --record
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get deployments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment &lt;span class="m">3&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> 1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Á≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get deployments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> 18s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂèØ‰ª•ÁúãÂà∞ Deployment Â∑≤ÁªèÂàõÂª∫‰∫Ü 3 ‰∏™ replicaÔºåÊâÄÊúâÁöÑ replica ÈÉΩÂ∑≤ÁªèÊòØÊúÄÊñ∞ÁöÑ‰∫ÜÔºàÂåÖÂê´ÊúÄÊñ∞ÁöÑ pod templateÔºâÔºåÂèØÁî®ÁöÑÔºàÊ†πÊçÆ Deployment ‰∏≠ÁöÑ.spec.minReadySeconds Â£∞ÊòéÔºåÂ§Ñ‰∫éÂ∑≤Â∞±Áª™Áä∂ÊÄÅÁöÑ pod ÁöÑÊúÄÂ∞ë‰∏™Êï∞Ôºâ„ÄÇÊâßË°å kubectl get rs Âíå kubectl get pods ‰ºöÊòæÁ§∫ Replica SetÔºàRSÔºâÂíå Pod Â∑≤ÂàõÂª∫„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ReplicaSet ÁöÑÂêçÂ≠óÊÄªÊòØ&amp;lt;DeploymentÁöÑÂêçÂ≠ó&amp;gt;-&amp;lt;pod templateÁöÑhashÂÄº&amp;gt;„ÄÇ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-2035384211 &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">0&lt;/span> 18s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="Êâ©ÂÆπ">Êâ©ÂÆπ&lt;/h2>
&lt;p>ÊÇ®ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êâ©ÂÆπ DeploymentÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl scale deployment nginx-deployment --replicas &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> scaled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂÅáËÆæÊÇ®ÁöÑÈõÜÁæ§‰∏≠ÂêØÁî®‰∫Ü horizontal pod autoscalingÔºåÊÇ®ÂèØ‰ª•Áªô Deployment ËÆæÁΩÆ‰∏Ä‰∏™ autoscalerÔºåÂü∫‰∫éÂΩìÂâç Pod ÁöÑ CPU Âà©Áî®ÁéáÈÄâÊã©ÊúÄÂ∞ëÂíåÊúÄÂ§öÁöÑ Pod Êï∞„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl autoscale deployment nginx-deployment --min&lt;span class="o">=&lt;/span>&lt;span class="m">10&lt;/span> --max&lt;span class="o">=&lt;/span>&lt;span class="m">15&lt;/span> --cpu-percent&lt;span class="o">=&lt;/span>&lt;span class="m">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> autoscaled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>RollingUpdate Deployment ÊîØÊåÅÂêåÊó∂ËøêË°å‰∏Ä‰∏™Â∫îÁî®ÁöÑÂ§ö‰∏™ÁâàÊú¨„ÄÇÊàñËÄÖ autoscaler Êâ© ÂÆπ RollingUpdate Deployment ÁöÑÊó∂ÂÄôÔºåÊ≠£Âú®‰∏≠ÈÄîÁöÑ rolloutÔºàËøõË°å‰∏≠ÊàñËÄÖÂ∑≤ÁªèÊöÇÂÅúÁöÑÔºâÔºå‰∏∫‰∫ÜÈôç‰ΩéÈ£éÈô©ÔºåDeployment controller Â∞Ü‰ºöÂπ≥Ë°°Â∑≤Â≠òÂú®ÁöÑÊ¥ªÂä®‰∏≠ÁöÑ ReplicaSetÔºàÊúâ Pod ÁöÑ ReplicaSetÔºâÂíåÊñ∞Âä†ÂÖ•ÁöÑ replica„ÄÇËøôË¢´Áß∞‰∏∫ÊØî‰æãÊâ©ÂÆπ„ÄÇ&lt;/p>
&lt;p>Ë≠¨Â¶ÇÊ≠£Âú®ËøêË°å‰∏≠Âê´Êúâ 10 ‰∏™ replica ÁöÑ Deployment„ÄÇmaxSurge=3ÔºåmaxUnavailable=2Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl get deploy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 50s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êõ¥Êñ∞‰∫ÜÈîôËØØÁöÑÈïúÂÉè&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">set&lt;/span> image deploy/nginx-deployment &lt;span class="nv">nginx&lt;/span>&lt;span class="o">=&lt;/span>nginx:sometag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> image updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÂêØÂä®‰∫Ü‰∏Ä‰∏™ÂåÖÂê´ ReplicaSet nginx-deployment-1989198191 ÁöÑÊñ∞ÁöÑ rolloutÔºå‰ΩÜÊòØÂÆÉË¢´ÈòªÂ°û&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-1989198191 &lt;span class="m">5&lt;/span> &lt;span class="m">5&lt;/span> &lt;span class="m">0&lt;/span> 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-618515232 &lt;span class="m">8&lt;/span> &lt;span class="m">8&lt;/span> &lt;span class="m">8&lt;/span> 1m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>autoscaler Â∞Ü Deployment ÁöÑ repllica Êï∞ÁõÆÂ¢ûÂä†Âà∞‰∫Ü 15 ‰∏™„ÄÇDeployment controller ÈúÄË¶ÅÂà§Êñ≠Âú®Âì™ÈáåÂ¢ûÂä†Ëøô 5 ‰∏™Êñ∞ÁöÑ replica„ÄÇÂ¶ÇÊûúÊàë‰ª¨Ê≤°ÊúâË∞ÅÁî®ÊØî‰æãÊâ©ÂÆπÔºåÊâÄÊúâÁöÑ 5 ‰∏™ replica ÈÉΩ‰ºöÂä†Âà∞‰∏Ä‰∏™Êñ∞ÁöÑ ReplicaSet ‰∏≠„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÊØî‰æãÊâ©ÂÆπÔºåÊñ∞Ê∑ªÂä†ÁöÑ replica Â∞Ü‰º†Êí≠Âà∞ÊâÄÊúâÁöÑ ReplicaSet ‰∏≠„ÄÇÂ§ßÁöÑÈÉ®ÂàÜÂä†ÂÖ• replica Êï∞ÊúÄÂ§öÁöÑ ReplicaSet ‰∏≠ÔºåÂ∞èÁöÑÈÉ®ÂàÜÂä†ÂÖ•Âà∞ replica Êï∞Â∞ëÁöÑ ReplciaSet ‰∏≠„ÄÇ0 ‰∏™ replica ÁöÑ ReplicaSet ‰∏ç‰ºöË¢´Êâ©ÂÆπ„ÄÇÂú®Êàë‰ª¨‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå3 ‰∏™ replica Â∞ÜÊ∑ªÂä†Âà∞ÊóßÁöÑ ReplicaSet ‰∏≠Ôºå2 ‰∏™ replica Â∞ÜÊ∑ªÂä†Âà∞Êñ∞ÁöÑ ReplicaSet ‰∏≠„ÄÇrollout ËøõÁ®ãÊúÄÁªà‰ºöÂ∞ÜÊâÄÊúâÁöÑ replica ÁßªÂä®Âà∞Êñ∞ÁöÑ ReplicaSet ‰∏≠ÔºåÂÅáËÆæÊñ∞ÁöÑ replica Êàê‰∏∫ÂÅ•Â∫∑Áä∂ÊÄÅ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl get deploy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment &lt;span class="m">15&lt;/span> &lt;span class="m">18&lt;/span> &lt;span class="m">7&lt;/span> &lt;span class="m">8&lt;/span> 7m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-1989198191 &lt;span class="m">7&lt;/span> &lt;span class="m">7&lt;/span> &lt;span class="m">0&lt;/span> 7m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-618515232 &lt;span class="m">11&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">11&lt;/span> 7m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="Êõ¥Êñ∞">Êõ¥Êñ∞&lt;/h2>
&lt;p>Kubernetes Êèê‰æõ‰∫ÜÂ§öÁßçÂçáÁ∫ßÊñπÊ°àÔºåRecreate Âç≥Âà†Èô§ÊâÄÊúâÂ∑≤Â≠òÂú®ÁöÑ pod,ÈáçÊñ∞ÂàõÂª∫Êñ∞ÁöÑ; RollingUpdate Âç≥ÊªöÂä®ÂçáÁ∫ßÔºåÈÄêÊ≠•ÊõøÊç¢ÁöÑÁ≠ñÁï•ÔºåÂêåÊó∂ÊªöÂä®ÂçáÁ∫ßÊó∂ÔºåÊîØÊåÅÊõ¥Â§öÁöÑÈôÑÂä†ÂèÇÊï∞Ôºå‰æãÂ¶ÇËÆæÁΩÆÊúÄÂ§ß‰∏çÂèØÁî® Pod Êï∞ÈáèÔºåÊúÄÂ∞èÂçáÁ∫ßÈó¥ÈöîÊó∂Èó¥Á≠âÁ≠â„ÄÇDeployment ÁöÑ rollout ÂΩì‰∏î‰ªÖÂΩì Deployment ÁöÑ pod templateÔºà‰æãÂ¶Ç.spec.templateÔºâ‰∏≠ÁöÑ label Êõ¥Êñ∞ÊàñËÄÖÈïúÂÉèÊõ¥ÊîπÊó∂Ë¢´Ëß¶Âèë„ÄÇÂÖ∂‰ªñÊõ¥Êñ∞Ôºå‰æãÂ¶ÇÊâ©ÂÆπ Deployment ‰∏ç‰ºöËß¶Âèë rollout„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ËÆ© nginx pod ‰ΩøÁî®nginx:1.9.1ÁöÑÈïúÂÉèÊù•‰ª£ÊõøÂéüÊù•ÁöÑnginx:1.7.9ÁöÑÈïúÂÉè&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">set&lt;/span> image deployment/nginx-deployment &lt;span class="nv">nginx&lt;/span>&lt;span class="o">=&lt;/span>nginx:1.9.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> image updated
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî® edit ÂëΩ‰ª§Êù•ÁºñËæë DeploymentÔºå‰øÆÊîπ .spec.template.spec.containers[0].imageÔºåÂ∞Ü nginx:1.7.9 ÊîπÂÜôÊàê nginx:1.9.1„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl edit deployment/nginx-deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> edited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êü•Áúã rollout ÁöÑÁä∂ÊÄÅ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl rollout status deployment/nginx-deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> rollout to finish: &lt;span class="m">2&lt;/span> out of &lt;span class="m">3&lt;/span> new replicas have been updated...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> successfully rolled out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Êü•ÁúãÂÖ≥ËÅîÁöÑ ReplicaSet ‰ø°ÊÅØ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-1564180365 &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">0&lt;/span> 6s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-2035384211 &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> 36s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êàë‰ª¨ÈÄöËøáÊâßË°å kubectl get rs ÂèØ‰ª•ÁúãÂà∞ Deployment Êõ¥Êñ∞‰∫Ü PodÔºåÈÄöËøáÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ ReplicaSet Âπ∂Êâ©ÂÆπ‰∫Ü 3 ‰∏™ replicaÔºåÂêåÊó∂Â∞ÜÂéüÊù•ÁöÑ ReplicaSet Áº©ÂÆπÂà∞‰∫Ü 0 ‰∏™ replica„ÄÇÊâßË°å get pods Âè™‰ºöÁúãÂà∞ÂΩìÂâçÁöÑÊñ∞ÁöÑ pod„ÄÇ&lt;/p>
&lt;p>Deployment ÂèØ‰ª•‰øùËØÅÂú®ÂçáÁ∫ßÊó∂Âè™Êúâ‰∏ÄÂÆöÊï∞ÈáèÁöÑ Pod ÊòØ down ÁöÑ„ÄÇÈªòËÆ§ÁöÑÔºåÂÆÉ‰ºöÁ°Æ‰øùËá≥Â∞ëÊúâÊØîÊúüÊúõÁöÑ Pod Êï∞ÈáèÂ∞ë‰∏Ä‰∏™ÊòØ up Áä∂ÊÄÅÔºàÊúÄÂ§ö‰∏Ä‰∏™‰∏çÂèØÁî®Ôºâ„ÄÇDeployment ÂêåÊó∂‰πüÂèØ‰ª•Á°Æ‰øùÂè™ÂàõÂª∫Âá∫Ë∂ÖËøáÊúüÊúõÊï∞ÈáèÁöÑ‰∏ÄÂÆöÊï∞ÈáèÁöÑ Pod„ÄÇÈªòËÆ§ÁöÑÔºåÂÆÉ‰ºöÁ°Æ‰øùÊúÄÂ§öÊØîÊúüÊúõÁöÑ Pod Êï∞ÈáèÂ§ö‰∏Ä‰∏™ÁöÑ Pod ÊòØ up ÁöÑÔºàÊúÄÂ§ö 1 ‰∏™ surgeÔºâ„ÄÇ&lt;/p>
&lt;h2 id="ÂõûÊªö">ÂõûÊªö&lt;/h2>
&lt;p>ÊúâÊó∂ÂÄôÊÇ®ÂèØËÉΩÊÉ≥ÂõûÈÄÄ‰∏Ä‰∏™ DeploymentÔºå‰æãÂ¶ÇÔºåÂΩì Deployment ‰∏çÁ®≥ÂÆöÊó∂ÔºåÊØîÂ¶Ç‰∏ÄÁõ¥ crash looping„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåkubernetes ‰ºöÂú®Á≥ªÁªü‰∏≠‰øùÂ≠òÂâç‰∏§Ê¨°ÁöÑ Deployment ÁöÑ rollout ÂéÜÂè≤ËÆ∞ÂΩïÔºå‰ª•‰æøÊÇ®ÂèØ‰ª•ÈöèÊó∂ÂõûÈÄÄÔºàÊÇ®ÂèØ‰ª•‰øÆÊîπ revision history limit Êù•Êõ¥Êîπ‰øùÂ≠òÁöÑ revision Êï∞Ôºâ„ÄÇ&lt;/p>
&lt;p>Âè™Ë¶Å Deployment ÁöÑ rollout Ë¢´Ëß¶ÂèëÂ∞±‰ºöÂàõÂª∫‰∏Ä‰∏™ revision„ÄÇ‰πüÂ∞±ÊòØËØ¥ÂΩì‰∏î‰ªÖÂΩì Deployment ÁöÑ Pod templateÔºàÂ¶Ç.spec.templateÔºâË¢´Êõ¥ÊîπÔºå‰æãÂ¶ÇÊõ¥Êñ∞ template ‰∏≠ÁöÑ label ÂíåÂÆπÂô®ÈïúÂÉèÊó∂ÔºåÂ∞±‰ºöÂàõÂª∫Âá∫‰∏Ä‰∏™Êñ∞ÁöÑ revision„ÄÇÂÖ∂‰ªñÁöÑÊõ¥Êñ∞ÔºåÊØîÂ¶ÇÊâ©ÂÆπ Deployment ‰∏ç‰ºöÂàõÂª∫ revisionÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÊâãÂä®ÊàñËÄÖËá™Âä®Êâ©ÂÆπ„ÄÇËøôÊÑèÂë≥ÁùÄÂΩìÊÇ®ÂõûÈÄÄÂà∞ÂéÜÂè≤ revision Êó∂ÔºåÂè™Êúâ Deployment ‰∏≠ÁöÑ Pod template ÈÉ®ÂàÜÊâç‰ºöÂõûÈÄÄ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ê£ÄÊü•‰∏ã Deployment ÁöÑ revision&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl rollout &lt;span class="nb">history&lt;/span> deployment/nginx-deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployments &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION CHANGE-CAUSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> kubectl create -f https://kubernetes.io/docs/user-guide/nginx-deployment.yaml--record
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> kubectl &lt;span class="nb">set&lt;/span> image deployment/nginx-deployment &lt;span class="nv">nginx&lt;/span>&lt;span class="o">=&lt;/span>nginx:1.9.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">3&lt;/span> kubectl &lt;span class="nb">set&lt;/span> image deployment/nginx-deployment &lt;span class="nv">nginx&lt;/span>&lt;span class="o">=&lt;/span>nginx:1.91
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âõ†‰∏∫Êàë‰ª¨ÂàõÂª∫ Deployment ÁöÑÊó∂ÂÄô‰ΩøÁî®‰∫Ü&amp;ndash;record ÂèÇÊï∞ÂèØ‰ª•ËÆ∞ÂΩïÂëΩ‰ª§ÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÊü•ÁúãÊØèÊ¨° revision ÁöÑÂèòÂåñ„ÄÇÊü•ÁúãÂçï‰∏™ revision ÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl rollout &lt;span class="nb">history&lt;/span> deployment/nginx-deployment --revision&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployments &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> revision &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Labels: &lt;span class="nv">app&lt;/span>&lt;span class="o">=&lt;/span>nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pod-template-hash&lt;span class="o">=&lt;/span>&lt;span class="m">1159050644&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Annotations: kubernetes.io/change-cause&lt;span class="o">=&lt;/span>kubectl &lt;span class="nb">set&lt;/span> image deployment/nginx-deployment &lt;span class="nv">nginx&lt;/span>&lt;span class="o">=&lt;/span>nginx:1.9.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nginx:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image: nginx:1.9.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Port: 80/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> QoS Tier:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: BestEffort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: BestEffort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Environment Variables: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> No volumes.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂêåÊ†∑ÂèØ‰ª•ÈÄöËøá rollout ÂëΩ‰ª§Êù•ÂõûÈÄÄÁâàÊú¨Ôºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÂõûÈÄÄÂΩìÂâçÁöÑ rollout Âà∞‰πãÂâçÁöÑÁâàÊú¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl rollout undo deployment/nginx-deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> rolled back
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ‰ΩøÁî® --revisionÂèÇÊï∞ÊåáÂÆöÊüê‰∏™ÂéÜÂè≤ÁâàÊú¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl rollout undo deployment/nginx-deployment --to-revision&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> rolled back
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ &lt;code>.spec.revisonHistoryLimit&lt;/code> È°πÊù•ÊåáÂÆö deployment ÊúÄÂ§ö‰øùÁïôÂ§öÂ∞ë revision ÂéÜÂè≤ËÆ∞ÂΩï„ÄÇÈªòËÆ§ÁöÑ‰ºö‰øùÁïôÊâÄÊúâÁöÑ revisionÔºõÂ¶ÇÊûúÂ∞ÜËØ•È°πËÆæÁΩÆ‰∏∫ 0ÔºåDeployment Â∞±‰∏çÂÖÅËÆ∏ÂõûÈÄÄ‰∫Ü„ÄÇ&lt;/p>
&lt;h2 id="ÊöÇÂÅúÂíåÊÅ¢Â§ç">ÊöÇÂÅúÂíåÊÅ¢Â§ç&lt;/h2>
&lt;p>ÊÇ®ÂèØ‰ª•Âú®ÂèëÂá∫‰∏ÄÊ¨°ÊàñÂ§öÊ¨°Êõ¥Êñ∞ÂâçÊöÇÂÅú‰∏Ä‰∏™ DeploymentÔºåÁÑ∂ÂêéÂÜçÊÅ¢Â§çÂÆÉ„ÄÇËøôÊ†∑ÊÇ®Â∞±ËÉΩÂú® Deployment ÊöÇÂÅúÊúüÈó¥ËøõË°åÂ§öÊ¨°‰øÆÂ§çÂ∑•‰ΩúÔºåËÄå‰∏ç‰ºöÂèëÂá∫‰∏çÂøÖË¶ÅÁöÑ rollout„ÄÇ‰æãÂ¶Ç‰ΩøÁî®ÂàöÂàöÂàõÂª∫ DeploymentÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl get deploy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> 1m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>mkargaki@dhcp129-211 kubernetes&lt;span class="o">]&lt;/span>$ kubectl get rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-2142116321 &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> 1m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÊöÇÂÅú DeploymentÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl rollout pause deployment/nginx-deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> paused
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁÑ∂ÂêéÊõ¥Êñ∞ Deplyment ‰∏≠ÁöÑÈïúÂÉèÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">set&lt;/span> image deploy/nginx &lt;span class="nv">nginx&lt;/span>&lt;span class="o">=&lt;/span>nginx:1.9.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx-deployment&amp;#34;&lt;/span> image updated
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ê≥®ÊÑèÊñ∞ÁöÑ rollout ÂêØÂä®‰∫ÜÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl rollout &lt;span class="nb">history&lt;/span> deploy/nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployments &lt;span class="s2">&amp;#34;nginx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION CHANGE-CAUSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-2142116321 &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> 2m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊÇ®ÂèØ‰ª•ËøõË°å‰ªªÊÑèÂ§öÊ¨°Êõ¥Êñ∞Ôºå‰æãÂ¶ÇÊõ¥Êñ∞‰ΩøÁî®ÁöÑËµÑÊ∫êÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl &lt;span class="nb">set&lt;/span> resources deployment nginx -c&lt;span class="o">=&lt;/span>nginx --limits&lt;span class="o">=&lt;/span>&lt;span class="nv">cpu&lt;/span>&lt;span class="o">=&lt;/span>200m,memory&lt;span class="o">=&lt;/span>512Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx&amp;#34;&lt;/span> resource requirements updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Deployment ÊöÇÂÅúÂâçÁöÑÂàùÂßãÁä∂ÊÄÅÂ∞ÜÁªßÁª≠ÂÆÉÁöÑÂäüËÉΩÔºåËÄå‰∏ç‰ºöÂØπ Deployment ÁöÑÊõ¥Êñ∞‰∫ßÁîü‰ªª‰ΩïÂΩ±ÂìçÔºåÂè™Ë¶Å DeploymentÊòØÊöÇÂÅúÁöÑ„ÄÇ
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊúÄÂêéÔºåÊÅ¢Â§çËøô‰∏™ DeploymentÔºåËßÇÂØüÂÆåÊàêÊõ¥Êñ∞ÁöÑ ReplicaSet Â∑≤ÁªèÂàõÂª∫Âá∫Êù•‰∫ÜÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl rollout resume deploy nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;nginx&amp;#34;&lt;/span> resumed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="ËøáÊª§‰∏éÈÄâÊã©">ËøáÊª§‰∏éÈÄâÊã©&lt;/h1>
&lt;h2 id="Ê†πÊçÆÊ†áÁ≠æËøáÊª§">Ê†πÊçÆÊ†áÁ≠æËøáÊª§&lt;/h2>
&lt;p>ÂΩìÊàë‰ª¨ÂàõÂª∫ Deployments Êó∂ÔºåÊàë‰ª¨Ê∑ªÂä†‰∫Ü‰ª•‰∏ãÊ†áÁ≠æÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">UK&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Netherlands&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Labels ÊòØÁî®Êù•ÁªÑÁªáÈõÜÁæ§ÁöÑÔºåËÆ©Êàë‰ª¨ÂàóÂá∫Êàë‰ª¨ÁöÑ Pods ÂØªÊâæ Labels„ÄÇÈ¶ñÂÖàËÆ©Êàë‰ª¨Áî® dc=UK Âíå dc=Netherlands Ëøô‰∏§‰∏™Ê†áÁ≠æËøõË°åÊêúÁ¥¢„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl get pods -l &lt;span class="nv">dc&lt;/span>&lt;span class="o">=&lt;/span>UK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">primeiro-deployment-68c9dbf8b8-kjqpt 1/1 Running &lt;span class="m">0&lt;/span> 3m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get pods -l &lt;span class="nv">dc&lt;/span>&lt;span class="o">=&lt;/span>Netherlands
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">segundo-deployment-59db86c584-cf9pp 1/1 Running &lt;span class="m">0&lt;/span> 4m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Â¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÅÊõ¥‰∏™ÊÄßÂåñÁöÑËæìÂá∫ÔºåÊàë‰ª¨ÂèØ‰ª•Âàó‰∏æÂ¶Ç‰∏ãÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl get pod -L dc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE DC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">primeiro-deployment-68c9... 1/1 Running &lt;span class="m">0&lt;/span> 5m UK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">segundo-deployment-59db ... 1/1 Running &lt;span class="m">0&lt;/span> 5m Netherlands
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ReplicaSet</title><link>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/replicaset/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/k8s-series/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/2.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%AE%A1%E7%90%86/replicaset/</guid><description>&lt;h1 id="replicaset">ReplicaSet&lt;/h1>
&lt;p>ReplicaSet ÂèØ‰ª•‰øùËØÅ Deployment ÊâÄÈúÄÁöÑ pod ÂíåËµÑÊ∫êÊï∞Èáè„ÄÇ‰∏ÄÊó¶ÂàõÂª∫‰∫ÜÈÉ®ÁΩ≤ÔºåReplicaSet Â∞±‰ºöÊéßÂà∂ËøêË°åÁöÑ pod Êï∞ÈáèÔºåÂ¶ÇÊûúÊúâ‰ªª‰Ωï pod ÂÆåÊàêÔºåÂÆÉÂ∞ÜÊ£ÄÊµãÂπ∂ËØ∑Ê±ÇÊâßË°åÂè¶‰∏Ä‰∏™ podÔºå‰ªéËÄå‰øùËØÅËØ∑Ê±ÇÁöÑÂ§çÂà∂Êï∞Èáè„ÄÇËÆ©Êàë‰ª¨ÂàõÂª∫Á¨¨‰∏Ä‰∏™ ReplicaSetÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">vim primeiro-replicaset.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps / v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ReplicaSet&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">replica-set-first&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">system &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Giropops&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">system &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Giropops&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image : nginx&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1.7.9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰ªé manifest ‰∏≠ÂàõÂª∫ ReplicaSetÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl create -f primeiro-replicaset.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.extensions/replica-set-primeiro created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get replicaset
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="m">1&lt;/span> 2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get pods
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-6drmt 1/1 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-7j59w 1/1 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-mg8q9 1/1 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl describe rs replica-set-primeiro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: replica-set-primeiro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Selector: &lt;span class="nv">system&lt;/span>&lt;span class="o">=&lt;/span>Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &lt;span class="nv">system&lt;/span>&lt;span class="o">=&lt;/span>Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Replicas: &lt;span class="m">3&lt;/span> current / &lt;span class="m">3&lt;/span> desired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pods Status: &lt;span class="m">3&lt;/span> Running / &lt;span class="m">0&lt;/span> Waiting / &lt;span class="m">0&lt;/span> Succeeded / &lt;span class="m">0&lt;/span> Failed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pod Template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Labels: &lt;span class="nv">system&lt;/span>&lt;span class="o">=&lt;/span>Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nginx:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image: nginx:1.7.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Port: 80/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Host Port: 0/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Environment: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Mounts: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Volumes: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Reason Age From Message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ---- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal SuccessfulCreate 31s replicaset-controller Created pod: replica-set-primeiro-mg8q9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal SuccessfulCreate 31s replicaset-controller Created pod: replica-set-primeiro-6drmt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal SuccessfulCreate 31s replicaset-controller Created pod: replica-set-primeiro-7j59w
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÊâÄÊúâ‰∏é ReplicaSet Áõ∏ÂÖ≥ËÅîÁöÑ PodsÔºåÂ¶ÇÊûúÊàë‰ª¨Âà†Èô§ÂÖ∂‰∏≠‰∏Ä‰∏™ PodsÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºüËÆ©Êàë‰ª¨ÊµãËØï‰∏Ä‰∏ã„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl delete pod replica-set-primeiro-6drmt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;replica-set-primeiro-6drmt&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get pods -l &lt;span class="nv">system&lt;/span>&lt;span class="o">=&lt;/span>Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-7j59w 1/1 Running &lt;span class="m">0&lt;/span> 1m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-mg8q9 1/1 Running &lt;span class="m">0&lt;/span> 1m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-s5dz2 1/1 Running &lt;span class="m">0&lt;/span> 15s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰Ω†ÊúâÊ≤°ÊúâÊ≥®ÊÑèÂà∞‰ªñÂèàÈáçÊñ∞Âà∂‰Ωú‰∫Ü‰∏Ä‰∏™ PodÔºüReplicaSet ÁöÑÂéüÂõ†ÊÄªÊòØÊúâ‰∏â‰∏™ Pod ÂèØÁî®„ÄÇÊàë‰ª¨Â∞ÜÊîπ‰∏∫ 4 ‰∏™ÂâØÊú¨Âπ∂ÈáçÊñ∞ÂàõÂª∫ ReplicaSetÔºå‰∏∫Ê≠§Êàë‰ª¨Â∞Ü‰ΩøÁî®‰πãÂâçÁöÑ kubectl editÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•Êõ¥ÊîπÂ∑≤ÁªèËøêË°åÁöÑ ReplicaSet„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl edit rs replica-set-primeiro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion : apps / v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind : ReplicaSet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp : 2018-07-05T04: 32: 42Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> generation : &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> system : Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name : replica-set-first
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace : default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceVersion : &lt;span class="s2">&amp;#34; 471758 &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selfLink : / apis / extensions / v1beta1 / namespaces / default / replicasets / replica-set-first
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid : 753290c1-800c-11e8-b889-42010a8a0002
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> system : Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp : null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> system : Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.extensions / replica-set-first edited
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êü•Áúã Pod ËØ¶ÊÉÖ„ÄÇ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl get pods -l &lt;span class="nv">system&lt;/span>&lt;span class="o">=&lt;/span>Giropops
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-7j59w 1/1 Running &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-96hj7 1/1 Running &lt;span class="m">0&lt;/span> 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-mg8q9 1/1 Running &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replica-set-primeiro-s5dz2 1/1 Running &lt;span class="m">0&lt;/span> 1m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>