<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="持久化卷（Persistent Volume） 本文档介绍了 Kubernetes 中 PersistentVolume 的当前状态。建议您在阅读本文档前先熟悉 volume。 介绍 对于管理计算资源来说，管理存储资源明显是另一个问题。PersistentVolum"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/59.%E6%8C%81%E4%B9%85%E5%8C%96%E5%8D%B7persistent-volume/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/59.%E6%8C%81%E4%B9%85%E5%8C%96%E5%8D%B7persistent-volume/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/59.%E6%8C%81%E4%B9%85%E5%8C%96%E5%8D%B7persistent-volume/"><meta property="og:title" content="59.持久化卷（Persistent Volume） | Next-gen Tech Edu"><meta property="og:description" content="持久化卷（Persistent Volume） 本文档介绍了 Kubernetes 中 PersistentVolume 的当前状态。建议您在阅读本文档前先熟悉 volume。 介绍 对于管理计算资源来说，管理存储资源明显是另一个问题。PersistentVolum"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>59.持久化卷（Persistent Volume） | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=57db3cb0546fad349135f02471c59ea7><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">8.存储</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idce0acbf549ec48cef31f8611f1dc12ca")' href=#idce0acbf549ec48cef31f8611f1dc12ca aria-expanded=false aria-controls=idce0acbf549ec48cef31f8611f1dc12ca aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idce0acbf549ec48cef31f8611f1dc12ca aria-expanded=false aria-controls=idce0acbf549ec48cef31f8611f1dc12ca><i class="fa-solid fa-angle-down" id=caret-idce0acbf549ec48cef31f8611f1dc12ca></i></a></div><ul class="nav docs-sidenav collapse show" id=idce0acbf549ec48cef31f8611f1dc12ca><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id841175583c4a0e1963fd0da5e7c799f2")' href=#id841175583c4a0e1963fd0da5e7c799f2 aria-expanded=false aria-controls=id841175583c4a0e1963fd0da5e7c799f2 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/10.%E5%A4%9A%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id841175583c4a0e1963fd0da5e7c799f2 aria-expanded=false aria-controls=id841175583c4a0e1963fd0da5e7c799f2><i class="fa-solid fa-angle-right" id=caret-id841175583c4a0e1963fd0da5e7c799f2></i></a></div><ul class="nav docs-sidenav collapse" id=id841175583c4a0e1963fd0da5e7c799f2><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/10.%E5%A4%9A%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/federation/>federation</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/10.%E5%A4%9A%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86/multi-cluster-services-api/>multi-cluster-services-api</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6c17843d094719e562f178f0b422c08c")' href=#id6c17843d094719e562f178f0b422c08c aria-expanded=false aria-controls=id6c17843d094719e562f178f0b422c08c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/11.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id6c17843d094719e562f178f0b422c08c aria-expanded=false aria-controls=id6c17843d094719e562f178f0b422c08c><i class="fa-solid fa-angle-right" id=caret-id6c17843d094719e562f178f0b422c08c></i></a></div><ul class="nav docs-sidenav collapse" id=id6c17843d094719e562f178f0b422c08c><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/11.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE/liveness-readiness-probes/>liveness-readiness-probes</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/11.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE/quota/>quota</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/11.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE/secret/>secret</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/11.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E9%85%8D%E7%BD%AE/service-account/>service-account</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd540ee94cd763dc5f1facedee44d5ada")' href=#idd540ee94cd763dc5f1facedee44d5ada aria-expanded=false aria-controls=idd540ee94cd763dc5f1facedee44d5ada aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/12.%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd540ee94cd763dc5f1facedee44d5ada aria-expanded=false aria-controls=idd540ee94cd763dc5f1facedee44d5ada><i class="fa-solid fa-angle-right" id=caret-idd540ee94cd763dc5f1facedee44d5ada></i></a></div><ul class="nav docs-sidenav collapse" id=idd540ee94cd763dc5f1facedee44d5ada><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/12.%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/docker-cli-to-kubectl/>docker-cli-to-kubectl</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/12.%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/etcdctl/>etcdctl</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/12.%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/kubectl-cheatsheet/>kubectl-cheatsheet</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/12.%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8/using-kubectl/>using-kubectl</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id1c9536ba61bed3e353807a141c41ff36")' href=#id1c9536ba61bed3e353807a141c41ff36 aria-expanded=false aria-controls=id1c9536ba61bed3e353807a141c41ff36 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id1c9536ba61bed3e353807a141c41ff36 aria-expanded=false aria-controls=id1c9536ba61bed3e353807a141c41ff36><i class="fa-solid fa-angle-right" id=caret-id1c9536ba61bed3e353807a141c41ff36></i></a></div><ul class="nav docs-sidenav collapse" id=id1c9536ba61bed3e353807a141c41ff36><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/auth-with-kubeconfig-or-token/>auth-with-kubeconfig-or-token</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/authentication/>authentication</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/ip-masq-agent/>ip-masq-agent</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/kubectl-user-authentication-authorization/>kubectl-user-authentication-authorization</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/kubelet-authentication-authorization/>kubelet-authentication-authorization</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/kubernetes-security-best-practice/>kubernetes-security-best-practice</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/managing-tls-in-a-cluster/>managing-tls-in-a-cluster</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/13.%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%80%A7%E7%AE%A1%E7%90%86/tls-bootstrapping/>tls-bootstrapping</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9cb235b6a1ed75ed669fe48c285acf51")' href=#id9cb235b6a1ed75ed669fe48c285acf51 aria-expanded=false aria-controls=id9cb235b6a1ed75ed669fe48c285acf51 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9cb235b6a1ed75ed669fe48c285acf51 aria-expanded=false aria-controls=id9cb235b6a1ed75ed669fe48c285acf51><i class="fa-solid fa-angle-right" id=caret-id9cb235b6a1ed75ed669fe48c285acf51></i></a></div><ul class="nav docs-sidenav collapse" id=id9cb235b6a1ed75ed669fe48c285acf51><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/accessing-kubernetes-pods-from-outside-of-the-cluster/>accessing-kubernetes-pods-from-outside-of-the-cluster</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/authenticate-across-clusters-kubeconfig/>authenticate-across-clusters-kubeconfig</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/connecting-to-applications-port-forward/>connecting-to-applications-port-forward</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/kubernator-kubernetes-ui/>kubernator-kubernetes-ui</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/lens/>lens</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/methods/>methods</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/14.%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4/service-access-application-cluster/>service-access-application-cluster</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id234cbf9b2a148b3bca25533ca2c3dcc8")' href=#id234cbf9b2a148b3bca25533ca2c3dcc8 aria-expanded=false aria-controls=id234cbf9b2a148b3bca25533ca2c3dcc8 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/15.%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id234cbf9b2a148b3bca25533ca2c3dcc8 aria-expanded=false aria-controls=id234cbf9b2a148b3bca25533ca2c3dcc8><i class="fa-solid fa-angle-right" id=caret-id234cbf9b2a148b3bca25533ca2c3dcc8></i></a></div><ul class="nav docs-sidenav collapse" id=id234cbf9b2a148b3bca25533ca2c3dcc8><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/15.%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/deploy-applications-in-kubernetes/>deploy-applications-in-kubernetes</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/15.%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/migrating-hadoop-yarn-to-kubernetes/>migrating-hadoop-yarn-to-kubernetes</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/15.%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/using-statefulset/>using-statefulset</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id4a2d08658fdb124ccd8ee5aaac2311c0")' href=#id4a2d08658fdb124ccd8ee5aaac2311c0 aria-expanded=false aria-controls=id4a2d08658fdb124ccd8ee5aaac2311c0 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id4a2d08658fdb124ccd8ee5aaac2311c0 aria-expanded=false aria-controls=id4a2d08658fdb124ccd8ee5aaac2311c0><i class="fa-solid fa-angle-right" id=caret-id4a2d08658fdb124ccd8ee5aaac2311c0></i></a></div><ul class="nav docs-sidenav collapse" id=id4a2d08658fdb124ccd8ee5aaac2311c0><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/advance-developer/>advance-developer</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/client-go-sample/>client-go-sample</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/contribute/>contribute</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/developing-environment/>developing-environment</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/kubebuilder/>kubebuilder</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/minikube/>minikube</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/operator/>operator</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/operator-sdk/>operator-sdk</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/sigs-and-working-group/>sigs-and-working-group</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/17.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/testing/>testing</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idad6dd2d43ba77d5c2643ba986617caf8")' href=#idad6dd2d43ba77d5c2643ba986617caf8 aria-expanded=false aria-controls=idad6dd2d43ba77d5c2643ba986617caf8 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idad6dd2d43ba77d5c2643ba986617caf8 aria-expanded=false aria-controls=idad6dd2d43ba77d5c2643ba986617caf8><i class="fa-solid fa-angle-right" id=caret-idad6dd2d43ba77d5c2643ba986617caf8></i></a></div><ul class="nav docs-sidenav collapse" id=idad6dd2d43ba77d5c2643ba986617caf8><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/14.init-%E5%AE%B9%E5%99%A8/>14.Init 容器</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pause-container/>pause-container</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod/>pod</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod-disruption-budget/>pod-disruption-budget</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod-hook/>pod-hook</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod-lifecycle/>pod-lifecycle</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod-overview/>pod-overview</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod-preset/>pod-preset</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/2.%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1/pod-security-policy/>pod-security-policy</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idfaf8aa76055445da92417cbfa9df1d61")' href=#idfaf8aa76055445da92417cbfa9df1d61 aria-expanded=false aria-controls=idfaf8aa76055445da92417cbfa9df1d61 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/5.%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B7%AF%E7%94%B1/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idfaf8aa76055445da92417cbfa9df1d61 aria-expanded=false aria-controls=idfaf8aa76055445da92417cbfa9df1d61><i class="fa-solid fa-angle-right" id=caret-idfaf8aa76055445da92417cbfa9df1d61></i></a></div><ul class="nav docs-sidenav collapse" id=idfaf8aa76055445da92417cbfa9df1d61><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/5.%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B7%AF%E7%94%B1/gateway/>gateway</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/5.%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B7%AF%E7%94%B1/ingress/>ingress</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/5.%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B7%AF%E7%94%B1/service/>service</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/5.%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%8E%E8%B7%AF%E7%94%B1/topology-aware-routing/>topology-aware-routing</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id04b1e0efd9a2547831bdccfd288c9232")' href=#id04b1e0efd9a2547831bdccfd288c9232 aria-expanded=false aria-controls=id04b1e0efd9a2547831bdccfd288c9232 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/7.%E7%BD%91%E7%BB%9C/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id04b1e0efd9a2547831bdccfd288c9232 aria-expanded=false aria-controls=id04b1e0efd9a2547831bdccfd288c9232><i class="fa-solid fa-angle-right" id=caret-id04b1e0efd9a2547831bdccfd288c9232></i></a></div><ul class="nav docs-sidenav collapse" id=id04b1e0efd9a2547831bdccfd288c9232><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/7.%E7%BD%91%E7%BB%9C/calico/>calico</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/7.%E7%BD%91%E7%BB%9C/cilium/>cilium</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/7.%E7%BD%91%E7%BB%9C/flannel/>flannel</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id80b86a8f530dd9ce565aa8c8cf2d0fbd")' href=#id80b86a8f530dd9ce565aa8c8cf2d0fbd aria-expanded=false aria-controls=id80b86a8f530dd9ce565aa8c8cf2d0fbd aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.%E6%89%A9%E5%B1%95%E9%9B%86%E7%BE%A4/>_index</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id80b86a8f530dd9ce565aa8c8cf2d0fbd aria-expanded=false aria-controls=id80b86a8f530dd9ce565aa8c8cf2d0fbd><i class="fa-solid fa-angle-right" id=caret-id80b86a8f530dd9ce565aa8c8cf2d0fbd></i></a></div><ul class="nav docs-sidenav collapse" id=id80b86a8f530dd9ce565aa8c8cf2d0fbd><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.%E6%89%A9%E5%B1%95%E9%9B%86%E7%BE%A4/aggregated-api-server/>aggregated-api-server</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.%E6%89%A9%E5%B1%95%E9%9B%86%E7%BE%A4/apiservice/>apiservice</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.%E6%89%A9%E5%B1%95%E9%9B%86%E7%BE%A4/crd/>crd</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.%E6%89%A9%E5%B1%95%E9%9B%86%E7%BE%A4/custom-resource/>custom-resource</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/9.%E6%89%A9%E5%B1%95%E9%9B%86%E7%BE%A4/service-catalog/>service-catalog</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id275cc0e7039e4326e615575ea3cd9432")' href=#id275cc0e7039e4326e615575ea3cd9432 aria-expanded=false aria-controls=id275cc0e7039e4326e615575ea3cd9432 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/>1.Kubernetes 架构</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id275cc0e7039e4326e615575ea3cd9432 aria-expanded=false aria-controls=id275cc0e7039e4326e615575ea3cd9432><i class="fa-solid fa-angle-right" id=caret-id275cc0e7039e4326e615575ea3cd9432></i></a></div><ul class="nav docs-sidenav collapse" id=id275cc0e7039e4326e615575ea3cd9432><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/11.pod-%E7%8A%B6%E6%80%81%E4%B8%8E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86/>11.Pod 状态与生命周期管理</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/4.kubernetes-%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5/>4.Kubernetes 的设计理念</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/5.etcd-%E8%A7%A3%E6%9E%90/>5.Etcd 解析</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id65e54f371f384cedb6c4bfaa5638ce8c")' href=#id65e54f371f384cedb6c4bfaa5638ce8c aria-expanded=false aria-controls=id65e54f371f384cedb6c4bfaa5638ce8c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/6.%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/>6.开放接口</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id65e54f371f384cedb6c4bfaa5638ce8c aria-expanded=false aria-controls=id65e54f371f384cedb6c4bfaa5638ce8c><i class="fa-solid fa-angle-right" id=caret-id65e54f371f384cedb6c4bfaa5638ce8c></i></a></div><ul class="nav docs-sidenav collapse" id=id65e54f371f384cedb6c4bfaa5638ce8c><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/6.%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/7.%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%8E%A5%E5%8F%A3cri/>7.容器运行时接口（CRI）</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/6.%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/8.%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3cni/>8.容器网络接口（CNI）</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/1.kubernetes-%E6%9E%B6%E6%9E%84/6.%E5%BC%80%E6%94%BE%E6%8E%A5%E5%8F%A3/9.%E5%AE%B9%E5%99%A8%E5%AD%98%E5%82%A8%E6%8E%A5%E5%8F%A3csi/>9.容器存储接口（CSI）</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9c5690966328c37266ec405e4e603cbb")' href=#id9c5690966328c37266ec405e4e603cbb aria-expanded=false aria-controls=id9c5690966328c37266ec405e4e603cbb aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/>3.集群资源管理</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9c5690966328c37266ec405e4e603cbb aria-expanded=false aria-controls=id9c5690966328c37266ec405e4e603cbb><i class="fa-solid fa-angle-right" id=caret-id9c5690966328c37266ec405e4e603cbb></i></a></div><ul class="nav docs-sidenav collapse" id=id9c5690966328c37266ec405e4e603cbb><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/22.node/>22.Node</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/23.namespace/>23.Namespace</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/24.label/>24.Label</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/25.annotation/>25.Annotation</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/26.taint-%E5%92%8C-toleration%E6%B1%A1%E7%82%B9%E5%92%8C%E5%AE%B9%E5%BF%8D/>26.Taint 和 Toleration（污点和容忍）</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/27.%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86/>27.垃圾收集</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/71.%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6/>71.资源调度</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/72.%E6%9C%8D%E5%8A%A1%E8%B4%A8%E9%87%8F%E7%AD%89%E7%BA%A7qos/>72.服务质量等级（QoS）</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/annotation/>annotation</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/garbage-collection/>garbage-collection</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/label/>label</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/namespace/>namespace</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/node/>node</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/qos/>qos</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/scheduling/>scheduling</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/3.%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/taint-and-toleration/>taint-and-toleration</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf660c39b378e4d624c457b964a89c11d")' href=#idf660c39b378e4d624c457b964a89c11d aria-expanded=false aria-controls=idf660c39b378e4d624c457b964a89c11d aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/>4.控制器</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf660c39b378e4d624c457b964a89c11d aria-expanded=false aria-controls=idf660c39b378e4d624c457b964a89c11d><i class="fa-solid fa-angle-right" id=caret-idf660c39b378e4d624c457b964a89c11d></i></a></div><ul class="nav docs-sidenav collapse" id=idf660c39b378e4d624c457b964a89c11d><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/29.deployment/>29.Deployment</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/30.statefulset/>30.StatefulSet</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/31.daemonset/>31.DaemonSet</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/32.replicationcontroller-%E5%92%8C-replicaset/>32.ReplicationController 和 ReplicaSet</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/33.job/>33.Job</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/34.cronjob/>34.CronJob</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/34.ingress-%E6%8E%A7%E5%88%B6%E5%99%A8/>34.Ingress 控制器</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idbaf9a06268af18b203ae775c0bdeb498")' href=#idbaf9a06268af18b203ae775c0bdeb498 aria-expanded=false aria-controls=idbaf9a06268af18b203ae775c0bdeb498 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/35.horizontal-pod-autoscaling/>35.Horizontal Pod Autoscaling</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idbaf9a06268af18b203ae775c0bdeb498 aria-expanded=false aria-controls=idbaf9a06268af18b203ae775c0bdeb498><i class="fa-solid fa-angle-right" id=caret-idbaf9a06268af18b203ae775c0bdeb498></i></a></div><ul class="nav docs-sidenav collapse" id=idbaf9a06268af18b203ae775c0bdeb498><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/35.horizontal-pod-autoscaling/36.%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E6%A0%87-hpa/>36.自定义指标 HPA</a></li></ul></div><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/37.%E5%87%86%E5%85%A5%E6%8E%A7%E5%88%B6%E5%99%A8admission-controller/>37.准入控制器（Admission Controller）</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/cronjob/>cronjob</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/daemonset/>daemonset</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/deployment/>deployment</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/ingress-controller/>ingress-controller</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/job/>job</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/4.%E6%8E%A7%E5%88%B6%E5%99%A8/replicaset/>replicaset</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id38883250ef09ae5883002d17fbb5cf96")' href=#id38883250ef09ae5883002d17fbb5cf96 aria-expanded=false aria-controls=id38883250ef09ae5883002d17fbb5cf96 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/>6.身份与权限认证</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id38883250ef09ae5883002d17fbb5cf96 aria-expanded=false aria-controls=id38883250ef09ae5883002d17fbb5cf96><i class="fa-solid fa-angle-right" id=caret-id38883250ef09ae5883002d17fbb5cf96></i></a></div><ul class="nav docs-sidenav collapse" id=id38883250ef09ae5883002d17fbb5cf96><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/network-policy/>network-policy</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/rbac/>rbac</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/serviceaccount/>serviceaccount</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/spiffe/>spiffe</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/spire/>spire</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/spire-k8s-workload-registar/>spire-k8s-workload-registar</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/6.%E8%BA%AB%E4%BB%BD%E4%B8%8E%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81/svid/>svid</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id824aa59efb83240e0b3236c1188c1c2a")' href=#id824aa59efb83240e0b3236c1188c1c2a aria-expanded=false aria-controls=id824aa59efb83240e0b3236c1188c1c2a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/>8.存储</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id824aa59efb83240e0b3236c1188c1c2a aria-expanded=false aria-controls=id824aa59efb83240e0b3236c1188c1c2a><i class="fa-solid fa-angle-down" id=caret-id824aa59efb83240e0b3236c1188c1c2a></i></a></div><ul class="nav docs-sidenav collapse show" id=id824aa59efb83240e0b3236c1188c1c2a><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/55.secret/>55.Secret</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/56.configmap/>56.ConfigMap</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/57.configmap-%E7%9A%84%E7%83%AD%E6%9B%B4%E6%96%B0/>57.ConfigMap 的热更新</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/58.volume/>58.Volume</a></li><li class="child level active"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/59.%E6%8C%81%E4%B9%85%E5%8C%96%E5%8D%B7persistent-volume/>59.持久化卷（Persistent Volume）</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/60.storage-class/>60.Storage Class</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/61.%E6%9C%AC%E5%9C%B0%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/>61.本地持久化存储</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/configmap/>configmap</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/configmap-hot-update/>configmap-hot-update</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/local-persistent-storage/>local-persistent-storage</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/persistent-volume/>persistent-volume</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/secret/>secret</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/storageclass/>storageclass</a></li><li class="child level"><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/volume/>volume</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#介绍>介绍</a></li><li><a href=#卷和声明的生命周期>卷和声明的生命周期</a><ul><li><a href=#配置provision>配置（Provision）</a></li><li><a href=#绑定>绑定</a></li><li><a href=#使用>使用</a></li><li><a href=#持久化卷声明的保护>持久化卷声明的保护</a></li><li><a href=#回收>回收</a></li><li><a href=#扩展持久化卷声明>扩展持久化卷声明</a></li></ul></li><li><a href=#持久化卷类型>持久化卷类型</a></li><li><a href=#持久化卷>持久化卷</a><ul><li><a href=#容量>容量</a></li><li><a href=#卷模式>卷模式</a></li><li><a href=#访问模式>访问模式</a></li><li><a href=#类>类</a></li><li><a href=#回收策略>回收策略</a></li><li><a href=#挂载选项>挂载选项</a></li><li><a href=#状态>状态</a></li></ul></li><li><a href=#persistentvolumeclaim>PersistentVolumeClaim</a><ul><li><a href=#访问模式-1>访问模式</a></li><li><a href=#卷模式-1>卷模式</a></li><li><a href=#资源>资源</a></li><li><a href=#选择器>选择器</a></li><li><a href=#类-1>类</a></li></ul></li><li><a href=#声明作为卷>声明作为卷</a><ul><li><a href=#命名空间注意点>命名空间注意点</a></li></ul></li><li><a href=#原始块卷支持>原始块卷支持</a><ul><li><a href=#使用原始块卷作为持久化卷>使用原始块卷作为持久化卷</a></li><li><a href=#持久化卷声明请求原始块卷>持久化卷声明请求原始块卷</a></li><li><a href=#在-pod-规格配置中为容器添加原始块设备>在 Pod 规格配置中为容器添加原始块设备</a></li><li><a href=#绑定块卷>绑定块卷</a></li></ul></li><li><a href=#编写可移植配置>编写可移植配置</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>59.持久化卷（Persistent Volume）</h1><div class=article-style><h1 id=持久化卷persistent-volume>持久化卷（Persistent Volume）</h1><p>本文档介绍了 Kubernetes 中 <code>PersistentVolume</code> 的当前状态。建议您在阅读本文档前先熟悉 <a href=https://kubernetes.io/docs/concepts/storage/volumes/ target=_blank rel=noopener>volume</a>。</p><h2 id=介绍>介绍</h2><p>对于管理计算资源来说，管理存储资源明显是另一个问题。<code>PersistentVolume</code> 子系统为用户和管理员提供了一个 API，该 API 将如何提供存储的细节抽象了出来。为此，我们引入两个新的 API 资源：<code>PersistentVolume</code> 和 <code>PersistentVolumeClaim</code>。</p><p><code>PersistentVolume</code>（PV）是由管理员设置的存储，它是集群的一部分。就像节点是集群中的资源一样，PV 也是集群中的资源。PV 是 Volume 之类的卷插件，但具有独立于使用 PV 的 Pod 的生命周期。此 API 对象包含存储实现的细节，即 NFS、iSCSI 或特定于云供应商的存储系统。</p><p><code>PersistentVolumeClaim</code>（PVC）是用户存储的请求。它与 Pod 相似。Pod 消耗节点资源，PVC 消耗 PV 资源。Pod 可以请求特定级别的资源（CPU 和内存）。声明可以请求特定的大小和访问模式（例如，可以以读/写一次或 只读多次模式挂载）。</p><p>虽然 <code>PersistentVolumeClaims</code> 允许用户使用抽象存储资源，但用户需要具有不同性质（例如性能）的 <code>PersistentVolume</code> 来解决不同的问题。集群管理员需要能够提供各种各样的 <code>PersistentVolume</code>，这些<code>PersistentVolume</code> 的大小和访问模式可以各有不同，但不需要向用户公开实现这些卷的细节。对于这些需求，<code>StorageClass</code> 资源可以实现。</p><p>请参阅<a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/ target=_blank rel=noopener>工作示例的详细过程</a>。</p><h2 id=卷和声明的生命周期>卷和声明的生命周期</h2><p>PV 属于集群中的资源。PVC 是对这些资源的请求，也作为对资源的请求的检查。PV 和 PVC 之间的相互作用遵循这样的生命周期：</p><h3 id=配置provision>配置（Provision）</h3><p>有两种方式来配置 PV：静态或动态。</p><h4 id=静态>静态</h4><p>集群管理员创建一些 PV。它们带有可供集群用户使用的实际存储的细节。它们存在于 Kubernetes API 中，可用于消费。</p><h4 id=动态>动态</h4><p>根据 <code>StorageClasses</code>，当管理员创建的静态 PV 都不匹配用户的 <code>PersistentVolumeClaim</code> 时，集群可能会尝试动态地为 PVC 创建卷。</p><h3 id=绑定>绑定</h3><p>在动态配置的情况下，用户创建或已经创建了具有特定存储量的 <code>PersistentVolumeClaim</code> 以及某些访问模式。master 中的控制环路监视新的 PVC，寻找匹配的 PV（如果可能），并将它们绑定在一起。如果为新的 PVC 动态调配 PV，则该环路将始终将该 PV 绑定到 PVC。否则，用户总会得到他们所请求的存储，但是容量可能超出要求的数量。一旦 PV 和 PVC 绑定后，<code>PersistentVolumeClaim</code> 绑定是排他性的，不管它们是如何绑定的。PVC 跟 PV 绑定是一对一的映射。</p><p>如果没有匹配的卷，声明将无限期地保持未绑定状态。随着匹配卷的可用，声明将被绑定。例如，配置了许多 50Gi PV 的集群将不会匹配请求 100Gi 的 PVC。将 100Gi PV 添加到集群时，可以绑定 PVC。</p><h3 id=使用>使用</h3><p>Pod 使用声明作为卷。集群检查声明以查找绑定的卷并为集群挂载该卷。对于支持多种访问模式的卷，用户指定在使用声明作为容器中的卷时所需的模式。</p><p>用户进行了声明，并且该声明是绑定的，则只要用户需要，绑定的 PV 就属于该用户。用户通过在 Pod 的 volume 配置中包含 <code>persistentVolumeClaim</code> 来调度 Pod 并访问用户声明的 PV。</p><h3 id=持久化卷声明的保护>持久化卷声明的保护</h3><p>PVC 保护的目的是确保由 pod 正在使用的 PVC 不会从系统中移除，因为如果被移除的话可能会导致数据丢失。</p><p>注意：当 pod 状态为 <code>Pending</code> 并且 pod 已经分配给节点或 pod 为 <code>Running</code> 状态时，PVC 处于活动状态。</p><p>当启用 PVC 保护 alpha 功能时，如果用户删除了一个 pod 正在使用的 PVC，则该 PVC 不会被立即删除。PVC 的删除将被推迟，直到 PVC 不再被任何 pod 使用。</p><p>您可以看到，当 PVC 的状态为 <code>Teminatiing</code> 时，PVC 受到保护，<code>Finalizers</code> 列表中包含 <code>kubernetes.io/pvc-protection</code>：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl described pvc hostpath
</span></span><span class=line><span class=cl>Name:          hostpath
</span></span><span class=line><span class=cl>Namespace:     default
</span></span><span class=line><span class=cl>StorageClass:  example-hostpath
</span></span><span class=line><span class=cl>Status:        Terminating
</span></span><span class=line><span class=cl>Volume:
</span></span><span class=line><span class=cl>Labels:        &lt;none&gt;
</span></span><span class=line><span class=cl>Annotations:   volume.beta.kubernetes.io/storage-class<span class=o>=</span>example-hostpath
</span></span><span class=line><span class=cl>               volume.beta.kubernetes.io/storage-provisioner<span class=o>=</span>example.com/hostpath
</span></span><span class=line><span class=cl>Finalizers:    <span class=o>[</span>kubernetes.io/pvc-protection<span class=o>]</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><h3 id=回收>回收</h3><p>用户用完 volume 后，可以从允许回收资源的 API 中删除 PVC 对象。<code>PersistentVolume</code> 的回收策略告诉集群在存储卷声明释放后应如何处理该卷。目前，volume 的处理策略有保留、回收或删除。</p><h4 id=保留>保留</h4><p>保留回收策略允许手动回收资源。当 <code>PersistentVolumeClaim</code> 被删除时，<code>PersistentVolume</code> 仍然存在，volume 被视为“已释放”。但是由于前一个声明人的数据仍然存在，所以还不能马上进行其他声明。管理员可以通过以下步骤手动回收卷。</p><ol><li>删除 <code>PersistentVolume</code>。在删除 PV 后，外部基础架构中的关联存储资产（如 AWS EBS、GCE PD、Azure Disk 或 Cinder 卷）仍然存在。</li><li>手动清理相关存储资产上的数据。</li><li>手动删除关联的存储资产，或者如果要重新使用相同的存储资产，请使用存储资产定义创建新的 <code>PersistentVolume</code>。</li></ol><h4 id=回收-1>回收</h4><p>如果存储卷插件支持，回收策略会在 volume 上执行基本擦除（<code>rm -rf / thevolume / *</code>），可被再次声明使用。</p><p>但是，管理员可以使用如<a href=https://kubernetes.io/docs/admin/kube-controller-manager/ target=_blank rel=noopener>此处</a>所述的 Kubernetes controller manager 命令行参数来配置自定义回收站 pod 模板。自定义回收站 pod 模板必须包含 <code>volumes</code> 规范，如下面的示例所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pv-recycler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Never</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>vol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostPath</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/any/path/it/will/be/replaced</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pv-recycler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;k8s.gcr.io/busybox&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;/bin/sh&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s2>&#34;-c&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=s1>&#39;test -e /scrub &amp;&amp; rm -rf /scrub/..?* /scrub/.[!.]* /scrub/*  &amp;&amp; test -z &#34;$(ls -A /scrub)&#34; || exit 1&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>vol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/scrub</span><span class=w>
</span></span></span></code></pre></div><p>但是，<code>volumes</code> 部分的自定义回收站模块中指定的特定路径将被替换为正在回收的卷的特定路径。</p><h4 id=删除>删除</h4><p>对于支持删除回收策略的卷插件，删除操作将从 Kubernetes 中删除 <code>PersistentVolume</code> 对象，并删除外部基础架构（如 AWS EBS、GCE PD、Azure Disk 或 Cinder 卷）中的关联存储资产。动态配置的卷继承其 <code>StorageClass</code>，默认为 Delete。管理员应该根据用户的期望来配置 <code>StorageClass</code>，否则就必须要在 PV 创建后进行编辑或修补。请参阅<a href=https://kubernetes.io/docs/tasks/administer-cluster/change-pv-reclaim-policy/ target=_blank rel=noopener>更改 PersistentVolume 的回收策略</a>。</p><h3 id=扩展持久化卷声明>扩展持久化卷声明</h3><p>Kubernetes 1.8 增加了对扩展持久化存储卷的 Alpha 支持。在 v1.9 中，以下持久化卷支持扩展持久化卷声明：</p><ul><li>gcePersistentDisk</li><li>awsElasticBlockStore</li><li>Cinder</li><li>glusterfs</li><li>rbd</li></ul><p>管理员可以通过将 <code>ExpandPersistentVolumes</code> 特性门设置为 true 来允许扩展持久卷声明。管理员还应该启用<a href=https://kubernetes.io/docs/admin/admission-controllers/#persistentvolumeclaimresize target=_blank rel=noopener><code>PersistentVolumeClaimResize</code> 准入控制插件</a>来执行对可调整大小的卷的其他验证。</p><p>一旦 <code>PersistentVolumeClaimResize</code> 准入插件已打开，将只允许其 <code>allowVolumeExpansion</code> 字段设置为 true 的存储类进行大小调整。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StorageClass</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>storage.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>gluster-vol-default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>provisioner</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes.io/glusterfs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resturl</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;http://192.168.10.100:8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>restuser</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>secretNamespace</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>allowVolumeExpansion</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><p>一旦功能门和前述准入插件打开后，用户就可以通过简单地编辑声明以请求更大的 <code>PersistentVolumeClaim</code> 卷。这反过来将触发 <code>PersistentVolume</code> 后端的卷扩展。</p><p>在任何情况下都不会创建新的 <code>PersistentVolume</code> 来满足声明。Kubernetes 将尝试调整现有 volume 来满足声明的要求。</p><p>对于扩展包含文件系统的卷，只有在 ReadWrite 模式下使用 <code>PersistentVolumeClaim</code> 启动新的 Pod 时，才会执行文件系统调整大小。换句话说，如果正在扩展的卷在 pod 或部署中使用，则需要删除并重新创建要进行文件系统调整大小的 pod。此外，文件系统调整大小仅适用于以下文件系统类型：</p><ul><li>XFS</li><li>Ext3、Ext4</li></ul><p><strong>注意</strong>：扩展 EBS 卷是一个耗时的操作。另外，每 6 个小时有一个修改卷的配额。</p><h2 id=持久化卷类型>持久化卷类型</h2><p><code>PersistentVolume</code> 类型以插件形式实现。Kubernetes 目前支持以下插件类型：</p><ul><li>GCEPersistentDisk</li><li>AWSElasticBlockStore</li><li>AzureFile</li><li>AzureDisk</li><li>FC (Fibre Channel)</li><li>FlexVolume</li><li>Flocker</li><li>NFS</li><li>iSCSI</li><li>RBD (Ceph Block Device)</li><li>CephFS</li><li>Cinder (OpenStack block storage)</li><li>Glusterfs</li><li>VsphereVolume</li><li>Quobyte Volumes</li><li>HostPath （仅限于但节点测试—— 不会以任何方式支持本地存储，也无法在多节点集群中工作）</li><li>VMware Photon</li><li>Portworx Volumes</li><li>ScaleIO Volumes</li><li>StorageOS</li></ul><p>原始块支持仅适用于以上这些插件。</p><h2 id=持久化卷>持久化卷</h2><p>每个 PV 配置中都包含一个 sepc 规格字段和一个 status 卷状态字段。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PersistentVolume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pv0003</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>capacity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>5Gi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class=l>Filesystem</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ReadWriteOnce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>persistentVolumeReclaimPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Recycle</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class=l>slow</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mountOptions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>hard</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>nfsvers=4.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nfs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/tmp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>172.17.0.2</span><span class=w>
</span></span></span></code></pre></div><h3 id=容量>容量</h3><p>通常，PV 将具有特定的存储容量。这是使用 PV 的容量属性设置的。查看 Kubernetes <a href=https://git.k8s.io/community/contributors/design-proposals/scheduling/resources.md target=_blank rel=noopener>资源模型</a> 以了解 <code>capacity</code> 预期。</p><p>目前，存储大小是可以设置或请求的唯一资源。未来的属性可能包括 IOPS、吞吐量等。</p><h3 id=卷模式>卷模式</h3><p>在 v1.9 之前，所有卷插件的默认行为是在持久卷上创建一个文件系统。在 v1.9 中，用户可以指定一个 volumeMode，除了文件系统之外，它现在将支持原始块设备。volumeMode 的有效值可以是“Filesystem”或“Block”。如果未指定，volumeMode 将默认为“Filesystem”。这是一个可选的 API 参数。</p><p><strong>注意</strong>：该功能在 V1.9 中是 alpha 的，未来可能会更改。</p><h3 id=访问模式>访问模式</h3><p><code>PersistentVolume</code> 可以以资源提供者支持的任何方式挂载到主机上。如下表所示，供应商具有不同的功能，每个 PV 的访问模式都将被设置为该卷支持的特定模式。例如，NFS 可以支持多个读/写客户端，但特定的 NFS PV 可能以只读方式导出到服务器上。每个 PV 都有一套自己的用来描述特定功能的访问模式。</p><p>存储模式包括：</p><ul><li>ReadWriteOnce——该卷可以被单个节点以读/写模式挂载</li><li>ReadOnlyMany——该卷可以被多个节点以只读模式挂载</li><li>ReadWriteMany——该卷可以被多个节点以读/写模式挂载</li></ul><p>在命令行中，访问模式缩写为：</p><ul><li>RWO - ReadWriteOnce</li><li>ROX - ReadOnlyMany</li><li>RWX - ReadWriteMany</li></ul><blockquote><p><strong>重要</strong>！一个卷一次只能使用一种访问模式挂载，即使它支持很多访问模式。例如，GCEPersistentDisk 可以由单个节点作为 ReadWriteOnce 模式挂载，或由多个节点以 ReadOnlyMany 模式挂载，但不能同时挂载。</p></blockquote><table><thead><tr><th style=text-align:left>Volume 插件</th><th style=text-align:center>ReadWriteOnce</th><th style=text-align:center>ReadOnlyMany</th><th style=text-align:center>ReadWriteMany</th></tr></thead><tbody><tr><td style=text-align:left>AWSElasticBlockStore</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>AzureFile</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td></tr><tr><td style=text-align:left>AzureDisk</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>CephFS</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td></tr><tr><td style=text-align:left>Cinder</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>FC</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>FlexVolume</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>Flocker</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>GCEPersistentDisk</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>Glusterfs</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td></tr><tr><td style=text-align:left>HostPath</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>iSCSI</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>PhotonPersistentDisk</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>Quobyte</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td></tr><tr><td style=text-align:left>NFS</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td></tr><tr><td style=text-align:left>RBD</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>VsphereVolume</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>- （当 pod 并列时有效）</td></tr><tr><td style=text-align:left>PortworxVolume</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>✓</td></tr><tr><td style=text-align:left>ScaleIO</td><td style=text-align:center>✓</td><td style=text-align:center>✓</td><td style=text-align:center>-</td></tr><tr><td style=text-align:left>StorageOS</td><td style=text-align:center>✓</td><td style=text-align:center>-</td><td style=text-align:center>-</td></tr></tbody></table><h3 id=类>类</h3><p>PV 可以具有一个类，通过将 <code>storageClassName</code> 属性设置为 <a href=https://kubernetes.io/docs/concepts/storage/storage-classes/ target=_blank rel=noopener>StorageClass</a> 的名称来指定该类。一个特定类别的 PV 只能绑定到请求该类别的 PVC。没有 <code>storageClassName</code> 的 PV 就没有类，它只能绑定到不需要特定类的 PVC。</p><p>过去，使用的是 <code>volume.beta.kubernetes.io/storage-class</code> 注解而不是 <code>storageClassName</code> 属性。这个注解仍然有效，但是将来的 Kubernetes 版本中将会完全弃用它。</p><h3 id=回收策略>回收策略</h3><p>当前的回收策略包括：</p><ul><li>Retain（保留）——手动回收</li><li>Recycle（回收）——基本擦除（<code>rm -rf /thevolume/*</code>）</li><li>Delete（删除）——关联的存储资产（例如 AWS EBS、GCE PD、Azure Disk 和 OpenStack Cinder 卷）将被删除</li></ul><p>当前，只有 NFS 和 HostPath 支持回收策略。AWS EBS、GCE PD、Azure Disk 和 Cinder 卷支持删除策略。</p><h3 id=挂载选项>挂载选项</h3><p>Kubernetes 管理员可以指定在节点上为挂载持久卷指定挂载选项。</p><p><strong>注意</strong>：不是所有的持久化卷类型都支持挂载选项。</p><p>以下卷类型支持挂载选项：</p><ul><li>GCEPersistentDisk</li><li>AWSElasticBlockStore</li><li>AzureFile</li><li>AzureDisk</li><li>NFS</li><li>iSCSI</li><li>RBD （Ceph Block Device）</li><li>CephFS</li><li>Cinder （OpenStack 卷存储）</li><li>Glusterfs</li><li>VsphereVolume</li><li>Quobyte Volumes</li><li>VMware Photon</li></ul><p>挂载选项没有校验，如果挂载选项无效则挂载失败。</p><p>过去，使用 <code>volume.beta.kubernetes.io/mount-options</code> 注解而不是 <code>mountOptions</code> 属性。这个注解仍然有效，但在将来的 Kubernetes 版本中它将会被完全弃用。</p><h3 id=状态>状态</h3><p>卷可以处于以下的某种状态：</p><ul><li>Available（可用）——一块空闲资源还没有被任何声明绑定</li><li>Bound（已绑定）——卷已经被声明绑定</li><li>Released（已释放）——声明被删除，但是资源还未被集群重新声明</li><li>Failed（失败）——该卷的自动回收失败</li></ul><p>命令行会显示绑定到 PV 的 PVC 的名称。</p><h2 id=persistentvolumeclaim>PersistentVolumeClaim</h2><p>每个 PVC 中都包含一个 spec 规格字段和一个 status 声明状态字段。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PersistentVolumeClaim</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>myclaim</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ReadWriteOnce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class=l>Filesystem</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>8Gi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class=l>slow</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>release</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;stable&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- {<span class=w> </span><span class=nt>key: environment, operator: In, values</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>dev] }</span><span class=w>
</span></span></span></code></pre></div><h3 id=访问模式-1>访问模式</h3><p>在请求具有特定访问模式的存储时，声明使用与卷相同的约定。</p><h3 id=卷模式-1>卷模式</h3><p>声明使用与卷相同的约定，指示将卷作为文件系统或块设备使用。</p><h3 id=资源>资源</h3><p>像 pod 一样，声明可以请求特定数量的资源。在这种情况下，请求是用于存储的。相同的<a href=https://git.k8s.io/community/contributors/design-proposals/scheduling/resources.md target=_blank rel=noopener>资源模型</a>适用于卷和声明。</p><h3 id=选择器>选择器</h3><p>声明可以指定一个<a href=https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors target=_blank rel=noopener>标签选择器</a>来进一步过滤该组卷。只有标签与选择器匹配的卷可以绑定到声明。选择器由两个字段组成：</p><ul><li>matchLabels：volume 必须有具有该值的标签</li><li>matchExpressions：这是一个要求列表，通过指定关键字，值列表以及与关键字和值相关的运算符组成。有效的运算符包括 In、NotIn、Exists 和 DoesNotExist。</li></ul><p>所有来自 <code>matchLabels</code> 和 <code>matchExpressions</code> 的要求都被“与”在一起——它们必须全部满足才能匹配。</p><h3 id=类-1>类</h3><p>声明可以通过使用属性 <code>storageClassName</code> 指定 <a href=https://kubernetes.io/docs/concepts/storage/storage-classes/ target=_blank rel=noopener>StorageClass</a> 的名称来请求特定的类。只有所请求的类与 PVC 具有相同 <code>storageClassName</code> 的 PV 才能绑定到 PVC。</p><p>PVC 不一定要请求类。其 <code>storageClassName</code> 设置为 <code>""</code> 的 PVC 始终被解释为没有请求类的 PV，因此只能绑定到没有类的 PV（没有注解或 <code>""</code>）。没有 <code>storageClassName</code> 的 PVC 根据是否打开<a href=https://kubernetes.io/docs/admin/admission-controllers/#defaultstorageclass target=_blank rel=noopener><code>DefaultStorageClass</code> 准入控制插件</a>，集群对其进行不同处理。</p><ul><li>如果打开了准入控制插件，管理员可以指定一个默认的 <code>StorageClass</code>。所有没有 <code>StorageClassName</code> 的 PVC 将被绑定到该默认的 PV。通过在 <code>StorageClass</code> 对象中将注解 <code>storageclass.kubernetes.io/is-default-class</code> 设置为 “true” 来指定默认的 <code>StorageClass</code>。如果管理员没有指定缺省值，那么集群会响应 PVC 创建，就好像关闭了准入控制插件一样。如果指定了多个默认值，则准入控制插件将禁止所有 PVC 创建。</li><li>如果准入控制插件被关闭，则没有默认 <code>StorageClass</code> 的概念。所有没有 <code>storageClassName</code> 的 PVC 只能绑定到没有类的 PV。在这种情况下，没有 <code>storageClassName</code> 的 PVC 的处理方式与 <code>storageClassName</code> 设置为 <code>""</code> 的 PVC 的处理方式相同。</li></ul><p>根据安装方法的不同，默认的 <code>StorageClass</code> 可以在安装过程中通过插件管理器部署到 Kubernetes 集群。</p><p>当 PVC 指定了 <code>selector</code>，除了请求一个 <code>StorageClass</code> 之外，这些需求被“与”在一起：只有被请求的类的 PV 具有和被请求的标签才可以被绑定到 PVC。</p><p><strong>注意</strong>：目前，具有非空 <code>selector</code> 的 PVC 不能为其动态配置 PV。</p><p>过去，使用注解 <code>volume.beta.kubernetes.io/storage-class</code> 而不是 <code>storageClassName</code> 属性。这个注解仍然有效，但是在未来的 Kubernetes 版本中不会支持。</p><h2 id=声明作为卷>声明作为卷</h2><p>通过将声明用作卷来访问存储。声明必须与使用声明的 pod 存在于相同的命名空间中。集群在 pod 的命名空间中查找声明，并使用它来获取支持声明的 <code>PersistentVolume</code>。该卷然后被挂载到主机的 pod 上。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mypod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>myfrontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>dockerfile/nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/var/www/html&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mypd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mypd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>persistentVolumeClaim</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>claimName</span><span class=p>:</span><span class=w> </span><span class=l>myclaim</span><span class=w>
</span></span></span></code></pre></div><h3 id=命名空间注意点>命名空间注意点</h3><p><code>PersistentVolumes</code> 绑定是唯一的，并且由于 <code>PersistentVolumeClaims</code> 是命名空间对象，因此只能在一个命名空间内挂载具有“多个”模式（<code>ROX</code>、<code>RWX</code>）的声明。</p><h2 id=原始块卷支持>原始块卷支持</h2><p>原始块卷的静态配置在 v1.9 中作为 alpha 功能引入。由于这个改变，需要一些新的 API 字段来使用该功能。目前，Fibre Channl 是支持该功能的唯一插件。</p><h3 id=使用原始块卷作为持久化卷>使用原始块卷作为持久化卷</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PersistentVolume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>block-pv</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>capacity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>10Gi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ReadWriteOnce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class=l>Block</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>persistentVolumeReclaimPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Retain</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>fc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>targetWWNs</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;50060e801049cfd1&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>lun</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span></code></pre></div><h3 id=持久化卷声明请求原始块卷>持久化卷声明请求原始块卷</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PersistentVolumeClaim</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>block-pvc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ReadWriteOnce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumeMode</span><span class=p>:</span><span class=w> </span><span class=l>Block</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>10Gi</span><span class=w>
</span></span></span></code></pre></div><h3 id=在-pod-规格配置中为容器添加原始块设备>在 Pod 规格配置中为容器添加原始块设备</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pod-with-block-volume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>fc-container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>fedora:26</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;/bin/sh&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-c&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;tail -f /dev/null&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumeDevices</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>devicePath</span><span class=p>:</span><span class=w> </span><span class=l>/dev/xvda</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>persistentVolumeClaim</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>claimName</span><span class=p>:</span><span class=w> </span><span class=l>block-pvc</span><span class=w>
</span></span></span></code></pre></div><p><strong>注意</strong>：当为 Pod 增加原始块设备时，我们在容器中指定设备路径而不是挂载路径。</p><h3 id=绑定块卷>绑定块卷</h3><p>如果用户通过使用 <code>PersistentVolumeClaim</code> 规范中的 <code>volumeMode</code> 字段指示此请求来请求原始块卷，则绑定规则与以前不认为该模式为规范一部分的版本略有不同。</p><p>下面是用户和管理员指定请求原始块设备的可能组合的表格。该表指示卷是否将被绑定或未给定组合。静态设置的卷的卷绑定矩阵：</p><table><thead><tr><th>PV volumeMode</th><th style=text-align:center>PVC volumeMode</th><th style=text-align:right>结果</th></tr></thead><tbody><tr><td>unspecified</td><td style=text-align:center>unspecified</td><td style=text-align:right>绑定</td></tr><tr><td>unspecified</td><td style=text-align:center>Block</td><td style=text-align:right>不绑定</td></tr><tr><td>unspecified</td><td style=text-align:center>Filesystem</td><td style=text-align:right>绑定</td></tr><tr><td>Block</td><td style=text-align:center>unspecified</td><td style=text-align:right>不绑定</td></tr><tr><td>Block</td><td style=text-align:center>Block</td><td style=text-align:right>绑定</td></tr><tr><td>Block</td><td style=text-align:center>Filesystem</td><td style=text-align:right>不绑定</td></tr><tr><td>Filesystem</td><td style=text-align:center>Filesystem</td><td style=text-align:right>绑定</td></tr><tr><td>Filesystem</td><td style=text-align:center>Block</td><td style=text-align:right>不绑定</td></tr><tr><td>Filesystem</td><td style=text-align:center>unspecified</td><td style=text-align:right>绑定</td></tr></tbody></table><p><strong>注意</strong>：alpha 版本只支持静态配置卷。使用原始块设备时，管理员应该注意考虑这些值。</p><h2 id=编写可移植配置>编写可移植配置</h2><p>如果您正在编写在多种集群上运行并需要持久存储的配置模板或示例，我们建议您使用以下模式：</p><ul><li>要在您的在配置组合中包含 <code>PersistentVolumeClaim</code> 对象（与 Deployment、ConfigMap 等一起）。</li><li>不要在配置中包含 <code>PersistentVolume</code> 对象，因为用户实例化配置可能没有创建 <code>PersistentVolume</code> 的权限。</li><li>给用户在实例化模板时提供存储类名称的选项。<ul><li>如果用户提供存储类名称，则将该值放入 <code>persistentVolumeClaim.storageClassName</code> 字段中。如果集群具有由管理员启用的 StorageClass，这将导致 PVC 匹配正确的存储类别。</li><li>如果用户未提供存储类名称，则将 <code>persistentVolumeClaim.storageClassName</code> 字段保留为 nil。<ul><li>这将导致使用集群中默认的 StorageClass 为用户自动配置 PV。许多集群环境都有默认的 StorageClass，或者管理员可以创建自己的默认 StorageClass。</li></ul></li></ul></li><li>在您的工具中，请注意一段时间之后仍未绑定的 PVC，并向用户展示它们，因为这表示集群可能没有动态存储支持（在这种情况下用户应创建匹配的 PV），或集群没有存储系统（在这种情况下用户不能部署需要 PVC 的配置）。</li></ul><p>原文地址：https://kubernetes.io/docs/concepts/storage/persistent-volumes/</p><p>译者：<a href=https://github.com/rootsongjc target=_blank rel=noopener>rootsongjc</a></p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/58.volume/ rel=next>58.Volume</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/k8s-series/999.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-jimmysong-kubernetes-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/8.%E5%AD%98%E5%82%A8/60.storage-class/ rel=prev>60.Storage Class</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>