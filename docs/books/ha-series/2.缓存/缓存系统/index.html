<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="Next-gen Tech Edu"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=alternate href=/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F/index.xml type=application/rss+xml title="Next-gen Tech Edu"><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F/"><meta property="og:title" content="缓存系统 | Next-gen Tech Edu"><meta property="og:description" content="Next-gen Tech Edu"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>缓存系统 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=6b9ab8a7fbb81e83ef5f34df2898c091><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">2.缓存</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb4d04d60fcbdb2f5491b7f454ece0988")' href=#idb4d04d60fcbdb2f5491b7f454ece0988 aria-expanded=false aria-controls=idb4d04d60fcbdb2f5491b7f454ece0988 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/>HA-Series</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb4d04d60fcbdb2f5491b7f454ece0988 aria-expanded=false aria-controls=idb4d04d60fcbdb2f5491b7f454ece0988><i class="fa-solid fa-angle-down" id=caret-idb4d04d60fcbdb2f5491b7f454ece0988></i></a></div><ul class="nav docs-sidenav collapse show" id=idb4d04d60fcbdb2f5491b7f454ece0988><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id23e515c18aad791439400798198c9b7f")' href=#id23e515c18aad791439400798198c9b7f aria-expanded=false aria-controls=id23e515c18aad791439400798198c9b7f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/>0.设计原则</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id23e515c18aad791439400798198c9b7f aria-expanded=false aria-controls=id23e515c18aad791439400798198c9b7f><i class="fa-solid fa-angle-right" id=caret-id23e515c18aad791439400798198c9b7f></i></a></div><ul class="nav docs-sidenav collapse" id=id23e515c18aad791439400798198c9b7f><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id35dac0506116f0779797032d0c1f4fd6")' href=#id35dac0506116f0779797032d0c1f4fd6 aria-expanded=false aria-controls=id35dac0506116f0779797032d0c1f4fd6 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id63421a3b5534a39eb36f888f794956a8")' href=#id63421a3b5534a39eb36f888f794956a8 aria-expanded=false aria-controls=id63421a3b5534a39eb36f888f794956a8 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id79352fdfcbc7180758321def97984d5f")' href=#id79352fdfcbc7180758321def97984d5f aria-expanded=false aria-controls=id79352fdfcbc7180758321def97984d5f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/>可靠性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id79352fdfcbc7180758321def97984d5f aria-expanded=false aria-controls=id79352fdfcbc7180758321def97984d5f><i class="fa-solid fa-angle-right" id=caret-id79352fdfcbc7180758321def97984d5f></i></a></div><ul class="nav docs-sidenav collapse" id=id79352fdfcbc7180758321def97984d5f><li class="child level"><a href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%98%B2%E9%94%99%E8%AE%BE%E8%AE%A1/>防错设计</a></li><li class="child level"><a href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E5%8F%AF%E9%9D%A0%E6%80%A7/>可靠性</a></li><li class="child level"><a href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%9D%A2%E5%90%91%E5%A4%B1%E8%B4%A5%E7%9A%84%E8%AE%BE%E8%AE%A1/>面向失败的设计</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id26952b24e0c926bbe24c0f1d89df5252")' href=#id26952b24e0c926bbe24c0f1d89df5252 aria-expanded=false aria-controls=id26952b24e0c926bbe24c0f1d89df5252 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/>可扩展性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id26952b24e0c926bbe24c0f1d89df5252 aria-expanded=false aria-controls=id26952b24e0c926bbe24c0f1d89df5252><i class="fa-solid fa-angle-right" id=caret-id26952b24e0c926bbe24c0f1d89df5252></i></a></div><ul class="nav docs-sidenav collapse" id=id26952b24e0c926bbe24c0f1d89df5252><li class="child level"><a href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/%E8%B4%9F%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD/>负载与性能</a></li><li class="child level"><a href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/>可扩展性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id301c716b393f96c7a90aa836080add6b")' href=#id301c716b393f96c7a90aa836080add6b aria-expanded=false aria-controls=id301c716b393f96c7a90aa836080add6b aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/>可维护性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id301c716b393f96c7a90aa836080add6b aria-expanded=false aria-controls=id301c716b393f96c7a90aa836080add6b><i class="fa-solid fa-angle-right" id=caret-id301c716b393f96c7a90aa836080add6b></i></a></div><ul class="nav docs-sidenav collapse" id=id301c716b393f96c7a90aa836080add6b><li class="child level"><a href=/books/ha-series/0.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/>可维护性</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idadbbc435a8953dd95b7d2bd14e200e78")' href=#idadbbc435a8953dd95b7d2bd14e200e78 aria-expanded=false aria-controls=idadbbc435a8953dd95b7d2bd14e200e78 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/>1.弹性服务</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idadbbc435a8953dd95b7d2bd14e200e78 aria-expanded=false aria-controls=idadbbc435a8953dd95b7d2bd14e200e78><i class="fa-solid fa-angle-right" id=caret-idadbbc435a8953dd95b7d2bd14e200e78></i></a></div><ul class="nav docs-sidenav collapse" id=idadbbc435a8953dd95b7d2bd14e200e78><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id5fa861bd392cf2ab6ff778a2a72ce400")' href=#id5fa861bd392cf2ab6ff778a2a72ce400 aria-expanded=false aria-controls=id5fa861bd392cf2ab6ff778a2a72ce400 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/>定时任务</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id5fa861bd392cf2ab6ff778a2a72ce400 aria-expanded=false aria-controls=id5fa861bd392cf2ab6ff778a2a72ce400><i class="fa-solid fa-angle-right" id=caret-id5fa861bd392cf2ab6ff778a2a72ce400></i></a></div><ul class="nav docs-sidenav collapse" id=id5fa861bd392cf2ab6ff778a2a72ce400><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/crontab/>Crontab</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/hashed-wheel-timer/>Hashed Wheel Timer</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3214f0c6934815ba6ac521a44ff05fe1")' href=#id3214f0c6934815ba6ac521a44ff05fe1 aria-expanded=false aria-controls=id3214f0c6934815ba6ac521a44ff05fe1 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E5%B3%B0%E5%80%BC%E5%BA%94%E5%AF%B9/>峰值应对</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id3214f0c6934815ba6ac521a44ff05fe1 aria-expanded=false aria-controls=id3214f0c6934815ba6ac521a44ff05fe1><i class="fa-solid fa-angle-right" id=caret-id3214f0c6934815ba6ac521a44ff05fe1></i></a></div><ul class="nav docs-sidenav collapse" id=id3214f0c6934815ba6ac521a44ff05fe1><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E5%B3%B0%E5%80%BC%E5%BA%94%E5%AF%B9/%E7%A7%92%E6%9D%80%E5%B3%B0%E5%80%BC/>秒杀峰值</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6047457bef5f2ac0ffc3524f7fa588c7")' href=#id6047457bef5f2ac0ffc3524f7fa588c7 aria-expanded=false aria-controls=id6047457bef5f2ac0ffc3524f7fa588c7 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E5%B9%82%E7%AD%89/>服务幂等</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id6047457bef5f2ac0ffc3524f7fa588c7 aria-expanded=false aria-controls=id6047457bef5f2ac0ffc3524f7fa588c7><i class="fa-solid fa-angle-right" id=caret-id6047457bef5f2ac0ffc3524f7fa588c7></i></a></div><ul class="nav docs-sidenav collapse" id=id6047457bef5f2ac0ffc3524f7fa588c7><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E5%B9%82%E7%AD%89/%E6%8E%A5%E5%8F%A3%E5%B9%82%E7%AD%89/>接口幂等</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E5%B9%82%E7%AD%89/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%82%E7%AD%89/>数据库幂等</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E5%B9%82%E7%AD%89/%E6%97%A0%E7%8A%B6%E6%80%81%E8%AE%BE%E8%AE%A1/>无状态设计</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ide46a39da793aeaf67ed8879626534017")' href=#ide46a39da793aeaf67ed8879626534017 aria-expanded=false aria-controls=ide46a39da793aeaf67ed8879626534017 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E5%AE%B9%E9%94%99/>服务容错</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ide46a39da793aeaf67ed8879626534017 aria-expanded=false aria-controls=ide46a39da793aeaf67ed8879626534017><i class="fa-solid fa-angle-right" id=caret-ide46a39da793aeaf67ed8879626534017></i></a></div><ul class="nav docs-sidenav collapse" id=ide46a39da793aeaf67ed8879626534017><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E5%AE%B9%E9%94%99/%E5%B9%82%E7%AD%89%E6%80%A7/>幂等性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6859c9f3c379ddedb01040a79728c4e5")' href=#id6859c9f3c379ddedb01040a79728c4e5 aria-expanded=false aria-controls=id6859c9f3c379ddedb01040a79728c4e5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E7%A8%B3%E5%AE%9A%E6%80%A7%E6%A1%86%E6%9E%B6/>服务稳定性框架</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id6859c9f3c379ddedb01040a79728c4e5 aria-expanded=false aria-controls=id6859c9f3c379ddedb01040a79728c4e5><i class="fa-solid fa-angle-right" id=caret-id6859c9f3c379ddedb01040a79728c4e5></i></a></div><ul class="nav docs-sidenav collapse" id=id6859c9f3c379ddedb01040a79728c4e5><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id48b7b5d6ca68be70828f7ec5e80e174a")' href=#id48b7b5d6ca68be70828f7ec5e80e174a aria-expanded=false aria-controls=id48b7b5d6ca68be70828f7ec5e80e174a aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id530e68fd51670827b5979dd10283c792")' href=#id530e68fd51670827b5979dd10283c792 aria-expanded=false aria-controls=id530e68fd51670827b5979dd10283c792 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E7%A8%B3%E5%AE%9A%E6%80%A7%E6%A1%86%E6%9E%B6/sentinel/>Sentinel</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id530e68fd51670827b5979dd10283c792 aria-expanded=false aria-controls=id530e68fd51670827b5979dd10283c792><i class="fa-solid fa-angle-right" id=caret-id530e68fd51670827b5979dd10283c792></i></a></div><ul class="nav docs-sidenav collapse" id=id530e68fd51670827b5979dd10283c792><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E7%A8%B3%E5%AE%9A%E6%80%A7%E6%A1%86%E6%9E%B6/sentinel/%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/>部署配置</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E7%A8%B3%E5%AE%9A%E6%80%A7%E6%A1%86%E6%9E%B6/sentinel/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/>基础使用</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E7%A8%B3%E5%AE%9A%E6%80%A7%E6%A1%86%E6%9E%B6/sentinel/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/>架构实现</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id87709d1650659ed5cdac4abdad2c92a4")' href=#id87709d1650659ed5cdac4abdad2c92a4 aria-expanded=false aria-controls=id87709d1650659ed5cdac4abdad2c92a4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/>流量控制</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id87709d1650659ed5cdac4abdad2c92a4 aria-expanded=false aria-controls=id87709d1650659ed5cdac4abdad2c92a4><i class="fa-solid fa-angle-right" id=caret-id87709d1650659ed5cdac4abdad2c92a4></i></a></div><ul class="nav docs-sidenav collapse" id=id87709d1650659ed5cdac4abdad2c92a4><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/guava-ratelimiter/>Guava RateLimiter</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/redis-lua-%E9%99%90%E6%B5%81/>Redis Lua 限流</a></li><li class="child level"><a href=/books/ha-series/1.%E5%BC%B9%E6%80%A7%E6%9C%8D%E5%8A%A1/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/%E9%99%90%E6%B5%81%E7%AE%97%E6%B3%95/>限流算法</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida0036027620e39ebfade74d816654fb8")' href=#ida0036027620e39ebfade74d816654fb8 aria-expanded=false aria-controls=ida0036027620e39ebfade74d816654fb8 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/>10.实践案例</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida0036027620e39ebfade74d816654fb8 aria-expanded=false aria-controls=ida0036027620e39ebfade74d816654fb8><i class="fa-solid fa-angle-right" id=caret-ida0036027620e39ebfade74d816654fb8></i></a></div><ul class="nav docs-sidenav collapse" id=ida0036027620e39ebfade74d816654fb8><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf7e6ca3590b97951e0686beac9926af1")' href=#idf7e6ca3590b97951e0686beac9926af1 aria-expanded=false aria-controls=idf7e6ca3590b97951e0686beac9926af1 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F/>秒杀系统</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf7e6ca3590b97951e0686beac9926af1 aria-expanded=false aria-controls=idf7e6ca3590b97951e0686beac9926af1><i class="fa-solid fa-angle-right" id=caret-idf7e6ca3590b97951e0686beac9926af1></i></a></div><ul class="nav docs-sidenav collapse" id=idf7e6ca3590b97951e0686beac9926af1><li class="child level"><a href=/books/ha-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F/12306/>12306</a></li><li class="child level"><a href=/books/ha-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F/2021-%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%8B%E7%A7%92%E6%9D%80%E5%95%86%E5%93%81%E4%BD%A0%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84-9-%E4%B8%AA%E7%BB%86%E8%8A%82/>2021-高并发下秒杀商品，你必须知道的 9 个细节</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id45d72842e4bb11d4ea75574234ef8736")' href=#id45d72842e4bb11d4ea75574234ef8736 aria-expanded=false aria-controls=id45d72842e4bb11d4ea75574234ef8736 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/2.%E7%BC%93%E5%AD%98/>2.缓存</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id45d72842e4bb11d4ea75574234ef8736 aria-expanded=false aria-controls=id45d72842e4bb11d4ea75574234ef8736><i class="fa-solid fa-angle-down" id=caret-id45d72842e4bb11d4ea75574234ef8736></i></a></div><ul class="nav docs-sidenav collapse show" id=id45d72842e4bb11d4ea75574234ef8736><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idca3f459167e3c727a9779eb42a01dde2")' href=#idca3f459167e3c727a9779eb42a01dde2 aria-expanded=false aria-controls=idca3f459167e3c727a9779eb42a01dde2 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/2.%E7%BC%93%E5%AD%98/cdn/>CDN</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idca3f459167e3c727a9779eb42a01dde2 aria-expanded=false aria-controls=idca3f459167e3c727a9779eb42a01dde2><i class="fa-solid fa-angle-right" id=caret-idca3f459167e3c727a9779eb42a01dde2></i></a></div><ul class="nav docs-sidenav collapse" id=idca3f459167e3c727a9779eb42a01dde2><li class="child level"><a href=/books/ha-series/2.%E7%BC%93%E5%AD%98/cdn/cdn/>CDN</a></li></ul></div><li class="child level"><a href=/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5/>缓存策略</a></li><li class="child level"><a href=/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/>缓存淘汰算法</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd2cd037c36471fca93abf2f1c7b62fb6")' href=#idd2cd037c36471fca93abf2f1c7b62fb6 aria-expanded=false aria-controls=idd2cd037c36471fca93abf2f1c7b62fb6 aria-hidden=false data-toggle=collapse></div></div><li class="child level"><a href=/books/ha-series/2.%E7%BC%93%E5%AD%98/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/>缓存一致性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idcca47f5740ab912145f87cb311cf91be")' href=#idcca47f5740ab912145f87cb311cf91be aria-expanded=false aria-controls=idcca47f5740ab912145f87cb311cf91be aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/>3.容灾与隔离</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idcca47f5740ab912145f87cb311cf91be aria-expanded=false aria-controls=idcca47f5740ab912145f87cb311cf91be><i class="fa-solid fa-angle-right" id=caret-idcca47f5740ab912145f87cb311cf91be></i></a></div><ul class="nav docs-sidenav collapse" id=idcca47f5740ab912145f87cb311cf91be><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idcca4c1680439e3e68b2dbbf8eed39978")' href=#idcca4c1680439e3e68b2dbbf8eed39978 aria-expanded=false aria-controls=idcca4c1680439e3e68b2dbbf8eed39978 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5/>安全策略</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idcca4c1680439e3e68b2dbbf8eed39978 aria-expanded=false aria-controls=idcca4c1680439e3e68b2dbbf8eed39978><i class="fa-solid fa-angle-right" id=caret-idcca4c1680439e3e68b2dbbf8eed39978></i></a></div><ul class="nav docs-sidenav collapse" id=idcca4c1680439e3e68b2dbbf8eed39978><li class="child level"><a href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5/%E9%9B%B6%E4%BF%A1%E4%BB%BB%E6%9E%B6%E6%9E%84/>零信任架构</a></li></ul></div><li class="child level"><a href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%AE%B9%E7%81%BE%E7%B3%BB%E7%BB%9F/>容灾系统</a></li><li class="child level"><a href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%86%97%E4%BD%99%E8%AE%BE%E8%AE%A1/>冗余设计</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ide0d9577b827add83b60eef7de6aaff40")' href=#ide0d9577b827add83b60eef7de6aaff40 aria-expanded=false aria-controls=ide0d9577b827add83b60eef7de6aaff40 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%BC%82%E5%9C%B0%E5%A4%9A%E6%B4%BB/>异地多活</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ide0d9577b827add83b60eef7de6aaff40 aria-expanded=false aria-controls=ide0d9577b827add83b60eef7de6aaff40><i class="fa-solid fa-angle-right" id=caret-ide0d9577b827add83b60eef7de6aaff40></i></a></div><ul class="nav docs-sidenav collapse" id=ide0d9577b827add83b60eef7de6aaff40><li class="child level"><a href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%BC%82%E5%9C%B0%E5%A4%9A%E6%B4%BB/%E5%8D%95%E5%85%83%E5%8C%96/>单元化</a></li><li class="child level"><a href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E5%BC%82%E5%9C%B0%E5%A4%9A%E6%B4%BB/%E5%BC%82%E5%9C%B0%E5%A4%9A%E6%B4%BB/>异地多活</a></li></ul></div><li class="child level"><a href=/books/ha-series/3.%E5%AE%B9%E7%81%BE%E4%B8%8E%E9%9A%94%E7%A6%BB/%E7%A7%9F%E6%88%B7%E9%9A%94%E7%A6%BB/>租户隔离</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3fcdbbd2693f88a7d5202b5b05632635")' href=#id3fcdbbd2693f88a7d5202b5b05632635 aria-expanded=false aria-controls=id3fcdbbd2693f88a7d5202b5b05632635 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/>4.故障应急</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id3fcdbbd2693f88a7d5202b5b05632635 aria-expanded=false aria-controls=id3fcdbbd2693f88a7d5202b5b05632635><i class="fa-solid fa-angle-right" id=caret-id3fcdbbd2693f88a7d5202b5b05632635></i></a></div><ul class="nav docs-sidenav collapse" id=id3fcdbbd2693f88a7d5202b5b05632635><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida62db1032fa405179dbeb62356e769c4")' href=#ida62db1032fa405179dbeb62356e769c4 aria-expanded=false aria-controls=ida62db1032fa405179dbeb62356e769c4 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8652f2b7dc914552e9beea7be6ea18c6")' href=#id8652f2b7dc914552e9beea7be6ea18c6 aria-expanded=false aria-controls=id8652f2b7dc914552e9beea7be6ea18c6 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E6%97%A5%E5%BF%97/>日志</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8652f2b7dc914552e9beea7be6ea18c6 aria-expanded=false aria-controls=id8652f2b7dc914552e9beea7be6ea18c6><i class="fa-solid fa-angle-right" id=caret-id8652f2b7dc914552e9beea7be6ea18c6></i></a></div><ul class="nav docs-sidenav collapse" id=id8652f2b7dc914552e9beea7be6ea18c6><li class="child level"><a href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E6%97%A5%E5%BF%97/%E6%97%A5%E5%BF%97%E8%A7%84%E8%8C%83/>日志规范</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id11defb768cb5177ebf480b207291d6bb")' href=#id11defb768cb5177ebf480b207291d6bb aria-expanded=false aria-controls=id11defb768cb5177ebf480b207291d6bb aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id30badf1d86b18b05a092a0d2a7e6dad4")' href=#id30badf1d86b18b05a092a0d2a7e6dad4 aria-expanded=false aria-controls=id30badf1d86b18b05a092a0d2a7e6dad4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E9%A2%84%E6%A1%88/>应急预案</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id30badf1d86b18b05a092a0d2a7e6dad4 aria-expanded=false aria-controls=id30badf1d86b18b05a092a0d2a7e6dad4><i class="fa-solid fa-angle-right" id=caret-id30badf1d86b18b05a092a0d2a7e6dad4></i></a></div><ul class="nav docs-sidenav collapse" id=id30badf1d86b18b05a092a0d2a7e6dad4><li class="child level"><a href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E9%A2%84%E6%A1%88/%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D/>快速恢复</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9f98b7665be1b6bff9724a788e38d591")' href=#id9f98b7665be1b6bff9724a788e38d591 aria-expanded=false aria-controls=id9f98b7665be1b6bff9724a788e38d591 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E8%B4%A8%E9%87%8F%E8%AF%84%E4%BC%B0/>质量评估</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9f98b7665be1b6bff9724a788e38d591 aria-expanded=false aria-controls=id9f98b7665be1b6bff9724a788e38d591><i class="fa-solid fa-angle-right" id=caret-id9f98b7665be1b6bff9724a788e38d591></i></a></div><ul class="nav docs-sidenav collapse" id=id9f98b7665be1b6bff9724a788e38d591><li class="child level"><a href=/books/ha-series/4.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E8%B4%A8%E9%87%8F%E8%AF%84%E4%BC%B0/%E9%A3%8E%E9%99%A9%E6%9D%A5%E6%BA%90/>风险来源</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb882390f9380aa2796b5202d65f5d025")' href=#idb882390f9380aa2796b5202d65f5d025 aria-expanded=false aria-controls=idb882390f9380aa2796b5202d65f5d025 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/4.%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8F%AF%E8%A7%82%E6%B5%8B/>4.全链路可观测</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb882390f9380aa2796b5202d65f5d025 aria-expanded=false aria-controls=idb882390f9380aa2796b5202d65f5d025><i class="fa-solid fa-angle-right" id=caret-idb882390f9380aa2796b5202d65f5d025></i></a></div><ul class="nav docs-sidenav collapse" id=idb882390f9380aa2796b5202d65f5d025><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id7246c20509d6665d71754212327f929b")' href=#id7246c20509d6665d71754212327f929b aria-expanded=false aria-controls=id7246c20509d6665d71754212327f929b aria-hidden=false data-toggle=collapse></div></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida1a95e8f1cb9e143d5289b3fa69f6868")' href=#ida1a95e8f1cb9e143d5289b3fa69f6868 aria-expanded=false aria-controls=ida1a95e8f1cb9e143d5289b3fa69f6868 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/>5.故障应急</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida1a95e8f1cb9e143d5289b3fa69f6868 aria-expanded=false aria-controls=ida1a95e8f1cb9e143d5289b3fa69f6868><i class="fa-solid fa-angle-right" id=caret-ida1a95e8f1cb9e143d5289b3fa69f6868></i></a></div><ul class="nav docs-sidenav collapse" id=ida1a95e8f1cb9e143d5289b3fa69f6868><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida63a52e946d7f24bd6dd61e94d406382")' href=#ida63a52e946d7f24bd6dd61e94d406382 aria-expanded=false aria-controls=ida63a52e946d7f24bd6dd61e94d406382 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9a9646ccb15895e1d6c42ea5e065c146")' href=#id9a9646ccb15895e1d6c42ea5e065c146 aria-expanded=false aria-controls=id9a9646ccb15895e1d6c42ea5e065c146 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E6%97%A5%E5%BF%97/>日志</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9a9646ccb15895e1d6c42ea5e065c146 aria-expanded=false aria-controls=id9a9646ccb15895e1d6c42ea5e065c146><i class="fa-solid fa-angle-right" id=caret-id9a9646ccb15895e1d6c42ea5e065c146></i></a></div><ul class="nav docs-sidenav collapse" id=id9a9646ccb15895e1d6c42ea5e065c146><li class="child level"><a href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E6%97%A5%E5%BF%97/%E6%97%A5%E5%BF%97%E8%A7%84%E8%8C%83/>日志规范</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf241ec7624c2cd9e3eaaeb31552823ff")' href=#idf241ec7624c2cd9e3eaaeb31552823ff aria-expanded=false aria-controls=idf241ec7624c2cd9e3eaaeb31552823ff aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2735ad1e994f3c1bcbf83b95a386f03e")' href=#id2735ad1e994f3c1bcbf83b95a386f03e aria-expanded=false aria-controls=id2735ad1e994f3c1bcbf83b95a386f03e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E9%A2%84%E6%A1%88/>应急预案</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2735ad1e994f3c1bcbf83b95a386f03e aria-expanded=false aria-controls=id2735ad1e994f3c1bcbf83b95a386f03e><i class="fa-solid fa-angle-right" id=caret-id2735ad1e994f3c1bcbf83b95a386f03e></i></a></div><ul class="nav docs-sidenav collapse" id=id2735ad1e994f3c1bcbf83b95a386f03e><li class="child level"><a href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E9%A2%84%E6%A1%88/%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D/>快速恢复</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2e5a9650e3930ed7a3381792fcdb7cb2")' href=#id2e5a9650e3930ed7a3381792fcdb7cb2 aria-expanded=false aria-controls=id2e5a9650e3930ed7a3381792fcdb7cb2 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E8%B4%A8%E9%87%8F%E8%AF%84%E4%BC%B0/>质量评估</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2e5a9650e3930ed7a3381792fcdb7cb2 aria-expanded=false aria-controls=id2e5a9650e3930ed7a3381792fcdb7cb2><i class="fa-solid fa-angle-right" id=caret-id2e5a9650e3930ed7a3381792fcdb7cb2></i></a></div><ul class="nav docs-sidenav collapse" id=id2e5a9650e3930ed7a3381792fcdb7cb2><li class="child level"><a href=/books/ha-series/5.%E6%95%85%E9%9A%9C%E5%BA%94%E6%80%A5/%E8%B4%A8%E9%87%8F%E8%AF%84%E4%BC%B0/%E9%A3%8E%E9%99%A9%E6%9D%A5%E6%BA%90/>风险来源</a></li></ul></div></ul></div><li class="child level"><a href=/books/ha-series/introduction/>INTRODUCTION</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id56a877e2192e0a5d3df3cc4b4602963d")' href=#id56a877e2192e0a5d3df3cc4b4602963d aria-expanded=false aria-controls=id56a877e2192e0a5d3df3cc4b4602963d aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-series/%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8F%AF%E8%A7%82%E6%B5%8B/>全链路可观测</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id56a877e2192e0a5d3df3cc4b4602963d aria-expanded=false aria-controls=id56a877e2192e0a5d3df3cc4b4602963d><i class="fa-solid fa-angle-right" id=caret-id56a877e2192e0a5d3df3cc4b4602963d></i></a></div><ul class="nav docs-sidenav collapse" id=id56a877e2192e0a5d3df3cc4b4602963d><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idced4e6e513080b620182ae285d1bc6f1")' href=#idced4e6e513080b620182ae285d1bc6f1 aria-expanded=false aria-controls=idced4e6e513080b620182ae285d1bc6f1 aria-hidden=false data-toggle=collapse></div></div></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#memcache>Memcache</a></li><li><a href=#redis>Redis</a></li><li><a href=#leveldb>LevelDB</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>缓存系统</h1><div class=article-style><h1 id=缓存系统设计>缓存系统设计</h1><p>常见的缓存系统会采取 Key-Value 的非结构化存储，其需要具备的标准特性是：高性能、高扩展与高可靠。其高性能往往采取高速缓存、内存或 SSD 等存储方案，高扩展会综合应用多种存储引擎，并通过中间件或者负载均衡等方式保证扩展能力，而高可用则类似于我们在高可用架构中讨论的，需要有多种容灾与隔离方案。</p><h1 id=数据引擎>数据引擎</h1><h2 id=memcache>Memcache</h2><p>Memcache 是基于内存的数据库，仅支持 KV 类型数据，不支持持久化。它适用于数据小而简单，读多（QPS 万以上）写少，且偶尔数据丢失不应该对业务产生较大影响；例如访问量显示，session manager 等功能。</p><h2 id=redis>Redis</h2><p>Redis 是基于内存的数据库，除了标准的 KV 类型，还支持 String，List，Hash，Set，SortedSet 等复杂类型。它适用于数据形式复杂，偶尔数据丢失不应该对业务产生较大影响；例如排行榜、最新项目检索、地理位置存储及 range 查询。</p><h2 id=leveldb>LevelDB</h2><p>LevelDB 是基于 SSD 硬盘，仅支持 KV 类型数，支持持久化。它适用于数据简单，有持久化需求，且读写 QPS 较高（万级别）但存储数据较简单的应用场景；例如订单计数，库存记录等功能，更新非常频繁。</p><h1 id=系统架构>系统架构</h1><ul><li><p>Client——在初始化时，会从 Config server 处请求数据的分布信息，根据获取到的 key 和 Data server 的对照表，和 Data server 交互完成用户的请求；</p></li><li><p>Config Server——管理 Data Server 节点、维护 Data Server 的状态信息，为了保证高可用性质，采用了一主（master）一备（slave）的方式保证可靠性；</p></li><li><p>Data Server——负责数据存储，按照 Config Server 的指示完成数据复制和迁移工作，并定时给 Config Server 发送心跳信息。</p></li></ul><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://i.postimg.cc/TPLrJ7V9/image.png alt loading=lazy data-zoomable></div></div></figure></p><h1 id=路由负载均衡>路由负载均衡</h1><p>缓存系统中基本的路由对照表是由 Config Server 生成的提供给 Client 使用 key 来寻找对应 Data Server 的路由表。主 Config Server 会利用心跳机制检测 Data Server 的存活情况，并更新路由对照表，待客户端请求时返回新的路由表。备 Config Server 也会通过心跳，检测各自的存活情况；当主 Config Server 失活，备 Config Server 及时切换成主 Config Server 提供服务。Config Server 会每次为对照表维护一个版本号，每次将对照表与版本号也会发给 Data Server。客户端请求数据的时候，Data Server 每次都将自己的数据对照表版本号放入 response 中，客户端收到 response 后，将对照表 version 与本地比较，如果不相同，则再次向 Config Server 请求最新对照表。</p><p>负载均衡采用的是一致性哈希算法，简单来说，一致性哈希将整个哈希值空间组织成一个虚拟的圆环，如假设某哈希函数 H 的值空间为 0 - 232-1（即哈希值是一个 32 位无符号整形），将各个服务器使用 H 进行一个哈希，具体可以选择服务器的 ip 或主机名作为关键字进行哈希，这样每台机器就能确定其在哈希环上的位置，这里假设将三台服务器使用 ip 地址哈希后在环空间的位置。</p><p>与直接对 key 进行 hash 的一致性哈希算法不同的是，config server 首先通过 hash 将所有的 key 分到 Q 个 bucket 中，在缓存系统里 bucket 是负载均衡和数据迁移的基本单位，config server 根据一定的策略把每个桶指派到不同的 data server 上，因为数据按照 key 做 hash 算法，保证了桶分布的均衡性，从而保证了数据分布的均衡性，如图所示：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://i.postimg.cc/P5GyGPXZ/image.png alt loading=lazy data-zoomable></div></div></figure></p><h1 id=高可用部署>高可用部署</h1><ul><li>双机房单集群单份</li></ul><p>缓存系统部署在两个机房中，数据存储份数为 1，其优点在于服务器存在于双机房，任一机房宕机服务保持可用，并且单份数据，无论应用在哪个机房，看到的都是同一个数据。不过应用服务器会跨机房访问，并且当一边机房出现故障时，缓存系统中的数据会失效一半。</p><ul><li>双机房单集群双份</li></ul><p>相较于单份存储这里会存储两份数据，每个机房拥有独立集群，应用在哪个机房就访问相同机房的集群，不会出现跨机房调用和流量，并且单边机房故障，不会影响业务访问命中率。不过这种架构对于后端数据源就有了特别的要求，多集群间一致性保证依赖于后端的数据源。当后端数据源数据发生更新后，业务不能直接把数据 put 到缓存系统，而是先需要调用 invalid 接口来失效这些对等集群中的数据（来保持各集群的数据和后端数据源的一致性）。之后业务可以把数据 put 到当前集群（注意：只会 put 到本机房的集群，不会 put 到对端集群）或者在读缓存系统时发生 not exist 的时候从后端数据源取来放入缓存系统。</p><ul><li>双机房独立集群</li></ul><p>在两个机房中各自部署 2 个独立的集群，这两个集群没有直接关系。还多了一个 invalidserver 的角色，invalidserver 接收客户端的 invalid 或者 hide 请求后，会对各机房内的集群进行 delete 或者 hide 操作，以此保障整个缓存系统中的数据和后端数据源保持一致的。这种部署方式同样避免了跨机房的调用和流量，在单边机房故障时候不会影响到业务访问命中率。其不足同样在后端数据源发生数据变更后，需要手动调用 Invalid 接口来失效数据然后再添加。</p><ul><li>双机房主备集群</li></ul><p>这种部署方式中，存在一个主集群和一个备份集群，分别在两个机房中。正常情况下，用户只使用主集群，读写数据都与主集群交互。主备集群会自动同步数据（不需要业务去更新两边），保证两个机房数据的最终一致性。当一个机房发生故障后，备集群会自动切换成主集群，提供服务，保证系统可用性。这种部署方式的数据安全和服务可用性都比较高，不过在读多写少的情况下会造成负载不均衡。</p><p>Memcache 存储引擎适用于双机房单集群单份，双机房独立集群，双机房单集群双份。Redis 存储引擎适用于双机房单集群单份。LevelDB 存储引擎适用于双机房主备集群，双机房单集群单份。</p><h1 id=热点与限流>热点与限流</h1><p>单台 Data Server 限流策略有两种：</p><ul><li><p>要首先触发单机的最大阈值，再根据 namespace 配置的阈值判断是否已经超出限制。</p></li><li><p>namespace 配置的阈值超出单机的最大阈值限制即触发限流。超出部分的请求将返回限流返回码。</p></li></ul><p>我们应该避免热点 key。所谓热点 key，就是个别会被大量访问的 key，由于 key 根据 hash 值落到单台 Data Server 上，因此很容易触发限流。同时还需避免单次批量请求过多的 key。对于热点 Key，应该划出专门的 Hot Zone 来进行存储。各个接收线程单独计数，使用 threadLocal + LRU HashMap，然后由后台统计线程进行汇总计算，从而识别得到热点数据。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://i.postimg.cc/KjNb3bqS/image.png alt loading=lazy data-zoomable></div></div></figure></p><p>对于读热点，在 Data Server 中划分出 Hot Zone，该区域会存储热点数据。Client 初始化时会获取到哈希机器配置，然后会随机选取一台 Data Server 作为热点数据读写固定的 Hot Zone。Data Server 会向 Client 反馈的热点数据，当数据被识别为热点时，会先到固定的 Hot Zone 进行读取，获取失败则按原先路由方式到源 Data Server 进行取数，后面再通过异步的方式将数据更新到 Hot Zone，也就是 Hot Zone 和源数据的 Data Server 形成了二级缓存。通过这种方式就可以将热点数据查询压力进行分摊到各个 Hot Zone，水平扩展能力得到提升。</p><p>对于写热点，如果使用多级缓存的方式会有数据一致性的问题，写热点是通过在服务端写合并的方式，以减少数据实际写次数。当 Data Server 识别出热点数据后，不会立即进行操作，而是将该数据交给热点线程处理，热点线程会将一定时间内对同一个 key 的操作进行合并，随后由定时线程按照预设的合并周期将合并后的请求提交到引擎层，处理完成后再返回结果给客户端。</p></div><div class=article-widget><div class="container-xl row post-nav"></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>