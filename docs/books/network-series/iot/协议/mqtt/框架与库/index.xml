<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>框架与库 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/network-series/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/</link><atom:link href="https://ng-tech.icu/books/network-series/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/index.xml" rel="self" type="application/rss+xml"/><description>框架与库</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>框架与库</title><link>https://ng-tech.icu/books/network-series/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/</link></image><item><title>快速开始</title><link>https://ng-tech.icu/books/network-series/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/network-series/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/</guid><description>&lt;h1 id="快速开始">快速开始&lt;/h1>
&lt;p>MQTT Broker 就选择 EMQ 作为示范。比如有 1 个温度传感器（1 个 Machine），1 个移动设备，1 个电脑，一个服务器（3 个 Machine)，都可以得到或者显示温度传感器的温度值，需要先通过 MQTT 协议 subscribe（订阅）一个比如叫 temperature 的 topic（主题）如下：&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://assets.ng-tech.icu/item/ld5a7j.png" alt="mqtt 2" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>图中移动设备，服务器，电脑需要先通过 EMQ subscribe 一个叫 temperature 的 topic，当温度传感器 publish 温度数据，三个设备就可以收到了。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://assets.ng-tech.icu/item/ld5r90.png" alt="温度传感器" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h1 id="mosquitto">mosquitto&lt;/h1>
&lt;p>mosquitto 是一个开源 broker，并且支持 MQTTv3.1，支持客户端的验证。mosquitto 包括服务端和客户端。&lt;/p>
&lt;p>mosquitto_pub 客户端可发布一条消息到指定主题：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mosquitto_pub &lt;span class="o">[&lt;/span>-d&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-h hostname&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-i client_id&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-I client id prefix&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-p port number&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-q message QoS&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--quiet&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-r&lt;span class="o">]&lt;/span> &lt;span class="o">{&lt;/span> -f file &lt;span class="p">|&lt;/span> -l &lt;span class="p">|&lt;/span> -m message &lt;span class="p">|&lt;/span> -n &lt;span class="p">|&lt;/span> -s&lt;span class="o">}&lt;/span> &lt;span class="o">[&lt;/span>-u username &lt;span class="o">[&lt;/span>-P password&lt;span class="o">]&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span> --will-topic topic &lt;span class="o">[&lt;/span>--will-payload payload&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--will-qos qos&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--will-retain&lt;span class="o">]&lt;/span> &lt;span class="o">]&lt;/span> -t message-topic
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>sub_client 客户端订阅一个或多个主题的消息：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mosquitto_sub &lt;span class="o">[&lt;/span>-c&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-d&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-h hostname&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-i client_id&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-I client id prefix&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-k keepalive time&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-p port number&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-q message QoS&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--quiet&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>-v&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span> -u username &lt;span class="o">[&lt;/span>-Ppassword&lt;span class="o">]&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span> --will-topic topic &lt;span class="o">[&lt;/span>--will-payload payload&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--will-qos qos&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--will-retain&lt;span class="o">]&lt;/span> &lt;span class="o">]&lt;/span> -t message topic ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>