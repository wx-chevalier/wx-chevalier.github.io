<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>99.å‚è€ƒèµ„æ–™ | Next-gen Tech Edu</title>
    <link>https://ng-tech.icu/books/react-notes/03.%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/redux/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/</link>
      <atom:link href="https://ng-tech.icu/books/react-notes/03.%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/redux/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/index.xml" rel="self" type="application/rss+xml" />
    <description>99.å‚è€ƒèµ„æ–™</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language>
    <image>
      <url>https://ng-tech.icu/media/sharing.png</url>
      <title>99.å‚è€ƒèµ„æ–™</title>
      <link>https://ng-tech.icu/books/react-notes/03.%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/redux/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/</link>
    </image>
    
    <item>
      <title>2020-Stale props and zombie children in Redux</title>
      <link>https://ng-tech.icu/books/react-notes/03.%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/redux/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-stale-props-and-zombie-children-in-redux/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://ng-tech.icu/books/react-notes/03.%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/redux/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-stale-props-and-zombie-children-in-redux/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://kaihao.dev/posts/Stale-props-and-zombie-children-in-Redux&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Original&lt;/a&gt;ï¼Œ&lt;a href=&#34;https://github.com/xitu/gold-miner/blob/master/article/2020/Stale-props-and-zombie-children-in-Redux.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸­æ–‡ç¿»è¯‘&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;stale-props-and-zombie-children-in-redux&#34;&gt;Stale props and zombie children in Redux&lt;/h1&gt;
&lt;p&gt;å¦‚æœä½ è¯»äº† &lt;code&gt;react-redux&lt;/code&gt; v7 å‘è¡Œç‰ˆæœ¬çš„æ–‡æ¡£ï¼Œä½ å¯èƒ½ä¼šç¢°åˆ°&lt;a href=&#34;https://react-redux.js.org/api/hooks#stale-props-and-zombie-children&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿‡æ—¶çš„ props å’Œâ€œåƒµå°¸å­èŠ‚ç‚¹â€&lt;/a&gt;è¿™ç¯‡æ–‡ç« ä¸­æåˆ°çš„éƒ¨åˆ†é—®é¢˜ã€‚å³ä½¿å®ƒå·²ç»å†™çš„éå¸¸æ¸…æ™°æ˜äº†ï¼Œä½†å¯¹äºä¸ç†Ÿæ‚‰è¿™ä¸ªé—®é¢˜çš„äººæ¥è¯´ä¼šæ„Ÿåˆ°è¿·èŒ«ã€‚è¿™ç¯‡æ–‡ç« æ·±å…¥æ¢ç©¶äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶è®²è§£äº† &lt;code&gt;react-redux&lt;/code&gt; æ˜¯å¦‚ä½•è§£å†³çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç†è§£-react-redux&#34;&gt;ç†è§£ &lt;code&gt;react-redux&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆç†è§£ &lt;code&gt;Redux&lt;/code&gt;ï¼Œæˆ–è€…æ›´å…·ä½“çš„æ¥è¯´æ˜¯ &lt;code&gt;react-redux&lt;/code&gt;ã€‚æˆ‘ä»¬å°†é€šè¿‡é‡æ–°å®ç° &lt;code&gt;Redux&lt;/code&gt; å’Œ &lt;code&gt;react-redux&lt;/code&gt; çš„æ ¸å¿ƒåŠŸèƒ½æ¥è¿›è¡Œç†è§£ã€‚æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸ºäº†æ¼”ç¤ºçš„ç›®çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šé‡æ„æ¯ä¸€ä¸ªåŠŸèƒ½å¹¶å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œåªæ˜¯è¶³ä»¥è®©æˆ‘ä»¬ç†è§£æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Redux&lt;/code&gt; çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªåœ¨å…¨å±€çŠ¶æ€çº§åˆ«ä¸Šå¼ºåˆ¶ä½¿ç”¨ Flux æ¨¡å¼æ“ä½œçš„è®¢é˜…æ¨¡å‹ã€‚åœ¨ JavaScript ä¸­ä¸€ä¸ªè®¢é˜…æ¨¡å‹é€šå¸¸é€šè¿‡åˆ©ç”¨äº‹ä»¶ç›‘å¬å™¨æ¥å®ç°çš„ã€‚æˆ‘ä»¬ &lt;code&gt;subscribe&lt;/code&gt; æ›´æ”¹å¹¶é€šè¿‡ &lt;code&gt;reducers&lt;/code&gt; æ”¹å˜çŠ¶æ€ï¼Œå¹¶å‘å¸ƒç»“æœç»™æ¯ä¸€ä¸ªç›‘å¬è€…ä»¥æ‰§è¡Œæ›´æ–°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;createStore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;reducer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;initialState&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;initialState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// Returns an unsubscribe function
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;indexOf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;splice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;reducer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;forEach&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢æ˜¯ä¸€ä¸ª &lt;code&gt;Redux&lt;/code&gt; çš„ &lt;code&gt;createStore&lt;/code&gt; API çš„ç®€å•å®ç°ï¼Œæˆ‘ä»¬åˆ›å»ºçš„ &lt;code&gt;store&lt;/code&gt; å¯ä»¥ä½¿ç”¨ &lt;code&gt;getState()&lt;/code&gt; æ¥è·å–çŠ¶æ€ï¼Œé€šè¿‡ &lt;code&gt;subscribe(listener)&lt;/code&gt; æ¥è®¢é˜…ç›‘å¬å™¨ï¼Œä»¥åŠé€šè¿‡ &lt;code&gt;dispatch(action)&lt;/code&gt; æ¥åˆ†å‘åŠ¨ä½œï¼ˆdispatch actionï¼‰ï¼Œå°±åƒæˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨çš„å®˜æ–¹ API ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€æ­¥æ˜¯å¼„æ˜ç™½å¦‚ä½•å°†å…¶å’Œ &lt;code&gt;React&lt;/code&gt; é›†æˆã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ª &lt;a href=&#34;https://react-redux.js.org/api/provider&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;&amp;lt;Provider&amp;gt;&lt;/code&gt;&lt;/a&gt; ç»„ä»¶é€šè¿‡ä¸Šä¸‹æ–‡ä¼ é€’ &lt;code&gt;store&lt;/code&gt;ï¼Œä¸€ä¸ª &lt;a href=&#34;https://react-redux.js.org/api/connect&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;connect&lt;/code&gt;&lt;/a&gt; é«˜é˜¶ç»„ä»¶ç”¨äºåŒ…è£…å±•ç¤ºç»„ä»¶ï¼Œæœ€è¿‘çš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;a href=&#34;https://react-redux.js.org/api/hooks#useselector&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;useSelector&lt;/code&gt;&lt;/a&gt; é’©å­åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å–ä»£ &lt;code&gt;connect&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;Provider&amp;gt;&lt;/code&gt; API ç›¸å¯¹ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ &lt;code&gt;React&lt;/code&gt; ä¸Šä¸‹æ–‡ä¼ é€’ç”± &lt;code&gt;createStore&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;store&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Provider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;children&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Context.Provider&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;children&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Context.Provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æˆ‘ä»¬è¿›å…¥ &lt;code&gt;connect&lt;/code&gt; å’Œ &lt;code&gt;useSelector&lt;/code&gt; çš„å®ç°ä¹‹å‰ï¼Œæœ€å¥½é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„é—®é¢˜ã€‚å®ç°ç»†èŠ‚å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äº &lt;code&gt;Redux&lt;/code&gt; çš„å†å²ï¼Œå¦‚æœæˆ‘ä»¬å¯¹è¦è§£å†³çš„é—®é¢˜æœ‰æ‰å®çš„èƒŒæ™¯ä¼šæ›´å¥½ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ›´è½»æ¾çš„è®¨è®ºå®ç°çš„æ¼”å˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é—®é¢˜&#34;&gt;é—®é¢˜&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬å¿«é€Ÿå›é¡¾ä¸€ä¸‹æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜çš„&lt;a href=&#34;https://react-redux.js.org/api/hooks#stale-props-and-zombie-children&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®šä¹‰&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¿‡æ—¶çš„ props&lt;/strong&gt; æ„å‘³ç€åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©å™¨å‡½æ•°ä¾èµ–äºæ­¤ç»„ä»¶çš„ props æ¥æå–æ•°æ®&lt;/li&gt;
&lt;li&gt;åŠ¨ä½œçš„ç»“æœä¼šå¯¼è‡´çˆ¶ç»„ä»¶&lt;strong&gt;å°†&lt;/strong&gt;é‡æ–°æ¸²æŸ“å¹¶ä¼ é€’æ–°çš„ props&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯ï¼Œåœ¨è¯¥ç»„ä»¶æœ‰æœºä¼šä½¿ç”¨é‚£äº›æ–°çš„ props é‡æ¸²æŸ“ä¹‹å‰ï¼Œè¿™ä¸ªç»„ä»¶çš„é€‰æ‹©å™¨å‡½æ•°å°±ä¼šæ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åƒµå°¸å­èŠ‚ç‚¹&lt;/strong&gt;ä¸“é—¨æŒ‡ä»¥ä¸‹æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼ŒæŒ‚è½½äº†å¤šä¸ªåµŒå¥—ä¸”ç›¸å…³è”çš„ç»„ä»¶ï¼Œå¯¼è‡´å­ç»„ä»¶åœ¨çˆ¶ç»„ä»¶å‰è®¢é˜…äº† &lt;code&gt;store&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ†å‘ä¸€ä¸ªä» &lt;code&gt;store&lt;/code&gt; ä¸­åˆ é™¤æ•°æ®çš„åŠ¨ä½œï¼Œä¾‹å¦‚åˆ é™¤ä¸€ä¸ª todo é¡¹&lt;/li&gt;
&lt;li&gt;çˆ¶ç»„ä»¶å°†å› æ­¤åœæ­¢æ¸²æŸ“è¯¥å­ç»„ä»¶&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯ï¼Œç”±äºå­ç»„ä»¶å…ˆè¿›è¡Œäº†è®¢é˜…ï¼Œå®ƒçš„è®¢é˜…æ‰§è¡Œäºçˆ¶ç»„ä»¶åœæ­¢æ¸²æŸ“å®ƒä¹‹å‰ï¼Œå½“å®ƒåŸºäº props ä» &lt;code&gt;store&lt;/code&gt; ä¸­è¯»å–ä¸€ä¸ªå€¼æ—¶ï¼Œè¿™ä¸ªæ•°æ®ä¸å¤å­˜åœ¨ï¼Œå¹¶ä¸”å¦‚æœè¯»å–é€»è¾‘ä¸å®Œå–„çš„è¯ï¼Œåˆ™å¯èƒ½å¼•å‘é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœä½ ä»”ç»†çš„é˜…è¯»ä»¥ä¸Šå†…å®¹ï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™äº›é—®é¢˜ä¸æ˜¯ä¸¤ä¸ªåˆ†å¼€çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªå•ç‹¬çš„é—®é¢˜ã€‚ä»–ä»¬éƒ½æ˜¯&lt;strong&gt;è¿‡æ—¶çš„ props&lt;/strong&gt; é—®é¢˜ï¼Œ&lt;strong&gt;åƒµå°¸å­èŠ‚ç‚¹&lt;/strong&gt;æè¿°äº†ä¸€ä¸ªç‰¹å®šåœºæ™¯å¸¸è§çš„å­é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç°åœ¨è¿˜ä¸å¿…äº†è§£æ‰€æœ‰å®šä¹‰ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæä¾›ä¸€ä¸ªç¤ºä¾‹æ¥æ¼”ç¤ºä»£ç é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸€ä¸ªä¾‹å­&#34;&gt;ä¸€ä¸ªä¾‹å­&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å°†æ„å»ºçš„ç¤ºä¾‹æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ Todo åº”ç”¨ç¨‹åºï¼ˆæˆ‘çŸ¥é“ï¼Œduhï¼‰ï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºå°†ç®€å•çš„æ¸²æŸ“ä¸€ç»„ &lt;code&gt;todos&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†å‘ &lt;code&gt;DELETE&lt;/code&gt; åŠ¨ä½œæ¥åˆ é™¤å…¶ä¸­çš„ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬ç»§ç»­ï¼Œåˆ›å»ºä¸€ä¸ª &lt;code&gt;store&lt;/code&gt; å’Œå¯¹åº”çš„ &lt;code&gt;reducer&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;reducer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;createStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;reducer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª &lt;code&gt;&amp;lt;todo&amp;gt;&lt;/code&gt; ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨ &lt;code&gt;connect&lt;/code&gt; è¿›è¡ŒåŒ…è£…ï¼ˆ&lt;strong&gt;æˆ‘ä»¬åœ¨è¿™ä»…ä½¿ç”¨ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶æ„å»º APIã€‚ç¨åå†è®¨è®º &lt;code&gt;useSelector&lt;/code&gt;&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Todo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;li&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;li&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TodoContainer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ownProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ownProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}))(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TodoList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ul&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;TodoContainer&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;))}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ul&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TodoListContainer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}))(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TodoList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;ReactDOM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;render&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Provider&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;TodoListContainer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getElementById&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;root&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸¤ä¸ªå±•ç¤ºç»„ä»¶ &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt;ï¼Œç„¶åç”¨ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶è¿›è¡ŒåŒ…è£…ã€‚è¿™åªæ˜¯ä½¿ç”¨ &lt;code&gt;Redux&lt;/code&gt; æ¨¡å¼è¿›è¡Œç¼–å†™çš„ä¸€ä¸ªéå¸¸ç®€å•åŸºç¡€çš„ Todo åº”ç”¨ç¨‹åºçš„ç¤ºä¾‹ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬è¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºå¹¶ç‚¹å‡»ä»»ä½• &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; é¡¹ï¼Œæˆ‘ä»¬å¸Œæœ›å°†å…¶åˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬äº†è§£äº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè§„èŒƒï¼Œæˆ‘ä»¬å°†åœ¨ &lt;code&gt;react-redux&lt;/code&gt; ä¸­æ„å»ºæˆ‘ä»¬çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¬¬ä¸€ç§æ–¹æ³•&#34;&gt;ç¬¬ä¸€ç§æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆä» &lt;code&gt;react-redux&lt;/code&gt; v4 ç‰ˆæœ¬å¼€å§‹ï¼Œè¿™æ—¶äº‹æƒ…å˜å¾—æ›´ç®€å•ï¼Œå¹¶ä¸” API é¦–æ¬¡æ˜¯&lt;strong&gt;å®Œæ•´&lt;/strong&gt;å’Œ&lt;strong&gt;ç¨³å®š&lt;/strong&gt;çš„ã€‚è®©æˆ‘ä»¬æ„å»ºæ›´ç®€å•ç‰ˆæœ¬çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶ APIã€‚&lt;strong&gt;æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨é’©å­å’Œå…¶ä»–ç°ä»£çš„ React ç‰¹æ€§æ¥å®ç°ï¼Œä½†æ˜¯åº”è¯¥ä¸åŸºäºç±»çš„ API å¤§è‡´ç›¸åŒã€‚æ˜¯å…³äºæœªæ¥ç”Ÿæ´»çš„ä¸€ä»¶å¥½äº‹ï¼Œå¯¹å§ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// For demonstration purpose, we intentionally omit `mapDispatchToProps`,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// since it&amp;#39;s almost the same as `mapStateToProps`.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Instead, we just pass down `dispatch` as a prop.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WrappedComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;WrappedComponent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä¸éœ€è¦è¿›è¡Œä¼˜åŒ–çš„è¯ï¼Œè¿™å¯èƒ½æ˜¯ &lt;code&gt;connect&lt;/code&gt; æœ€ç›´æ¥çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç‚¹å‡» Todo é¡¹å»åˆ é™¤å®ƒï¼Œçœ‹æ˜¯å¦æœ‰æ•ˆå·¥ä½œã€‚å—¯ï¼Œå¥½å§ï¼Œä¸€åˆ‡éƒ½å´©æºƒäº†ã€‚å®ƒä¸èƒ½å·¥ä½œäº†ï¼Œå‡ºä»€ä¹ˆé—®é¢˜äº†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åƒ JavaScript è¿è¡Œæ—¶ä¸€æ ·ä¸€æ­¥ä¸€æ­¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼Œçœ‹çœ‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œ&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; åœ¨ &lt;code&gt;useEffect&lt;/code&gt; ä¸­è®¢é˜…äº† &lt;code&gt;store&lt;/code&gt;ã€‚å› ä¸º &lt;code&gt;useEffect&lt;/code&gt; ï¼ˆæˆ–è€… &lt;code&gt;componentDidMount&lt;/code&gt;ï¼‰ä»ä¸‹å¾€ä¸Šè§¦å‘ï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; é¦–å…ˆè¿›è¡Œè®¢é˜…ï¼Œç„¶åæ˜¯ &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·ç‚¹å‡» &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ç»„ä»¶ï¼Œå‘ &lt;code&gt;store&lt;/code&gt; åˆ†å‘äº†ä¸€ä¸ª &lt;code&gt;DELETE&lt;/code&gt; åŠ¨ä½œï¼ŒæœŸå¾…è¯¥é¡¹è¢«åˆ é™¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;store&lt;/code&gt; æ¥æ”¶åˆ°è¿™ä¸ªåŠ¨ä½œåï¼Œé€šè¿‡ &lt;strong&gt;reducer&lt;/strong&gt; æ¥è¿è¡Œï¼Œç„¶åæŠŠ &lt;code&gt;todos&lt;/code&gt; çš„çŠ¶æ€æ”¹ä¸ºç©ºæ•°ç»„ &lt;code&gt;{ todos: [] }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶å &lt;code&gt;store&lt;/code&gt; è°ƒç”¨å·²è®¢é˜…çš„ç›‘å¬å™¨ã€‚å› ä¸º &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; å…ˆè¿›è¡Œçš„è®¢é˜…ï¼Œå› æ­¤ä¹Ÿä¼šå…ˆè°ƒç”¨ç›‘å¬å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ä¸­çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶è§¦å‘ç›‘å¬å™¨ï¼Œè°ƒç”¨å¸¦æœ‰æœ€æ–°çš„ stateï¼ˆ&lt;code&gt;store.getState()&lt;/code&gt;ï¼‰å’Œæœ€æ–°çš„ propsï¼ˆ&lt;code&gt;propsRef.current&lt;/code&gt;ï¼‰çš„ &lt;code&gt;mapStateToProps&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å› ä¸ºæœ€æ–°çš„ state ä¸å†æœ‰ &lt;code&gt;todos&lt;/code&gt; çš„ stateï¼Œå°è¯•å»è®¿é—® &lt;code&gt;state.todos[ownProps.id]&lt;/code&gt; å¯¼è‡´ä¸º &lt;code&gt;undefined&lt;/code&gt;ã€‚è°ƒç”¨ &lt;code&gt;(undefined).content&lt;/code&gt; å°†å¯¼è‡´é”™è¯¯ ğŸ’¥ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å°±æ˜¯åœ¨åŠ¨ä½œä¸­è‘—åçš„&lt;code&gt;åƒµå°¸å­èŠ‚ç‚¹&lt;/code&gt;é—®é¢˜ã€‚&lt;strong&gt;åœ¨ Redux åˆ†å‘åï¼Œstate ä¼šåŒæ­¥æ”¹å˜ï¼Œä½†æ˜¯æ¸²æŸ“åˆ™ä¸ä¼šã€‚å½“æˆ‘ä»¬å°è¯•åœ¨ &lt;code&gt;mapStateToProps&lt;/code&gt; å‡½æ•°ä¸­è®¿é—® &lt;code&gt;ownProps&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å…¶ä¸­è¿è¡Œè¿‡æ—¶çš„ props&lt;/strong&gt;ã€‚è¿™æ˜¯ç±»ä¼¼çš„åŸå› ï¼ˆä¹‹ä¸€ï¼‰&lt;a href=&#34;https://github.com/facebook/react/issues/11527#issuecomment-360199710&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸ºä»€ä¹ˆ &lt;code&gt;setState&lt;/code&gt; ä¸æ˜¯åŒæ­¥çš„&lt;/a&gt;ï¼Œç®¡ç† &lt;code&gt;React&lt;/code&gt; ä¸–ç•Œä¹‹å¤–çš„ä¸€äº›çŠ¶æ€é€šå¸¸éœ€è¦æ³¨æ„ä¸€äº›é™·é˜±ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åº”è¯¥å¦‚ä½•è¿›è¡Œä¿®å¤ï¼Ÿå¦‚æœæ˜¯å› ä¸ºæˆ‘ä»¬ç®¡ç†äº† &lt;code&gt;React&lt;/code&gt; &lt;strong&gt;ä¹‹å¤–&lt;/strong&gt;çš„çŠ¶æ€ï¼Œæ˜¯å¦æˆ‘ä»¬å¯èƒ½æŠŠçŠ¶æ€æ”¾åˆ° &lt;code&gt;React&lt;/code&gt; &lt;strong&gt;å†…éƒ¨&lt;/strong&gt;ï¼Ÿæˆ‘ä»¬å¸Œæœ› &lt;code&gt;props&lt;/code&gt; å§‹ç»ˆä¿æŒæœ€æ–°ï¼Œè¿™ä»…åœ¨ &lt;code&gt;React&lt;/code&gt; ä½¿ç”¨æœ€æ–°çš„ props æ¸²æŸ“ç»„ä»¶æ—¶å‘ç”Ÿã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆä¸è¿™æ ·åšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠ &lt;code&gt;mapStateToProps&lt;/code&gt; æ”¹åˆ°æ¸²æŸ“é˜¶æ®µï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç›‘å¬å™¨å›è°ƒä¸­è§¦å‘æ›´æ–°æ¥å¼ºåˆ¶é‡æ–°æ¸²æŸ“ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WrappedComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;WrappedComponent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»è¯¥é¡¹æ—¶ï¼Œä»–æˆåŠŸåˆ é™¤äº†è‡ªå·±ï¼Œä¸‡å² ğŸ‰ï¼&lt;/p&gt;
&lt;p&gt;ç¨åï¼ŒPM æ¥è¯¢é—®æˆ‘ä»¬æ˜¯å¦å¯ä»¥å°†åˆ é™¤å»¶è¿Ÿåˆ° 1 ç§’ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå•å‡»è¯¥é¡¹åä¸ä¼šç«‹å³åˆ é™¤ï¼Œè€Œæ˜¯ 1 ç§’åå°†å…¶åˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œå¬èµ·æ¥å¾ˆç®€å•ï¼æ˜¯å§ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;const Todo = ({ id, content, dispatch }) =&amp;gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;li
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    onClick={() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gd&#34;&gt;-      dispatch({ type: &amp;#39;DELETE&amp;#39;, payload: id });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;+      setTimeout(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+        dispatch({ type: &amp;#39;DELETE&amp;#39;, payload: id });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+      }, 1000);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;&lt;/span&gt;    }}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    {content}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;/li&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬éå¸¸æœ‰ä¿¡å¿ƒå®ƒä¼šå·¥ä½œï¼Œæˆ‘ä»¬è¿›è¡Œä¿å­˜ï¼Œæäº¤ï¼Œç”šè‡³æ²¡æœ‰æµ‹è¯•ï¼ˆä½ æ°¸è¿œä¸è¦è¿™æ ·åšï¼‰ç›´æ¥å‘å¸ƒã€‚æ­¤åä¸ä¹…ï¼Œæˆ‘ä»¬æ”¶åˆ°äº†å¤§é‡çš„æŠ•è¯‰ï¼Œæ¯ä¸ªäººéƒ½æƒŠæ…Œå¤±æªã€‚å½“ç”¨æˆ·ç‚¹å‡»å¹¶ç­‰å¾… 1 ç§’åï¼Œåº”ç”¨ç¨‹åºå´©æºƒäº†ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºéƒ½å´©æºƒäº†&lt;/p&gt;
&lt;h2 id=&#34;unstable_batchedupdates&#34;&gt;&lt;code&gt;unstable_batchedUpdates&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæ·»åŠ ä¸€ä¸ªç®€å•çš„ &lt;code&gt;setTimeout&lt;/code&gt; ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºå´©æºƒå‘¢ï¼Ÿè¦ç ”ç©¶è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›å¹¶å†æ¬¡æ‰§è¡Œæ¯ä¸ªæ­¥éª¤ã€æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä»£ç ä¸­æ·»åŠ ä¸€å † &lt;code&gt;console.log&lt;/code&gt; æ¥éªŒè¯è¾“å‡ºï¼Œä½†æ˜¯ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œåœ¨è¿™é‡Œåªæä¾›ç»“æœã€‚å‰ 4 æ­¥å’Œä¹‹å‰ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ä»ç¬¬ 5 æ­¥å¼€å§‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨æ·»åŠ  &lt;code&gt;setTimeout&lt;/code&gt; ä¹‹å‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ä¸­çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶è§¦å‘ç›‘å¬å™¨ï¼Œè°ƒç”¨ &lt;code&gt;forceUpdate()&lt;/code&gt; æ¥è°ƒåº¦é‡æ¸²æŸ“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; ä¸­çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶è§¦å‘ç›‘å¬å™¨ï¼Œè°ƒç”¨ &lt;code&gt;forceUpdate()&lt;/code&gt; æ¥è°ƒåº¦é‡æ¸²æŸ“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; æ¸²æŸ“ï¼Œè¿”å›çš„å…ƒç´ æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ &lt;code&gt;[]&lt;/code&gt;ï¼Œåªæ¸²æŸ“ &lt;code&gt;&amp;lt;ul&amp;gt;&lt;/code&gt; å®¹å™¨ï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ç»„ä»¶ä¸ä¼šæ¸²æŸ“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ²¡æœ‰é”™è¯¯ï¼Œå®ƒæ­£å¸¸å·¥ä½œã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬æ·»åŠ  &lt;code&gt;setTimeout&lt;/code&gt; åï¼Œä½•æ—¶ä¼šåˆ†å‘åŠ¨ä½œã€‚å‰ 4 æ­¥ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯åœ¨ &lt;strong&gt;ï¼ˆ1ï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;ï¼ˆ2ï¼‰&lt;/strong&gt; ç›´æ¥å­˜åœ¨ 1 ç§’å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨æ·»åŠ  &lt;code&gt;setTimeout&lt;/code&gt; ä¹‹åï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ä¸­çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶è§¦å‘ç›‘å¬å™¨ï¼Œè°ƒç”¨ &lt;code&gt;forceUpdate()&lt;/code&gt; æ¥è°ƒåº¦é‡æ¸²æŸ“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; æ¸²æŸ“ï¼Œè°ƒç”¨å¸¦æœ‰æœ€æ–°çš„ state å’Œæœ€æ–°çš„ props çš„ &lt;code&gt;mapStateToProps&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å› ä¸ºçˆ¶ç»„ä»¶ï¼ˆ&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt;ï¼‰è¿˜æ²¡æœ‰æ¸²æŸ“ï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ä¸­çš„ props å®é™…ä¸Šæ˜¯&lt;strong&gt;è¿‡æ—¶çš„ props&lt;/strong&gt;ï¼Œä½†æ˜¯ state å·²ç»æ˜¯æœ€æ–°çš„äº†ã€‚è°ƒç”¨ &lt;code&gt;state.todos[ownProps.id]&lt;/code&gt; å¯¼è‡´ä¸º &lt;code&gt;undefined&lt;/code&gt;ï¼Œè°ƒç”¨ &lt;code&gt;(undefined).content&lt;/code&gt; å¯¼è‡´ä¸€ä¸ªé”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œåœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œç¬¬å…­æ­¥æ˜¯ä¸åŒçš„ã€‚å‰è€…åœ¨çˆ¶ç»„ä»¶ï¼ˆ&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt;ï¼‰ä¸­è°ƒç”¨å¦ä¸€ä¸ªç›‘è§†å™¨ï¼Œè€Œåè€…é¦–å…ˆæ¸²æŸ“å­ç»„ä»¶ï¼ˆ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt;ï¼‰ã€‚ &lt;strong&gt;ä¼¼ä¹æ˜¯è°ƒç”¨ &lt;code&gt;forceUpdate()&lt;/code&gt; ä¸ä¹…åï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; åŒæ­¥é‡æ¸²æŸ“äº†ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;â€œç­‰ç­‰ï¼Œæˆ‘ä»¥ä¸º &lt;code&gt;setState&lt;/code&gt; æ˜¯å¼‚æ­¥çš„ï¼Ÿâ€ æ˜¯çš„ï¼Œå½“ç„¶ä¸ä¼šã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ &lt;code&gt;setState&lt;/code&gt; å®é™…ä¸Šæ˜¯å¼‚æ­¥çš„ï¼Œ&lt;a href=&#34;https://twitter.com/dan_abramov/status/959507572951797761&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åªè¦ &lt;code&gt;setState&lt;/code&gt; åœ¨ React äº‹ä»¶å¤„ç†å›è°ƒä¸­è°ƒç”¨å³å¯&lt;/a&gt;ï¼ŒReact å°†ç¡®ä¿åœ¨äº‹ä»¶å¤„ç†å›è°ƒä¸­&lt;strong&gt;æ‰¹å¤„ç†&lt;/strong&gt;æ‰€æœ‰çš„æ›´æ–°ï¼Œå¹¶ä¸€æ¬¡å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰çš„æ¸²æŸ“ã€‚é€šè¿‡åœ¨ &lt;code&gt;setTimeout&lt;/code&gt; å›è°ƒä¸­åŒ…è£… &lt;code&gt;setState&lt;/code&gt;ï¼Œæˆ‘ä»¬&lt;strong&gt;é€‰æ‹©å–æ¶ˆ&lt;/strong&gt; è¿™ä¸ªç‰¹æ€§ï¼Œå¹¶ä½¿ &lt;code&gt;setState&lt;/code&gt; åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒReact æŠŠ &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ç»„ä»¶çš„ &lt;code&gt;forceUpdate()&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; ç»„ä»¶çš„ &lt;code&gt;forceUpdate()&lt;/code&gt; æ”¾åœ¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å›è°ƒä¸­ï¼Œç„¶åæœ€ç»ˆè®©å®ƒä»¬ä¸€æ¬¡è¿›è¡Œæ¸²æŸ“ã€‚**è¿™é‡Œå¦ä¸€ä¸ªé‡è¦çš„è¯´æ˜æ˜¯ï¼Œåœ¨é‡æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼ŒReact å°†ç¡®ä¿ä»ä¸‹åˆ°ä¸Šæ‰§è¡Œã€‚**è¿™å°±æ˜¯ä¸ºä»€ä¹ˆçˆ¶ç»„ä»¶ï¼ˆ&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt;ï¼‰é¦–å…ˆè¿›è¡Œé‡æ¸²æŸ“ï¼Œç„¶åè·³è¿‡ &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; æ¸²æŸ“çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œåœ¨å°†æ¥çš„æŸä¸ªç‰ˆæœ¬ä¸­ï¼Œ&lt;a href=&#34;https://twitter.com/dan_abramov/status/959557687158689792&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;React å°†å¯èƒ½ç¡®ä¿æ‰€æœ‰çš„ &lt;code&gt;setState&lt;/code&gt; éƒ½æ˜¯å¼‚æ­¥çš„&lt;/a&gt;ï¼Œè¿™æ„å‘³ç€å³ä½¿æˆ‘ä»¬æŠŠ &lt;code&gt;setState&lt;/code&gt; æ”¾åˆ° &lt;code&gt;setTimeout&lt;/code&gt; é‡Œé¢ï¼Œæ›´æ–°ä»ç„¶å°†åˆ†æ‰¹è¿›è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬ä»…ä»…æ˜¯è¿›è¡Œç­‰å¾…å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚ç°åœ¨è¿˜æœ‰å¦ä¸€ç§è§£å†³æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;Reactï¼Œæˆ–è€…æ›´å‡†ç¡®çš„è¯´ï¼Œ&lt;code&gt;react-dom&lt;/code&gt;ï¼Œæœ‰ä¸€ä¸ªéšè—ç‰¹æ€§ï¼š&lt;code&gt;unstable_batchedUpdates&lt;/code&gt;ï¼Œèƒ½å¤Ÿç²¾ç¡®çš„å®ç°æˆ‘ä»¬æƒ³è¦ç¡®ä¿çš„æ›´æ–°åœ¨ä¸€èµ·æ‰¹å¤„ç†ã€‚&lt;a href=&#34;https://react-redux.js.org/api/batch&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;React ä¸­äº‹ä»¶å¤„ç†ç¨‹åºå·²ç»åœ¨å†…éƒ¨ä½¿ç”¨æ­¤ API&lt;/a&gt;ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆåœ¨äº‹ä»¶å¤„ç†ä¸­ &lt;code&gt;setState&lt;/code&gt; å°†æ˜¯å¼‚æ­¥çš„ã€‚&lt;strong&gt;(æ­£å¦‚ä»–çš„åå­—æš—ç¤ºçš„é‚£æ ·ï¼Œæˆ‘ä»¬åº”è¯¥å®Œå…¨ç†è§£åå†ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬å·²ç»è¢«è­¦å‘Šäº†ã€‚&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç®€å•çš„åœ¨ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt; å›è°ƒä¸­æ¥åŒ…è£…æˆ‘ä»¬çš„ &lt;code&gt;dispatch&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+import { unstable_batchedUpdates } from &amp;#39;react-dom&amp;#39;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;const Todo = ({ id, content, dispatch }) =&amp;gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;li
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    onClick={() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      setTimeout(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gd&#34;&gt;-        dispatch({ type: &amp;#39;DELETE&amp;#39;, payload: id });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;gi&#34;&gt;+        unstable_batchedUpdates(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+          dispatch({ type: &amp;#39;DELETE&amp;#39;, payload: id });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+        });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;&lt;/span&gt;      }, 1000);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    {content}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;/li&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿˜æœ‰å¦ä¸€ä¸ªåœ°æ–¹æˆ‘ä»¬å¯ä»¥æ·»åŠ  &lt;code&gt;unstable_batchedUpdates&lt;/code&gt;ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€å•çš„åŒ…è£…æˆ‘ä»¬ store åˆ†å‘æ–¹æ³•ï¼Œæ¥ä»£æ›¿åŒ…è£…æ¯ä¸ªå¸¦æœ‰ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt; çš„ &lt;code&gt;dispatch&lt;/code&gt; è°ƒç”¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;dispatch(action) {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  state = reducer(state, action);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+  unstable_batchedUpdates(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;&lt;/span&gt;    listeners.forEach(listener =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      listener();
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;+  });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;gi&#34;&gt;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®ƒå·¥ä½œè‰¯å¥½ã€‚è¿™å®é™…ä¸Šå°±æ˜¯ &lt;code&gt;react-redux&lt;/code&gt; v4 çš„å®ç°ï¼Œæ²¡æœ‰è®¸å¤šå…¶ä»–å¿…è¦çš„ä¼˜åŒ–ï¼Œåƒ&lt;a href=&#34;https://github.com/reduxjs/react-redux/blob/v4.4.0/src/components/connect.js#L238-L270&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®°ä½è¿”å›çš„å…ƒç´ &lt;/a&gt;ï¼Œæˆ–è€…&lt;a href=&#34;https://github.com/reduxjs/react-redux/pull/348&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¦‚æœ &lt;code&gt;mapStateToProps&lt;/code&gt; å‡½æ•°ä¸ä¾èµ–äº &lt;code&gt;ownProps&lt;/code&gt;ï¼Œåˆ™å°½æ—©è¿›è¡Œæ›´æ–°&lt;/a&gt;ã€‚ å³ä½¿è¿›è¡Œäº†è¿™äº›ä¼˜åŒ–ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡çŠ¶æ€æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬ä»ç„¶ä¼šå¼ºåˆ¶å®¹å™¨ç»„ä»¶è¿›è¡Œé‡æ¸²æŸ“ã€‚å¯¹äºä¸€ä¸ªå¾ˆå°çš„åº”ç”¨ç¨‹åºï¼Œå®ƒåº”è¯¥è¿˜ä¸é”™ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå¯æ‰©å±•çš„å…¨å±€çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒå¾ˆå¿«å°±å˜å¾—æ— æ³•æ¥å—ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åµŒå¥—è®¢é˜…æ¨¡å‹&#34;&gt;åµŒå¥—è®¢é˜…æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¸Œæœ›æœ€å°åŒ–å®¹å™¨ç»„ä»¶ä¸­çš„æ¸²æŸ“è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬æƒ³å‡ºä¸€ç§æ–¹æ³•æ¥åœ¨ &lt;code&gt;forceUpdate()&lt;/code&gt; è°ƒç”¨ä¹‹å‰çš„ç›‘å¬å™¨å›è°ƒä¸­å°½æ—©è·³è¿‡æ›´æ–°ã€‚æˆ‘ä»¬è¿˜æƒ³å¼ºåˆ¶æ‰§è¡Œ&lt;strong&gt;è‡ªä¸Šè€Œä¸‹çš„å‘½ä»¤&lt;/strong&gt;ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šå†æå‡ºè¿‡æ—¶çš„ props å’Œåƒµå°¸å­èŠ‚ç‚¹é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;Redux å›¢é˜Ÿæå‡ºäº†ä¸€ç§æœ‰è¶£çš„æ–¹æ³•æ¥è§£å†³ &lt;code&gt;react-redux&lt;/code&gt; v5 ä¸­çš„é—®é¢˜ã€‚é€šè¿‡ä½¿ç”¨&lt;strong&gt;åµŒå¥—è®¢é˜…æ¨¡å‹&lt;/strong&gt;ï¼Œæˆ‘ä»¬å¯ä»¥å°½æ—©è·³è¿‡æ›´æ–°ï¼Œè¿˜å¯ä»¥é¿å…è¿‡æ—¶çš„ props é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³æ˜¯ï¼Œæˆ‘ä»¬å»¶è¿Ÿç›‘å¬å™¨å›è°ƒçš„è§¦å‘ï¼Œç›´åˆ°çˆ¶çº§å®Œå…¨é‡æ¸²æŸ“ä¸ºæ­¢ï¼Œç”¨æ¥ä»£æ›¿åˆ†æ‰¹åœ°è¿›è¡Œæ›´æ–°ä»¥ä½¿å…¶è‡ªä¸Šè€Œä¸‹&lt;/strong&gt;ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ›´æ–°å§‹ç»ˆæ˜¯è‡ªä¸Šè€Œä¸‹çš„ï¼Œå­©å­ä¸ä¼šåœ¨ç›‘å¬å™¨å›è°ƒä¸­è·å¾—&lt;strong&gt;è¿‡æ—¶çš„ props&lt;/strong&gt;ï¼Œå› ä¸ºå½“æˆ‘ä»¬è§¦å‘å›è°ƒæ—¶ï¼Œprops å·²ç»æ˜¯æœ€æ–°çš„äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä»£ç ç‰‡æ®µä»·å€¼ä¸€åƒå¥è¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;createSubscription&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// Returns an unsubscribe function
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;indexOf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;splice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;notifyUpdates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;forEach&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª &lt;code&gt;createSubscription&lt;/code&gt;ï¼Œå®ƒå’Œ &lt;code&gt;createStore&lt;/code&gt; å‡½æ•°éå¸¸åƒï¼Œå®ƒä¹Ÿæœ‰ç›‘å¬å™¨ï¼Œå’Œ &lt;code&gt;subscribe&lt;/code&gt; å‡½æ•°ã€‚ä¸åŒä¹‹å¤„æ˜¯å®ƒä¸ä¿å­˜ä»»ä½•çš„çŠ¶æ€ï¼Œä¹Ÿæœ‰ä¸€ä¸ª &lt;code&gt;notifyUpdates()&lt;/code&gt; æ–¹æ³•ã€‚è¿™ä¸ª &lt;code&gt;notifyUpdates()&lt;/code&gt; æ–¹æ³•ç”¨æ¥é€šçŸ¥å®ƒçš„æ‰€æœ‰çš„å­©å­èŠ‚ç‚¹ï¼Œæ¥è§¦å‘å®ƒä»¬çš„ç›‘å¬å™¨å›è°ƒï¼Œæˆ‘ä»¬å°†åœ¨ä¹‹åè¿›è¡Œæ›´å¤šçš„è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿™åªæ˜¯åˆ›å»ºäº‹ä»¶è§¦å‘å™¨çš„å‡½æ•°ï¼Œè¿™æ˜¯éå¸¸æ­£ç¡®çš„ï¼Œå¹¶ä¸”å®ƒå°±è¿™ä¹ˆçš„ç®€å•ã€‚ä¸‹ä¸€æ­¥æ˜¯ç¼–å†™æ–°çš„ &lt;code&gt;connect&lt;/code&gt; é«˜é˜¶ç»„ä»¶ï¼Œå¹¶å°†å…¶ &lt;code&gt;mapStateToProps&lt;/code&gt; æ”¾å…¥ç›‘å¬å™¨å›è°ƒä¸­ï¼Œä»¥å°½æ—©è·³è¿‡æ›´æ–°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WrappedComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;subStore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useMemo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createSubscription&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useReducer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stateRef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;stateRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nextState&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;shallowEqual&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stateRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nextState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// Bail out updates early, immediately notify updates to children
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;subStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;notifyUpdates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;propsRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stateRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;subStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;subStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;notifyUpdates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Don&amp;#39;t pass dependencies so that it will run after every re-render
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Provider&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subStore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;WrappedComponent&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...stateRef.current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;na&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæœ‰å¾ˆå¤šäº‹æƒ…ï¼Œè®©æˆ‘ä»¬ä¸€ä¸€åˆ†è§£ã€‚åŸºæœ¬å®ç°æœ‰ç‚¹ç±»ä¼¼äºæˆ‘ä»¬çš„ç¬¬ä¸€ç§æ–¹æ³•ã€‚æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬åˆšåˆšå®ç°çš„ &lt;code&gt;subscription&lt;/code&gt; æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;subStore&lt;/code&gt;ï¼Œå¹¶å°†å…¶ä¸åŸå§‹çš„ &lt;code&gt;store&lt;/code&gt; åˆå¹¶ã€‚ç»“æœï¼Œè¯¥ &lt;code&gt;subscribe&lt;/code&gt; æ–¹æ³•å°†è¦†ç›– &lt;code&gt;store&lt;/code&gt; ä¸­åŸå§‹çš„ &lt;code&gt;subscribe&lt;/code&gt; æ–¹æ³•ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåä¸ºçš„ &lt;code&gt;notifyUpdates&lt;/code&gt; çš„æ–°æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ 2 ä¸ªåœ°æ–¹è¿è¡Œ &lt;code&gt;mapStateToProps&lt;/code&gt; é€‰æ‹©å™¨ã€‚æˆ‘ä»¬åœ¨æ¸²æŸ“é˜¶æ®µè¿è¡Œæˆ‘ä»¬çš„ &lt;code&gt;mapStateToProps&lt;/code&gt;ï¼Œä»¥ä¾¿åœ¨å›è°ƒä¸­è°ƒç”¨ &lt;code&gt;forceUpdate()&lt;/code&gt; ä¹‹åæ€»æ˜¯è·å¾—æœ€æ–°çš„ propsã€‚åœ¨æˆ‘ä»¬çš„ç›‘å¬å™¨å›è°ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹Ÿç›´æ¥åœ¨å®ƒå†…éƒ¨ä½¿ç”¨ &lt;code&gt;mapStateToProps&lt;/code&gt;ï¼Œå¹¶ä¸”è¿›è¡Œäº†ä¸€ä¸ªæµ…å¯¹æ¯”ï¼Œä»¥ç¡®å®šå¦‚æœæ˜ å°„çŠ¶æ€ä¸å˜ï¼Œæ˜¯å¦å¯ä»¥è·³è¿‡æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ return è¯­å¥ä¸­ï¼Œæˆ‘ä»¬å†æ¬¡ç”¨è¯¥ &lt;code&gt;&amp;lt;Provider&amp;gt;&lt;/code&gt; ç»„ä»¶åŒ…è£…æˆ‘ä»¬çš„ç»„ä»¶ï¼Œå¹¶ç”¨æ–°åˆ›å»ºçš„ &lt;code&gt;subStore&lt;/code&gt; æ¥æ˜¾å¼è¦†ç›– store ä¸Šä¸‹æ–‡ã€‚è¿™æ ·ç»„ä»¶æ ‘ä¸‹çš„æ¯ä¸ªç»„ä»¶éƒ½å°†è·å¾— &lt;code&gt;subStore&lt;/code&gt; è€Œä¸æ˜¯æœ€é¡¶å±‚çš„ &lt;code&gt;store&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬åˆ›å»ºå¦ä¸€ä¸ªå«åš &lt;code&gt;subStore.notifyUpdates()&lt;/code&gt; çš„å‰¯ä½œç”¨ï¼Œä»¥ä¾¿&lt;strong&gt;åœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹å&lt;/strong&gt;è°ƒç”¨ç»„ä»¶æ ‘ä¸‹çš„æ‰€æœ‰å­çº§ã€‚&lt;strong&gt;ç›´åˆ°ä¸‹ä¸€ä¸ªæ¸²æŸ“ä¸­æœ€æ–°çš„ props å·²ç»ä¼ é€’ç»™å­èŠ‚ç‚¹æ—¶ï¼Œæ‰ä¼šè°ƒç”¨å­èŠ‚ç‚¹çš„å›è°ƒ&lt;/strong&gt;ï¼Œä»è€Œæ¶ˆé™¤äº†&lt;strong&gt;è¿‡æ—¶çš„ props&lt;/strong&gt; é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å†æ¬¡å•å‡»è¯¥é¡¹ï¼Œè¯¥é¡¹ç°åœ¨å°†æˆåŠŸåˆ é™¤è€Œä¸ä¼šå¼•å‘ä»»ä½•é”™è¯¯ã€‚ä¸ºäº†ä½¿æµç¨‹æ›´æ¸…æ™°ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡æ‰§è¡Œæ¯ä¸ªæ­¥éª¤ï¼Œä»¥ç¡®ä¿å…¶æŒ‰é¢„æœŸå·¥ä½œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; è®¢é˜… &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; åˆ›å»ºçš„ &lt;code&gt;subStore&lt;/code&gt; ç„¶åé€šè¿‡ &lt;code&gt;useEffect&lt;/code&gt; ä¸­çš„ &lt;code&gt;Provider&lt;/code&gt; å‘ä¸‹ä¼ é€’ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶å &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; è®¢é˜…åœ¨å®ƒçš„ &lt;code&gt;useEffect&lt;/code&gt; ä¸­é€šè¿‡ &lt;code&gt;createStore&lt;/code&gt; åˆ›å»ºçš„å…¨å±€çš„ &lt;code&gt;store&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·ç‚¹å‡» &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt;ï¼Œå‘ store åˆ†å‘ä¸€ä¸ª &lt;code&gt;DELETE&lt;/code&gt; åŠ¨ä½œï¼ŒæœŸæœ›è¯¥é¡¹è¢«åˆ é™¤ã€‚&lt;/li&gt;
&lt;li&gt;store æ”¶åˆ°è¿™ä¸ªåŠ¨ä½œï¼Œé€šè¿‡ &lt;strong&gt;reducer&lt;/strong&gt; è¿è¡Œå®ƒã€‚å¹¶å°† &lt;code&gt;todos&lt;/code&gt; çŠ¶æ€æ›´æ”¹ä¸ºä¸€ä¸ªç©ºæ•°ç»„ &lt;code&gt;{ todos: [] }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;store&lt;/code&gt; ç„¶åè°ƒç”¨è®¢é˜…ç›‘å¬å™¨ã€‚å› ä¸ºä»…æœ‰ä¸€ä¸ªç›‘å¬å™¨è®¢é˜…äº† &lt;code&gt;store&lt;/code&gt;ï¼Œä»…ä»… &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; çš„ç›‘å¬å™¨å°†è°ƒç”¨ï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; çš„åˆ™ä¸ä¼šã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; è°ƒç”¨ç›‘å¬å™¨å›è°ƒï¼Œè°ƒç”¨å¸¦æœ‰æœ€æ–°çŠ¶æ€ï¼ˆ&lt;code&gt;store.getState()&lt;/code&gt;ï¼‰å’Œæœ€æ–° props ï¼ˆ&lt;code&gt;propsRef.current&lt;/code&gt;ï¼‰çš„ &lt;code&gt;mapStateToProps&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ˜ å°„çŠ¶æ€å¹¶ä¸å®Œå…¨ç›¸ç­‰ï¼Œå› æ­¤æˆ‘ä»¬è®¡åˆ’ä½¿ç”¨ &lt;code&gt;forceUpdate()&lt;/code&gt; è¿›è¡Œæ›´æ–°ã€‚&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; ç„¶ååœ¨æ¸²æŸ“é˜¶æ®µå†æ¬¡è°ƒç”¨ &lt;code&gt;mapStateToProps&lt;/code&gt; å¹¶è¿”å›ä¸€ä¸ªç©ºçš„ &lt;code&gt;&amp;lt;ul&amp;gt;&lt;/code&gt; å› ä¸ºåˆ—è¡¨ä¸­ä¸å†æœ‰ä»»ä½•é¡¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; å°†ä¼šå¸è½½ï¼Œå› æ­¤å®ƒå°†è°ƒç”¨å‰¯ä½œç”¨ä¸­çš„ &lt;code&gt;unsubscribe&lt;/code&gt; å‡½æ•°ï¼Œä» &lt;code&gt;subStore&lt;/code&gt; ä¸­çš„ &lt;code&gt;listeners&lt;/code&gt; æ•°ç»„ä¸­ç§»é™¤å®ƒçš„ç›‘å¬å™¨å›è°ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; è°ƒç”¨å‰¯ä½œç”¨å¹¶åœ¨æ¸²æŸ“åè¿è¡Œ &lt;code&gt;subStore.notifyUpdates()&lt;/code&gt;ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨ &lt;code&gt;subStore&lt;/code&gt; ä¸­ç•™ä¸‹ä»»ä½•è¦è°ƒç”¨çš„ä¾¦å¬å™¨ï¼Œå› æ­¤æ•´ä¸ªè¿‡ç¨‹æˆåŠŸå®Œæˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºä»ç„¶å‰©ä¸‹ä¸€äº›å­èŠ‚ç‚¹çš„æƒ…å†µï¼Œæ¯ä¸ªå­èŠ‚ç‚¹å°†éšåè°ƒç”¨å®ƒä»¬çš„ç›‘å¬å™¨å›è°ƒã€‚å› ä¸ºå®ƒä»¬å°†åœ¨æ¸²æŸ“åè¢«è°ƒç”¨ï¼Œæ‰€ä»¥å®ƒä»¬å°†ä»çˆ¶ç»„ä»¶é‚£é‡Œè·å¾—æœ€æ–°çš„ propsã€‚&lt;/p&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸­è¿è¡Œäº†ä¸¤æ¬¡ &lt;code&gt;mapStateToProps&lt;/code&gt;ï¼Œä¸€æ¬¡æ˜¯åœ¨ç›‘å¬å™¨å›è°ƒå†…ï¼Œè€Œå¦ä¸€æ¬¡æ˜¯ç”±çˆ¶ç»„ä»¶çš„é‡æ¸²æŸ“è§¦å‘çš„ã€‚åè€…åº”è¯¥åœ¨å‰è€…ä¹‹å‰å‘ç”Ÿï¼Œä½†æ˜¯çŠ¶æ€å’Œ props éƒ½åº”è¯¥æ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡è¿è¡Œä¸­éƒ½åº”è¯¥ç›¸åŒã€‚ä¸ºäº†è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è®°ä½è¿™ä¸ª &lt;code&gt;mapStateToProps&lt;/code&gt; å‡½æ•°ï¼Œä»¥ä¾¿åœ¨è¿™ç§æƒ…å†µä¸‹ä¸å¿…è°ƒç”¨ä¸¤æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œæˆ‘ä»¬ç”šè‡³ä¸å¿…åœ¨ &lt;code&gt;notifyUpdates&lt;/code&gt; å‡½æ•°ä¸­ä½¿ç”¨ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt;ã€‚åŒä¸€å±‚æ¬¡ç»“æ„è°ƒç”¨ä¸­çš„æ›´æ–°è¢«&lt;strong&gt;åˆ’åˆ†&lt;/strong&gt;åˆ°ä¸åŒçš„ &lt;code&gt;subStore&lt;/code&gt;ï¼Œå­ç»„ä»¶ä»…åœ¨çˆ¶ç»„ä»¶å®Œæˆé‡æ¸²æŸ“åæ‰è°ƒç”¨ç›‘å¬å™¨å›è°ƒï¼Œå› æ­¤æ— éœ€å°†å®ƒä»¬ä¸€èµ·æ‰¹å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ &lt;code&gt;react-redux&lt;/code&gt; åœ¨ v5 å’Œ v7 ä¸­å®ç°åµŒå¥—è®¢é˜…æ¨¡å‹çš„åŸºæœ¬æ€æƒ³ï¼ˆå½“ç„¶ï¼Œç¼ºå°‘å¤§é‡çš„ä¼˜åŒ–ï¼‰ã€‚&lt;a href=&#34;https://github.com/reduxjs/react-redux/pull/416&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å½“æˆ‘ä»¬å¯ä»¥ææ—©æ‰¹å‡†æ›´æ–°å¹¶ä¸”ä¸å¿…å°½å¯èƒ½è°ƒç”¨ React çš„æ—¶å€™ï¼Œç»“æœå°†å¤§å¤§æé«˜æ€§èƒ½&lt;/a&gt;ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æ‘†è„± &lt;code&gt;unstable_batchedUpdates&lt;/code&gt;ï¼Œè¿™æ˜¯å¾ˆéš¾åŒ…å«åœ¨ &lt;code&gt;react-redux&lt;/code&gt;ä¸­çš„ï¼ˆå®ƒæ¥è‡ª &lt;code&gt;react-dom&lt;/code&gt; ä½† &lt;code&gt;react-redux&lt;/code&gt; ä¹Ÿå¯ä»¥åœ¨å…¶ä»–æ¸²æŸ“å™¨ä¸­ä½¿ç”¨ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼&lt;/p&gt;
&lt;h2 id=&#34;react-ä¸Šä¸‹æ–‡&#34;&gt;React ä¸Šä¸‹æ–‡&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•å¯ä»¥é€šè¿‡ä½¿ç”¨ React ä¸Šä¸‹æ–‡æ¥è§£å†³ã€‚æˆ‘ä»¬å·²ç»åœ¨ä½¿ç”¨å®ƒæ¥ä¼ é€’ &lt;code&gt;store&lt;/code&gt; å®ä¾‹ï¼Œä¸ºä»€ä¹ˆä¸è®©å®ƒä¹Ÿå¯¹çŠ¶æ€æ›´æ”¹åšå‡ºååº”ï¼Ÿå½“ React ä¸Šä¸‹æ–‡çš„ç¨³å®šç‰ˆæœ¬é¦–æ¬¡å‡ºç°æ—¶ï¼Œ&lt;code&gt;react-context&lt;/code&gt; v6 é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼¼ä¹å®¹æ˜“å¾—å¤šï¼Œå¹¶ä¸”ç”±äºçŠ¶æ€æ¸²æŸ“ä¼ æ’­æ˜¯ç”± React å¤„ç†çš„ï¼Œå› æ­¤æˆ‘ä»¬è½»æ¾è·å¾—äº†è‡ªä¸Šè€Œä¸‹çš„æ›´æ–°ã€‚æ²¡æœ‰æ›´å¤šçš„ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt;ï¼Œæ²¡æœ‰æ›´å¤šçš„åµŒå¥—è®¢é˜…æ¨¡å‹ã€‚äº‹ä»¶ç›‘å¬å™¨çš„æ•°é‡ä¹Ÿå‡å°‘åˆ°äº†ä¸€ä¸ªï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è®¢é˜…æ¯ä¸ª connect é«˜é˜¶ç»„ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Again, there&amp;#39;re lack of many optimizations and error handlings
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// in this implementation for demonstration purpose.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Provider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;children&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useMemo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Context.Provider&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;children&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Context.Provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WrappedComponent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mappedState&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;WrappedComponent&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...props&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;...mappedState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¦‚æ­¤å®Œç¾ï¼Œå®ç°çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åƒç¬¬ä¸€ç§æ–¹æ³•ï¼ˆ&lt;code&gt;react-redux&lt;/code&gt; v4ï¼‰ä¸€æ ·è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦å¤„ç†è¿‡æ—¶çš„ props å’Œåƒµå°¸å­èŠ‚ç‚¹é—®é¢˜ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬é€šå¸¸åœ¨ç”¨æˆ·åŒºåŸŸä¸­æ‰€åšçš„äº‹æƒ…ï¼Œä»¥åŠä¸€äº›å—æ¬¢è¿çš„åº“ï¼Œåƒ &lt;a href=&#34;https://github.com/jamiebuilds/unstated-next&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;unstated-next&lt;/code&gt;&lt;/a&gt; ä¸ºæˆ‘ä»¬æ‰€åšçš„äº‹æƒ…ã€‚ä¸è¿‡ï¼Œå¯¹äºåªæœ‰ä¸€ä¸ªå…¨å±€ store çš„ &lt;code&gt;Redux&lt;/code&gt; æ¥è¯´ï¼Œæ‹¥æœ‰å¤šä¸ªæ›´å°çš„ store å¯èƒ½æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚æ€§èƒ½æˆæœ¬éå¸¸é«˜ï¼Œè¶³ä»¥è¿«ä½¿æˆ‘ä»¬å†æ¬¡å¯¹å…¶è¿›è¡Œè¿­ä»£ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜è®°å¾—ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä»ç¬¬ä¸€ç§æ–¹æ³•è¿­ä»£åˆ°åµŒå¥—è®¢é˜…æ¨¡å‹å—ï¼Ÿè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥åœ¨è°ƒç”¨ &lt;code&gt;setState&lt;/code&gt; å’Œé‡æ¸²æŸ“ç»„ä»¶ä¹‹å‰å°±å°½æ—©è·³è¿‡æ›´æ–°ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œç”±äºæˆ‘ä»¬åªèƒ½åœ¨æ¸²æŸ“é˜¶æ®µè·å¾—æ•´ä¸ªçŠ¶æ€ï¼Œ&lt;strong&gt;å› æ­¤è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»å§‹ç»ˆå…ˆè°ƒç”¨ &lt;code&gt;setState&lt;/code&gt; ç„¶åé‡æ¸²æŸ“ç»„ä»¶æ‰èƒ½åœ¨ä¹‹åè·å¾—æœ€æ–°çŠ¶æ€&lt;/strong&gt;ã€‚åªæœ‰åˆ°é‚£æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½è°ƒç”¨ &lt;code&gt;mapStateToProps&lt;/code&gt; æ¥è·å¾—ç»„ä»¶å…³å¿ƒçš„æ˜ å°„çŠ¶æ€ã€‚å®é™…ä¸Šï¼Œåœ¨ &lt;code&gt;react-redux&lt;/code&gt; v6 é¦–æ¬¡å‘å¸ƒæ—¶ï¼Œæœ‰ä¸€äº›&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/1164&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ€§èƒ½ä¸‹é™äº‹ä»¶&lt;/a&gt;ã€‚æ­¤å¤–ï¼Œ&lt;a href=&#34;https://github.com/facebook/react/issues/14110#issuecomment-448074060&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;React å›¢é˜Ÿç”šè‡³æåˆ°ä»–ä»¬ä¸å»ºè®®å½“æ—¶ä½¿ç”¨ React ä¸Šä¸‹æ–‡è¿›è¡Œç±»ä¼¼ flux çš„çŠ¶æ€ä¼ æ’­&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;hooks&#34;&gt;Hooks&lt;/h2&gt;
&lt;p&gt;React ä¸Šä¸‹æ–‡ä¸æ˜¯ React å®¶æ—ä¸­çš„æœ€æ–°æˆå‘˜ï¼Œæˆ‘ä»¬è¿˜æœ‰ hookï¼ˆé’©å­ï¼‰ï¼&lt;code&gt;react-redux&lt;/code&gt; v7 å¼•å…¥äº†æ–°çš„åŸºäºé’©å­çš„ APIï¼Œè¿™äº› API ä½¿ä»£ç æ›´åŠ ç®€å•æ˜“æ‡‚ã€‚æœ€é‡è¦çš„é’©å­å¯èƒ½æ˜¯ &lt;code&gt;useSelector&lt;/code&gt; é’©å­ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯é¦–å…ˆï¼Œæˆ‘ä»¬å°†é‡å†™æˆ‘ä»¬çš„ Todo åº”ç”¨ç¨‹åºä»¥ä½¿ç”¨é’©å­ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; ç»„ä»¶ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Todo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useDispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;li&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;na&#34;&gt;onClick&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;li&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;TodoList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ul&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Todo&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;todo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;))}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ul&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¸å†éœ€è¦é‚£äº›å¸¦æœ‰é’©å­çš„é«˜é˜¶å‡½æ•°å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ &lt;code&gt;useSelector&lt;/code&gt; å’Œ &lt;code&gt;useDispatch&lt;/code&gt; æ¥è·å–é€‰å®šçš„çŠ¶æ€å’Œåˆ†å‘æ–¹æ³•ã€‚è¯·æ³¨æ„ä¸€ä¸ªå¾®å°çš„å·®åˆ«åœ¨æ™®é€šçš„æ—§çš„ &lt;code&gt;mapStateToProps&lt;/code&gt; å’Œ &lt;code&gt;useSelector&lt;/code&gt; ä¹‹é—´çš„æ˜¯æˆ‘ä»¬ä¸å†è·å–çŠ¶æ€ï¼ˆstateï¼‰çš„&lt;strong&gt;å¯¹è±¡&lt;/strong&gt;ï¼Œå¹¶å°†å…¶ä¼ æ’­åˆ° propsï¼Œè€Œæ˜¯ä»…ä»…å¾—åˆ°çŠ¶æ€æœ¬èº«ã€‚å› æ­¤ä»£æ›¿è·å¾— &lt;code&gt;{ content }&lt;/code&gt;ï¼Œæˆ‘ä»¬åªéœ€è¦å¾—åˆ° &lt;code&gt;content&lt;/code&gt;ã€‚åœ¨æˆ‘ä»¬çš„ &lt;code&gt;setState&lt;/code&gt; ä¸­ä¼šç¨å¾®æ”¹å˜æˆ‘ä»¬çš„ç›¸ç­‰æ€§æ£€æŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;useDispatch&lt;/code&gt; é’©å­å®ç°ä¹Ÿå¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useDispatch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dispatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥è½»æ¾åˆ›å»ºæˆ‘ä»¬çš„ &lt;code&gt;useSelector&lt;/code&gt; é’©å­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useSelector&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useReducer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†æ˜¯ï¼Œå®ƒç”šè‡³è¿˜ä¸èƒ½ç«‹å³ä½¿ç”¨ã€‚æ¯æ¬¡çŠ¶æ€æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡æ¸²æŸ“æ‰€æœ‰çš„ &lt;strong&gt;connected&lt;/strong&gt; ç»„ä»¶ã€‚ä½¿ç”¨é’©å­ API ä¼šæ›´åŠ ç³Ÿç³•ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ªä¸­é—´å®¹å™¨ç»„ä»¶ï¼Œè¯¥ç»„ä»¶é€šå¸¸èƒ½è¿›è¡Œå»‰ä»·çš„æ¸²æŸ“ï¼Œå¯ä»¥æŒ½æ•‘é€šå¸¸æ›´æ˜‚è´µçš„åŒ…è£…ç»„ä»¶çš„æ›´æ–°ã€‚ä¸ä»¥å‰çš„æƒè¡¡å–èˆä¸åŒï¼Œæˆ‘ä»¬æœ‰ç‚¹å¿…é¡»æŠŠ &lt;code&gt;selector&lt;/code&gt; æ”¾å…¥ç›‘å¬å™¨å›è°ƒä¸­ä»¥å°½æ—©è·³è¿‡æ›´æ–°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useSelector&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªç‰ˆæœ¬åªæ˜¯ç®€å•çš„æ‰“ç ´ã€‚æˆ‘ä»¬åœ¨æ•´ä¸ªæ–‡ç« ä¸­å†æ¬¡æåˆ°&lt;strong&gt;è¿‡æ—¶çš„ props å’Œåƒµå°¸å­èŠ‚ç‚¹&lt;/strong&gt;é—®é¢˜ã€‚ä¸å¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å°†éå†æ¯ä¸ªæ­¥éª¤ï¼Œä»¥æŸ¥çœ‹é”™è¯¯çš„å‡ºå¤„å’ŒåŸå› ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åï¼Œ&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; ç»„ä»¶åœ¨ &lt;code&gt;useEffect&lt;/code&gt; ä¸­è®¢é˜… storeã€‚å› ä¸º &lt;code&gt;useEffect&lt;/code&gt; è‡ªä¸Šè€Œä¸‹è§¦å‘ï¼Œ&lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; é¦–å…ˆè®¢é˜…ï¼Œç„¶åæ˜¯ &lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·ç‚¹å‡» &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt;ï¼Œå‘ store åˆ†å‘ä¸€ä¸ª &lt;code&gt;DELETE&lt;/code&gt; åŠ¨ä½œï¼ŒæœŸå¾…è¯¥é¡¹è¢«åˆ é™¤ã€‚&lt;/li&gt;
&lt;li&gt;store æ”¶åˆ°è¿™ä¸ªåŠ¨ä½œ,é€šè¿‡ &lt;strong&gt;reducer&lt;/strong&gt; è¿è¡Œå®ƒï¼Œç„¶åå°† &lt;code&gt;todos&lt;/code&gt; çŠ¶æ€æ›´æ”¹ä¸ºç©ºæ•°ç»„ &lt;code&gt;{ todos: [] }&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œstore è°ƒç”¨å·²è®¢é˜…çš„ç›‘å¬å™¨ã€‚ç”±äº &lt;code&gt;&amp;lt;Todo&amp;gt;&lt;/code&gt; å…ˆè®¢é˜…ï¼Œå› æ­¤ä¹Ÿä¼šå…ˆè°ƒç”¨å®ƒçš„ç›‘å¬å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”±äºæˆ‘ä»¬åœ¨æ¸²æŸ“é˜¶æ®µä¼ é€’ &lt;code&gt;props&lt;/code&gt; ç»™ &lt;code&gt;listener&lt;/code&gt;ï¼Œåœ¨é‚£æ—¶å…¶å½¢æˆäº†å°é—­çš„ &lt;code&gt;props&lt;/code&gt;ã€‚å®ƒä»¬æ˜¯è¿‡æ—¶çš„ props&lt;/strong&gt;ã€‚è®¿é—® &lt;code&gt;state.todos[ownProps.id]&lt;/code&gt; å°†å¯¼è‡´ &lt;code&gt;undefined&lt;/code&gt;ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;(undefined).content&lt;/code&gt; å°†å¯¼è‡´ä¸€ä¸ªé”™è¯¯ ğŸ’¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å›æƒ³ä¸€ä¸‹åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å¯¹è¿‡æ—¶çš„ props é—®é¢˜çš„äº†è§£ã€‚&lt;strong&gt;å½“å­èŠ‚ç‚¹ä»¬ä½¿ç”¨ä» store æ´¾ç”Ÿçš„ props æ—¶ï¼Œè¿‡æ—¶çš„ props å°†åœ¨åŒæ­¥è®¢é˜…æ¨¡å‹ä¸­å‘ç”Ÿ&lt;/strong&gt;ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ‰ 2 ä¸ªè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç§»åŠ¨ &lt;code&gt;selector&lt;/code&gt; åˆ°æ¸²æŸ“é˜¶æ®µå’Œä½¿ç”¨ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åµŒå¥—è®¢é˜…æ¨¡å‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é’©å­æ— æ³•æ›´æ”¹æ¸²æŸ“æ ‘ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•ä¸ºæ¯ä¸ªç»„ä»¶æ·»åŠ ä¸€ä¸ªæ–°çš„ &lt;code&gt;&amp;lt;Provider&amp;gt;&lt;/code&gt;ï¼Œä»¥ä½¿å…¶ä¼ æ’­åˆ°æœ€è¿‘çš„çˆ¶çº§ subStoreã€‚æˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ’é™¤ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå½“æˆ‘ä»¬ä»…åœ¨æ¸²æŸ“é˜¶æ®µä½¿ç”¨ &lt;code&gt;selector&lt;/code&gt;ï¼Œå®ƒçš„æ€§èƒ½ä¸ä½³ï¼Œä¼šå¯¼è‡´æ¯æ¬¡æ›´æ”¹éƒ½éœ€è¦é‡æ¸²æŸ“ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»åœ¨ç›‘å¬å™¨å›è°ƒä¸­å°½æ—©è·³è¿‡æ›´æ–°ã€‚å†è€…ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç›‘å¬å™¨å›è°ƒä¸­è°ƒç”¨è¿‡æ—¶çš„ props åˆ™å¯èƒ½ä¼šå¯¼è‡´ &lt;code&gt;selector&lt;/code&gt; æŠ›å‡ºé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„åŒæ‰‹è¢«æŸç¼šï¼Œå°šæ— è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¿…é¡»åšå‡ºä¸€äº›å¦¥åã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å¿½ç•¥è¯¥é”™è¯¯ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæˆ‘ä»¬é¦–å…ˆè¦é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šä½•æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼Ÿå¤§çº¦æœ‰ 2 ç§æƒ…å†µã€‚é”™è¯¯å¯èƒ½æ˜¯ç”±äºé€‰æ‹©å™¨æœ¬èº«çš„é”™è¯¯è€Œå¼•èµ·çš„ï¼Œæˆ–è€…å› ä¸ºåƒµå°¸å­èŠ‚ç‚¹é—®é¢˜å¯¼è‡´äº†æ„å¤–é”™è¯¯ã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›é€šè¿‡é‡æ–°æ¸²æŸ“ç»„ä»¶å¹¶åœ¨æ¸²æŸ“é˜¶æ®µåº”ç”¨ &lt;code&gt;selector(store.getState())&lt;/code&gt; ä»¥è·å–æœ€æ–°çŠ¶æ€æ¥å®‰å…¨åœ°å¤„ç†å®ƒä»¬ã€‚å‰ä¸€ç§æƒ…å†µå°†åœ¨æ¸²æŸ“é˜¶æ®µ&lt;strong&gt;é‡æ–°å¼•å‘&lt;/strong&gt;é”™è¯¯ï¼Œè€Œåè€…å°†ä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ç§ä¸ä¼šæŠ›å‡ºè¿‡æ—¶çš„ props é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬ä»ç„¶å¯ä»¥å¾—åˆ°ä¸ä¸€è‡´çŠ¶æ€ä½†æ²¡æœ‰é”™è¯¯çš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ— è®ºå¦‚ä½•ç»„ä»¶ä»ç„¶ä¼šåœ¨ä»¥åé‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºæˆ‘ä»¬ä»å°†å¤„äº &lt;code&gt;selector(store.getState())&lt;/code&gt; æ¸²æŸ“é˜¶æ®µï¼Œå› æ­¤ç”±äºæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œé—®é¢˜å°†æ¶ˆå¤±ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹èµ·æ¥æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬ 5 æ­¥ä¸­å®‰å…¨åœ°å¿½ç•¥è¯¥é”™è¯¯ï¼Œè€Œåœ¨æ¸²æŸ“é˜¶æ®µé‡è¯•è¯¥é”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;useSelector&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useReducer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;currentState&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Try to get the state in the render phase to safely get the latest props
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;currentState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;React&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;useEffect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nextState&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nextState&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;currentState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;c1&#34;&gt;// Bail out updates early
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;// Ignore errors
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// Either way we want to force a re-render
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;forceUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;currentState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;currentState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç»“åˆ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt; çš„æŠ€å·§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é€‰å®šçŠ¶æ€ä¸å˜çš„æƒ…å†µä¸‹å°½æ—©è·³è¿‡æ›´æ–°ï¼Œå¹¶å®‰å…¨åœ°é˜²æ­¢è¿‡æ—¶çš„ props å’Œåƒµå°¸å­èŠ‚ç‚¹é—®é¢˜ã€‚æˆ‘ä»¬å†æ¬¡è¿è¡Œä»£ç ï¼Œå¹¶æ£€æŸ¥ä¸€åˆ‡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚å‰ 4 ä¸ªæ­¥éª¤ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬ä»ç¬¬ 5 æ­¥å¼€å§‹ã€‚&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;ç”±äºæˆ‘ä»¬åœ¨æ¸²æŸ“é˜¶æ®µä¼ é€’ &lt;code&gt;props&lt;/code&gt; ç»™ &lt;code&gt;listener&lt;/code&gt;ï¼Œåœ¨é‚£æ—¶ï¼Œå…¶å½¢æˆäº†å°é—­çš„ &lt;code&gt;props&lt;/code&gt;ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯&lt;strong&gt;è¿‡æ—¶çš„ props&lt;/strong&gt;ã€‚è®¿é—® &lt;code&gt;state.todos[ownProps.id]&lt;/code&gt; å°†å¯¼è‡´ &lt;code&gt;undefined&lt;/code&gt;ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;(undefined).content&lt;/code&gt; å°†å¯¼è‡´é”™è¯¯ã€‚&lt;strong&gt;æˆ‘ä»¬æ•…æ„æ•è·å¹¶éšè—é”™è¯¯ï¼Œè¿™æ˜¯å½“æˆ‘ä»¬çŸ¥é“è¦åœ¨æ¸²æŸ“é˜¶æ®µé€‰æ‹©çŠ¶æ€ï¼Œä»è€Œè§¦å‘é‡æ¸²æŸ“æ—¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ &lt;code&gt;unstable_batchedUpdates&lt;/code&gt;ï¼Œæ¸²æŸ“å·²è¢«æ‰¹å¤„ç†ã€‚&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; è§¦å‘å…¶ç›‘å¬å™¨å›è°ƒï¼Œ&lt;code&gt;selector(store.getState())&lt;/code&gt; çš„ç»“æœä¸º &lt;code&gt;[]&lt;/code&gt;ï¼Œä¹Ÿè®¡åˆ’é‡æ¸²æŸ“ã€‚&lt;/li&gt;
&lt;li&gt;æ¸²æŸ“ä»ä¸Šå‘ä¸‹è¿›è¡Œæ“ä½œï¼Œ&lt;code&gt;&amp;lt;TodoList&amp;gt;&lt;/code&gt; å…ˆæ¸²æŸ“ï¼Œç„¶åå†æ¬¡è°ƒç”¨ &lt;code&gt;selector(store.getState())&lt;/code&gt;ï¼Œè¿”å›ä¸€ä¸ªç©ºçš„ &lt;code&gt;&amp;lt;ul&amp;gt;&lt;/code&gt;ï¼Œå®Œæˆæ¸²æŸ“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ç”¨æˆ·æä¾›çš„ &lt;code&gt;selector&lt;/code&gt; å‡½æ•°å¿…é¡»éµå¾ª 2 æ¡è§„åˆ™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;selector&lt;/code&gt; æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ä»£ç ä¸ä¾èµ–ä¹Ÿä¸æœŸæœ› &lt;code&gt;selector&lt;/code&gt; æŠ›å‡ºé”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;selector&lt;/code&gt; å¿…é¡»æ˜¯ä¸€ä¸ª&lt;strong&gt;çº¯å‡½æ•°&lt;/strong&gt;ã€‚åœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿è¡Œ &lt;code&gt;selector&lt;/code&gt; å¤šæ¬¡ã€‚åªè¦ &lt;code&gt;selector&lt;/code&gt; æ˜¯çº¯çš„ï¼Œé‚£ä¹ˆå¤šæ¬¡è¿è¡Œå®ƒä»¬å°±ä¸æˆé—®é¢˜ã€‚è€Œä¸”ï¼Œ&lt;code&gt;React.StrictMode&lt;/code&gt; å·²ç»æ‰§è¡Œäº†ä¸€æ®µæ—¶é—´çš„æ¸²æŸ“è§„åˆ™ï¼Œåœ¨ &lt;code&gt;selector&lt;/code&gt; ä¸­ï¼Œè¿™æ ·åšä¹Ÿæ˜¯ä¸€ç§æ›´å¥½çš„åšæ³•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥å†³å®šä»¥ç”¨æˆ·èº«ä»½è‡ªè¡Œå¤„ç†é—®é¢˜ã€‚è°¨æ…åœ°ä¿æŠ¤ &lt;code&gt;selecto&lt;/code&gt; å‡½æ•°å¹¶é€‚å½“åœ°å¤„ç†é”™è¯¯ï¼Œè™½ç„¶æœ‰ç‚¹å¤šï¼Œä½†æ˜¯ä»ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åšæ›´å¤šçš„ä¼˜åŒ–æ¥å¢å¼ºæ€§èƒ½ï¼Œä¾‹å¦‚ä»…åœ¨éœ€è¦æ—¶ï¼ˆå½“å®ƒæœ‰è¿‡æ—¶çš„ props æˆ–é€‰æ‹©å™¨å‘ç”Ÿæ›´æ”¹æ—¶ï¼‰åœ¨æ¸²æŸ“é˜¶æ®µæ‰å¼ºåˆ¶å…¶è°ƒç”¨ &lt;code&gt;selector&lt;/code&gt;ã€‚ä½†æ˜¯ï¼Œè¿™æ˜¯ &lt;code&gt;useSelector&lt;/code&gt; åœ¨åå°å¦‚ä½•å·¥ä½œä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»ä¿æŒé€‰æ‹©å™¨ä¸º&lt;strong&gt;çº¯çš„&lt;/strong&gt;åŸºæœ¬æ€æƒ³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ”¶è·&#34;&gt;æ”¶è·&lt;/h2&gt;
&lt;p&gt;Phewï¼è¿™æ˜¯ä¸€æ®µæ¼«é•¿çš„æ—…ç¨‹ã€‚ç»™è‡ªå·±ä¸€ä¸ªèµ°åˆ°æœ€åçš„æŒå£°ã€‚è·Ÿç€èµ°å¹¶ä¸å®¹æ˜“ï¼&lt;/p&gt;
&lt;p&gt;é‡æ–°åˆ›å»º &lt;code&gt;Redux&lt;/code&gt; çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†è¦å°å¿ƒå¤„ç†è®¸å¤šé™·é˜±ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³æ²¡æœ‰æåˆ°å¤§é‡çš„ä¼˜åŒ–å’Œé”™è¯¯å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æ›´å¥½åœ°äº†è§£ &lt;code&gt;Redux&lt;/code&gt; å’Œ &lt;code&gt;react-redux&lt;/code&gt; çš„èƒŒåçš„å·¥ä½œåŸç†å¾ˆæœ‰å¸®åŠ©ã€‚ä¹Ÿèµæ‰¬æ‰€æœ‰ç»´æŠ¤è€…å’Œè´¡çŒ®è€…åˆ›å»ºäº†å¦‚æ­¤å‡ºè‰²çš„åº“å¹¶ä¸æ–­åœ°å¯¹å…¶è¿›è¡Œæ”¹è¿›ã€‚å³ä½¿æˆ‘åŒæ„ä½ å¯èƒ½ä¸éœ€è¦ &lt;code&gt;Redux&lt;/code&gt;ï¼Œå®ƒä»ç„¶ä¸ºä¸­å‹ä¹ƒè‡³å¤§å‹å›¢é˜Ÿæä¾›äº†ä¸€ç§æœ‰ç”¨çš„æ¨¡å¼ï¼Œä½¿ä»–ä»¬å¯ä»¥é¡ºåˆ©åœ°è¿›è¡Œåä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹æ¬¡ï¼Œå½“ä½ å‘ç°å…¶å®ƒäººå°† &lt;code&gt;Redux&lt;/code&gt; è§†ä¸ºç†æ‰€å½“ç„¶æ—¶ï¼Œè¯·é—®ä»–/ä»–å¦‚ä½•è§£å†³&lt;strong&gt;è¿‡æ—¶çš„ props å’Œåƒµå°¸å­èŠ‚ç‚¹&lt;/strong&gt;é—®é¢˜ï¼Œå¹¶å‘å¥¹/ä»–å±•ç¤ºæ­¤å¸–å­ ğŸ˜‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡ç« &#34;&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.isquaredsoftware.com/2018/11/react-redux-history-implementation/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Idiomatic Redux: The History and Implementation of React-Redux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/pull/99&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;reduxjs/react-redux#99 (Fix issues with stale props #99) Where the stale props first fixed back in v4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/292&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;reduxjs/react-redux#292 (Can we avoid inconsistencies on non-batched dispatches?) Where Dan found that the order doesn&amp;rsquo;t matter, but batching updates does&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/1177&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;reduxjs/react-redux#1177 (React-Redux Roadmap: v6, Context, Subscriptions, and Hooks)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/1177#issuecomment-468765242&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Mark explains that &lt;code&gt;unstable_batchedUpdates&lt;/code&gt; isn&amp;rsquo;t sufficient for fixing stale props due to performance reason&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/1179&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;reduxjs/react-redux#1179 (Discussion: Potential hooks API design)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/1179#issuecomment-482164630&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;A comment by the author of the hooks API proposal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/reduxjs/react-redux/issues/1179#issuecomment-483617153&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Example test cases for stale props with hooks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;hellip;, and many more which I simply cannot recall where I read them.&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>
