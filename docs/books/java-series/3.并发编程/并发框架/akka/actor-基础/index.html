<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="Actor 基础 The Actor Model provides a higher level of abstraction for writing concurrent and distributed systems. It alleviates the developer from having to deal with explicit locking and thread management, making it easier to write correct concurrent and parallel systems. Actors were defined in the 1973 paper by Carl Hewitt but have been popularized by the Erlang language, and used for example at Ericsson with great success to build highly concurrent and reliable telecom systems. Before starting with recipes, let&rsquo;s take a look at the following the actor properties: State: An actor has internal state, which is mutated" />

  
  <link rel="alternate" hreflang="zh" href="https://ng-tech.icu/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/actor-%E5%9F%BA%E7%A1%80/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-40NYXJ8823");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://ng-tech.icu/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/actor-%E5%9F%BA%E7%A1%80/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@wx-chevalier" />
    <meta property="twitter:creator" content="@wx-chevalier" />
  
  <meta property="og:site_name" content="Next-gen Tech Edu" />
  <meta property="og:url" content="https://ng-tech.icu/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/actor-%E5%9F%BA%E7%A1%80/" />
  <meta property="og:title" content="Actor 基础 | Next-gen Tech Edu" />
  <meta property="og:description" content="Actor 基础 The Actor Model provides a higher level of abstraction for writing concurrent and distributed systems. It alleviates the developer from having to deal with explicit locking and thread management, making it easier to write correct concurrent and parallel systems. Actors were defined in the 1973 paper by Carl Hewitt but have been popularized by the Erlang language, and used for example at Ericsson with great success to build highly concurrent and reliable telecom systems. Before starting with recipes, let&rsquo;s take a look at the following the actor properties: State: An actor has internal state, which is mutated" /><meta property="og:image" content="https://ng-tech.icu/media/sharing.png" />
    <meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
    
  

  



  

  

  





  <title>Actor 基础 | Next-gen Tech Edu</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="779260fe3cfde1d2320c12122590a871" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/books-gallery"><span>笔记（万篇）</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#knowledge-map"><span>知识图谱</span></a>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>实验室</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/galaxy-home/gh-craft"><span>Craft 方块世界</span></a>
              
                <a class="dropdown-item" href="/galaxy-home/glossary-cards"><span>3D 知识卡牌</span></a>
              
            </div>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>其他阅读渠道</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png"></img><span>知乎</span></a>
              
                <a class="dropdown-item" href="https://segmentfault.com/blog/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png"></img><span>SegmentFault</span></a>
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png"></img><span>掘金</span></a>
              
            </div>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/wx-chevalier" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        
        
        <div></div>
        
        <style>
        @media only screen and (max-width: 600px) {
          .jimmysong-template {
            display: none!important;
          }
        }
        </style>
        
        <li class="jimmysong-template" style="color: white;font-size: 12px;">
          <a href="https://jimmysong.io" style="color: white">By Jimmy Song's Template</a>
        </li>
      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">
<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          Akka
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li style="display: inline-flex">
          <a style="cursor: pointer;" onclick="window.history.back()">
            <i class="fas fa-arrow-left pr-1"></i>
            Back
          </a>
          <span>|</span>
          <a href="/books/">
            <i class="fa-solid fa-house" style="margin-right: 4px"></i>
            Books
          </a>
        </li>
      </ul>

      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3dc904f4ad2f1198f5926d4006b1ce4c&#34;)" href="#id3dc904f4ad2f1198f5926d4006b1ce4c" aria-expanded="false" aria-controls="id3dc904f4ad2f1198f5926d4006b1ce4c" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/">并发框架</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3dc904f4ad2f1198f5926d4006b1ce4c" aria-expanded="false" aria-controls="id3dc904f4ad2f1198f5926d4006b1ce4c">
    
    <i class="fa-solid fa-angle-down" id="caret-id3dc904f4ad2f1198f5926d4006b1ce4c"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id3dc904f4ad2f1198f5926d4006b1ce4c">
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id4ad660f2b4a4c7396efa9673ac5f160c&#34;)" href="#id4ad660f2b4a4c7396efa9673ac5f160c" aria-expanded="false" aria-controls="id4ad660f2b4a4c7396efa9673ac5f160c" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/">Akka</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id4ad660f2b4a4c7396efa9673ac5f160c" aria-expanded="false" aria-controls="id4ad660f2b4a4c7396efa9673ac5f160c">
    
    <i class="fa-solid fa-angle-down" id="caret-id4ad660f2b4a4c7396efa9673ac5f160c"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id4ad660f2b4a4c7396efa9673ac5f160c">
      



  <li class="child level active"><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/actor-%E5%9F%BA%E7%A1%80/">Actor 基础</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/websocket/">WebSocket</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E4%B8%8E%E4%BA%8B%E5%8A%A1/">并发控制与事务</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%8E%E6%8C%81%E4%B9%85%E5%8C%96/">异常处理与持久化</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/%E9%82%AE%E7%AE%B1%E4%B8%8E%E8%B7%AF%E7%94%B1/">邮箱与路由</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idb47088dfaa57dfbf382a7bce03bb0f35&#34;)" href="#idb47088dfaa57dfbf382a7bce03bb0f35" aria-expanded="false" aria-controls="idb47088dfaa57dfbf382a7bce03bb0f35" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/">RxJava</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idb47088dfaa57dfbf382a7bce03bb0f35" aria-expanded="false" aria-controls="idb47088dfaa57dfbf382a7bce03bb0f35">
    
        <i class="fa-solid fa-angle-right" id="caret-idb47088dfaa57dfbf382a7bce03bb0f35"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idb47088dfaa57dfbf382a7bce03bb0f35">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0d0e331526ab8ca7e088af3962baf45f&#34;)" href="#id0d0e331526ab8ca7e088af3962baf45f" aria-expanded="false" aria-controls="id0d0e331526ab8ca7e088af3962baf45f" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/">操作符</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0d0e331526ab8ca7e088af3962baf45f" aria-expanded="false" aria-controls="id0d0e331526ab8ca7e088af3962baf45f">
    
        <i class="fa-solid fa-angle-right" id="caret-id0d0e331526ab8ca7e088af3962baf45f"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0d0e331526ab8ca7e088af3962baf45f">
      



  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E5%8F%98%E6%8D%A2%E6%93%8D%E4%BD%9C/">变换操作</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E5%88%9B%E5%BB%BA%E6%93%8D%E4%BD%9C/">创建操作</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/">错误处理</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E8%BE%85%E5%8A%A9%E6%93%8D%E4%BD%9C/">辅助操作</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E8%BF%87%E6%BB%A4%E6%93%8D%E4%BD%9C/">过滤操作</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E7%BB%93%E5%90%88%E6%93%8D%E4%BD%9C/">结合操作</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C/">聚合操作</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%93%8D%E4%BD%9C%E7%AC%A6/%E6%9D%A1%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C/">条件和布尔操作</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idef483139dfa9b5afb4a3ff747daaf9a7&#34;)" href="#idef483139dfa9b5afb4a3ff747daaf9a7" aria-expanded="false" aria-controls="idef483139dfa9b5afb4a3ff747daaf9a7" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%8F%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/">反应式编程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idef483139dfa9b5afb4a3ff747daaf9a7" aria-expanded="false" aria-controls="idef483139dfa9b5afb4a3ff747daaf9a7">
    
        <i class="fa-solid fa-angle-right" id="caret-idef483139dfa9b5afb4a3ff747daaf9a7"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idef483139dfa9b5afb4a3ff747daaf9a7">
      



  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%8F%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/%E5%8F%8D%E5%BA%94%E5%BC%8F%E5%BA%93%E6%AF%94%E8%BE%83/">反应式库比较</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id4c124f983ffb4660ca05694b1f953bd6&#34;)" href="#id4c124f983ffb4660ca05694b1f953bd6" aria-expanded="false" aria-controls="id4c124f983ffb4660ca05694b1f953bd6" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/">工程实践</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id4c124f983ffb4660ca05694b1f953bd6" aria-expanded="false" aria-controls="id4c124f983ffb4660ca05694b1f953bd6">
    
        <i class="fa-solid fa-angle-right" id="caret-id4c124f983ffb4660ca05694b1f953bd6"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id4c124f983ffb4660ca05694b1f953bd6">
      



  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E7%BA%BF%E7%A8%8B%E8%B0%83%E5%BA%A6/">线程调度</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B/">应用案例</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1ad8f3a8e87df8715d667935707118c3&#34;)" href="#id1ad8f3a8e87df8715d667935707118c3" aria-expanded="false" aria-controls="id1ad8f3a8e87df8715d667935707118c3" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/">基础使用</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1ad8f3a8e87df8715d667935707118c3" aria-expanded="false" aria-controls="id1ad8f3a8e87df8715d667935707118c3">
    
        <i class="fa-solid fa-angle-right" id="caret-id1ad8f3a8e87df8715d667935707118c3"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id1ad8f3a8e87df8715d667935707118c3">
      



  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/completable/">Completable</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/flowable/">Flowable</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/observable/">Observable</a></li>




  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/">快速开始</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id4a449c2c94ab6ff5de963049b053eea8&#34;)" href="#id4a449c2c94ab6ff5de963049b053eea8" aria-expanded="false" aria-controls="id4a449c2c94ab6ff5de963049b053eea8" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/">架构机制</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id4a449c2c94ab6ff5de963049b053eea8" aria-expanded="false" aria-controls="id4a449c2c94ab6ff5de963049b053eea8">
    
        <i class="fa-solid fa-angle-right" id="caret-id4a449c2c94ab6ff5de963049b053eea8"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id4a449c2c94ab6ff5de963049b053eea8">
      



  <li class="child level "><a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/rxjava/%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90/">原理浅析</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#actorsystem">ActorSystem</a></li>
    <li><a href="#actor-声明与实例化">Actor 声明与实例化</a></li>
    <li><a href="#消息传递">消息传递</a>
      <ul>
        <li><a href="#消息定义">消息定义</a></li>
        <li><a href="#future-异步调用">Future 异步调用</a></li>
      </ul>
    </li>
    <li><a href="#lifecycle--生命周期">LifeCycle | 生命周期</a></li>
    <li><a href="#各类型-actor">各类型 Actor</a>
      <ul>
        <li><a href="#typed-actor--abstractactor">Typed Actor &amp; AbstractActor</a></li>
        <li><a href="#abstractloggingactor">AbstractLoggingActor</a></li>
      </ul>
    </li>
  </ul>
</nav>

      
<div class="subscribe-module col-24 mt-1">
    <img src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png" alt="image" title="王下邀月熊的微信公众号"/>
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>Actor 基础</h1>

          <div class="article-style">
            <h1 id="actor-基础">Actor 基础</h1>
<p>The Actor Model provides a higher level of abstraction for writing concurrent and distributed systems. It alleviates the developer from having to deal with explicit locking and thread management, making it easier to write correct concurrent and parallel systems. Actors were defined in the 1973 paper by Carl Hewitt but have been popularized by the Erlang language, and used for example at Ericsson with great success to build highly concurrent and reliable telecom systems.</p>
<p>Before starting with recipes, let&rsquo;s take a look at the following the actor properties:</p>
<p>State: An actor has internal state, which is mutated sequentially as messages are processed one by one.
Behavior: An Actor reacts to messages which are sent to it by applying behavior on it.
Communication: An actor communicates with other actors by sending and receiving messages to/from them.
Mailbox: A mailbox is the queue of messages from which an actor picks up the message and processes it.</p>
<p>Actors are message-driven, that is, they are passive and do nothing unless and until you send messages to them. Once you send them a message, they pick a thread from the thread pool which is also known as a dispatcher, process the message, and release the thread back to the thread pool.</p>
<p>Actors are also asynchronous by nature; they never block your current thread of execution, and continue to work on another thread.</p>
<h2 id="actorsystem">ActorSystem</h2>
<p>An actor in Akka always belongs to a parent. Typically, you create an actor by calling getContext().actorOf(). Rather than creating a “freestanding” actor, this injects the new actor as a child into an already existing tree: the creator actor becomes the parent of the newly created child actor. You might ask then, who is the parent of the first actor you create?</p>
<p>As illustrated below, all actors have a common parent, the user guardian. New actor instances can be created under this actor using system.actorOf().</p>
<p>
















  <figure  >
    <div class="d-flex justify-content-center">
      <div class="w-100" ><img src="https://user-images.githubusercontent.com/5803001/47984204-d12e5100-e110-11e8-892d-44bef8d6ba04.png" alt="image" loading="lazy" data-zoomable /></div>
    </div></figure></p>
<ul>
<li>
<p>/ the so-called root guardian. This is the parent of all actors in the system, and the last one to stop when the system itself is terminated.</p>
</li>
<li>
<p>/user the guardian. This is the parent actor for all user created actors. Don’t let the name user confuse you, it has nothing to do with end users, nor with user handling. Every actor you create using the Akka library will have the constant path /user/ prepended to it.</p>
</li>
<li>
<p>/system the system guardian.</p>
</li>
</ul>
<h2 id="actor-声明与实例化">Actor 声明与实例化</h2>
<p>最简单的 Actor 声明即是继承自 AbstractActor，并且实现了 createReceive 方法，该方法会自定义消息的处理方式。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">PrintMyActorRefActor</span> <span class="kd">extends</span> <span class="n">AbstractActor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">Receive</span> <span class="nf">createReceive</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">receiveBuilder</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">matchEquals</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;printit&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">p</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// 创建新的子 Actor 实例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="n">ActorRef</span> <span class="n">secondRef</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">            <span class="o">.</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">empty</span><span class="o">(),</span> <span class="s">&#34;second-actor&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Second: &#34;</span> <span class="o">+</span> <span class="n">secondRef</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 精确匹配某个值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">.</span><span class="na">matchEquals</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 匹配某个类对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;Received String message: {}&#34;</span><span class="o">,</span> <span class="n">s</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 匹配任意对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">.</span><span class="na">matchAny</span><span class="o">(</span><span class="n">o</span> <span class="o">-&gt;</span> <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;received unknown message&#34;</span><span class="o">))</span>
</span></span></code></pre></div><p>然后在 Actor System 中注册该 Actor 的实例对象：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ActorSystem</span> <span class="n">system</span> <span class="o">=</span> <span class="n">ActorSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&#34;testSystem&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 创建某个 Actor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ActorRef</span> <span class="n">firstRef</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">PrintMyActorRefActor</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="s">&#34;first-actor&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;First: &#34;</span> <span class="o">+</span> <span class="n">firstRef</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 发送消息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">firstRef</span><span class="o">.</span><span class="na">tell</span><span class="o">(</span><span class="s">&#34;printit&#34;</span><span class="o">,</span> <span class="n">ActorRef</span><span class="o">.</span><span class="na">noSender</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 终止该系统
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">system</span><span class="o">.</span><span class="na">terminate</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// First: Actor[akka://testSystem/user/first-actor#1053618476]
</span></span></span><span class="line"><span class="cl"><span class="c1">// Second: Actor[akka://testSystem/user/first-actor/second-actor#-1544706041]
</span></span></span></code></pre></div><p>Props is a configuration class to specify options for the creation of actors, think of it as an immutable and thus freely shareable recipe for creating an actor including associated deployment information.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Props</span> <span class="n">props1</span> <span class="o">=</span> <span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">MyActor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 该方法不建议使用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Props</span> <span class="n">props2</span> <span class="o">=</span> <span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">ActorWithArgs</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">  <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">ActorWithArgs</span><span class="o">(</span><span class="s">&#34;arg&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="n">Props</span> <span class="n">props3</span> <span class="o">=</span> <span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">ActorWithArgs</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&#34;arg&#34;</span><span class="o">);</span>
</span></span></code></pre></div><h2 id="消息传递">消息传递</h2>
<h3 id="消息定义">消息定义</h3>
<p>在真实场景下，我们往往会使用 POJO 或者 Enum 做消息的结构化传递：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// GreeterActor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">static</span> <span class="kd">enum</span> <span class="n">Msg</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">GREET</span><span class="o">,</span> <span class="n">DONE</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Receive</span> <span class="nf">createReceive</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">receiveBuilder</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">matchEquals</span><span class="o">(</span><span class="n">Msg</span><span class="o">.</span><span class="na">GREET</span><span class="o">,</span> <span class="n">m</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello World!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sender</span><span class="o">().</span><span class="na">tell</span><span class="o">(</span><span class="n">Msg</span><span class="o">.</span><span class="na">DONE</span><span class="o">,</span> <span class="n">self</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">})</span>
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h3 id="future-异步调用">Future 异步调用</h3>
<p>类似于 Java 中的 Future，可以将一个 actor 的返回结果重定向到另一个 actor 中进行处理，主 actor 或者进程无需等待 actor 的返回结果。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ActorSystem</span> <span class="n">system</span> <span class="o">=</span> <span class="n">ActorSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&#34;strategy&#34;</span><span class="o">,</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="s">&#34;akka.config&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="n">ActorRef</span> <span class="n">printActor</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">PrintActor</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="s">&#34;PrintActor&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ActorRef</span> <span class="n">workerActor</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">WorkerActor</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="s">&#34;WorkerActor&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//等等future返回
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">Patterns</span><span class="o">.</span><span class="na">ask</span><span class="o">(</span><span class="n">workerActor</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">Await</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="n">Duration</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;result:&#34;</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//不等待返回值，直接重定向到其他actor，有返回值来的时候将会重定向到printActor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">future1</span> <span class="o">=</span> <span class="n">Patterns</span><span class="o">.</span><span class="na">ask</span><span class="o">(</span><span class="n">workerActor</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">Patterns</span><span class="o">.</span><span class="na">pipe</span><span class="o">(</span><span class="n">future1</span><span class="o">,</span> <span class="n">system</span><span class="o">.</span><span class="na">dispatcher</span><span class="o">()).</span><span class="na">to</span><span class="o">(</span><span class="n">printActor</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">workerActor</span><span class="o">.</span><span class="na">tell</span><span class="o">(</span><span class="n">PoisonPill</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(),</span> <span class="n">ActorRef</span><span class="o">.</span><span class="na">noSender</span><span class="o">());]</span>
</span></span></code></pre></div><h2 id="lifecycle--生命周期">LifeCycle | 生命周期</h2>
<p>
















  <figure  >
    <div class="d-flex justify-content-center">
      <div class="w-100" ><img src="https://user-images.githubusercontent.com/5803001/47840701-1fcaab00-ddf2-11e8-93a9-a0cd34601dd0.png" alt="image" loading="lazy" data-zoomable /></div>
    </div></figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">StartStopActor1</span> <span class="kd">extends</span> <span class="n">AbstractActor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">preStart</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="n">getContext</span><span class="o">().</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">StartStopActor2</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="s">&#34;second&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postStop</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">Receive</span> <span class="nf">createReceive</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">receiveBuilder</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">matchEquals</span><span class="o">(</span><span class="s">&#34;stop&#34;</span><span class="o">,</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">getContext</span><span class="o">().</span><span class="na">stop</span><span class="o">(</span><span class="n">getSelf</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">})</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h2 id="各类型-actor">各类型 Actor</h2>
<h3 id="typed-actor--abstractactor">Typed Actor &amp; AbstractActor</h3>
<p>早期 Akka 库中常见的是 TypedActor 与 UntypedActor，TypedActor 的优势在于其内置了静态协议，而不需要用户自定义消息类型；并且 UntypedActor 已经被弃用，而应该使用 AbstractActor。</p>
<h3 id="abstractloggingactor">AbstractLoggingActor</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Terminator</span> <span class="kd">extends</span> <span class="n">AbstractLoggingActor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ActorRef</span> <span class="n">ref</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Terminator</span><span class="o">(</span><span class="n">ActorRef</span> <span class="n">ref</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">ref</span> <span class="o">=</span> <span class="n">ref</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">getContext</span><span class="o">().</span><span class="na">watch</span><span class="o">(</span><span class="n">ref</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Receive</span> <span class="nf">createReceive</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">receiveBuilder</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">Terminated</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">log</span><span class="o">().</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;{} has terminated, shutting down system&#34;</span><span class="o">,</span> <span class="n">ref</span><span class="o">.</span><span class="na">path</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">getContext</span><span class="o">().</span><span class="na">system</span><span class="o">().</span><span class="na">terminate</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">})</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 可以用来监控其他的 Actor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ActorRef</span> <span class="n">actorRef</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">HelloWorld</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="s">&#34;helloWorld&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">system</span><span class="o">.</span><span class="na">actorOf</span><span class="o">(</span><span class="n">Props</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">Terminator</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">actorRef</span><span class="o">),</span> <span class="s">&#34;terminator&#34;</span><span class="o">);</span>
</span></span></code></pre></div>
          </div>

          



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">下一页</div>
    <a href="/books/java-series/3.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%B9%B6%E5%8F%91%E6%A1%86%E6%9E%B6/akka/websocket/" rel="prev">WebSocket</a>
  </div>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 0001-01-01</p>

          



          


  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); 
    s.async = true;
    
    s.src = "https://ngte-website.oss-accelerate.aliyuncs.com/disqus/embed.js";
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2022 NGTE all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>
<script src="//unpkg.com/heti/umd/heti-addon.min.js"></script>
<script>
  const heti = new Heti('.article');
  heti.autoSpacing();
</script>
<script type="text/javascript">
  window.$crisp = [];
  window.CRISP_WEBSITE_ID = "12adcc35-9621-4313-8262-62dc654b29d8";
  (function () {
    setTimeout(function() {
      d = document;
      s = d.createElement("script");
      s.src = "https://client.crisp.chat/l.js";
      s.async = 1;
      d.getElementsByTagName("head")[0].appendChild(s);
    }, 2500);
  })();
</script>
  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
      

    

    
    
    

    
    
    
      
      <script id="search-hit-algolia-template" type="text/html">
        <div class="search-hit">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a>
            </div>
            <div class="article-metadata search-hit-type">{{type}}</div>
            <p class="search-hit-description">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js" crossorigin="anonymous"></script>
      
      
    

    
    

    
    
    
    
      
      <script id="dsq-count-scr" src="https://ngte-website.oss-accelerate.aliyuncs.com/disqus/count.js" async></script>
    

    
    
      
      
      
      
      
      
      
    

    
    <script src="/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js" type="module"></script>
    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
    
    <script src="/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js"></script>

    
    
    
    
    
    
    <script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>


    

    
    
    <script src="https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    <script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>

    


</body>
</html>
