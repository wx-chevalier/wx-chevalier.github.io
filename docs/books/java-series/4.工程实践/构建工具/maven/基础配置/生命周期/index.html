<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="生命周期 Maven 对构建(build)的过程进行了抽象和定义，这个过程被称为构建的生命周期(lifecycle)。生命周期(lifecycle)由多个阶段(phase)组成,每个阶段(phase)会挂接一到多"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"><meta property="og:title" content="生命周期 | Next-gen Tech Edu"><meta property="og:description" content="生命周期 Maven 对构建(build)的过程进行了抽象和定义，这个过程被称为构建的生命周期(lifecycle)。生命周期(lifecycle)由多个阶段(phase)组成,每个阶段(phase)会挂接一到多"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>生命周期 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=7f174bfcc7821d63b029b344134d8d5e><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">基础配置</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id0fbc872c2171d8d49c7fbb2a0ed5f9ee")' href=#id0fbc872c2171d8d49c7fbb2a0ed5f9ee aria-expanded=false aria-controls=id0fbc872c2171d8d49c7fbb2a0ed5f9ee aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/>Maven</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id0fbc872c2171d8d49c7fbb2a0ed5f9ee aria-expanded=false aria-controls=id0fbc872c2171d8d49c7fbb2a0ed5f9ee><i class="fa-solid fa-angle-down" id=caret-id0fbc872c2171d8d49c7fbb2a0ed5f9ee></i></a></div><ul class="nav docs-sidenav collapse show" id=id0fbc872c2171d8d49c7fbb2a0ed5f9ee><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/java-%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94/>Java 构建工具对比</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8d1eeb1e5df5990fd66e86fdf2d22b87")' href=#id8d1eeb1e5df5990fd66e86fdf2d22b87 aria-expanded=false aria-controls=id8d1eeb1e5df5990fd66e86fdf2d22b87 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/>工程实践</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8d1eeb1e5df5990fd66e86fdf2d22b87 aria-expanded=false aria-controls=id8d1eeb1e5df5990fd66e86fdf2d22b87><i class="fa-solid fa-angle-right" id=caret-id8d1eeb1e5df5990fd66e86fdf2d22b87></i></a></div><ul class="nav docs-sidenav collapse" id=id8d1eeb1e5df5990fd66e86fdf2d22b87><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/>测试</a></li><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E5%8F%91%E5%B8%83/>发布</a></li><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/>项目构建</a></li><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E5%BA%94%E7%94%A8%E6%89%A7%E8%A1%8C/>应用执行</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida8597d6d482cc81c4f1dc2c9a05b3388")' href=#ida8597d6d482cc81c4f1dc2c9a05b3388 aria-expanded=false aria-controls=ida8597d6d482cc81c4f1dc2c9a05b3388 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/>基础配置</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida8597d6d482cc81c4f1dc2c9a05b3388 aria-expanded=false aria-controls=ida8597d6d482cc81c4f1dc2c9a05b3388><i class="fa-solid fa-angle-down" id=caret-ida8597d6d482cc81c4f1dc2c9a05b3388></i></a></div><ul class="nav docs-sidenav collapse show" id=ida8597d6d482cc81c4f1dc2c9a05b3388><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/>快速开始</a></li><li class="child level active"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/>生命周期</a></li><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/>项目结构</a></li><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E4%BE%9D%E8%B5%96%E8%B0%83%E5%81%9C/>依赖调停</a></li><li class="child level"><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/>依赖管理</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id36ad8a8ec9ed11832966366119db0a12")' href=#id36ad8a8ec9ed11832966366119db0a12 aria-expanded=false aria-controls=id36ad8a8ec9ed11832966366119db0a12 aria-hidden=false data-toggle=collapse></div></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#核心概念>核心概念</a></li><li><a href=#三套生命周期>三套生命周期</a></li><li><a href=#mojo>Mojo</a><ul><li><a href=#以-phase-为目标构建>以 phase 为目标构建</a></li><li><a href=#以-goal-为目标构建>以 goal 为目标构建</a></li></ul></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>生命周期</h1><div class=article-style><h1 id=生命周期>生命周期</h1><p>Maven 对构建(build)的过程进行了抽象和定义，这个过程被称为构建的生命周期(lifecycle)。生命周期(lifecycle)由多个阶段(phase)组成,每个阶段(phase)会挂接一到多个 goal。goal 是 maven 里定义任务的最小单元，相当于 ant 里的 target。</p><p>Maven 的生命周期就是对所有的构建过程进行抽象和统一。包含了项目的清理、初始化、编译、测试、打包、集成测试、验证、部署和站点生成等几乎所有的构建步骤。Maven 的生命周期是抽象的，即生命周期不做任何实际的工作，实际任务由插件完成，类似于设计模式中的模板方法。</p><h2 id=核心概念>核心概念</h2><ul><li><p>lifecycle：生命周期，这是 maven 最高级别的的控制单元，它是一系列的 phase 组成，也就是说，一个生命周期，就是一个大任务的总称，不管它里面分成多少个子任务，反正就是运行一个 lifecycle，就是交待了一个任务，运行完后，就得到了一个结果，中间的过程，是 phase 完成的，自己可以定义自己的 lifecycle，包含自己想要的 phase。</p></li><li><p>phase：可以理解为任务单元，lifecycle 是总任务，phase 就是总任务分出来的一个个子任务，但是这些子任务是被规格化的，它可以同时被多个 lifecycle 所包含，一个 lifecycle 可以包含任意个 phase，phase 的执行是按顺序的，一个 phase 可以绑定很多个 goal，至少为一个，没有 goal 的 phase 是没有意义的。</p></li><li><p>goal: 这是执行任务的最小单元，它可以绑定到任意个 phase 中，一个 phase 有一个或多个 goal，goal 也是按顺序执行的，一个 phase 被执行时，绑定到 phase 里的 goal 会按绑定的时间被顺序执行，不管 phase 己经绑定了多少个 goal，你自己定义的 goal 都可以继续绑到 phase 中。</p></li><li><p>mojo: lifecycle 与 phase 与 goal 都是概念上的东西，mojo 才是做具体事情的，可以简单理解 mojo 为 goal 的实现类，它继承于 AbstractMojo，有一个 execute 方法，goal 等的定义都是通过在 mojo 里定义一些注释的 anotation 来实现的，maven 会在打包时，自动根据这些 anotation 生成一些 xml 文件，放在 plugin 的 jar 包里。</p></li></ul><p>抛开 mojo 不讲，lifecycle 与 phase 与 goal 就是级别的大小问题，引用必须是从高级引用下级（goal 绑定到 phase，也可理间为 phase 引用 goal，只是在具体绑定时，不会 phase 定义引用哪些 goal，但是执行是，却是 phase 调用绑定到它那的 goal），也不能跨级引用，如 lifecycle 可以引用任意的 phase，不同 lifecycle 可以同时引用相同的 phase，lifecycle 不能跨级引用 goal。goal 会绑定到任意的 phase 中，也就是说不同的 phase 可以同时引用相同的 goal，所以 goal 可以在一个 lifecycle 里被重复执行哦，goal 自然也不能说绑定到 lifecycle 中，它们三者的关系可以用公司里的 总领导，组领导，与职员的关系来解释。</p><p>lifecycle 的 phase 执行会指向之前所有的 phase，然后执行当前指定的 phase，一个 phase 会引用至少一个 goal。plugin 中的 goal 只是单单执行当前指定的 goal。执行 install:install 只会执行 installplugin 中的 goal:install，但是项目创建后还没有进行之前必要的步骤，比如 complie。这样直接执行 install:install 是肯定会出错的。</p><h2 id=三套生命周期>三套生命周期</h2><p>Maven 有三套相互独立的生命周期，分别是 clean、default 和 site。每个生命周期包含一些阶段（phase），阶段是有顺序的，后面的阶段依赖于前面的阶段。</p><ul><li>clean 生命周期：清理项目，包含三个 phase：</li></ul><p>1）pre-clean：执行清理前需要完成的工作
2）clean：清理上一次构建生成的文件
3）post-clean：执行清理后需要完成的工作</p><ul><li>default 生命周期：构建项目，重要的 phase 如下：</li></ul><p>1）validate：验证工程是否正确，所有需要的资源是否可用。
2）compile：编译项目的源代码。
3）test：使用合适的单元测试框架来测试已编译的源代码。这些测试不需要已打包和布署。
4）package：把已编译的代码打包成可发布的格式，比如 jar。
5）integration-test：如有需要，将包处理和发布到一个能够进行集成测试的环境。
6）verify：运行所有检查，验证包是否有效且达到质量标准。
7）install：把包安装到 maven 本地仓库，可以被其他工程作为依赖来使用。
8）deploy：在集成或者发布环境下执行，将最终版本的包拷贝到远程的 repository，使得其他的开发者或者工程可以共享。</p><ul><li>site 生命周期：建立和发布项目站点，phase 如下：</li></ul><p>1）pre-site：生成项目站点之前需要完成的工作
2）site：生成项目站点文档
3）post-site：生成项目站点之后需要完成的工作
4）site-deploy：将项目站点发布到服务器</p><p>各个生命周期相互独立，一个生命周期的阶段前后依赖。举例如下：</p><ul><li><p>mvn clean：调用 clean 生命周期的 clean 阶段，实际执行 pre-clean 和 clean 阶段</p></li><li><p>mvn test：调用 default 生命周期的 test 阶段，实际执行 test 以及之前所有阶段</p></li><li><p>mvn clean install：调用 clean 生命周期的 clean 阶段和 default 的 install 阶段，实际执行 pre-clean 和 clean，install 以及之前所有阶段</p></li></ul><h2 id=mojo>Mojo</h2><h3 id=以-phase-为目标构建>以 phase 为目标构建</h3><p>以 phase 为目标进行构建是最常见的，如我们平时经常执行的 mvn compile,mvn test,mvn package&mldr; 等等,compile,test,package 都是 maven 生命周期(lifecycle)里的 phase,通过 mvn 命令，你可以指定一次构建执行到那一个阶段，在执行过程中，所有经历的执行阶段(phase)上绑定的 goal 都将得到执行。例如，对于一个 jar 包应用，当执行 mvn package 命令时，maven 从 validate 阶段一个阶段一个阶段的执行，在执行到 compile 阶段时，compiler 插件的 compile goal 会被执行，因为这个 goal 是绑定在 compile 阶段(phase)上的。这一点可从其对应的 mojo 类上得知：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s2.ax1x.com/2019/12/17/QouCDS.png alt=CompilerMojo loading=lazy data-zoomable></div></div></figure></p><p>再比如经常使用的打包插件 shade，它的 goal 是绑定到 package 阶段的，这样，使用 mvn package 进行打包时都会执行 shade 的。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s2.ax1x.com/2019/12/17/QoulE4.png alt=ShareMojo loading=lazy data-zoomable></div></div></figure></p><h3 id=以-goal-为目标构建>以 goal 为目标构建</h3><p>虽然以 phase 为目标的构建最常见，但是有时候我们会发现，一些插件的 goal 并不适合绑定到任何阶段(phase)上，或者是，这些 goal 往往是单独执行，不需要同某个阶段(phase)绑定在一起，比如 hibernate 插件的导入\导出 goal 多数情况下是根据需要要手动执行的(当然，也可以绑定到某个阶段上，比如进行单元测试时，可考虑将其绑定到 test 阶段上)。再比如 jetty(6.1.26)插件，它的 goal 都是将打包或未打包的工程部署到 jetty 里然后启动 jetty 容器的，多数情况下，人们都是独立运行这些 goal 的，比如：人们希望当键入 mvn jetty:run 后，工程就能完成编译后启动 jetty,而 jetty 插件也确实是这样做的，它的 run goal 的 mojo 是这样声明的：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s2.ax1x.com/2019/12/17/QouJ81.png alt=Jetty6RunMojo loading=lazy data-zoomable></div></div></figure></p><p>其中@execute phase=&ldquo;test-compile"指明 jetty:run 这一 goal 会促使 maven 先 build 到 test-compile 阶段，再执行这个 goal.同样，对于 jetty:run-war 这个 goal 则要求先 build 到 package 阶段再执行该 goal。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s2.ax1x.com/2019/12/17/QouD5d.png alt=Jetty6RunWar loading=lazy data-zoomable></div></div></figure></p><p>而另外一个例子是 exec 插件的 exec:java：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s2.ax1x.com/2019/12/17/Qou62t.png alt=ExecJavaMojo loading=lazy data-zoomable></div></div></figure></p><p>这个 goal 也声明了 execute 的 phase,但却是 validate，这样，如果代码没有编译，执行这个 goal 就会出错，所以多数情况下，人们总是使用下面的方式执行的：<code>mvn clean compile exec:java</code>。</p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/ rel=next>快速开始</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/java-series/4.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/maven/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/ rel=prev>项目结构</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte-website.oss-accelerate.aliyuncs.com/disqus/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte-website.oss-accelerate.aliyuncs.com/disqus/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>