<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="11 Three.js 基础之灯光 灯光的种类 在场景中添加灯光后，灯光照射在物体上产生明暗、光亮和阴影，从而让物体显得更加立体有光泽。 在有些文档或教程中，会把 灯光 称呼为 光源，这只是对 light 这个单词的不同翻译而已 如果我在本系列文" />

  
  <link rel="alternate" hreflang="zh" href="https://ng-tech.icu/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/11.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.0d97305106da5efa530e28b021b4c580.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-40NYXJ8823");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://ng-tech.icu/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/11.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@wx-chevalier" />
    <meta property="twitter:creator" content="@wx-chevalier" />
  
  <meta property="og:site_name" content="Next-gen Tech Edu" />
  <meta property="og:url" content="https://ng-tech.icu/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/11.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/" />
  <meta property="og:title" content="11.Three.js 基础之灯光 | Next-gen Tech Edu" />
  <meta property="og:description" content="11 Three.js 基础之灯光 灯光的种类 在场景中添加灯光后，灯光照射在物体上产生明暗、光亮和阴影，从而让物体显得更加立体有光泽。 在有些文档或教程中，会把 灯光 称呼为 光源，这只是对 light 这个单词的不同翻译而已 如果我在本系列文" /><meta property="og:image" content="https://ng-tech.icu/media/sharing.png" />
    <meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
    
  

  



  

  

  





  <title>11.Three.js 基础之灯光 | Next-gen Tech Edu</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="f5ae0cc4fe67ed346b619285f7d3c7cb" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/books-gallery"><span>笔记（万篇）</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#knowledge-map"><span>知识图谱</span></a>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>实验室</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/galaxy-home/gh-craft"><span>Craft 方块世界</span></a>
              
                <a class="dropdown-item" href="/galaxy-home/glossary-cards"><span>3D 知识卡牌</span></a>
              
            </div>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>其他阅读渠道</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png"></img><span>知乎</span></a>
              
                <a class="dropdown-item" href="https://segmentfault.com/blog/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png"></img><span>SegmentFault</span></a>
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png"></img><span>掘金</span></a>
              
            </div>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/wx-chevalier" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        
        
        <div></div>
        
        <style>
        @media only screen and (max-width: 600px) {
          .jimmysong-template {
            display: none!important;
          }
        }
        </style>
        
        <li class="jimmysong-template" style="color: white;font-size: 12px;">
          <a href="https://jimmysong.io" style="color: white">By Jimmy Song's Template</a>
        </li>
      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">
<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          2021-puxiao-《Three.js 系列教程》
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li style="display: inline-flex">
          <a style="cursor: pointer;" onclick="window.history.back()">
            <i class="fas fa-arrow-left pr-1"></i>
            Back
          </a>
          <span>|</span>
          <a href="/books/">
            <i class="fa-solid fa-house" style="margin-right: 4px"></i>
            Books
          </a>
        </li>
      </ul>

      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idbb95a2d75baa1d08a35c84b8efe5ad00&#34;)" href="#idbb95a2d75baa1d08a35c84b8efe5ad00" aria-expanded="false" aria-controls="idbb95a2d75baa1d08a35c84b8efe5ad00" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/">99.参考资料</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idbb95a2d75baa1d08a35c84b8efe5ad00" aria-expanded="false" aria-controls="idbb95a2d75baa1d08a35c84b8efe5ad00">
    
    <i class="fa-solid fa-angle-down" id="caret-idbb95a2d75baa1d08a35c84b8efe5ad00"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="idbb95a2d75baa1d08a35c84b8efe5ad00">
      



  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2017-%E5%9B%BE%E8%A7%A3-webgl-%E5%8F%8A-three.js-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">2017-图解 WebGL 及 Three.js 工作原理</a></li>




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide04f28caa67ef746c1e042a66bd26df7&#34;)" href="#ide04f28caa67ef746c1e042a66bd26df7" aria-expanded="false" aria-controls="ide04f28caa67ef746c1e042a66bd26df7" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/">2021-puxiao-《Three.js 系列教程》</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide04f28caa67ef746c1e042a66bd26df7" aria-expanded="false" aria-controls="ide04f28caa67ef746c1e042a66bd26df7">
    
    <i class="fa-solid fa-angle-down" id="caret-ide04f28caa67ef746c1e042a66bd26df7"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="ide04f28caa67ef746c1e042a66bd26df7">
      



  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/01.three.js-%E7%AE%80%E4%BB%8B/">01.Three.js  简介</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/02.%E5%88%9D%E5%A7%8B%E5%8C%96-three.js-%E9%A1%B9%E7%9B%AE/">02.初始化 Three.js 项目</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/03.%E7%BC%96%E5%86%99-hello-three.js/">03.编写 Hello Three.js</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/04.%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%BA%9B%E8%87%AA%E9%80%82%E5%BA%94/">04.添加一些自适应</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/05.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%9B%BE%E5%85%83/">05.Three.js 基础之图元</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/06.%E5%9B%BE%E5%85%83%E7%BB%83%E4%B9%A0%E7%A4%BA%E4%BE%8B/">06.图元练习示例</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/07.%E5%9B%BE%E5%85%83%E4%B9%8B-3d-%E6%96%87%E5%AD%97/">07.图元之 3D 文字</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/08.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%9C%BA%E6%99%AF/">08.Three.js 基础之场景</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/09.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%9D%90%E8%B4%A8/">09.Three.js 基础之材质</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/10.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%BA%B9%E7%90%86/">10.Three.js 基础之纹理</a></li>




  <li class="child level active"><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/11.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%81%AF%E5%85%89/">11.Three.js 基础之灯光</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/12.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/">12.Three.js 基础之镜头</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/13.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%98%B4%E5%BD%B1/">13.Three.js 基础之阴影</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/14.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%9B%BE/">14.Three.js 基础之雾</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/15.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%A6%BB%E5%B1%8F%E6%B8%B2%E6%9F%93/">15.Three.js 基础之离屏渲染</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/16.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%A0%E4%BD%95%E4%BD%93/">16.Three.js 基础之自定义几何体</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/17.three.js-%E6%8A%80%E5%B7%A7%E4%B9%8B%E6%8C%89%E9%9C%80%E6%B8%B2%E6%9F%93/">17.Three.js 技巧之按需渲染</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/18.three.js-%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%B0%83%E8%AF%95/">18.Three.js 技巧之调试</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/19.three.js-%E6%8A%80%E5%B7%A7%E4%B9%8B%E7%94%BB%E5%B8%83/">19.Three.js 技巧之画布</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/20.three.js-%E4%BC%98%E5%8C%96%E4%B9%8B%E5%90%88%E5%B9%B6%E5%AF%B9%E8%B1%A1/">20.Three.js 优化之合并对象</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/21.three.js-%E4%BC%98%E5%8C%96%E4%B9%8B%E5%90%88%E5%B9%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8A%A8%E7%94%BB/">21.Three.js 优化之合并对象的动画</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/22.three.js-%E4%BC%98%E5%8C%96%E4%B9%8Boffscreencanvas%E4%B8%8Ewebworker/">22.Three.js 优化之OffscreenCanvas与WebWorker</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/23.three.js-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E5%8A%A0%E8%BD%BD.obj%E6%A8%A1%E5%9E%8B/">23.Three.js 解决方案之加载.obj模型</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/24.three.js-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E5%8A%A0%E8%BD%BD.gltf%E6%A8%A1%E5%9E%8B/">24.Three.js 解决方案之加载.gLTF模型</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/25.three.js-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92/">25.Three.js 解决方案之添加背景和天空盒</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/26.three.js-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%8F%E6%98%8E%E5%BA%A6bug/">26.Three.js 解决方案之透明度bug</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/27.three.js-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E5%A4%9A%E7%94%BB%E5%B8%83%E5%A4%9A%E5%9C%BA%E6%99%AF/">27.Three.js 解决方案之多画布、多场景</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/28.three.js-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%89%E4%B8%AD%E6%8B%BE%E5%8F%96%E6%9F%90%E7%89%A9%E4%BD%93/">28.Three.js 解决方案之选中、拾取某物体</a></li>




  <li class="child level "><a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/three.js-%E5%AE%9E%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/">Three.js 实用知识点笔记</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#灯光的种类">灯光的种类</a>
      <ul>
        <li><a href="#灯光的种类-1">灯光的种类</a></li>
        <li><a href="#光的辅助对象">光的辅助对象</a></li>
        <li><a href="#灯光作用与特点">灯光作用与特点</a></li>
      </ul>
    </li>
    <li><a href="#前期准备orbitcontrols-讲解制作纹理图片">前期准备：OrbitControls 讲解、制作纹理图片</a>
      <ul>
        <li><a href="#orbitcontrols-的简介和用法">OrbitControls 的简介和用法</a></li>
      </ul>
    </li>
    <li><a href="#灯光示例hellolight">灯光示例：HelloLight</a>
      <ul>
        <li><a href="#示例目标">示例目标：</a></li>
        <li><a href="#代码拆分与梳理">代码拆分与梳理：</a></li>
        <li><a href="#具体的代码">具体的代码：</a></li>
        <li><a href="#遗留的疑惑">遗留的疑惑</a></li>
      </ul>
    </li>
    <li><a href="#额外的一些唠叨话">额外的一些唠叨话</a></li>
  </ul>
</nav>

      
<div class="subscribe-module col-24 mt-1">
    <img src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png" alt="image" title="王下邀月熊的微信公众号"/>
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>11.Three.js 基础之灯光</h1>

          <div class="article-style">
            <h1 id="11-threejs-基础之灯光">11 Three.js 基础之灯光</h1>
<h2 id="灯光的种类">灯光的种类</h2>
<p>在场景中添加灯光后，灯光照射在物体上产生明暗、光亮和阴影，从而让物体显得更加立体有光泽。</p>
<blockquote>
<p>在有些文档或教程中，会把 灯光 称呼为 光源，这只是对 light 这个单词的不同翻译而已<br>
如果我在本系列文章中，有时候使用 “灯光”，有时候使用 “光源”，请勿见怪。</p>
</blockquote>
<blockquote>
<p>向场景中添加灯光 这个行为，在传统 3D 软件制作中通常被称为 “打灯”</p>
</blockquote>
<p><strong>若场景中的物体由非反光材质构成，即使场景中没有任何光源，渲染后依然可以看见该物体。</strong></p>
<blockquote>
<p>非反光材质为 MeshBasicMaterial</p>
</blockquote>
<p><strong>若场景中的物体由反光材质构成，假设场景中没有任何光源，渲染出的结果将是一片漆黑，什么物体都看不见。</strong></p>
<blockquote>
<p>反光材质为 MeshPhongMaterial 等</p>
</blockquote>
<h3 id="灯光的种类-1">灯光的种类</h3>
<p><strong>在 Three.js 中，有 6 种基础类型的灯光，他们都继承于 Three.Light 。</strong></p>
<table>
<thead>
<tr>
<th>灯光类型(都继承于 Light)</th>
<th>灯光名称</th>
<th>是否支持阴影</th>
<th>是否作用于全局(无处不在)</th>
<th>是否有照射目标</th>
</tr>
</thead>
<tbody>
<tr>
<td>AmbientLight</td>
<td>环境光、氛围光</td>
<td>否</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>DirectionalLight</td>
<td>平行光</td>
<td>是</td>
<td>否</td>
<td>有</td>
</tr>
<tr>
<td>HemisphereLight</td>
<td>半球光源、户外光源</td>
<td>否</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>PointLight</td>
<td>点光源</td>
<td>是</td>
<td>否</td>
<td>有</td>
</tr>
<tr>
<td>RectAreaLight</td>
<td>矩形面光源</td>
<td>否</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>SpotLight</td>
<td>聚光灯光源</td>
<td>是</td>
<td>否</td>
<td>有</td>
</tr>
</tbody>
</table>
<p><strong>补充说明 1：环境光</strong></p>
<p>有个别文档或教程中，会把 HemisphereLight 也称呼为 “环境光”。<br>
事实上 AmbientLight 和 HemisphereLight 的作用都是提供环境光，只是 HemisphereLight 的环境光更加真实，当然渲染所需性能也更多。</p>
<p><strong>补充说明 2：是否支持阴影</strong></p>
<p>**所有的光照射到物体上后，都会产生阴影。**但 这里说的不是 <strong>是否会产生阴影</strong>，而是说 <strong>“是否支持阴影”</strong>。</p>
<p>一共有 3 种光不支持阴影：AmbientLight、HemisphereLight、RectAreaLight</p>
<p>其他种类的光，都支持阴影：DirectionalLight、PointLight、SpotLight</p>
<p>关于 Three.js 中的 阴影 (LightShadown、DirectionalLightShadown、PointLightShadown、SpotLightShadown)，我们会在后面单独开辟一节来讲解。</p>
<p><strong>关于“阴影”的进一步补充：</strong></p>
<p>在之前所有的示例中，当场景上有反光物体且有灯光时，物体会产生明暗，但是请注意：</p>
<ol>
<li>
<p>这个“物体显示出的明暗”并不是真正的“阴影”。</p>
<blockquote>
<p>在 Three.js 中 有真正的阴影对象，这个会在后面的 “Three.js 基础之阴影” 一文中有详细说明。</p>
</blockquote>
</li>
<li>
<p>这个“物体显示出的明暗”并不是完全符合我们日常的“光影明暗”。</p>
<blockquote>
<p>这是因为我们目前所有示例都使用的是“简单光照模型”，也就是说光照射在物体上后并不进行漫反射，所以渲染出的“明暗”并不完全自然合理。</p>
</blockquote>
</li>
<li>
<p>默认渲染器并不会渲染阴影、默认支持阴影的灯光也不会投射阴影，若想产生真正的阴影，还需开启阴影渲染和投射。</p>
<blockquote>
<p>具体如何开启，也会在后面的 “Three.js 基础之阴影” 一文中有详细说明。</p>
</blockquote>
</li>
</ol>
<p><strong>补充说明 3：是否作用域全局</strong></p>
<p>只有环境光(AmbientLight、HemisphereLight)作用于全局，其他光则照耀范围都是有限的。</p>
<p><strong>补充说明 4：什么叫 “是否有照射目标？”</strong></p>
<p>答：就是这个光除了光源本身之外，还包含一个 target 属性，并且可以通过设置 target.position 的位置。对于有照射目标的灯光，在场景中不光要添加灯光本身，还可以添加 灯光照射目标。</p>
<blockquote>
<p>注意是 “可以添加” 灯光目标，而不是说 “必须也要添加” 灯光目标。</p>
</blockquote>
<p>请注意上面表格中，关于 “是否产生阴影” 和 “是否有照射目标”，这 2 项 是完全相同的，也就是说，只有包含照射目标的光，才会产生阴影。</p>
<p><strong>在 Three.js 中，有 3 种 光探针 类型的环境光。</strong></p>
<table>
<thead>
<tr>
<th>灯光类型</th>
<th>灯光名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>LightProbe</td>
<td>光探针</td>
</tr>
<tr>
<td>AmbientLightProbe(继承于 LightProbe)</td>
<td>环境光探针</td>
</tr>
<tr>
<td>HemisphereLightProbe(继承于 LightProbe)</td>
<td>半球光探针</td>
</tr>
</tbody>
</table>
<p>关于 光探针，是另外一套比较复杂的光的算法方式。</p>
<p>根据我网上搜索到的一些信息，大概可以描述为：</p>
<p><strong>传统的 环境光(AmbientLight、HemisphereLight) 渲染时需要的计算量比较大，对于渲染静止物体来说还可以，但是渲染 运动类型 的物体时所消耗的性能过高，而 光探针类型的环境光(AmbientLightProbe、HemisphereLightProbe) 则更加适合 运动类型 的物体。</strong></p>
<h3 id="光的辅助对象">光的辅助对象</h3>
<p>场景中的光本身是不可见的，为了让我们方便观测光源，Three.js 提供了 光的辅助对象：DirectionalLightHelper、HemisphereLightHelper、PointLightHelper、RectAreaLightHelper、SpotLightHelper</p>
<p><strong>所谓光的辅助对象，就是在渲染后出现的一些白色细线，这些白色细线指示出光源的位置、大小、以及光发射的方向。</strong></p>
<p>光的辅助对象用法非常简单，3 步骤：</p>
<ol>
<li>先创建 光 的实例</li>
<li>将创建好的光实例作为 辅助对象构造函数的参数</li>
<li>场景中添加 辅助对象即可</li>
</ol>
<p>例如：</p>
<pre tabindex="0"><code>//创建并设置平行光
const directionalLight = new Three.DirectionalLight(0xFFFFFF, 1)
directionalLight.position.set(0, 10, 0);
directionalLight.target.position.set(-5, 0, 0)

//将平行光添加到场景中
scene.add(directionalLight)
scene.add(directionalLight.target)

//根据平行光实例，创建对应的辅助对象，并将辅助对象添加到场景中
const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight)
scene.add(directionalLightHelper)
</code></pre><h3 id="灯光作用与特点">灯光作用与特点</h3>
<p><strong>AmbientLight(环境光、氛围光)：</strong></p>
<p>通常仅作为基础光线，一般需要与其他灯光配合使用。不能产生阴影、也无需指定坐标位置，仅需设置颜色和强度。</p>
<p>注意：不支持阴影</p>
<p><strong>DirectionalLight(平行光)：</strong></p>
<p>最为经常使用的光源，光纤(光芒)都是平行向着一个方向发射。</p>
<p>经常使用 DirectionalLight 来模拟太阳光照射到某个物体上的光照效果。</p>
<p><strong>HemisphereLight(半球光源)：</strong></p>
<p>相对 ambientLight，hemisphereLight 更加真实的模拟自然光源，提供 天空 和 地面 漫反射光线。</p>
<p>一共接收 3 个参数：</p>
<ul>
<li>第 1 个参数：天空光线颜色</li>
<li>第 2 个参数：地面反射光颜色</li>
<li>第 3 个参数：光的反射强度</li>
</ul>
<p>注意：不支持阴影</p>
<p><strong>PointLight(点光源)：</strong></p>
<p>类似生活中的灯泡，光纤(光芒)没有固定方向，朝着四周散射。</p>
<p>注意：点光源对应的辅助对象 PointLightHelper 只有一个 菱形的光源形状，并没有 光 的发射线条。</p>
<p><strong>RectAreaLight(矩形面光源)：</strong></p>
<p>与 DirectionalLight 模拟太阳光不同，RectAreaLight 光源形状为一个矩形，可以模拟出明亮的窗口或矩形照明光源。</p>
<p>注意：</p>
<ol>
<li>
<p>不支持阴影</p>
</li>
<li>
<p>只有 MeshStandardMaterial 和 MeshPhysicalMaterial 材料才支持 RectAreaLight 光源</p>
</li>
<li>
<p>按照官方文档描述，场景中必须加入 RectAreaLightUniformsLib.init()</p>
<blockquote>
<p>目前我比较疑惑的是，经过试验发现，即使不添加 RectAreaLightUniformsLib.init()，场景依然正常渲染，似乎看不出有任何差别</p>
</blockquote>
</li>
</ol>
<p><strong>特别说明：</strong></p>
<p>RectAreaLight 对应的 辅助对象 RectAreaLightArea 引入方式和其他 光辅助对象 引入方式不同。</p>
<p>其他光辅助对象都是内置在 three 中的，使用之前无需引入，可以直接使用，例如：</p>
<pre tabindex="0"><code>const directionalLightHelper = new Three.DirectionalLightHelper(directionalLight)
</code></pre><p>但是 RectAreaLightHelper 在使用前需要引入才可以，引入代码：</p>
<pre tabindex="0"><code>import { RectAreaLightHelper } from &#39;three/examples/jsm/helpers/RectAreaLightHelper&#39;
</code></pre><p><strong>SpotLight(聚光灯)：</strong></p>
<p>类似生活中的聚光灯效果。</p>
<p>关于每个灯光的具体参数详情、属性用法，请参考官方文档：https://threejs.org/docs/index.html#api/zh/lights/Light</p>
<p>接下来，我们将通过创建一个 HelloLight 的例子，直观的观察不同类型灯光的效果。</p>
<blockquote>
<p>这个示例中，会用到我们上节学习的 纹理 相关知识。</p>
</blockquote>
<h2 id="前期准备orbitcontrols-讲解制作纹理图片">前期准备：OrbitControls 讲解、制作纹理图片</h2>
<h3 id="orbitcontrols-的简介和用法">OrbitControls 的简介和用法</h3>
<p>本示例中需要用到一个之前从未使用过的类：OrbitControls，先简单介绍一下这个类。</p>
<ol>
<li>orbit 单词的翻译为：轨道</li>
<li>controls 单词的翻译为：控制权</li>
</ol>
<p>OrbitControls 是鼠标镜头轨道控件，可以通过鼠标来配置镜头的运动轨道，例如 缩放、平移、旋转。也就是说在不修改场景的前提下，可以通过鼠标来改变镜头，以便查看不同角度下的场景。</p>
<blockquote>
<p>在手机端，不是鼠标，而是手指滑动</p>
</blockquote>
<h4 id="orbitcontrols-的用法">OrbitControls 的用法</h4>
<pre tabindex="0"><code>const controls = new OrbitControls(camera, canvas) //创建一个实例
controls.target.set(0, 5, 0) //controls.target 为镜头的坐标系统
//controls.target.set(0, 5, 0) 的意思是：设置原点 Y 轴的坐标(以高出5米的轨道运行)
controls.update() //使控件使用新目标
</code></pre><p>请注意，在上面代码中，OrbitControls 的构造函数中第 2 个参数为 DOM 中的 canvas 节点，实际上当添加过 OrbitControls 之后，鼠标在 canvas 上的 拖拽、鼠标滚轴滚动 等操作都会被捕捉到，并且做出相对应的镜头画面切换。</p>
<p>说直白点，我们终于可以通过鼠标对 3D 场景进行不同角度，距离的切换操作了。</p>
<p><strong>OrbitControls 的 change 事件：</strong></p>
<p>无论是通过 鼠标或键盘 来修改镜头轨道 都会触发 OrbitControls 的 change 事件。</p>
<p>我们可以通过添加 事件监听 来捕获该事件：</p>
<pre tabindex="0"><code>const handleChange = () =&gt; { ... }

const controls = new OrbitControls(camera, canvasRef.current)
controls.addEventListener(&#39;change&#39;,handleChange)
</code></pre><p>对于目前的我们来说，是没有必要使用该事件的，在后续的 Three.js 技巧篇 中，我们才会运用到 change 事件。</p>
<p>除此之外，我们还可以设置 禁止缩放、禁止旋转、禁止右键拖拽、设置可旋转角度范围等等一系列配置，具体的可查阅官方文档：https://threejs.org/docs/#examples/zh/controls/OrbitControls</p>
<p><strong>特别注意：</strong></p>
<p>OrbitControls 并不是包含在 three 根目录下，而是位于 three/examples/jsm/controls/OrbitControls 中，因此引入代码为：</p>
<pre tabindex="0"><code>import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls&#39;
</code></pre><blockquote>
<p>提醒：在 OrbitControls.js 中，分别导出有 OrbitControls 和 MapControls，所以引入 OribitControls 是需要加 大括号 { }。</p>
</blockquote>
<p><strong>补充说明：</strong></p>
<p>严格意义上讲，OrbitControls 并不是 Three.js 核心包含的代码内容，OrbitControls 是将最常见的鼠标与 Three.js 场景交互内容的一个额外封装。</p>
<p>由于 OrbitControls 实在是过于频繁使用，最终 Three.js 将 OrbitControls 也包含到了 Three.js 代码包中，只不过不在默认的目录中，而是在 Three.js 示例目录中。</p>
<blockquote>
<p>在 Three.js 早期的版本中，代码包中并未包含 OrbitControls，若想使用还需要 yarn 安装 three-orbitcontrols 这个包。只不过当后来 Three.js 包含了 OrbitControls 之后，才再也无需额外安装了。</p>
</blockquote>
<p><strong>补充说明 2：</strong></p>
<p>原本 OrbitControl 除了鼠标拖拽可以改变场景视角，还支持键盘上的 4 个方向键来改变场景视角。</p>
<p>只不过 React 对于原生 DOM 事件支持度并不高，React 更倾向于给组件添加 onKeydown 属性处理函数。</p>
<blockquote>
<p>本质上 组件的 onKeydown 相当于 React 的合成事件。</p>
</blockquote>
<p>Three.js 的官方示例使用的是原生 html + js，是完全支持原生键盘事件的。所以 官网的示例 使用键盘方向键控制场景没有问题，但是在 React 项目中却不太容易实现。</p>
<p>在 React 中如果想让 canvas 拥有键盘事件监听，需要做以下 2 处设置：</p>
<ol>
<li>在 useEffect 中，当第一次挂载完成，添加 canvasRef.current.fouce()，让 canvas 自动获得焦点</li>
<li>在 &lt;canvas /&gt; 中添加 tabindex 属性，属性值为 -1、0、1 都无所谓，例如：&lt;canvas tabindex={0} /&gt;</li>
</ol>
<p>只有满足以上 2 个条件后，canvas 才会监听到键盘事件，但是一旦 canvas 失去焦点，那么就又监听不到了。</p>
<blockquote>
<p>还是继续使用 鼠标拖拽 来修改查看场景视角吧</p>
</blockquote>
<p><strong>补充说明 3：</strong></p>
<p>事实上如果你真的需要监听 鼠标键盘方向键 ，其实最简单的办法就是把 OrbitControls 监听对象修改为 document.body 上。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl"><span class="gd">- const controls = new OrbitControls(camera, canvasRef.current)
</span></span></span><span class="line"><span class="cl"><span class="gd"></span><span class="gi">+ const controls = new OrbitControls(camera, document.body)
</span></span></span></code></pre></div><h4 id="纹理图片准备制作纹理图片-checkerpng">纹理图片准备：制作纹理图片 checker.png</h4>
<p>本示例中需要用到一个类似 3D 场景地面黑白网格的纹理，因此我们需要提前准备好这个纹理图片。</p>
<p>在 PhotoShop 中新建一个 宽高都为 2 像素的画布，然后：</p>
<ol>
<li>左上角和右下角 的那 1 像素中填充一个较黑的颜色</li>
<li>右上角和左下角 的那 1 像素中填充一个较白的颜色</li>
<li>将图片导出为 checker.png，并保存到 src/assets/imgs/ 目录中</li>
</ol>
<p><strong>补充说明：</strong></p>
<p>虽然制作的纹理图片非常小，只有 2 像素 * 2 像素，但是我们可以通过设置纹理的重复，来实现渲染出比较大的 黑白网格底盘。</p>
<ol>
<li>设置纹理 magFilter 的属性值为 Three.NearestFilter</li>
<li>设置纹理 wrapS、wrapT 属性值为 Three.RepeatWrapping</li>
<li>根据 黑白网格的尺寸，计算并设置纹理 repeat 重复次数</li>
</ol>
<p>以上 3 点刚好都是上一节我们讲解 纹理 时学习到的知识点。</p>
<h2 id="灯光示例hellolight">灯光示例：HelloLight</h2>
<p>先回顾一下 Three.js 中 10 个 光 的类型：</p>
<p>光的原型(Light) + 6 种基础光(AmbientLight&hellip;) + 光探针原型(LightProbe) + 2 种环境光探针(AmbientLightProbe、HemisphereLightProbe) = 1 + 6 + 1 + 2 = 10</p>
<h3 id="示例目标">示例目标：</h3>
<ol>
<li>使用并体验 Three.js 中除 Light 和 LightProbe 之外的其他 8 种光类型</li>
<li>使用并体验 光的辅助对象( XxxLightHelper)</li>
</ol>
<p><strong>补充说明：</strong></p>
<ol>
<li>环境光 AmbientLight 是没有 辅助对象的、其他光都有辅助对象</li>
<li>矩形光 RectAreaLight 的辅助对象 RectAreaLightHelper 和其他光的辅助对象 引入方式不同</li>
</ol>
<h3 id="代码拆分与梳理">代码拆分与梳理：</h3>
<h4 id="1create-scenets创建基础场景">1、create-scene.ts：创建基础场景</h4>
<p>创建 src/components/hello-light/create-scene.ts ，导出一个名为 createScene 的函数，用来专门负责创建基础的场景。</p>
<p><strong>具体代码梳理：</strong></p>
<ol>
<li>
<p>该场景中包含 1 个黑白网格的地面、1 个立方体、1 个球体，但是该场景不包含任何光。</p>
</li>
<li>
<p>createScene 创建基础场景时接收一个参数 type，type 只能为以下 2 个值中的其中 1 种：MESH_PHONE_MATERIAL 或 MESH_STANDARD_MATERIAL</p>
</li>
<li>
<p>type 默认值为 MESH_PHONE_MATERIAL</p>
</li>
</ol>
<p><strong>进一步解释：</strong></p>
<p>由于 RectAreaLight 只作用在 MeshStandardMaterial 和 MeshPhysicalMaterial 材料物体上，所以我们才设置 type 这个参数。</p>
<ol>
<li>当使用 RectAreaLight 时，我们告知 createScene，使用 MeshStandardMaterial 材质创建 地面、立方体、球体</li>
<li>当使用 其他 光时，我们告知 createScene，使用 MeshPhongMaterial 材质创建 地面、立方体、球体</li>
</ol>
<h4 id="2indextsx创建渲染器镜头以及不同种类的光">2、index.tsx：创建渲染器、镜头、以及不同种类的光</h4>
<p><strong>具体代码梳理：</strong></p>
<ol>
<li>当 canvas DOM 初始化后，创建 渲染器、镜头、镜头交互(OrbitControls)</li>
<li>创建 8 个按钮，每个按钮对应一种光</li>
<li>使用 useState 创建一个变量 type，用来记录当前演示 光的类型</li>
<li>点击不同按钮后，修改 当前光的类型 type 的值，从而引发 react 重新渲染</li>
<li>在新一轮的渲染中，通过判断 type 类型，使用 createScene 创建一个新的场景 和 对应的 光</li>
</ol>
<h4 id="3indexscss设置相关样式">3、index.scss：设置相关样式</h4>
<p><strong>具体样式梳理：</strong></p>
<ol>
<li>设置 canvas 对应的样式</li>
<li>设置 8 个按钮对应的样式</li>
</ol>
<h3 id="具体的代码">具体的代码：</h3>
<h4 id="create-scenets">create-scene.ts：</h4>
<pre tabindex="0"><code>import * as Three from &#39;three&#39;

export enum MaterialType {
    MESH_PHONE_MATERIAL = &#39;MESH_PHONE_MATERIAL&#39;,
    MESH_STANDARD_MATERIAL = &#39;MESH_STANDARD_MATERIAL&#39;
}

const createScene: (type?: keyof typeof MaterialType) =&gt; Three.Scene = (type = MaterialType.MESH_PHONE_MATERIAL) =&gt; {

    const scene = new Three.Scene()

    const planeSize = 40

    const loader = new Three.TextureLoader()
    const texture = loader.load(require(&#39;@/assets/imgs/checker.png&#39;).default)
    texture.wrapS = Three.RepeatWrapping
    texture.wrapT = Three.RepeatWrapping
    texture.magFilter = Three.NearestFilter
    texture.repeat.set(planeSize / 2, planeSize / 2)

    let planeMat: Three.Material
    let cubeMat: Three.Material
    let sphereMat: Three.Material
    switch (type) {
        case MaterialType.MESH_STANDARD_MATERIAL:
            planeMat = new Three.MeshStandardMaterial({
                map: texture,
                side: Three.DoubleSide
            })
            cubeMat = new Three.MeshStandardMaterial({ color: &#39;#8AC&#39; })
            sphereMat = new Three.MeshStandardMaterial({ color: &#39;#CA8&#39; })
            break
        default:
            planeMat = new Three.MeshPhongMaterial({
                map: texture,
                side: Three.DoubleSide
            })
            cubeMat = new Three.MeshPhongMaterial({ color: &#39;#8AC&#39; })
            sphereMat = new Three.MeshPhongMaterial({ color: &#39;#8AC&#39; })
    }

    const planeGeo = new Three.PlaneBufferGeometry(planeSize, planeSize)
    const mesh = new Three.Mesh(planeGeo, planeMat)
    mesh.rotation.x = Math.PI * -0.5
    scene.add(mesh)

    const cubeGeo = new Three.BoxBufferGeometry(4, 4, 4)
    const cubeMesh = new Three.Mesh(cubeGeo, cubeMat)
    cubeMesh.position.set(5, 2.5, 0)
    scene.add(cubeMesh)

    const sphereGeo = new Three.SphereBufferGeometry(3, 32, 16)
    const sphereMesh = new Three.Mesh(sphereGeo, sphereMat)
    sphereMesh.position.set(-4, 5, 0)
    scene.add(sphereMesh)

    return scene
}

export default createScene
</code></pre><h4 id="indextsx">index.tsx：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">Three</span> <span class="kr">from</span> <span class="s2">&#34;three&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">OrbitControls</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;three/examples/jsm/controls/OrbitControls&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//import { RectAreaLightUniformsLib } from &#39;three/examples/jsm/lights/RectAreaLightUniformsLib&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">RectAreaLightHelper</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;three/examples/jsm/helpers/RectAreaLightHelper&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">createScene</span><span class="p">,</span> <span class="p">{</span> <span class="nx">MaterialType</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;./create-scene&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;./index.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">enum</span> <span class="nx">LightType</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AmbientLight</span> <span class="o">=</span> <span class="s2">&#34;AmbientLight&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">AmbientLightProbe</span> <span class="o">=</span> <span class="s2">&#34;AmbientLightProbe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">DirectionalLight</span> <span class="o">=</span> <span class="s2">&#34;DirectionalLight&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">HemisphereLight</span> <span class="o">=</span> <span class="s2">&#34;HemisphereLight&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">HemisphereLightProbe</span> <span class="o">=</span> <span class="s2">&#34;HemisphereLightProbe&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">PointLight</span> <span class="o">=</span> <span class="s2">&#34;PointLight&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">RectAreaLight</span> <span class="o">=</span> <span class="s2">&#34;RectAreaLight&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">SpotLight</span> <span class="o">=</span> <span class="s2">&#34;SpotLight&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">buttonLables</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">AmbientLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">AmbientLightProbe</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">DirectionalLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">HemisphereLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">HemisphereLightProbe</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">PointLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">RectAreaLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LightType</span><span class="p">.</span><span class="nx">SpotLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HelloLight</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">canvasRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">HTMLCanvasElement</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">sceneRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">Three.Scene</span> <span class="err">|</span> <span class="na">null</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="kr">type</span><span class="p">,</span> <span class="nx">setType</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">LightType</span><span class="p">&gt;(</span><span class="nx">LightType</span><span class="p">.</span><span class="nx">AmbientLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">canvasRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">canvas</span>: <span class="kt">canvasRef.current</span> <span class="kr">as</span> <span class="nx">HTMLCanvasElement</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">controls</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OrbitControls</span><span class="p">(</span><span class="nx">camera</span><span class="p">,</span> <span class="nx">canvasRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">controls</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">controls</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">scene</span> <span class="o">=</span> <span class="nx">createScene</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sceneRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">scene</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">render</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">sceneRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">sceneRef</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">render</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">render</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">handleResize</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">canvasRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">canvas</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="nx">camera</span><span class="p">.</span><span class="nx">aspect</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">/</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">camera</span><span class="p">.</span><span class="nx">updateProjectionMatrix</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nx">handleResize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;resize&#34;</span><span class="p">,</span> <span class="nx">handleResize</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&#34;resize&#34;</span><span class="p">,</span> <span class="nx">handleResize</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">canvasRef</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">sceneRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">sceneRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">newScene</span>: <span class="kt">Three.Scene</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="kr">type</span> <span class="o">===</span> <span class="nx">LightType</span><span class="p">.</span><span class="nx">RectAreaLight</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">newScene</span> <span class="o">=</span> <span class="nx">createScene</span><span class="p">(</span><span class="nx">MaterialType</span><span class="p">.</span><span class="nx">MESH_STANDARD_MATERIAL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">newScene</span> <span class="o">=</span> <span class="nx">createScene</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sceneRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">newScene</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="p">(</span><span class="kr">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.AmbientLight</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">ambientLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">AmbientLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">ambientLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.AmbientLightProbe</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">ambientLightProbe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">AmbientLightProbe</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">ambientLightProbe</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.DirectionalLight</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">directionalLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">DirectionalLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">directionalLight</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">directionalLight</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">directionalLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">directionalLight</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">directionalLightHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">DirectionalLightHelper</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nx">directionalLight</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">directionalLightHelper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.HemisphereLight</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">hemisphereLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">HemisphereLight</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="mh">0xb1e1ff</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="mh">0xb97a20</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">hemisphereLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">hemisphereLightHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">HemisphereLightHelper</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nx">hemisphereLight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="mi">5</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">hemisphereLightHelper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.HemisphereLightProbe</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">hemisphereLightProbe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">HemisphereLightProbe</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="mh">0xb1e1ff</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="mh">0xb97a20</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">hemisphereLightProbe</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.PointLight</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">pointLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">PointLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">pointLight</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">pointLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">pointLightHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">PointLightHelper</span><span class="p">(</span><span class="nx">pointLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">pointLightHelper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType</span><span class="p">.</span><span class="nx">RectAreaLight</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//RectAreaLightUniformsLib.init() //实际测试时发现即使不添加这行代码，场景似乎也依然正常渲染，没有看出差异
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">rectAreaLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">RectAreaLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">rectAreaLight</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">rectAreaLight</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">MathUtils</span><span class="p">.</span><span class="nx">degToRad</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">rectAreaLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">rectAreaLightHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RectAreaLightHelper</span><span class="p">(</span><span class="nx">rectAreaLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">rectAreaLightHelper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="nx">LightType.SpotLight</span>:
</span></span><span class="line"><span class="cl">        <span class="kt">const</span> <span class="nx">spotLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">SpotLight</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">spotLight</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">spotLight</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">spotLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">spotLight</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">spotLightHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Three</span><span class="p">.</span><span class="nx">SpotLightHelper</span><span class="p">(</span><span class="nx">spotLight</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newScene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">spotLightHelper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;???&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="kr">type</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;full-screen&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">buttonLables</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">label</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">button</span>
</span></span><span class="line"><span class="cl">              <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">label</span> <span class="o">===</span> <span class="kr">type</span> <span class="o">?</span> <span class="s2">&#34;button-selected&#34;</span> <span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">setType</span><span class="p">(</span><span class="nx">label</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">              <span class="p">}}</span>
</span></span><span class="line"><span class="cl">              <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="sb">`button</span><span class="si">${</span><span class="nx">index</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">label</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">})}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">canvasRef</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">HelloLight</span><span class="p">;</span>
</span></span></code></pre></div><blockquote>
<p>create-scene.ts 和 index.tsx 的代码非常多，并且我也没有写注释。<br>
但是如果之前章节中的示例你也都跟着 敲一遍，应该很容易看懂 这两个文件里的代码。</p>
</blockquote>
<h4 id="indexscss">index.scss：</h4>
<pre tabindex="0"><code>.full-screen, canvas {
    display: block;
    height: inherit;
    width: inherit;
}

.buttons {
    display: flex;
    justify-content: center;
    width: 100%;
    position: fixed;
    top: 30px;
}

.buttons button {
    width: 200px;
    height: 30px;
    margin-left: 20px;
    font-size: 18px;
    cursor: pointer;
}

.buttons button:first-child {
    margin-left: 0;
}

.button-selected{
    background-color:green;
    color: white;
}
</code></pre><p>若一切正常，实际运行后：</p>
<ol>
<li>点击网页中不同顶部的按钮，可以切换不同光对应的场景效果</li>
<li>点击并拖动鼠标 或 滚动鼠标滚轴，可以切换场景视角</li>
</ol>
<h3 id="遗留的疑惑">遗留的疑惑</h3>
<h4 id="第-1-个疑惑rectarealightuniformslib">第 1 个疑惑：RectAreaLightUniformsLib</h4>
<p>按照官方文档的说法，在使用 RectAreaLight 时，必须要执行 RectAreaLightUniformsLib.init() 的，但实际试验发现不执行这行代码也没有任何问题。</p>
<p><strong>为什么会这样？</strong></p>
<h4 id="第-2-个疑惑rectarealighthelper">第 2 个疑惑：RectAreaLightHelper</h4>
<p>实际运行发现，RectAreaLightHelper 所展示的光源的位置和方向与实际不符。</p>
<p>矩形面灯光的代码为：</p>
<pre tabindex="0"><code>const rectAreaLight = new Three.RectAreaLight(0xFFFFFF, 5, 12, 4)
rectAreaLight.position.set(0, 10, 0)
rectAreaLight.rotation.x = Three.MathUtils.degToRad(-90)
newScene.add(rectAreaLight)

const rectAreaLightHelper = new RectAreaLightHelper(rectAreaLight)
newScene.add(rectAreaLightHelper)
</code></pre><p>我们对 rectAreaLight 进行了 position(位置)、rotation(旋转) 设置，<strong>难道 对应的辅助对象并不会跟随同步变化？</strong></p>
<h2 id="额外的一些唠叨话">额外的一些唠叨话</h2>
<p>我是一边学习 Three.js 官方教程，一边写本系列文章。</p>
<p>本片文章的源头，对应的原始教程是：https://threejsfundamentals.org/threejs/lessons/threejs-lights.html</p>
<p>因为之前刚好学过 场景，按照当时编写的示例代码：</p>
<ol>
<li>月球围绕地球</li>
<li>地球围绕太阳</li>
<li>太阳自转</li>
</ol>
<p>我当时得出了一个结论：每一个 scene 实例都是一个相对独立的 场景空间，<strong>我想当然得认为这里面的独立也包含 场景中的 光</strong>。</p>
<p>所以最初我想实现 光 示例时这样的：</p>
<ol>
<li>一个主场景</li>
<li>主场景内，2 行 3 列 分布着 6 个子场景</li>
<li>这 6 个子场景里，分别包含这 6 中基础光源</li>
</ol>
<p>按照这个目标，我编写了代码，结果渲染后的场景画面，<strong>完全不是我预期的，实际结果是：6 个子场景上的灯光，完全混合在一起，并不是相互独立的</strong>。</p>
<p><strong>当时我完全懵的状态。</strong></p>
<p>经过 1 天的迷惑，查资料、QQ 交流群里询问其他人，直至我最终查阅了 scene.add() 函数源码，才明白过来，我那个结论是错误的。</p>
<pre tabindex="0"><code>sceneB.add(lightB)
sceneA.add(sceneB)
</code></pre><p>以上代码最终真正的执行，会将 lightB 添加到 sceneA 中。</p>
<p>尤其假设 lightB 光的类型为 环境光，而环境光是无处不在的，那么 lightB 会影响到所有 sceneA 中的物体。</p>
<p>这也就解释了为什么 “6 个子场景上的灯光，完全混合在一起，并不是相互独立的”。</p>
<p>或许你会疑惑？你说的这些不都已经在 <a href="https://github.com/puxiao/threejs-tutorial/blob/main/08%20Three.js%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%9C%BA%E6%99%AF.md" target="_blank" rel="noopener">Three.js 基础之场景.md</a> 一节中讲过了，怎么又说了一遍？</p>
<p>事实是我在进一步理解 场景、光 之后，又重新修改编辑了 之前章节的错误观点，所以你看到的时候都才是正确的。</p>
<p>我是一边学习，一边有新的知识领悟，然后再不断回头修改、补充之前文章中的相关知识点。</p>
<p><strong>我唠叨的这些目的，其实想表达 2 个事情：</strong></p>
<ol>
<li>学习 Three.js 的 类、函数、方法、属性时候，最好去看一下 three.js 的源码，绝对会加深你的 Three.js 理解和功力。</li>
<li>学习 Three.js 真的挺难，需要不断打破已有认知，若有些地方暂时无法理解也没关系，只要继续加油，终会搞明白的。</li>
</ol>
<p>唠叨结束。</p>
<p>本文学习了 光(Light)，按道理接下来应该学习 阴影(LightShadown)，但是下节我们先学习 镜头(Camera)，学完之后再回过头学习 阴影。</p>
<blockquote>
<p>明天是 2020 年 12 月 19 日，阿里巴巴 前端 D2 技术分享大会开幕，19 号、20 号 为期 2 天的前端技术直播会议分享。</p>
</blockquote>
<blockquote>
<p>花 98 元买的直播观看门票，不能浪费了，所以，换换脑子，未来 2 天暂停 Three.js 的学习。</p>
</blockquote>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">上一页</div>
    <a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/10.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%BA%B9%E7%90%86/" rel="next">10.Three.js 基础之纹理</a>
  </div>
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">下一页</div>
    <a href="/books/cg-notes/03.%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6%E5%BA%93/web-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/three.js/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-puxiao-three.js-%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/12.three.js-%E5%9F%BA%E7%A1%80%E4%B9%8B%E9%95%9C%E5%A4%B4/" rel="prev">12.Three.js 基础之镜头</a>
  </div>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 0001-01-01</p>

          



          


  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); 
    s.async = true;
    s.src = 'https://' + "ngte" + '.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2022 NGTE all rights reserved</p>
        </div>
    </div>
  </div>

  <script type="text/javascript" id="clstr_globe" async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script>
  
</footer>


    </main>
  </div>
</div>
<script src="//unpkg.com/heti/umd/heti-addon.min.js"></script>
<script>
  const heti = new Heti('.article');
  heti.autoSpacing();
</script>
<script type="text/javascript">
  window.$crisp = [];
  window.CRISP_WEBSITE_ID = "12adcc35-9621-4313-8262-62dc654b29d8";
  (function () {
    setTimeout(function() {
      d = document;
      s = d.createElement("script");
      s.src = "https://client.crisp.chat/l.js";
      s.async = 1;
      d.getElementsByTagName("head")[0].appendChild(s);
    }, 2500);
  })();
</script>
  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
      

    

    
    
    

    
    
    
      
      <script id="search-hit-algolia-template" type="text/html">
        <div class="search-hit">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a>
            </div>
            <div class="article-metadata search-hit-type">{{type}}</div>
            <p class="search-hit-description">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js" crossorigin="anonymous"></script>
      
      
    

    
    

    
    
    
    
      <script id="dsq-count-scr" src="https://ngte.disqus.com/count.js" async></script>
      
    

    
    
      
      
      
      
      
      
      
    

    
    <script src="/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js" type="module"></script>
    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
    
    <script src="/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js"></script>

    
    
    
    
    
    
    <script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>


    

    
    
    <script src="https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    <script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>

    


</body>
</html>
