<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>红包 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/solutions-series/%E7%94%B5%E5%95%86%E4%B8%8E%E6%96%B0%E9%9B%B6%E5%94%AE/%E7%BA%A2%E5%8C%85/</link><atom:link href="https://ng-tech.icu/books/solutions-series/%E7%94%B5%E5%95%86%E4%B8%8E%E6%96%B0%E9%9B%B6%E5%94%AE/%E7%BA%A2%E5%8C%85/index.xml" rel="self" type="application/rss+xml"/><description>红包</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>红包</title><link>https://ng-tech.icu/books/solutions-series/%E7%94%B5%E5%95%86%E4%B8%8E%E6%96%B0%E9%9B%B6%E5%94%AE/%E7%BA%A2%E5%8C%85/</link></image><item><title>红包分配</title><link>https://ng-tech.icu/books/solutions-series/%E7%94%B5%E5%95%86%E4%B8%8E%E6%96%B0%E9%9B%B6%E5%94%AE/%E7%BA%A2%E5%8C%85/%E7%BA%A2%E5%8C%85%E5%88%86%E9%85%8D/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/solutions-series/%E7%94%B5%E5%95%86%E4%B8%8E%E6%96%B0%E9%9B%B6%E5%94%AE/%E7%BA%A2%E5%8C%85/%E7%BA%A2%E5%8C%85%E5%88%86%E9%85%8D/</guid><description>&lt;h2 id="微信红包算法">微信红包算法&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="nf">getRandomMoney&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">LeftMoneyPackage&lt;/span> &lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// remainSize 剩余的红包数量
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// remainMoney 剩余的钱
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainSize&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainSize&lt;/span>&lt;span class="o">--;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">double&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">round&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainMoney&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Random&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Random&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="n">min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.01&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainMoney&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainSize&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="n">money&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">nextDouble&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">money&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">money&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">min&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="mf">0.01&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">money&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">money&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">floor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">money&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainSize&lt;/span>&lt;span class="o">--;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_leftMoneyPackage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remainMoney&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">money&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">money&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>测试数据。测试结果测试随机红包以上面的初始化数据(30 人抢 500 块)，执行了两次，结果如下: // 第一次 15.69 21.18 24.11 30.85 0.74 20.85 2.96 13.43 11.12 24.87 1.86 19.62 5.97 29.33 3.05 26.94 18.69 34.47 9.4 29.83 5.17 24.67 17.09 29.96 6.77 5.79 0.34 23.89 40.44 0.92&lt;/p>
&lt;p>// 第二次 10.44 18.01 17.01 21.07 11.87 4.78 30.14 32.05 16.68 20.34 12.94 27.98 9.31 17.97 12.93 28.75 12.1 12.77 7.54 10.87 4.16 25.36 26.89 5.73 11.59 23.91 17.77 15.85 23.42 9.77 对应图表如下：&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://pic4.zhimg.com/383a5c9dd7451db4d1bde8f59dcc66fb_b.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure> 还有一张:
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://pic1.zhimg.com/f3db54ba944f208ed8917651cbb7ce70_b.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure> 多次均值 200 次
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://pic2.zhimg.com/90c57b9fed9398b866e636a910e8f86d_b.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure> 2000 次
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://pic1.zhimg.com/9c9d0c51d6528c2ac6ae599a640c271c_b.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure> 可以看到，这个算法可以让大家抢到的红包面额在概率上是大致均匀的。&lt;/p></description></item></channel></rss>