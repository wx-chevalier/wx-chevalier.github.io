<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="SQL 条件查询 限制查询是筛选结果集的一种方法，但是我们可以使用 WHERE 子句获得更多具体信息。WHERE 命令后跟您要过滤的条件。 SELECT * FROM artists WHERE [Filter Conditions]; Conditions 条件只是对或错的陈述。数据库将使用这些语句并在扫描表时评估所有行中的"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2/"><meta property="og:title" content="条件查询 | Next-gen Tech Edu"><meta property="og:description" content="SQL 条件查询 限制查询是筛选结果集的一种方法，但是我们可以使用 WHERE 子句获得更多具体信息。WHERE 命令后跟您要过滤的条件。 SELECT * FROM artists WHERE [Filter Conditions]; Conditions 条件只是对或错的陈述。数据库将使用这些语句并在扫描表时评估所有行中的"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>条件查询 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=d2a7c9b69af1aa30357db2b5f5ec7a87><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">数据查询</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb4a53c254f95fd092419ee1de3bc6045")' href=#idb4a53c254f95fd092419ee1de3bc6045 aria-expanded=false aria-controls=idb4a53c254f95fd092419ee1de3bc6045 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/mysql-notes/01.sql/>01.SQL</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb4a53c254f95fd092419ee1de3bc6045 aria-expanded=false aria-controls=idb4a53c254f95fd092419ee1de3bc6045><i class="fa-solid fa-angle-down" id=caret-idb4a53c254f95fd092419ee1de3bc6045></i></a></div><ul class="nav docs-sidenav collapse show" id=idb4a53c254f95fd092419ee1de3bc6045><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ide10c1818ea98d006dd6a4d5a7bd61735")' href=#ide10c1818ea98d006dd6a4d5a7bd61735 aria-expanded=false aria-controls=ide10c1818ea98d006dd6a4d5a7bd61735 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd5903bdc925fc1745859f8b52c0f5e7e")' href=#idd5903bdc925fc1745859f8b52c0f5e7e aria-expanded=false aria-controls=idd5903bdc925fc1745859f8b52c0f5e7e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/>数据操作</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd5903bdc925fc1745859f8b52c0f5e7e aria-expanded=false aria-controls=idd5903bdc925fc1745859f8b52c0f5e7e><i class="fa-solid fa-angle-right" id=caret-idd5903bdc925fc1745859f8b52c0f5e7e></i></a></div><ul class="nav docs-sidenav collapse" id=idd5903bdc925fc1745859f8b52c0f5e7e><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/odps/>ODPS</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5/>数据插入</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0/>数据更新</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%96%E9%94%AE/>数据库外键</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id17f54b977e876fcdeed300c3bebf154f")' href=#id17f54b977e876fcdeed300c3bebf154f aria-expanded=false aria-controls=id17f54b977e876fcdeed300c3bebf154f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/>数据查询</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id17f54b977e876fcdeed300c3bebf154f aria-expanded=false aria-controls=id17f54b977e876fcdeed300c3bebf154f><i class="fa-solid fa-angle-down" id=caret-id17f54b977e876fcdeed300c3bebf154f></i></a></div><ul class="nav docs-sidenav collapse show" id=id17f54b977e876fcdeed300c3bebf154f><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2/>分页查询</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E8%81%94%E6%8E%A5%E6%9F%A5%E8%AF%A2/>联接查询</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E8%A7%86%E5%9B%BE/>视图</a></li><li class="child level active"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2/>条件查询</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E7%BB%9F%E8%AE%A1%E4%B8%8E%E8%81%9A%E5%90%88/>统计与聚合</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E5%AD%90%E6%9F%A5%E8%AF%A2/>子查询</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc18a7baba70209c4458ed7b882f7b702")' href=#idc18a7baba70209c4458ed7b882f7b702 aria-expanded=false aria-controls=idc18a7baba70209c4458ed7b882f7b702 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/>数据库设计</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc18a7baba70209c4458ed7b882f7b702 aria-expanded=false aria-controls=idc18a7baba70209c4458ed7b882f7b702><i class="fa-solid fa-angle-right" id=caret-idc18a7baba70209c4458ed7b882f7b702></i></a></div><ul class="nav docs-sidenav collapse" id=idc18a7baba70209c4458ed7b882f7b702><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E8%AE%BE%E8%AE%A1%E8%A7%84%E7%BA%A6/>设计规约</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1/>数据建模</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F/>数据库范式</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id0f2f75f618542fc8a3a1556245f3bd46")' href=#id0f2f75f618542fc8a3a1556245f3bd46 aria-expanded=false aria-controls=id0f2f75f618542fc8a3a1556245f3bd46 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/>数据类型</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id0f2f75f618542fc8a3a1556245f3bd46 aria-expanded=false aria-controls=id0f2f75f618542fc8a3a1556245f3bd46><i class="fa-solid fa-angle-right" id=caret-id0f2f75f618542fc8a3a1556245f3bd46></i></a></div><ul class="nav docs-sidenav collapse" id=id0f2f75f618542fc8a3a1556245f3bd46><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/>时间与日期</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B/>数值类型</a></li><li class="child level"><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/%E5%AD%97%E7%AC%A6%E4%B8%B2/>字符串</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#多项匹配>多项匹配</a></li></ul><ul><li><a href=#and>AND</a></li><li><a href=#or>OR</a></li><li><a href=#not>NOT</a></li><li><a href=#ordering-and-parenthesis>Ordering and Parenthesis</a></li></ul><ul><li><a href=#模糊检索>模糊检索</a><ul><li><a href=#like>LIKE</a></li><li><a href=#ilkie>ILKIE</a></li><li><a href=#similar-to>SIMILAR TO</a></li></ul></li><li><a href=#null-过滤>NULL 过滤</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>条件查询</h1><div class=article-style><h1 id=sql-条件查询>SQL 条件查询</h1><p>限制查询是筛选结果集的一种方法，但是我们可以使用 WHERE 子句获得更多具体信息。WHERE 命令后跟您要过滤的条件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=p>[</span><span class=n>Filter</span><span class=w> </span><span class=n>Conditions</span><span class=p>];</span><span class=w>
</span></span></span></code></pre></div><h1 id=conditions>Conditions</h1><p>条件只是对或错的陈述。数据库将使用这些语句并在扫描表时评估所有行中的语句，并仅返回真实结果。举例来说，假设我们要查看 ID 为 85 的艺术家的姓名。条件为 id = 85。请通过运行以下查询来尝试该条件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>85</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>该查询指示数据库扫描 Artists 表并获取条件（id = 85）为真的所有行。如您所见，唯一 ID 为 85 的艺术家是 Frank Sinatra。或者，如果我们要查找“Santana”上的所有信息，则条件将为 <code>name=“Santana”</code>：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>artists</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Santana&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=多项匹配>多项匹配</h2><p>在上面的示例中，我们正在查询唯一字段，因此我们只能得到一个答案。但是，情况并非总是如此。在轨道表中，许多不同的轨道属于同一张专辑，您可以看到在轨道数据库中有一个 album_id 列。例如，如果我们要获取属于专辑的所有曲目，其 ID 为 89，则可以运行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>album_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>89</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h1 id=条件组合>条件组合</h1><h2 id=and>AND</h2><p>在 SQL 中，您可以按任意数量的条件进行过滤。您可以通过在每个新条件之间使用 AND 运算符来添加其他条件。让我们看一下上面写的查询，说我们只想要专辑 89（American Idiot）中的曲目，并且也仅由 Green Day 自己创作。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>album_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>89</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>composer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Green Day&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=or>OR</h2><p>当您关心是否两个条件都为真时，也可以使用 OR 来定义多个 WHERE 条件。例如，以下查询返回由“Green Day”或“ AC / DC”组成的轨道。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>composer</span><span class=o>=</span><span class=s1>&#39;Green Day&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>composer</span><span class=o>=</span><span class=s1>&#39;AC/DC&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=not>NOT</h2><p>您可以通过简单地将 NOT 运算符放在条件前面来反转条件。例如，以下查询不是由 Green Day 组成的所有内容。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=n>composer</span><span class=o>=</span><span class=s1>&#39;Green Day&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=ordering-and-parenthesis>Ordering and Parenthesis</h2><p>您可以结合使用任意数量的 OR 和 AND 命令来描述您的条件。就像在数学课中一样，SQL 具有一个操作顺序。AND 本质上是逻辑乘法]，而 OR 是逻辑加法，因此先执行与运算的条件，然后才执行或运算。</p><p>就像数学一样，您可以使用括号指定运算顺序。最佳做法是，在逻辑和顺序不太明确的地方使用括号。为了进行探索，让我们尝试拉动所有组成“ Green Day”的曲目，以及通过 AC / DC 进行的超过 240,000 毫秒的所有曲目。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>composer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Green Day&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=p>(</span><span class=n>composer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;AC/DC&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>milliseconds</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>240000</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>请注意，使用括号可以清楚地表明我们只想要更长的 AC / DC 歌曲。您会看到仍然列出了低于 240,000 毫秒的“Green Day”歌曲。但是，如果我们更改括号，则逻辑也会将毫秒条件应用于所有 Green Day 歌曲。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=p>(</span><span class=n>composer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Green Day&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>composer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;AC/DC&#39;</span><span class=p>)</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>milliseconds</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>240000</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h1 id=操作符>操作符</h1><p>到目前为止，我们仅使用等于（=）或大于（>）运算符来创建条件。还有更多可供我们使用的东西。他们是不言自明的，只需要一些练习就可以下来。下表描述了最常用的运算符：</p><table><thead><tr><th>OPERATOR</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>=</td><td>equal</td></tr><tr><td>&lt;</td><td>less than</td></tr><tr><td>></td><td>greater than</td></tr><tr><td>&lt;=</td><td>less than or equal</td></tr><tr><td>>=</td><td>greater than or equal</td></tr><tr><td>!=</td><td>not equal</td></tr><tr><td>&lt;></td><td>not equal (yup, there are two ways)</td></tr></tbody></table><p>典型的使用方式如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>unit_price</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=p>.</span><span class=mi>99</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>milliseconds</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>250000</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=模糊检索>模糊检索</h2><p>当您想匹配一个精确的字符串（例如 composer =&lsquo;Green Day&rsquo;）时，您可以简单地使用等号（=）运算符。但是，该条件仅能完全匹配，因此只能匹配由 Green Day 独家创作的歌曲。如果我们想查找由“Green Day”组成的所有曲目（无论是单独还是与其他艺术家一起演奏），我们都需要能够匹配行列不等于“绿日”但包含“绿日”的行 在他们的某个地方。要对字符串的一部分进行条件匹配或在模式之后识别字符串，我们可以使用这些字符串模式匹配运算符之一。</p><table><thead><tr><th>OPERATOR</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>LIKE</td><td>a string matches a pattern</td></tr><tr><td>ILIKE</td><td>case insensitive version of LIKE</td></tr><tr><td>SIMILAR TO</td><td>a string matches a regex pattern</td></tr></tbody></table><h3 id=like>LIKE</h3><p>Like 是将字符串匹配到模式的简单/轻巧的方法。模式是可以使用一些表示通配符的特殊符号的字符串。除了常规字符外，LIKE 可以使用的两个通配符是：</p><table><thead><tr><th>SYMBOL</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>_</code></td><td>matches any single character</td></tr><tr><td><code>%</code></td><td>matches any number of characters</td></tr></tbody></table><p>为了制作与任何字符串内的“ Green Day”相匹配的模式，我们在两侧放置％符号，这意味着在 Green Day 之前或之后可以有任意数量的字符。因此，以这种模式为条件，在运行以下查询时，数据库将扫描每一行中的匹配项并返回正确的匹配项。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>SELECT</span> <span class=o>*</span> <span class=nx>FROM</span> <span class=nx>tracks</span> <span class=nx>WHERE</span> <span class=nx>composer</span> <span class=nx>LIKE</span> <span class=s1>&#39;%Green Day%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p>页面搜索严禁左模糊或者全模糊，如果需要请走搜索引擎来解决；索引文件具有 B-Tree 的最左前缀匹配特性，如果左边的值未确定，那么无法使用此索引。</p><h3 id=ilkie>ILKIE</h3><p>如果您希望模式不关心字符是大写还是小写，可以使用 ILIKE。I 代表“不区分大小写”。因此，如果我们想查找所有带有“ day”一词的作曲家，无论大小写，我们都可以使用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>composer</span><span class=w> </span><span class=k>ILIKE</span><span class=w> </span><span class=s1>&#39;%day%&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=s1>&#39;Little Richard&#39;</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%Richard&#39;</span><span class=w>        </span><span class=k>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s1>&#39;Little Richard&#39;</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;_______Richard&#39;</span><span class=w>  </span><span class=k>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s1>&#39;Little Richard&#39;</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;______Richard&#39;</span><span class=w>   </span><span class=k>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s1>&#39;Little Richard&#39;</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%richard&#39;</span><span class=w>        </span><span class=k>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s1>&#39;Little Richard&#39;</span><span class=w> </span><span class=k>ILIKE</span><span class=w> </span><span class=s1>&#39;%richARD&#39;</span><span class=w>       </span><span class=k>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s1>&#39;Little Richard&#39;</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;_ittle %&#39;</span><span class=w>        </span><span class=k>true</span><span class=w>
</span></span></span></code></pre></div><h3 id=similar-to>SIMILAR TO</h3><p>SIMILAR 是使用称为正则表达式（regexp）的标准模式格式将字符串与模式匹配的更高级方法。这些可以变得非常高级（对于本教程来说太高级了），因此我们将不对其进行详细介绍。但是，如果您想进一步研究，我们在这里提供了完整正则 PostgreSQL 表达式页面。</p><p>对于 SIMILAR TO 的快速示例，这是一个使用正则表达式的查询，以匹配由 AC / DC 或 Green Day 组成的所有轨道。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tracks</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>composer</span><span class=w> </span><span class=k>SIMILAR</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;%(AC/DC|Green Day)%&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=null-过滤>NULL 过滤</h2><p>数据库中的空单元格称为 NULL。它们有些特殊的价值，处理方式也有所不同。您不能使用=或！=运算符，而是使用如图所示的 IS 运算符。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=w>      </span><span class=c1>-- matches NULL values
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>  </span><span class=c1>-- matches all non NULL values
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>expression</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>contacts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>last_name</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h1 id=case-when>Case-When</h1><p>Case 具有两种格式。简单 Case 函数和 Case 搜索函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CASE</span><span class=w> </span><span class=n>expression</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHEN</span><span class=w> </span><span class=n>condition1</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>result1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHEN</span><span class=w> </span><span class=n>condition2</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>result2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHEN</span><span class=w> </span><span class=n>conditionN</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>resultN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>ELSE</span><span class=w> </span><span class=k>result</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>field_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 简单Case函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CASE</span><span class=w> </span><span class=n>sex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;其他&#39;</span><span class=w> </span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Case搜索函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;男&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;女&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;其他&#39;</span><span class=w> </span><span class=k>END</span><span class=w> </span><span class=n>sex_description</span><span class=w>
</span></span></span></code></pre></div><p>这两种方式，可以实现相同的功能。简单 Case 函数的写法相对比较简洁，但是和 Case 搜索函数相比，功能方面会有些限制，比如写判断式。
还有一个需要注意的问题，Case 函数只返回第一个符合条件的值，剩下的 Case 部分将会被自动忽略。</p><pre tabindex=0><code>--比如说，下面这段SQL，你永远无法得到“第二类”这个结果
CASE WHEN col_1 IN ( &#39;a&#39;, &#39;b&#39;) THEN &#39;第一类&#39;
WHEN col_1 IN (&#39;a&#39;)       THEN &#39;第二类&#39;
ELSE&#39;其他&#39; END
</code></pre><p>有如下数据:(为了看得更清楚，我并没有使用国家代码，而是直接用国家名作为 Primary Key)</p><table><thead><tr><th>国家(country)</th><th>人口(population)</th></tr></thead><tbody><tr><td>中国</td><td>600</td></tr><tr><td>美国</td><td>100</td></tr><tr><td>加拿大</td><td>100</td></tr><tr><td>英国</td><td>200</td></tr><tr><td>法国</td><td>300</td></tr><tr><td>日本</td><td>250</td></tr><tr><td>德国</td><td>200</td></tr><tr><td>墨西哥</td><td>50</td></tr><tr><td>印度</td><td>250</td></tr></tbody></table><p>根据这个国家人口数据，统计亚洲和北美洲的人口数量。应该得到下面这个结果。</p><table><thead><tr><th>洲</th><th>人口</th></tr></thead><tbody><tr><td>亚洲</td><td>1100</td></tr><tr><td>北美洲</td><td>250</td></tr><tr><td>其他</td><td>700</td></tr></tbody></table><p>想要解决这个问题，你会怎么做？生成一个带有洲 Code 的 View，是一个解决方法，但是这样很难动态的改变统计的方式。
如果使用 Case 函数，SQL 代码如下:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w>  </span><span class=k>SUM</span><span class=p>(</span><span class=n>population</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CASE</span><span class=w> </span><span class=n>country</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;中国&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;亚洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;印度&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;亚洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;日本&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;亚洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;美国&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;北美洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;加拿大&#39;</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;北美洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;墨西哥&#39;</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;北美洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;其他&#39;</span><span class=w> </span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w>    </span><span class=n>Table_A</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=n>country</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;中国&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;亚洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;印度&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;亚洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;日本&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;亚洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;美国&#39;</span><span class=w>     </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;北美洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;加拿大&#39;</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;北美洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;墨西哥&#39;</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;北美洲&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ELSE</span><span class=w> </span><span class=s1>&#39;其他&#39;</span><span class=w> </span><span class=k>END</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>同样的，我们也可以用这个方法来判断工资的等级，并统计每一等级的人数。SQL 代码如下；</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>500</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>600</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>600</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>800</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>800</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>1000</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;4&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ELSE</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>END</span><span class=w> </span><span class=n>salary_class</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w>    </span><span class=n>Table_A</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>500</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>500</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>600</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>600</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>800</span><span class=w>  </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHEN</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>800</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>salary</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>1000</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s1>&#39;4&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ELSE</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>END</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>还可以用一个 SQL 语句完成不同条件的分组合并：
有如下数据</p><table><thead><tr><th>国家(country)</th><th>性别(sex)</th><th>人口(population)</th></tr></thead><tbody><tr><td>中国</td><td>1</td><td>340</td></tr><tr><td>中国</td><td>2</td><td>260</td></tr><tr><td>美国</td><td>1</td><td>45</td></tr><tr><td>美国</td><td>2</td><td>55</td></tr><tr><td>加拿大</td><td>1</td><td>51</td></tr><tr><td>加拿大</td><td>2</td><td>49</td></tr><tr><td>英国</td><td>1</td><td>40</td></tr><tr><td>英国</td><td>2</td><td>60</td></tr></tbody></table><p>按照国家和性别进行分组，得出结果如下</p><table><thead><tr><th>国家</th><th>男</th><th>女</th></tr></thead><tbody><tr><td>中国</td><td>340</td><td>260</td></tr><tr><td>美国</td><td>45</td><td>55</td></tr><tr><td>加拿大</td><td>51</td><td>49</td></tr><tr><td>英国</td><td>40</td><td>60</td></tr></tbody></table><p>普通情况下，用 UNION 也可以实现用一条语句进行查询。但是那样增加消耗(两个 Select 部分)，而且 SQL 语句会比较长。下面是一个是用 Case 函数来完成这个功能的例子</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>country</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SUM</span><span class=p>(</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>population</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>),</span><span class=w>  </span><span class=c1>--男性人口
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SUM</span><span class=p>(</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;2&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>population</span><span class=w> </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w>   </span><span class=c1>--女性人口
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>FROM</span><span class=w>  </span><span class=n>Table_A</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>country</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>这样我们使用 Select，完成对二维表的输出形式，充分显示了 Case 函数的强大。</p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E8%A7%86%E5%9B%BE/ rel=next>视图</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/mysql-notes/01.sql/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/%E7%BB%9F%E8%AE%A1%E4%B8%8E%E8%81%9A%E5%90%88/ rel=prev>统计与聚合</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>