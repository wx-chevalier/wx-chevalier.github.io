<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>å†…å­˜ä¼˜åŒ– | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/</link><atom:link href="https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/index.xml" rel="self" type="application/rss+xml"/><description>å†…å­˜ä¼˜åŒ–</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>å†…å­˜ä¼˜åŒ–</title><link>https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/</link></image><item><title>å†…å­˜ä½¿ç”¨åˆ†æ</title><link>https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/</guid><description>&lt;h1 id="å†…å­˜ä½¿ç”¨åˆ†æ">å†…å­˜ä½¿ç”¨åˆ†æ&lt;/h1>
&lt;p>Chrome DevTools æ§åˆ¶å°ä¸Šæœ‰ä¸€ä¸ªå°ä¼—çš„ API å« queryObjects()ï¼Œå®ƒå¯ä»¥ä»åŸå‹æ ‘ä¸ŠåæŸ¥æ‰€æœ‰ç›´æ¥æˆ–é—´æ¥çš„ç»§æ‰¿äº†æŸä¸ªå¯¹è±¡çš„å…¶å®ƒå¯¹è±¡ï¼Œæ¯”å¦‚ queryObjects(Array.prototype)å¯ä»¥æ‹¿åˆ°æ‰€æœ‰çš„æ•°ç»„å¯¹è±¡ï¼ŒqueryObjects(Object.prototype)åˆ™åŸºæœ¬ä¸Šå¯ä»¥æ‹¿åˆ°é¡µé¢é‡Œçš„æ‰€æœ‰å¯¹è±¡äº†ï¼ˆé™¤äº†ç»§æ‰¿è‡ª Object.create(null)çš„å¯¹è±¡ä¹‹å¤–ï¼‰ã€‚è€Œä¸”å…³é”®æ˜¯è¿™ä¸ª API ä¼šåœ¨å†…å­˜é‡Œæœç´¢å¯¹è±¡å‰å…ˆè¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ã€‚&lt;/p></description></item><item><title>å†…å­˜æ³„éœ²ä¼˜åŒ–</title><link>https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-tuning-notes/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/</guid><description>&lt;h1 id="å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½">å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½&lt;/h1>
&lt;p>æ— è®ºæ˜¯åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿã€æœåŠ¡ç«¯åº”ç”¨ç¨‹åºè¿˜æ˜¯ iOSã€Android åŸç”Ÿåº”ç”¨éƒ½ä¼šå­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼ŒWeb åº”ç”¨è‡ªç„¶ä¹Ÿä¸å¯é¿å…åœ°å­˜åœ¨ç€ç±»ä¼¼çš„é—®é¢˜ã€‚è™½ç„¶å› ä¸ºç½‘é¡µå¾€å¾€éƒ½æ˜¯å³ç”¨å³èµ°ï¼Œè¾ƒå°‘åœ°å­˜åœ¨æŸä¸ªç½‘é¡µé•¿æœŸè¿è¡Œçš„é—®é¢˜ï¼Œå³ä½¿å­˜åœ¨å†…å­˜æ³„æ¼å¯èƒ½è¡¨ç°åœ°ä¹Ÿä¸æ˜æ˜¾ï¼›ä½†æ˜¯åœ¨æŸäº›æ•°æ®å±•ç¤ºå‹çš„ï¼Œéœ€è¦é•¿æœŸè¿è¡Œçš„é¡µé¢ä¸Šï¼Œå¦‚æœä¸åŠæ—¶è§£å†³å†…å­˜æ³„æ¼å¯èƒ½ä¼šå¯¼è‡´ç½‘é¡µå æ®è¿‡å¤§åœ°å†…å­˜ï¼Œä¸ä»…å½±å“é¡µé¢æ€§èƒ½ï¼Œè¿˜å¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„å´©æºƒã€‚&lt;a href="https://parg.co/UHG" target="_blank" rel="noopener">å‰ç«¯æ¯å‘¨æ¸…å•&lt;/a>æ¨èè¿‡çš„ &lt;a href="https://parg.co/bnw" target="_blank" rel="noopener">How JavaScript works&lt;/a> å°±æ˜¯éå¸¸ä¸é”™åœ°ä»‹ç» JavaScript è¿è¡Œæœºåˆ¶çš„ç³»åˆ—æ–‡ç« ï¼Œå…¶ä¹Ÿå¯¹å†…å­˜ç®¡ç†ä¸å†…å­˜æ³„æ¼æœ‰è¿‡åˆ†æï¼Œæœ¬æ–‡éƒ¨åˆ†å›¾ç‰‡ä¸ç¤ºä¾‹ä»£ç å³æ¥è‡ªæ­¤ç³»åˆ—ã€‚&lt;/p>
&lt;p>ç±»ä¼¼äº C è¿™æ ·çš„è¯­è¨€æä¾›äº† &lt;code>malloc()&lt;/code> ä¸ &lt;code>free()&lt;/code> è¿™æ ·çš„åº•å±‚å†…å­˜ç®¡ç†åŸå­æ“ä½œï¼Œå¼€å‘è€…éœ€è¦æ˜¾å¼æ‰‹åŠ¨åœ°è¿›è¡Œå†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾ï¼›è€Œ Java è¿™æ ·çš„è¯­è¨€åˆ™æ˜¯æä¾›äº†è‡ªåŠ¨åŒ–çš„å†…å­˜å›æ”¶æœºåˆ¶ï¼Œç¬”è€…åœ¨&lt;a href="https://parg.co/UcF" target="_blank" rel="noopener">åƒåœ¾å›æ”¶ç®—æ³•ä¸ JVM åƒåœ¾å›æ”¶å™¨ç»¼è¿°&lt;/a>ä¸€æ–‡ä¸­æœ‰è¿‡ä»‹ç»ã€‚JavaScript ä¹Ÿæ˜¯é‡‡ç”¨çš„è‡ªåŠ¨åŒ–å†…å­˜å›æ”¶æœºåˆ¶ï¼Œæ— è®ºæ˜¯ Objectã€String ç­‰éƒ½æ˜¯ç”±åƒåœ¾å›æ”¶è¿›ç¨‹è‡ªåŠ¨å›æ”¶å¤„ç†ã€‚è‡ªåŠ¨åŒ–å†…å­˜å›æ”¶å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬å°±å¯ä»¥å¿½ç•¥å†…å­˜ç®¡ç†çš„ç›¸å…³æ“ä½œï¼Œåè€Œå¯èƒ½ä¼šå¯¼è‡´æ›´ä¸æ˜“å‘ç°çš„å†…å­˜æ³„æ¼å‡ºç°ã€‚&lt;/p>
&lt;h1 id="å†…å­˜åˆ†é…ä¸å›æ”¶">å†…å­˜åˆ†é…ä¸å›æ”¶&lt;/h1>
&lt;p>ç¬”è€…åœ¨ &lt;a href="https://parg.co/Ucj" target="_blank" rel="noopener">JavaScript Event Loop æœºåˆ¶è¯¦è§£ä¸ Vue.js ä¸­å®è·µåº”ç”¨&lt;/a>ä¸€æ–‡ä¸­ä»‹ç»è¿‡ JavaScript çš„å†…å­˜æ¨¡å‹ï¼Œå…¶ä¸»è¦ä¹Ÿæ˜¯ç”±å †ã€æ ˆã€é˜Ÿåˆ—ä¸‰æ–¹é¢ç»„æˆï¼š&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/wx-chevalier/OSS/raw/master/2017/8/1/1-ZSFHnq9iMHIApVLcgwczPQ.png?raw=true" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>å…¶ä¸­é˜Ÿåˆ—æŒ‡çš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ã€æ ˆå°±æ˜¯å‡½æ•°æ‰§è¡Œæ ˆï¼Œå…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://coding.net/u/hoteam/p/Cache/git/raw/master/2017/10/1/1-W7L7JN5q4p7w2E7HbBYS3g.jpeg" alt="JavaScript æ ˆæ¨¡å‹" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>è€Œä¸»è¦çš„ç”¨æˆ·åˆ›å»ºçš„å¯¹è±¡å°±å­˜æ”¾åœ¨å †ä¸­ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½æ‰€éœ€è¦å…³æ³¨çš„ä¸»è¦çš„åŒºåŸŸã€‚æ‰€è°“å†…å­˜ï¼Œä»ç¡¬ä»¶çš„è§’åº¦æ¥çœ‹ï¼Œå°±æ˜¯æ— æ•°è§¦å‘å™¨çš„ç»„åˆï¼›æ¯ä¸ªè§¦å‘å™¨èƒ½å¤Ÿå­˜æ”¾ 1 bit ä½çš„æ•°æ®ï¼Œä¸åŒçš„è§¦å‘å™¨ç”±å”¯ä¸€çš„æ ‡è¯†ç¬¦å®šä½ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è¯¥æ ‡è¯†ç¬¦è¯»å†™è¯¥è§¦å‘å™¨ã€‚æŠ½è±¡æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å†…å­˜å½“åšæ¯”ç‰¹æ•°ç»„ï¼Œè€Œæ•°æ®å°±æ˜¯åœ¨å†…å­˜ä¸­é¡ºåºæ’å¸ƒï¼š&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://camo.githubusercontent.com/53847fa71f5bb05c52788adddb2d61efe847eecb/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f3830302f312a3561426f75346f6e6c314238786c67776f4754444f672e706e67" alt="1*W7L7JN5q4p7w2E7HbBYS3g" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>JavaScript ä¸­å¼€å‘è€…å¹¶ä¸éœ€è¦æ‰‹åŠ¨åœ°ä¸ºå¯¹è±¡ç”³è¯·å†…å­˜ï¼Œåªéœ€è¦å£°æ˜å˜é‡ï¼ŒJavaScript Runtime å³å¯ä»¥è‡ªåŠ¨åœ°åˆ†é…å†…å­˜ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">374&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// allocates memory for a number
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;sessionstack&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// allocates memory for a string
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">o&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span> &lt;span class="c1">// allocates memory for an object and its contained values
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;str&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// (like object) allocates memory for the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// array and its contained values
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="c1">// allocates a function (which is a callable object)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// function expressions also allocate an object
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">someElement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">someElement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">style&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">backgroundColor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;blue&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æŸä¸ªå¯¹è±¡çš„å†…å­˜ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºäº†å†…å­˜åˆ†é…ã€å†…å­˜ä½¿ç”¨ä¸å†…å­˜å›æ”¶è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œå½“æŸä¸ªå¯¹è±¡ä¸å†è¢«éœ€è¦æ—¶ï¼Œå®ƒå°±åº”è¯¥è¢«æ¸…é™¤å›æ”¶ï¼›æ‰€è°“çš„åƒåœ¾å›æ”¶å™¨ï¼ŒGarbage Collector å³æ˜¯è´Ÿè´£è¿½è¸ªå†…å­˜åˆ†é…æƒ…å†µã€åˆ¤æ–­æŸä¸ªè¢«åˆ†é…çš„å†…å­˜æ˜¯å¦æœ‰ç”¨ï¼Œå¹¶ä¸”è‡ªåŠ¨å›æ”¶æ— ç”¨çš„å†…å­˜ã€‚å¤§éƒ¨åˆ†çš„åƒåœ¾å›æ”¶å™¨æ˜¯æ ¹æ®å¼•ç”¨(Reference)æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œæ‰€è°“çš„å¼•ç”¨å³æ˜¯æŸä¸ªå¯¹è±¡æ˜¯å¦ä¾èµ–äºå…¶ä»–å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨ä¾èµ–å…³ç³»å³å­˜åœ¨å¼•ç”¨ï¼›è­¬å¦‚æŸä¸ª JavaScript å¯¹è±¡å¼•ç”¨äº†å®ƒçš„åŸå‹å¯¹è±¡ã€‚æœ€ç®€å•çš„åƒåœ¾å›æ”¶ç®—æ³•å³æ˜¯å¼•ç”¨è®¡æ•°(Reference Counting)ï¼Œå³æ¸…é™¤æ‰€æœ‰é›¶å¼•ç”¨çš„å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">o1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">o2&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 2 objects are created.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;o2&amp;#39; is referenced by &amp;#39;o1&amp;#39; object as one of its properties.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// None can be garbage-collected
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">o3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">o1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// the &amp;#39;o3&amp;#39; variable is the second thing that
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// has a reference to the object pointed by &amp;#39;o1&amp;#39;.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">o1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// now, the object that was originally in &amp;#39;o1&amp;#39; has a
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// single reference, embodied by the &amp;#39;o3&amp;#39; variable
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">o4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">o3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">o2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// reference to &amp;#39;o2&amp;#39; property of the object.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// This object has now 2 references: one as
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// a property.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// The other as the &amp;#39;o4&amp;#39; variable
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">o3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;374&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// The object that was originally in &amp;#39;o1&amp;#39; has now zero
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// references to it.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// It can be garbage-collected.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// However, what was its &amp;#39;o2&amp;#39; property is still
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// referenced by the &amp;#39;o4&amp;#39; variable, so it cannot be
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// freed.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">o4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// what was the &amp;#39;o2&amp;#39; property of the object originally in
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;o1&amp;#39; has zero references to it.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// It can be garbage collected.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸è¿‡è¿™ç§ç®—æ³•å¾€å¾€å—åˆ¶äºå¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œå³ä¸¤ä¸ªæ— ç”¨çš„å¯¹è±¡ç›¸äº’å¼•ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">o1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">o2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">o1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">p&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">o2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// o1 references o2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">o2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">p&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">o1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// o2 references o1. This creates a cycle.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">f&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç¨ä¸ºå¤æ‚çš„ç®—æ³•å³æ˜¯æ‰€è°“çš„æ ‡è®°-æ¸…é™¤(Mark-Sweep)ç®—æ³•ï¼Œå…¶æ ¹æ®æŸä¸ªå¯¹è±¡æ˜¯å¦å¯è¾¾æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å¯ç”¨ã€‚æ ‡è®°-æ¸…é™¤ç®—æ³•ä¼šä»æŸä¸ªæ ¹å…ƒç´ å¼€å§‹ï¼Œè­¬å¦‚ window å¯¹è±¡å¼€å§‹ï¼Œæ²¿ç€å¼•ç”¨æ ‘å‘ä¸‹éå†ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾çš„å¯¹è±¡ä¸ºå¯ç”¨ï¼Œå¹¶ä¸”æ¸…é™¤å…¶ä»–æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚&lt;/p>
&lt;p>2012 å¹´ä¹‹åï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨éƒ½å®è·µäº†åŸºäºæ ‡è®°-æ¸…é™¤ç®—æ³•çš„åƒåœ¾å›æ”¶å™¨ï¼Œå¹¶ä¸”å„è‡ªä¹Ÿè¿›è¡Œæœ‰é’ˆå¯¹æ€§åœ°ä¼˜åŒ–ã€‚&lt;/p>
&lt;h1 id="å†…å­˜æ³„æ¼">å†…å­˜æ³„æ¼&lt;/h1>
&lt;p>æ‰€è°“çš„å†…å­˜æ³„æ¼ï¼Œå³æ˜¯æŒ‡æŸä¸ªå¯¹è±¡è¢«æ— æ„é—´æ·»åŠ äº†æŸæ¡å¼•ç”¨ï¼Œå¯¼è‡´è™½ç„¶å®é™…ä¸Šå¹¶ä¸éœ€è¦äº†ï¼Œä½†è¿˜æ˜¯èƒ½ä¸€ç›´è¢«éå†å¯è¾¾ï¼Œä»¥è‡´å…¶å†…å­˜å§‹ç»ˆæ— æ³•å›æ”¶ã€‚æœ¬éƒ¨åˆ†æˆ‘ä»¬ç®€è¦è®¨è®ºä¸‹ JavaScript ä¸­å¸¸è§çš„å†…å­˜æ³„æ¼æƒ…å¢ƒä¸å¤„ç†æ–¹æ³•ã€‚åœ¨æ–°ç‰ˆæœ¬çš„ Chrome ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Performance Monitor æ¥åŠ¨æ€ç›‘æµ‹ç½‘é¡µæ€§èƒ½çš„å˜åŒ–ï¼š&lt;/p>
&lt;p>ä¸Šå›¾ä¸­å„é¡¹æŒ‡æ ‡çš„å«ä¹‰ä¸ºï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CPU usage -&lt;/strong> å½“å‰ç«™ç‚¹çš„ CPU ä½¿ç”¨é‡ï¼›&lt;/li>
&lt;li>&lt;strong>JS heap size -&lt;/strong> åº”ç”¨çš„å†…å­˜å ç”¨é‡ï¼›&lt;/li>
&lt;li>&lt;strong>DOM Nodes -&lt;/strong> å†…å­˜ä¸­ DOM èŠ‚ç‚¹æ•°ç›®ï¼›&lt;/li>
&lt;li>&lt;strong>JS event listeners-&lt;/strong> å½“å‰é¡µé¢ä¸Šæ³¨å†Œçš„ JavaScript æ—¶é—´ç›‘å¬å™¨æ•°ç›®;&lt;/li>
&lt;li>&lt;strong>Documents -&lt;/strong> å½“å‰é¡µé¢ä¸­ä½¿ç”¨çš„æ ·å¼æˆ–è€…è„šæœ¬æ–‡ä»¶æ•°ç›®ï¼›&lt;/li>
&lt;li>&lt;strong>Frames -&lt;/strong> å½“å‰é¡µé¢ä¸Šçš„ Frames æ•°ç›®ï¼ŒåŒ…æ‹¬ iframe ä¸ workersï¼›&lt;/li>
&lt;li>&lt;strong>Layouts / sec -&lt;/strong> æ¯ç§’çš„ DOM é‡å¸ƒå±€æ•°ç›®ï¼›&lt;/li>
&lt;li>&lt;strong>Style recalcs / sec -&lt;/strong> æµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—æ ·å¼çš„é¢‘æ¬¡ï¼›&lt;/li>
&lt;/ul>
&lt;p>å½“å‘ç°æŸä¸ªæ—¶é—´ç‚¹å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Memory æ ‡ç­¾é¡µå°†æ­¤æ—¶çš„å †åˆ†é…æƒ…å†µæ‰“å°ä¸‹æ¥ï¼š&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://coding.net/u/hoteam/p/Cache/git/raw/master/2017/10/1/MemorySnapshotTakeheapsnapshot.png" alt="Memory Snapshot Take heap snapshot" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://coding.net/u/hoteam/p/Cache/git/raw/master/2017/10/1/WX20171102-234728.png" alt="Memory Snapshot ç»“æœ" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h2 id="å…¨å±€å˜é‡">å…¨å±€å˜é‡&lt;/h2>
&lt;p>JavaScript ä¼šå°†æ‰€æœ‰çš„ä¸ºå£°æ˜çš„å˜é‡å½“åšå…¨å±€å˜é‡è¿›è¡Œå¤„ç†ï¼Œå³å°†å…¶æŒ‚è½½åˆ° global å¯¹è±¡ä¸Šï¼›æµè§ˆå™¨ä¸­è¿™é‡Œçš„ global å¯¹è±¡å°±æ˜¯ window:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">bar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;some text&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ç­‰ä»·äº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;some text&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦ä¸€ç§å¸¸è§çš„åˆ›å»ºå…¨å±€å˜é‡çš„æ–¹å¼å°±æ˜¯è¯¯ç”¨ &lt;code>this&lt;/code> æŒ‡é’ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">foo&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">var1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;potential accidental global&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Foo called on its own, this points to the global object (window)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// rather than being undefined.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">foo&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸€æ—¦æŸä¸ªå˜é‡è¢«æŒ‚è½½åˆ°äº† window å¯¹è±¡ï¼Œå°±æ„å‘³ç€å®ƒæ°¸è¿œæ˜¯å¯è¾¾çš„ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½åœ°æ·»åŠ  &lt;code>use strict&lt;/code> æˆ–è€…è¿›è¡Œæ¨¡å—åŒ–ç¼–ç (å‚è€ƒ &lt;a href="https://parg.co/Uc2" target="_blank" rel="noopener">JavaScript æ¨¡å—æ¼”åŒ–ç®€å²&lt;/a>)ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰©å±•ç±»ä¼¼äºä¸‹æ–‡çš„æ‰«æå‡½æ•°ï¼Œæ¥æ£€æµ‹å‡º window å¯¹è±¡çš„éåŸç”Ÿå±æ€§ï¼Œå¹¶åŠ ä»¥åˆ¤æ–­ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">scan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">o&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">o&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Stop if object was created in another window
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">typeof&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="s2">&amp;#34;string&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">typeof&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="s2">&amp;#34;number&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">typeof&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="s2">&amp;#34;boolean&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span> &lt;span class="k">instanceof&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">debugger&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Traverse the nested object hierarchy
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å®šæ—¶å™¨ä¸é—­åŒ…">å®šæ—¶å™¨ä¸é—­åŒ…&lt;/h2>
&lt;p>æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ &lt;code>setInterval&lt;/code> æ¥æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œå¾ˆå¤šçš„æ¡†æ¶ä¹Ÿæä¾›äº†åŸºäºå›è°ƒçš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶ï¼›è¿™å¯èƒ½ä¼šå¯¼è‡´å›è°ƒä¸­å£°æ˜äº†å¯¹äºæŸä¸ªå˜é‡çš„ä¾èµ–ï¼Œè­¬å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">serverData&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">loadData&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">renderer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">renderer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">renderer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">serverData&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">5000&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">//This will be executed every ~5 seconds.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®šæ—¶å™¨ä¿æœ‰å¯¹äº serverData å˜é‡çš„å¼•ç”¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨è¯ï¼Œé‚£ä¹ˆè¯¥å˜é‡ä¹Ÿå°±ä¼šä¸€ç›´å¯è¾¾ï¼Œä¸è¢«å›æ”¶ã€‚è€Œè¿™é‡Œçš„ serverData ä¹Ÿæ˜¯é—­åŒ…å½¢å¼è¢«å¼•å…¥åˆ° setInterval çš„å›è°ƒä½œç”¨åŸŸä¸­ï¼›é—­åŒ…ä¹Ÿæ˜¯å¸¸è§çš„å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„å…ƒå‡¶ä¹‹ä¸€ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">theThing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">replaceThing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">originalThing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">theThing&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">unused&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">originalThing&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// a reference to &amp;#39;originalThing&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hi&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">theThing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">longStr&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">someMethod&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">replaceThing&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">sayHi&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">allNames&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allNames&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;ğŸ‘‹ &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">hello&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">sayHi&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1000000&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hello&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Gandhi&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸Šè¿°ä»£ç ä¸­ replaceThing ä¼šå®šæœŸæ‰§è¡Œï¼Œå¹¶ä¸”åˆ›å»ºå¤§çš„æ•°ç»„ä¸ someMethod é—­åŒ…èµ‹å€¼ç»™ theThingã€‚someMethod ä½œç”¨åŸŸæ˜¯ä¸ unused å…±äº«çš„ï¼Œunused åˆæœ‰ä¸€ä¸ªæŒ‡å‘ originalThing çš„å¼•ç”¨ã€‚å°½ç®¡ unused å¹¶æœªè¢«å®é™…ä½¿ç”¨ï¼ŒtheThing çš„ someMethod æ–¹æ³•å´æœ‰å¯èƒ½ä¼šè¢«å¤–éƒ¨ä½¿ç”¨ï¼Œä¹Ÿå°±å¯¼è‡´äº† unused å§‹ç»ˆå¤„äºå¯è¾¾çŠ¶æ€ã€‚unused åˆä¼šåå‘ä¾èµ–äº theThingï¼Œæœ€ç»ˆå¯¼è‡´å¤§æ•°ç»„å§‹ç»ˆæ— æ³•è¢«æ¸…é™¤ã€‚&lt;/p>
&lt;h2 id="dom-å¼•ç”¨ä¸ç›‘å¬å™¨">DOM å¼•ç”¨ä¸ç›‘å¬å™¨&lt;/h2>
&lt;p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šå°† DOM å…ƒç´ å­˜æ”¾åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œè­¬å¦‚å½“æˆ‘ä»¬éœ€è¦é¢‘ç¹æ›´æ–°æŸä¸ªæ•°æ®åˆ—è¡¨æ—¶ï¼Œå¯èƒ½ä¼šå°†ç”¨åˆ°çš„æ•°æ®åˆ—è¡¨å­˜æ”¾åœ¨ JavaScript æ•°ç»„ä¸­ï¼›è¿™ä¹Ÿå°±å¯¼è‡´äº†æ¯ä¸ª DOM å…ƒç´ å­˜åœ¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œåˆ†åˆ«åœ¨ DOM æ ‘ä¸ JavaScript æ•°ç»„ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">elements&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">button&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;button&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">image&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">doStuff&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">elements&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">src&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;http://example.com/image_name.png&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">removeImage&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The image is a direct child of the body element.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">removeChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// At this point, we still have a reference to #button in the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//global elements object. In other words, the button element is
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//still in memory and cannot be collected by the GC.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å°† DOM æ ‘ä¸ JavaScript æ•°ç»„ä¸­çš„å¼•ç”¨çš†åˆ é™¤ï¼Œæ‰èƒ½çœŸå®åœ°æ¸…é™¤è¯¥å¯¹è±¡ã€‚ç±»ä¼¼çš„ï¼Œåœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ¸…é™¤æŸä¸ª DOM å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆç§»é™¤å…¶ç›‘å¬å™¨ï¼Œå¦åˆ™æµè§ˆå™¨å¹¶ä¸ä¼šè‡ªåŠ¨åœ°å¸®æˆ‘ä»¬æ¸…é™¤è¯¥ç›‘å¬å™¨ï¼Œæˆ–è€…å›æ”¶è¯¥ç›‘å¬å™¨å¼•ç”¨çš„å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">element&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;launch-button&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">counter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">onClick&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">counter&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">element&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">innerHtml&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;text &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">counter&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">element&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">onClick&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Do stuff
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">element&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">removeEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">onClick&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">element&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parentNode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">removeChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">element&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Now when element goes out of scope,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// both element and onClick will be collected even in old browsers // that don&amp;#39;t handle cycles well.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç°ä»£æµè§ˆå™¨ä½¿ç”¨çš„ç°ä»£åƒåœ¾å›æ”¶å™¨åˆ™ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åœ°æ£€æµ‹è¿™ç§å¾ªç¯ä¾èµ–ï¼Œå¹¶ä¸”äºˆä»¥æ¸…é™¤ï¼›jQuery ç­‰ç¬¬ä¸‰æ–¹åº“ä¹Ÿä¼šåœ¨æ¸…é™¤å…ƒç´ ä¹‹å‰é¦–å…ˆç§»é™¤å…¶ç›‘å¬äº‹ä»¶ã€‚&lt;/p>
&lt;h2 id="iframe">iframe&lt;/h2>
&lt;p>iframe æ˜¯å¸¸è§çš„ç•Œé¢å…±äº«æ–¹å¼ï¼Œä¸è¿‡å¦‚æœæˆ‘ä»¬åœ¨çˆ¶ç•Œé¢æˆ–è€…å­ç•Œé¢ä¸­æ·»åŠ äº†å¯¹äºçˆ¶ç•Œé¢æŸå¯¹è±¡çš„å¼•ç”¨ï¼Œè­¬å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å­é¡µé¢å†…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">top&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">innerObject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">someInsideObject&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">top&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventLister&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">â€˜&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="err">â€™&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="err">â€¦&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å¤–éƒ¨é¡µé¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">innerObject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">iframeEl&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">contentWindow&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">someInsideObject&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å°±æœ‰å¯èƒ½å¯¼è‡´ iframe å¸è½½(ç§»é™¤å…ƒç´ )ä¹‹åä»ç„¶æœ‰éƒ¨åˆ†å¯¹è±¡ä¿ç•™ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç§»é™¤ iframe ä¹‹å‰æ‰§è¡Œå¼ºåˆ¶çš„é¡µé¢é‡è½½ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="nx">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;#&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="nx">Remove&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/a&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">iframe&lt;/span> &lt;span class="nx">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;iframe&amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">contentWindow&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">location&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reload&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// çº¿ä¸Šç¯å¢ƒå®æµ‹é‡ç½® src æ•ˆæœä¼šæ›´å¥½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// $(&amp;#39;iframe&amp;#39;)[0].src = &amp;#34;javascript:false&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;iframe&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">remove&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ–è€…æ‰‹åŠ¨åœ°æ‰§è¡Œé¡µé¢æ¸…é™¤æ“ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onbeforeunload&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">unbind&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">die&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">//remove listeners on document
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">unbind&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">die&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">//remove listeners on all nodes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//clean up cookies
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="err">/remove items from localStorage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="web-worker">Web Worker&lt;/h2>
&lt;p>ç°ä»£æµè§ˆå™¨ä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ Web Worker æ¥è¿è¡Œåå°ä»»åŠ¡ï¼Œä¸è¿‡æœ‰æ—¶å€™å¦‚æœæˆ‘ä»¬è¿‡äºé¢‘ç¹ä¸”ä¸åŠ å®¹é”™åœ°åœ¨ä¸»çº¿ç¨‹ä¸å·¥ä½œçº¿ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">send&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">array1&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">get100Arrays&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">array2&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">get500Arrays&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">json&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">arbfr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str2ab&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">worker&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">postMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arbfr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">arbfr&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">str2ab&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">buf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">ArrayBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 2 bytes for each char
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">bufView&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Uint16Array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buf&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strLen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">strLen&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">bufView&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">charCodeAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">buf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨å®é™…çš„ä»£ç ä¸­æˆ‘ä»¬åº”è¯¥æ£€æµ‹ Transferable Objects æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span> &lt;span class="nx">ab&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">ArrayBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">worker&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">postMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ab&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">ab&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">ab&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">byteLength&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;TRANSFERABLE OBJECTS are not supported in your browser!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;USING TRANSFERABLE OBJECTS&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;TRANSFERABLE OBJECTS are not supported in your browser!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>