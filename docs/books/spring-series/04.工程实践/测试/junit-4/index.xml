<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>JUnit 4 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/</link><atom:link href="https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/index.xml" rel="self" type="application/rss+xml"/><description>JUnit 4</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>JUnit 4</title><link>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/</link></image><item><title>测试用例</title><link>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B/</guid><description>&lt;h1 id="junit-4">JUnit 4&lt;/h1>
&lt;ul>
&lt;li>@Test(expected = Exception.class) 表示预期会抛出 Exception.class 的异常&lt;/li>
&lt;li>@Ignore 含义是“某些方法尚未完成，暂不参与此次测试”。这样的话测试结果就会提示你有几个测试被忽略，而不是失败。一旦你完成了相应函数，只需要把@Ignore 注解删去，就可以进行正常的测试。&lt;/li>
&lt;li>@Test(timeout=100) 表示预期方法执行不会超过 100 毫秒，控制死循环&lt;/li>
&lt;li>@Before 表示该方法在每一个测试方法之前运行，可以使用该方法进行初始化之类的操作&lt;/li>
&lt;li>@After 表示该方法在每一个测试方法之后运行，可以使用该方法进行释放资源，回收内存之类的操&lt;/li>
&lt;li>@BeforeClass 表示该方法只执行一次，并且在所有方法之前执行。一般可以使用该方法进行数据库连接操作，注意该注解运用在静态方法。&lt;/li>
&lt;li>@AfterClass 表示该方法只执行一次，并且在所有方法之后执行。一般可以使用该方法进行数据库连接关闭操作，注意该注解运用在静态方法。&lt;/li>
&lt;/ul>
&lt;h1 id="testsuite">TestSuite&lt;/h1>
&lt;p>如果你须有多个测试单元，可以合并成一个测试套件进行测试，况且在一个项目中，只写一个测试类是不可能的，我们会写出很多很多个测试类。可是这些测试类必须一个一个的执行，也是比较麻烦的事情。鉴于此，JUnit 为我们提供了打包测试的功能，将所有需要运行的测试类集中起来，一次性的运行完毕，大大的方便了我们的测试工作。并且可以按照指定的顺序执行所有的测试类。下面的代码示例创建了一个测试套件来执行两个测试单元。如果你要添加其他的测试单元可以使用语句 @Suite.SuiteClasses 进行注解。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RunWith&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Suite&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@SuiteClasses&lt;/span>&lt;span class="o">({&lt;/span> &lt;span class="n">JUnit1Test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">StringUtilTest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">JSuit&lt;/span> &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>TestSuite 测试包类——多个测试的组合 TestSuite 类负责组装多个 Test Cases。待测得类中可能包括了对被测类的多个测试，而 TestSuit 负责收集这些测试，使我们可以在一个测试中，完成全部的对被测类的多个测试。TestSuite 类实现了 Test 接口，且可以包含其它的 TestSuites。它可以处理加入 Test 时的所有抛出的异常。&lt;/p>
&lt;p>TestResult 结果类集合了任意测试累加结果，通过 TestResult 实例传递个每个测试的 Run() 方法。TestResult 在执行 TestCase 是如果失败会异常抛出 TestListener 接口是个事件监听规约，可供 TestRunner 类使用。它通知 listener 的对象相关事件，方法包括测试开始 startTest(Test test)，测试结束 endTest(Test test),错误，增加异常 addError(Test test, Throwable t) 和增加失败 addFailure(Test test, AssertionFailedError t)。TestFailure 失败类是个“失败”状况的收集类，解释每次测试执行过程中出现的异常情况，其 toString() 方法返回“失败”状况的简要描述。&lt;/p>
&lt;h1 id="assert">Assert&lt;/h1>
&lt;p>JUnit 中的 assert 方法全部放在 Assert 类中，总结一下 JUnit 类中 assert 方法的分类：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>assertTrue/False([String message,]boolean condition)&lt;/code>: 判断一个条件是 true 还是 false。感觉这个最好用了，不用记下来那么多的方法名。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>fail([String message,])&lt;/code>: 失败，可以有消息，也可以没有消息。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>assertEquals([String message,]Object expected,Object actual)&lt;/code>: 判断是否相等，可以指定输出错误信息。第一个参数是期望值，第二个参数是实际的值。这个方法对各个变量有多种实现。在 JDK1.5 中基本一样。但是需要主意的是 float 和 double 最后面多一个 delta 的值。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>assertNotNull/Null([String message,]Object obj)&lt;/code>: 判读一个对象是否非空(非空)。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>assertSame/NotSame([String message,]Object expected,Object actual)&lt;/code>: 通过内存地址，判断两个对象是否指向同一个对象。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>failNotSame/failNotEquals(String message, Object expected, Object actual)&lt;/code>: 当不指向同一个内存地址或者不相等的时候，输出错误信息。注意信息是必须的，而且这个输出是格式化过的。&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>单元测试</title><link>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</guid><description>&lt;h1 id="unit-test">Unit Test&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RunWith&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SpringJUnit4ClassRunner&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@WebAppConfiguration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@ActiveProfiles&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;dev&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@SpringApplicationConfiguration&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">classes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="n">Application&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">MockServletContext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@ImportResource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;classpath:spring/applicationContext.xml&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">AbstractTest&lt;/span> &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>You will want to add a test for the endpoint you added, and Spring Test already provides some machinery for that, and it’s easy to include in your project. Add this to your build file’s list of dependencies:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-groovy" data-lang="groovy">&lt;span class="line">&lt;span class="cl">&lt;span class="n">testCompile&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;org.springframework.boot:spring-boot-starter-test&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you are using Maven, add this to your list of dependencies:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-test&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;scope&amp;gt;&lt;/span>test&lt;span class="nt">&amp;lt;/scope&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now write a simple unit test that mocks the servlet request and response through your endpoint:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RunWith&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SpringJUnit4ClassRunner&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@SpringApplicationConfiguration&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">classes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MockServletContext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@WebAppConfiguration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">HelloControllerTest&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">MockMvc&lt;/span> &lt;span class="n">mvc&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">WebApplicationContext&lt;/span> &lt;span class="n">wac&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/**如果是配置启用整个Web环境
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> @Before
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> public void setUp() throws Exception {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> this.mvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> **/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Before&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">setUp&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mvc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MockMvcBuilders&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">standaloneSetup&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">HelloController&lt;/span>&lt;span class="o">()).&lt;/span>&lt;span class="na">build&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">getHello&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mvc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="na">perform&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">MockMvcRequestBuilders&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="na">accept&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MediaType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">APPLICATION_JSON&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="na">andExpect&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">isOk&lt;/span>&lt;span class="o">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="na">andExpect&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">string&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">equalTo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Greetings from Spring Boot!&amp;#34;&lt;/span>&lt;span class="o">)));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note the use of the &lt;code>MockServletContext&lt;/code> to set up an empty &lt;code>WebApplicationContext&lt;/code> so the &lt;code>HelloController&lt;/code> can be created in the &lt;code>@Before&lt;/code> and passed to&lt;code>MockMvcBuilders.standaloneSetup()&lt;/code>. An alternative would be to create the full application context using the &lt;code>Application&lt;/code> class and &lt;code>@Autowired&lt;/code> the &lt;code>HelloController&lt;/code> into the test. The &lt;code>MockMvc&lt;/code> comes from Spring Test and allows you, via a set of convenient builder classes, to send HTTP requests into the &lt;code>DispatcherServlet&lt;/code> and make assertions about the result.&lt;/p></description></item><item><title>集成测试</title><link>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/spring-series/04.%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%B5%8B%E8%AF%95/junit-4/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95/</guid><description>&lt;h1 id="集成测试">集成测试&lt;/h1>
&lt;p>As well as mocking the HTTP request cycle we can also use Spring Boot to write a very simple full-stack integration test. For example, instead of (or as well as) the mock test above we could do this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RunWith&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SpringJUnit4ClassRunner&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@SpringApplicationConfiguration&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">classes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Application&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@WebAppConfiguration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@IntegrationTest&lt;/span>&lt;span class="o">({&lt;/span> &lt;span class="s">&amp;#34;server.port=0&amp;#34;&lt;/span> &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">HelloControllerIT&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Value&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;${local.server.port}&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="n">base&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">RestTemplate&lt;/span> &lt;span class="n">template&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Before&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">setUp&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">URL&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;http://localhost:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">template&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">TestRestTemplate&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">getHello&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getForEntity&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="o">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">String&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">assertThat&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getBody&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">equalTo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Greetings from Spring Boot!&amp;#34;&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The embedded server is started up on a random port by virtue of the&lt;code>@IntegrationTest(&amp;quot;${server.port=0}&amp;quot;)&lt;/code> and the actual port is discovered at runtime with the &lt;code>@Value(&amp;quot;${local.server.port}&amp;quot;)&lt;/code>.&lt;/p>
&lt;h1 id="actuator">Actuator&lt;/h1>
&lt;p>If you are building a web site for your business, you probably need to add some management services. Spring Boot provides several out of the box with its &lt;a href="http://docs.spring.io/spring-boot/docs/1.3.3.RELEASE/reference/htmlsingle/#production-ready" target="_blank" rel="noopener">actuator module&lt;/a>, such as health, audits, beans, and more.&lt;/p>
&lt;p>Add this to your build file’s list of dependencies:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-groovy" data-lang="groovy">&lt;span class="line">&lt;span class="cl">&lt;span class="n">compile&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;org.springframework.boot:spring-boot-starter-actuator&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you are using Maven, add this to your list of dependencies:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-actuator&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then restart the app:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./gradlew build &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> java -jar build/libs/gs-spring-boot-0.1.0.jar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you are using Maven, execute:&lt;/p>
&lt;pre tabindex="0">&lt;code>mvn package &amp;amp;&amp;amp; java -jar target/gs-spring-boot-0.1.0.jar
&lt;/code>&lt;/pre>&lt;p>You will see a new set of RESTful end points added to the application. These are management services provided by Spring Boot.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.119... : Mapped &lt;span class="s2">&amp;#34;{[/error],methods=[],params=[],headers=[],consumes...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.119... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/error&lt;span class="o">]&lt;/span>,methods&lt;span class="o">=[]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,headers&lt;span class="o">=[]&lt;/span>,consumes...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.136... : Mapped URL path &lt;span class="o">[&lt;/span>/**&lt;span class="o">]&lt;/span> onto handler of &lt;span class="nb">type&lt;/span> &lt;span class="o">[&lt;/span>class org.spri...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.136... : Mapped URL path &lt;span class="o">[&lt;/span>/webjars/**&lt;span class="o">]&lt;/span> onto handler of &lt;span class="nb">type&lt;/span> &lt;span class="o">[&lt;/span>class ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.440... : Mapped &lt;span class="s2">&amp;#34;{[/info],methods=[GET],params=[],headers=[],consum...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.441... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/autoconfig&lt;span class="o">]&lt;/span>,methods&lt;span class="o">=[&lt;/span>GET&lt;span class="o">]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,headers&lt;span class="o">=[]&lt;/span>,...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.441... : Mapped &lt;span class="s2">&amp;#34;{[/mappings],methods=[GET],params=[],headers=[],co...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.442... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/trace&lt;span class="o">]&lt;/span>,methods&lt;span class="o">=[&lt;/span>GET&lt;span class="o">]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,headers&lt;span class="o">=[]&lt;/span>,consu...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.442... : Mapped &lt;span class="s2">&amp;#34;{[/env/{name:.*}],methods=[GET],params=[],headers=...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.442... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/env&lt;span class="o">]&lt;/span>,methods&lt;span class="o">=[&lt;/span>GET&lt;span class="o">]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,headers&lt;span class="o">=[]&lt;/span>,consume...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.443... : Mapped &lt;span class="s2">&amp;#34;{[/configprops],methods=[GET],params=[],headers=[]...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.443... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/metrics/&lt;span class="o">{&lt;/span>name:.*&lt;span class="o">}]&lt;/span>,methods&lt;span class="o">=[&lt;/span>GET&lt;span class="o">]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,head...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.443... : Mapped &lt;span class="s2">&amp;#34;{[/metrics],methods=[GET],params=[],headers=[],con...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.444... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/health&lt;span class="o">]&lt;/span>,methods&lt;span class="o">=[&lt;/span>GET&lt;span class="o">]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,headers&lt;span class="o">=[]&lt;/span>,cons...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2014-06-03 13:23:28.444... : Mapped &lt;span class="s2">&amp;#34;{[/dump],methods=[GET],params=[],headers=[],consum...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2014-06-03 13:23:28.445... : Mapped &amp;#34;&lt;/span>&lt;span class="o">{[&lt;/span>/beans&lt;span class="o">]&lt;/span>,methods&lt;span class="o">=[&lt;/span>GET&lt;span class="o">]&lt;/span>,params&lt;span class="o">=[]&lt;/span>,headers&lt;span class="o">=[]&lt;/span>,consu...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>They include: errors, &lt;a href="http://localhost:8080/env" target="_blank" rel="noopener">environment&lt;/a>, &lt;a href="http://localhost:8080/health" target="_blank" rel="noopener">health&lt;/a>, &lt;a href="http://localhost:8080/beans" target="_blank" rel="noopener">beans&lt;/a>, &lt;a href="http://localhost:8080/info" target="_blank" rel="noopener">info&lt;/a>, &lt;a href="http://localhost:8080/metrics" target="_blank" rel="noopener">metrics&lt;/a>, &lt;a href="http://localhost:8080/trace" target="_blank" rel="noopener">trace&lt;/a>, &lt;a href="http://localhost:8080/configprops" target="_blank" rel="noopener">configprops&lt;/a>, and &lt;a href="http://localhost:8080/dump" target="_blank" rel="noopener">dump&lt;/a>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>**&lt;/th>
&lt;th>There is also a &lt;code>/shutdown&lt;/code> endpoint, but it’s only visible by default via JMX. To &lt;a href="http://docs.spring.io/spring-boot/docs/1.3.3.RELEASE/reference/htmlsingle/#production-ready-customizing-endpoints" target="_blank" rel="noopener">enable it as an HTTP endpoint&lt;/a>, add &lt;code>endpoints.shutdown.enabled=true&lt;/code> to your&lt;code>application.properties&lt;/code> file.&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>It’s easy to check the health of the app.&lt;/p>
&lt;pre tabindex="0">&lt;code>$ curl localhost:8080/health
{&amp;#34;status&amp;#34;:&amp;#34;UP&amp;#34;}
&lt;/code>&lt;/pre>&lt;p>You can try to invoke shutdown through curl.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ curl -X POST localhost:8080/shutdown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;timestamp&amp;#34;&lt;/span>:1401820343710,&lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;Method Not Allowed&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;status&amp;#34;&lt;/span>:405,&lt;span class="s2">&amp;#34;message&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;Request method &amp;#39;POST&amp;#39; not supported&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Because we didn’t enable it, the request is blocked by the virtue of not existing.&lt;/p>
&lt;p>For more details about each of these REST points and how you can tune their settings with an&lt;code>application.properties&lt;/code> file, you can read detailed &lt;a href="http://docs.spring.io/spring-boot/docs/1.3.3.RELEASE/reference/htmlsingle/#production-ready-endpoints" target="_blank" rel="noopener">docs about the endpoints&lt;/a>.&lt;/p></description></item></channel></rss>