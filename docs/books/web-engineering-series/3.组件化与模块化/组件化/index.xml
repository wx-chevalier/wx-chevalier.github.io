<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ç»„ä»¶åŒ– | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/</link><atom:link href="https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/index.xml" rel="self" type="application/rss+xml"/><description>ç»„ä»¶åŒ–</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>ç»„ä»¶åŒ–</title><link>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/</link></image><item><title>ä¾èµ–æ³¨å…¥</title><link>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/</guid><description>&lt;h1 id="web-ç»„ä»¶çš„ä¾èµ–æ³¨å…¥">Web ç»„ä»¶çš„ä¾èµ–æ³¨å…¥&lt;/h1>
&lt;p>ä¾èµ–æ³¨å…¥çš„æ¦‚å¿µæœ€æ—©ç”± Google Angular å¼•å…¥åˆ° Web å‰ç«¯ç¼–ç ä¸­ï¼Œè€Œéšç€ç»„ä»¶åŒ–æ¦‚å¿µçš„æµè¡Œï¼Œç‰¹åˆ«æ˜¯ç±»ç»„ä»¶çš„æ–¹å¼é€æ­¥æˆä¸ºä¸»æµï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‰ç«¯ç¼–ç ä¸­å®è·µä¾èµ–æ³¨å…¥æˆ–è€…æ§åˆ¶åè½¬çš„æ¨¡å¼ã€‚&lt;/p>
&lt;p>æ§åˆ¶åè½¬å¹¶éå¤šä¹ˆå¤æ‚çš„æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†é‚£äº›é€šè¿‡ Props ä¼ å…¥çš„ Every function passed in via props is an â€œinjection of a dependencyâ€, and every component that declares a prop for handling events or user interaction is observing â€œinversion of controlâ€. The borrowed terms have now been rendered obsolete through ubiquity, save perhaps for use as shibboleth for JavaScripters who have lived through the reign of Angular.&lt;/p>
&lt;p>#â€ŠConstructor Injection&lt;/p>
&lt;p>As the name implies, this component would receive its dependencies via the constructor. Hereâ€™s what such a component would look like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Knight&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weapon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">weapon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="sb">`ğŸ´ &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">weapon&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And you would use it like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Knight&lt;/span> &lt;span class="nx">weapon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">sword&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Of course, you should typically use the prop directly instead of duplicating it.&lt;/p>
&lt;h1 id="setter-injection">Setter Injection&lt;/h1>
&lt;p>Instead of setting dependencies in the constructor, a component would have methods available that can be called after initialization, with dependencies passed in as the argument.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Knight&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">state&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setWeapon&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">weapon&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setState&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">weapon&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="sb">`ğŸ´ &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">state&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">weapon&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Usage:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">componentDidMount&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">knight&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setWeapon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sword&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">render&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Knight&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">knight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Again, you almost certainly would not want do this instead of passing dependencies directly via props.&lt;/p>
&lt;h1 id="interface-injection">Interface Injection&lt;/h1>
&lt;p>The props of a component are its interface to its clients, thus â€œrequired propsâ€ would come the closest to an analogy for interface injection with React:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Knight&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">static&lt;/span> &lt;span class="nx">propTypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">weapon&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">PropTypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">any&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isRequired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="sb">`ğŸ´ &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">weapon&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and you would use it simply as&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Knight&lt;/span> &lt;span class="nx">weapon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">sword&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I hope these examples illustrate how commonplace Dependency Injection has become, and gave you some talking points should the topic ever comes up.&lt;/p></description></item><item><title>ç»„ä»¶è§„èŒƒ</title><link>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/%E7%BB%84%E4%BB%B6%E8%A7%84%E8%8C%83/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/%E7%BB%84%E4%BB%B6%E8%A7%84%E8%8C%83/</guid><description>&lt;h1 id="usage">Usage&lt;/h1>
&lt;h1 id="lifecycle">LifeCycle&lt;/h1>
&lt;ul>
&lt;li>
&lt;p>created / componentWillMount&lt;/p>
&lt;/li>
&lt;li>
&lt;p>mounted / componentDidMount&lt;/p>
&lt;/li>
&lt;li>
&lt;p>shouldComponentUpdate&lt;/p>
&lt;/li>
&lt;li>
&lt;p>updated / componentDidUpdate&lt;/p>
&lt;/li>
&lt;li>
&lt;p>unmounted / componentWillUnMount&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>beforeCreateâ€Šâ€”â€Šcalled after the instance has been initialized but before watchers/events have been setup&lt;/p>
&lt;p>createdâ€Šâ€”â€Šcalled after the instance has been initialized, the computed props, data watchers and events have been setup but the component has not been mounted to the el dom element&lt;/p>
&lt;p>beforeMountâ€Šâ€”â€Šcalled right before mounting process begins&lt;/p>
&lt;p>mountedâ€Šâ€”â€Šcalled after the instance has been mounted and the el in the DOM is replaced with your component.&lt;/p>
&lt;p>beforeUpdateâ€Šâ€”â€Šcalled after the data changes but before the virtual DOM has been updated&lt;/p>
&lt;p>updatedâ€Šâ€”â€Šcalled after the DOM was updated&lt;/p>
&lt;p>beforeDestroyâ€Šâ€”â€Šcalled before an instance is about to be destroyed but full functionality of the instance is still available&lt;/p>
&lt;p>destroyâ€Šâ€”â€Šcalled after the instance has been destroyed&lt;/p></description></item><item><title>ç»„ä»¶é©±åŠ¨å¼€å‘</title><link>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/%E7%BB%84%E4%BB%B6%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-engineering-series/3.%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96/%E7%BB%84%E4%BB%B6%E5%8C%96/%E7%BB%84%E4%BB%B6%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/</guid><description>&lt;h1 id="ç»„ä»¶é©±åŠ¨å¼€å‘">ç»„ä»¶é©±åŠ¨å¼€å‘&lt;/h1>
&lt;p>Component Driven Development is a way of building user interfaces (UIs) by starting with their smallest parts: the components. Emphasis on components is a theme in UI development that has been gaining momentum since the introduction of modern UI libraries like React.&lt;/p>
&lt;p>CDD denotes a set of tools (such as React Storybook) and a way of developing applications to really take advantage of this change in emphasis. Some advantages of CDD include:&lt;/p>
&lt;ul>
&lt;li>The ability to parallelize work as different people work on different components.&lt;/li>
&lt;li>The ability to use a â€œVisual TDDâ€ approach to allow building UIs in a more rigorous fashion.&lt;/li>
&lt;li>Increased communication opportunities between designers and other product people and the developers building the components.&lt;/li>
&lt;li>Reuse of components between applications and features.&lt;/li>
&lt;/ul>
&lt;p>Iâ€™ll talk more about why I think CDD is great in future posts, but hopefully some of these advantages will become clear as we develop our todo list app.&lt;/p>
&lt;h1 id="ç»„ä»¶ä»£ç é£æ ¼">ç»„ä»¶ä»£ç é£æ ¼&lt;/h1>
&lt;p>æœ¬å°èŠ‚æˆ‘ä»¬å…³æ³¨å¦‚ä½•å†™å‡ºæ¼‚äº®çš„ç»„ä»¶ï¼Œä½ æˆ–è®¸å¯ä»¥è®¤ä¸ºèåœé’èœå„æœ‰æ‰€çˆ±ï¼Œä½†æ˜¯ä»£ç æœ¬èº«æ˜¯åº”å½“ä¿è¯å…¶å¯è¯»æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­ï¼Œä½ çš„ä»£ç æ˜¯æ³¨å®šè¦è¢«å…¶ä»–äººé˜…è¯»çš„ã€‚è®¡ç®—æœºæ˜¯ä¸ä¼šåœ¨æ„è¿™äº›çš„ï¼Œä¸ç®¡ä½ æœå®ƒä»¬æ‰”è¿‡å»ä»€ä¹ˆï¼Œå®ƒä»¬éƒ½ä¼šè€è€å®å®çš„è§£é‡Šï¼Œä½†æ˜¯ä½ çš„é˜Ÿå‹ä»¬å¯ä¸ä¼šè¿™æ ·ï¼Œä»–ä»¬ä¼šæŠŠä¸‘é™‹çš„ä»£ç æ‰”å›åˆ°ä½ çš„è„¸ä¸Šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¼‚äº®çš„ç»„ä»¶åº”è¯¥å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š&lt;/p>
&lt;ul>
&lt;li>å³ä½¿æ²¡æœ‰ä»»ä½•æ³¨é‡Šçš„æƒ…å†µä¸‹ä¹Ÿæ˜“äºç†è§£&lt;/li>
&lt;li>æ¯”ä¹±éº»èˆ¬çš„ä»£ç æœ‰æ›´å¥½çš„æ€§èƒ½è¡¨ç°&lt;/li>
&lt;li>æ›´æ˜“äºè¿›è¡Œ Bug è¿½æº¯&lt;/li>
&lt;li>ç®€æ´æ˜äº†ï¼Œä¸€å¥é¡¶ä¸€ä¸‡å¥&lt;/li>
&lt;/ul>
&lt;p>åœ¨è®¨è®ºè¯­æ³•çš„è¯­æ³•ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥éµå¾ªå¦‚ä¸‹çš„åŸºæœ¬åŸåˆ™ï¼š&lt;/p>
&lt;p>-Â  æ¯ä¸ªæ–‡ä»¶ä¸­åªåŒ…å«ä¸€ä¸ª React ç»„ä»¶ã€‚
-Â  å°½å¯èƒ½åœ°ä½¿ç”¨ JSX è¯­æ³•ã€‚
-Â  é™¤éä¸ç”¨ JSX è¯­æ³•åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨&lt;code>React.createElement&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;h2 id="ç»„ä»¶è§„èŒƒ">ç»„ä»¶è§„èŒƒ&lt;/h2>
&lt;p>###Â Class ä¸ React.createClass æ–¹æ³•&lt;/p>
&lt;p>å°½å¯èƒ½åœ°ä½¿ç”¨ ES6 ä¸­çš„ç±»çš„è¯­æ³•ï¼Œé™¤éæœ‰ç‰¹æ®Šçš„å¯¹äº Mixin çš„éœ€æ±‚ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">Listing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createClass&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">class&lt;/span> &lt;span class="nx">Listing&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>###Â  ç»„ä»¶å‘½å&lt;/p>
&lt;p>-Â  æ‰©å±•åï¼šä½¿ç”¨.jsx ä½œä¸º React ç»„ä»¶çš„æ‰©å±•åã€‚
-Â  æ–‡ä»¶åï¼šä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•å‘½åæ–‡ä»¶ï¼Œè­¬å¦‚ ReservationCard.jsxã€‚
-Â  å¼•ç”¨å‘½åï¼šä½¿ç”¨å¸•æ–¯å¡å‘½åæ³•å‘½åç»„ä»¶å’Œ camelCase å‘½åå®ä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">reservationCard&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;./ReservationCard&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">ReservationCard&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;./ReservationCard&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">ReservationItem&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">ReservationCard&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">reservationItem&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">ReservationCard&lt;/span> &lt;span class="o">/&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>###Â Props&lt;/p>
&lt;p>-Â  å¯¹äº Props çš„å‘½åä½¿ç”¨ camelCaseã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Foo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">UserName&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;hello&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">phone_number&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">12345678&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Foo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">userName&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;hello&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">phoneNumber&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">12345678&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>-Â  å°† Props æˆ–è€… State çš„å£°æ˜å†™åœ¨ç±»å¤–ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">React&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">Component&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">PropTypes&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;react&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">propTypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">PropTypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">number&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isRequired&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">PropTypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isRequired&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">text&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">PropTypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">defaultProps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">text&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;HelloÂ World&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="kr">class&lt;/span> &lt;span class="nx">Link&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">Component&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">static&lt;/span> &lt;span class="nx">methodsAreOk&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="nx">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/a&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Link&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">propTypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">propTypes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Link&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">defaultProps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">defaultProps&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>###Â Declaration(å£°æ˜)&lt;/p>
&lt;p>-Â  ä¸è¦ä½¿ç”¨ displayName æ¥å‘½åç»„ä»¶ï¼Œè€Œä½¿ç”¨å¼•ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">export&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createClass&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">displayName&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="s1">&amp;#39;ReservationCard&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="c1">//Â stuffÂ goesÂ here
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">export&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="kr">class&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">ReservationCard&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="kr">extends&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åˆç†ä½¿ç”¨å¯¹è±¡ç»“æ„ä¸å±æ€§æ‰©å±•">åˆç†ä½¿ç”¨å¯¹è±¡ç»“æ„ä¸å±æ€§æ‰©å±•&lt;/h3>
&lt;p>å¤§çš„ç»„ä»¶å¾€å¾€å—å›°äº&lt;code>this.props&lt;/code>è¿‡é•¿çš„çª˜å¢ƒï¼Œå…¸å‹çš„å¦‚ä¸‹æ‰€ç¤º:&lt;/p>
&lt;pre tabindex="0">&lt;code>render() {
Â  return (
Â  &amp;lt;ProductPrice
Â  hidePriceFulfillmentDisplay=
Â {this.props.hidePriceFulfillmentDisplay}
Â  primaryOffer={this.props.primaryOffer}
Â  productType={this.props.productType}
Â  productPageUrl={this.props.productPageUrl}
Â  inventory={this.props.inventory}
Â  submapType={this.props.submapType}
Â  ppu={this.props.ppu}
Â  isLoggedIn={this.props.isLoggedIn}
Â  gridView={this.props.isGridView}
Â  /&amp;gt;
Â  );
}
&lt;/code>&lt;/pre>&lt;p>è¿™ä¹ˆå¤šçš„ Props ä¼°è®¡çœ‹ç€éƒ½å¤´ç–¼ï¼Œå¦‚æœæˆ‘ä»¬è¦å°†è¿™äº› Props ç»§ç»­ä¼ å…¥ä¸‹ä¸€å±‚ï¼Œå¤§æ¦‚å°±è¦å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­äº†:&lt;/p>
&lt;pre tabindex="0">&lt;code>render() {
Â  const {
Â  hidePriceFulfillmentDisplay,
Â  primaryOffer,
Â  productType,
Â  productPageUrl,
Â  inventory,
Â  submapType,
Â  ppu,
Â  isLoggedIn,
Â  gridView
Â  } = this.props;
Â  return (
Â  &amp;lt;ProductPrice
Â  hidePriceFulfillmentDisplay={hidePriceFulfillmentDisplay}
Â  primaryOffer={primaryOffer}
Â  productType={productType}
Â  productPageUrl={productPageUrl}
Â  inventory={inventory}
Â  submapType={submapType}
Â  ppu={ppu}
Â  isLoggedIn={isLoggedIn}
Â  gridView={isGridView}
Â  /&amp;gt;
Â  );
}
&lt;/code>&lt;/pre>&lt;p>æš‚æ—¶ä¸è€ƒè™‘ unKnown Propsï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼æ¥å®ç°è¿™ä¸ªåŠŸèƒ½:&lt;/p>
&lt;pre tabindex="0">&lt;code>render() {
Â  const props = this.props;
Â  return &amp;lt;ProductPrice {...props} /&amp;gt;
}
&lt;/code>&lt;/pre>&lt;h2 id="jsx-è§„èŒƒ">JSX è§„èŒƒ&lt;/h2>
&lt;p>###Â Alignment(å¯¹é½)&lt;/p>
&lt;p>-Â  è·Ÿéšå¦‚ä¸‹çš„ JSX çš„è¯­æ³•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Foo&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">superLongParam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â Â &lt;/span>&lt;span class="nx">anotherSuperLongParam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;baz&amp;#34;&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Foo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">superLongParam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">anotherSuperLongParam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;baz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â ifÂ propsÂ fitÂ inÂ oneÂ lineÂ thenÂ keepÂ itÂ onÂ theÂ sameÂ line
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Foo&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">bar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â childrenÂ getÂ indentedÂ normally
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Foo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">superLongParam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">anotherSuperLongParam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;baz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">Spazz&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/Foo&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>###Â Quotes&lt;/p>
&lt;p>å¯¹äº JSX çš„å±æ€§ç”¨åŒå¼•å·è¡¨ç¤ºï¼Œå¯¹äºå…¶ä»–å±æ€§ï¼Œç”¨å•å¼•å·è¡¨ç¤ºã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>//Â bad
&amp;lt;FooÂ bar=&amp;#39;bar&amp;#39;Â /&amp;gt;
//Â good
&amp;lt;FooÂ bar=&amp;#34;bar&amp;#34;Â /&amp;gt;
//Â bad
&amp;lt;FooÂ style={{Â left:Â &amp;#34;20px&amp;#34;Â }}Â /&amp;gt;
//Â good
&amp;lt;FooÂ style={{Â left:Â &amp;#39;20px&amp;#39;Â }}Â /&amp;gt;
&lt;/code>&lt;/pre>&lt;p>###Â Spacing(ç©ºæ ¼)&lt;/p>
&lt;p>-Â  åœ¨è‡ªé—­åˆçš„æ ‡ç­¾ä¸­ä»…ä½¿ç”¨å•ç©ºæ ¼ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>//Â bad
&amp;lt;Foo/&amp;gt;
//Â veryÂ bad
&amp;lt;FooÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â /&amp;gt;
//Â bad
&amp;lt;Foo
Â /&amp;gt;
//Â good
&amp;lt;FooÂ /&amp;gt;
&lt;/code>&lt;/pre>&lt;p>###Â  å¤šæ®µ&lt;/p>
&lt;p>-Â  å½“ JSX åŒ…å«å¤šè¡Œä»£ç æ—¶ï¼Œå°†å®ƒä»¬åŒ…å«åœ¨å°æ‹¬å·ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">///Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">MyComponent&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;longÂ body&amp;#34;&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">foo&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â Â Â Â Â Â Â Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">MyChild&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â Â Â Â Â Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/MyComponent&amp;gt;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">MyComponent&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">className&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;longÂ body&amp;#34;&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">foo&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â Â Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">MyChild&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/MyComponent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good,Â whenÂ singleÂ line
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="kr">const&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="nx">hello&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/div&amp;gt;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">MyComponent&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="err">/MyComponent&amp;gt;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ–¹æ³•è§„èŒƒ">æ–¹æ³•è§„èŒƒ&lt;/h2>
&lt;p>###Â Naming(æ–¹æ³•å‘½å)&lt;/p>
&lt;p>-Â  å¯¹äºä¸€ä¸ª React ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºå‰ç¼€ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â bad
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createClass&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">_onClickSubmit&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â &lt;/span>&lt;span class="c1">//Â doÂ stuff
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err">Â Â &lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="c1">//Â otherÂ stuff
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//Â good
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">class&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="kr">extends&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="nx">React&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Component&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="nx">onClickSubmit&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="err">Â &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â Â Â &lt;/span>&lt;span class="c1">//Â doÂ stuff
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err">Â Â &lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">Â Â &lt;/span>&lt;span class="c1">//Â otherÂ stuff
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>###Â Ordering(é¡ºåº)&lt;/p>
&lt;p>-Â React.Component å­ç±»&lt;/p>
&lt;p>1.Â constructor
2.Â optionalÂ staticÂ methods
3.Â getChildContext
4.Â componentWillMount
5.Â componentDidMount
6.Â componentWillReceiveProps
7.Â shouldComponentUpdate
8.Â componentWillUpdate
9.Â componentDidUpdate
10.Â componentWillUnmount
11.Â &lt;em>clickHandlersÂ orÂ eventHandlers&lt;/em>Â likeÂ onClickSubmit()Â orÂ onChangeDescription()
12.Â &lt;em>getterÂ methodsÂ forÂ render&lt;/em>Â likeÂ getSelectReason()Â orÂ getFooterContent()
13.Â &lt;em>OptionalÂ renderÂ methods&lt;/em>Â likeÂ renderNavigation()Â orÂ renderProfilePicture()
14.Â render&lt;/p>
&lt;p>-Â React.createClass&lt;/p>
&lt;p>1.Â displayName
2.Â propTypes
3.Â contextTypes
4.Â childContextTypes
5.Â mixins
6.Â statics
7.Â defaultProps
8.Â getDefaultProps
9.Â getInitialState
10.Â getChildContext
11.Â componentWillMount
12.Â componentDidMount
13.Â componentWillReceiveProps
14.Â shouldComponentUpdate
15.Â componentWillUpdate
16.Â componentDidUpdate
17.Â componentWillUnmount
18.Â &lt;em>clickHandlersÂ orÂ eventHandlers&lt;/em>Â likeÂ onClickSubmit()Â orÂ onChangeDescription()
19.Â &lt;em>getterÂ methodsÂ forÂ render&lt;/em>Â likeÂ getSelectReason()Â orÂ getFooterContent()
20.Â &lt;em>OptionalÂ renderÂ methods&lt;/em>Â likeÂ renderNavigation()Â orÂ renderProfilePicture()
21.Â render&lt;/p>
&lt;h3 id="ä½¿ç”¨ç®­å¤´å‡½æ•°å‡å°‘å†—ä½™ä»£ç ">ä½¿ç”¨ç®­å¤´å‡½æ•°å‡å°‘å†—ä½™ä»£ç &lt;/h3>
&lt;p>ç®­å¤´å‡½æ•°æ˜¯ ES6 å¼•å…¥çš„æ–°ç‰¹æ€§ä¹‹ä¸€ï¼Œå…¶ä¸ä»…å¯ä»¥å¸®æˆ‘ä»¬é¿å…æ‰‹åŠ¨ç»‘å®š&lt;code>this&lt;/code>æŒ‡é’ˆï¼Œè¿˜èƒ½è®©æˆ‘ä»¬ä¸ç”¨å£°æ˜è¿‡å¤šçš„&lt;code>function&lt;/code>å…³é”®å­—ï¼Œè­¬å¦‚æˆ‘è§‰å¾—éå¸¸é€‚ç”¨ Arrow Function çš„åœ°æ–¹å°±æ˜¯ Redux çš„ mapStateToProps å‡½æ•°:&lt;/p>
&lt;pre tabindex="0">&lt;code>const mapStateToProps = ({isLoading}) =&amp;gt; {
Â  return ({
Â  loading: isLoading,
Â  });
};
&lt;/code>&lt;/pre>&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ è¿”å›çš„æ˜¯ Objectï¼Œä½ éœ€è¦åŒ…è£¹åœ¨å¤§æ‹¬å·å†…:&lt;/p>
&lt;pre tabindex="0">&lt;code>const mapStateToProps = ({isLoading}) =&amp;gt; ({
Â  loading: isLoading
});
&lt;/code>&lt;/pre>&lt;p>#Â Communication
React ç»„ä»¶ä¸€ä¸ªå¾ˆå¤§çš„ç‰¹æ€§åœ¨äºå…¶æ‹¥æœ‰è‡ªå·±å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°† React ç»„ä»¶è§†ä½œå¯è‡ªè¿è¡Œçš„å°å‹ç³»ç»Ÿï¼Œå®ƒæ‹¥æœ‰è‡ªå·±çš„å†…éƒ¨çŠ¶æ€ã€è¾“å…¥ä¸è¾“å‡ºã€‚&lt;/p>
&lt;h2 id="input">Input&lt;/h2>
&lt;p>å¯¹äº React ç»„ä»¶è€Œè¨€ï¼Œå…¶è¾“å…¥çš„æ¥æºå°±æ˜¯ Propsï¼Œæˆ‘ä»¬ä¼šç”¨å¦‚ä¸‹æ–¹å¼å‘æŸä¸ª React ç»„ä»¶ä¼ å…¥æ•°æ®:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">class Title extends React.Component {
render() {
return &amp;lt;h1&amp;gt;{ this.props.text }&amp;lt;/h1&amp;gt;;
}
};
Title.propTypes = {
text: React.PropTypes.string
};
Title.defaultProps = {
text: &amp;#39;Hello world&amp;#39;
};
// App.jsx
class App extends React.Component {
render() {
return &amp;lt;Title text=&amp;#39;Hello React&amp;#39; /&amp;gt;;
}
};
&lt;/code>&lt;/pre>&lt;p>&lt;code>text&lt;/code>æ˜¯&lt;code>Text&lt;/code>ç»„ä»¶è‡ªå·±çš„è¾“å…¥åŸŸï¼Œçˆ¶ç»„ä»¶&lt;code>App&lt;/code>åœ¨ä½¿ç”¨å­ç»„ä»¶&lt;code>Title&lt;/code>æ—¶å€™åº”è¯¥æä¾›&lt;code>text&lt;/code>å±æ€§å€¼ã€‚é™¤äº†æ ‡å‡†çš„å±æ€§åä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šç”¨åˆ°å¦‚ä¸‹ä¸¤ä¸ªè®¾ç½®:&lt;/p>
&lt;ul>
&lt;li>propTypes:ç”¨äºå®šä¹‰ Props çš„ç±»å‹ï¼Œè¿™æœ‰åŠ©äºè¿½è¸ªè¿è¡Œæ—¶è¯¯è®¾ç½®çš„ Prop å€¼ã€‚&lt;/li>
&lt;li>defaultProps:å®šä¹‰ Props çš„é»˜è®¤å€¼ï¼Œè¿™ä¸ªåœ¨å¼€å‘æ—¶å¾ˆæœ‰å¸®åŠ©&lt;/li>
&lt;/ul>
&lt;p>Props ä¸­è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§&lt;code>props.children&lt;/code>å¯ä»¥å…è®¸æˆ‘ä»¬ä½¿ç”¨å­ç»„ä»¶:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-class" data-lang="class"> render() {
return (
&amp;lt;h1&amp;gt;
{ this.props.text }
{ this.props.children }
&amp;lt;/h1&amp;gt;
);
}
};
class App extends React.Component {
render() {
return (
&amp;lt;Title text=&amp;#39;Hello React&amp;#39;&amp;gt;
&amp;lt;span&amp;gt;community&amp;lt;/span&amp;gt;
&amp;lt;/Title&amp;gt;
);
}
};
&lt;/code>&lt;/pre>&lt;p>æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä¸»åŠ¨åœ¨&lt;code>Title&lt;/code>ç»„ä»¶çš„&lt;code>render&lt;/code>å‡½æ•°ä¸­è®¾ç½®&lt;code>{this.props.children}&lt;/code>ï¼Œé‚£ä¹ˆ&lt;code>span&lt;/code>æ ‡ç­¾æ˜¯ä¸ä¼šè¢«æ¸²æŸ“å‡ºæ¥çš„ã€‚é™¤äº† Props ä¹‹å¤–ï¼Œå¦ä¸€ä¸ªéšæ€§çš„ç»„ä»¶çš„è¾“å…¥å³æ˜¯&lt;code>context&lt;/code>ï¼Œæ•´ä¸ª React ç»„ä»¶æ ‘ä¼šæ‹¥æœ‰ä¸€ä¸ª&lt;code>context&lt;/code>å¯¹è±¡ï¼Œå®ƒå¯ä»¥è¢«æ ‘ä¸­æŒ‚è½½çš„æ¯ä¸ªç»„ä»¶æ‰€è®¿é—®åˆ°ï¼Œå…³äºæ­¤éƒ¨åˆ†æ›´å¤šçš„å†…å®¹è¯·å‚è€ƒ&lt;a href="https://github.com/krasimir/react-in-patterns/tree/master/patterns/dependency-injection" target="_blank" rel="noopener">ä¾èµ–æ³¨å…¥&lt;/a>è¿™ä¸€ç« èŠ‚ã€‚&lt;/p>
&lt;h2 id="output">Output&lt;/h2>
&lt;p>ç»„ä»¶æœ€æ˜æ˜¾çš„è¾“å‡ºå°±æ˜¯æ¸²æŸ“åçš„ HTML æ–‡æœ¬ï¼Œå³æ˜¯ React ç»„ä»¶æ¸²æŸ“ç»“æœçš„å¯è§†åŒ–å±•ç¤ºã€‚å½“ç„¶ï¼Œéƒ¨åˆ†åŒ…å«äº†é€»è¾‘çš„ç»„ä»¶ä¹Ÿå¯èƒ½å‘é€æˆ–è€…è§¦å‘æŸäº› Action æˆ–è€… Eventã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-class" data-lang="class"> render() {
return (
&amp;lt;h1&amp;gt;
&amp;lt;a onClick={ this.props.logoClicked }&amp;gt;
&amp;lt;img src=&amp;#39;path/to/logo.png&amp;#39; /&amp;gt;
&amp;lt;/a&amp;gt;
&amp;lt;/h1&amp;gt;
);
}
};
class App extends React.Component {
render() {
return &amp;lt;Title logoClicked={ this.logoClicked } /&amp;gt;;
}
logoClicked() {
console.log(&amp;#39;logo clicked&amp;#39;);
}
};
&lt;/code>&lt;/pre>&lt;p>åœ¨&lt;code>App&lt;/code>ç»„ä»¶ä¸­æˆ‘ä»¬å‘&lt;code>Title&lt;/code>ç»„ä»¶ä¼ å…¥äº†å¯ä»¥ä»&lt;code>Title&lt;/code>è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œåœ¨&lt;code>logoClicked&lt;/code>å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®æˆ–è€…ä¿®æ”¹éœ€è¦ä¼ å›çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact å¹¶æ²¡æœ‰æä¾›å¯ä»¥è®¿é—®å­ç»„ä»¶çŠ¶æ€çš„ APIï¼Œæ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨&lt;code>this.props.children[0].state&lt;/code>æˆ–è€…ç±»ä¼¼çš„æ–¹æ³•ã€‚æ­£ç¡®çš„ä»å­ç»„ä»¶ä¸­è·å–æ•°æ®çš„æ–¹æ³•åº”è¯¥æ˜¯åœ¨ Props ä¸­ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œè€Œè¿™ç§éš”ç¦»ä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬å®šä¹‰æ›´åŠ æ¸…æ™°çš„ API å¹¶ä¸”ä¿ƒè¿›äº†æ‰€è°“å•å‘æ•°æ®æµã€‚&lt;/p>
&lt;h1 id="composition">Composition&lt;/h1>
&lt;p>React æœ€å¤§çš„ç‰¹æ€§ä¹‹ä¸€å³æ˜¯å…¶å¼ºå¤§çš„ç»„ä»¶çš„å¯ç»„åˆæ€§ï¼Œå®é™…ä¸Šé™¤äº† React ä¹‹å¤–ï¼Œç¬”è€…å¹¶ä¸çŸ¥é“è¿˜æœ‰å“ªä¸ªæ¡†æ¶èƒ½å¤Ÿæä¾›å¦‚æ­¤ç®€å•æ˜“ç”¨çš„æ–¹å¼æ¥åˆ›å»ºä¸ç»„åˆå„å¼å„æ ·çš„ç»„ä»¶ã€‚æœ¬ç« æˆ‘ä»¬ä¼šä¸€èµ·è®¨è®ºäº›å¸¸ç”¨çš„ç»„åˆæŠ€å·§ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¿›è¡Œè®²è§£ã€‚å‡è®¾åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­æœ‰ä¸€ä¸ªé¡µé¦–æ ç›®ï¼Œå¹¶ä¸”å…¶ä¸­æ”¾ç½®äº†å¯¼èˆªæ ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªç‹¬ç«‹çš„ React ç»„ä»¶:&lt;code>App&lt;/code>,&lt;code>Header&lt;/code>ä»¥åŠ&lt;code>Navigation&lt;/code>ã€‚å°†è¿™ä¸‰ä¸ªç»„ä»¶ä¾æ¬¡åµŒå¥—ç»„åˆï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„ä»£ç :&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-&lt;App>" data-lang="&lt;App>"> &amp;lt;Header&amp;gt;
&amp;lt;Navigation&amp;gt; ... &amp;lt;/Navigation&amp;gt;
&amp;lt;/Header&amp;gt;
&amp;lt;/App&amp;gt;
&lt;/code>&lt;/pre>&lt;p>è€Œåœ¨ JSX ä¸­ç»„åˆè¿™äº›ç»„ä»¶çš„æ–¹å¼å°±æ˜¯åœ¨éœ€è¦çš„æ—¶å€™å¼•ç”¨å®ƒä»¬:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">import Header from &amp;#39;./Header.jsx&amp;#39;;
export default class App extends React.Component {
render() {
return &amp;lt;Header /&amp;gt;;
}
}
// Header.jsx
import Navigation from &amp;#39;./Navigation.jsx&amp;#39;;
export default class Header extends React.Component {
render() {
return &amp;lt;header&amp;gt;&amp;lt;Navigation /&amp;gt;&amp;lt;/header&amp;gt;;
}
}
// Navigation.jsx
export default class Navigation extends React.Component {
render() {
return (&amp;lt;nav&amp;gt; ... &amp;lt;/nav&amp;gt;);
}
}
&lt;/code>&lt;/pre>&lt;p>ä¸è¿‡è¿™ç§æ–¹å¼å´å¯èƒ½å­˜åœ¨ä»¥ä¸‹çš„é—®é¢˜:&lt;/p>
&lt;ul>
&lt;li>æˆ‘ä»¬å°†&lt;code>App&lt;/code>å½“åšå„ä¸ªç»„ä»¶é—´çš„è¿æ¥çº¿ï¼Œä¹Ÿæ˜¯æ•´ä¸ªåº”ç”¨çš„å…¥å£ï¼Œå› æ­¤åœ¨&lt;code>App&lt;/code>ä¸­è¿›è¡Œå„ä¸ªç‹¬ç«‹ç»„ä»¶çš„ç»„åˆæ˜¯ä¸ªä¸é”™çš„æ–¹æ³•ã€‚ä¸è¿‡&lt;code>Header&lt;/code>å…ƒç´ ä¸­å¯èƒ½åŒ…å«åƒå›¾æ ‡ã€æœç´¢æ æˆ–è€… Slogan è¿™æ ·çš„å…ƒç´ ã€‚è€Œå¦‚æœæˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªä¸åŒ…å«&lt;code>Navigation&lt;/code>åŠŸèƒ½çš„&lt;code>Header&lt;/code>ç»„ä»¶æ—¶ï¼Œåƒä¸Šé¢è¿™ç§ç›´æ¥å°†&lt;code>Navigation&lt;/code>ç»„ä»¶ç¡¬ç¼–ç è¿›å…¥&lt;code>Header&lt;/code>çš„æ–¹å¼å°±ä¼šéš¾äºä¿®æ”¹ã€‚&lt;/li>
&lt;li>è¿™ç§ç¡¬ç¼–ç çš„æ–¹å¼ä¼šéš¾ä»¥æµ‹è¯•ï¼Œå¦‚æœæˆ‘ä»¬åœ¨&lt;code>Header&lt;/code>ä¸­åŠ å…¥ä¸€äº›è‡ªå®šä¹‰çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œé‚£ä¹ˆåœ¨æµ‹è¯•çš„æ—¶å€™å½“æˆ‘ä»¬è¦åˆ›å»º&lt;code>Header&lt;/code>å®ä¾‹æ—¶ï¼Œå› ä¸ºå…¶ä¾èµ–äºå…¶ä»–ç»„ä»¶è€Œå¯¼è‡´äº†è¿™ç§ä¾èµ–å±‚æ¬¡è¿‡æ·±(è¿™é‡Œä¸åŒ…å«&lt;a href="https://facebook.github.io/react/docs/test-utils.html#shallow-rendering" target="_blank" rel="noopener">Shallow Rendering&lt;/a>è¿™ç§ä»…æ¸²æŸ“çˆ¶ç»„ä»¶è€Œä¸æ¸²æŸ“åµŒå¥—çš„å­ç»„ä»¶æ–¹å¼)ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ä½¿ç”¨-react-çš„childrenapi">ä½¿ç”¨ React çš„&lt;code>children&lt;/code>API&lt;/h2>
&lt;p>React ä¸ºæˆ‘ä»¬æä¾›äº†&lt;code>this.props.children&lt;/code>æ¥å…è®¸çˆ¶ç»„ä»¶è®¿é—®å…¶å­ç»„ä»¶ï¼Œè¿™ç§æ–¹å¼æœ‰åŠ©äºä¿è¯æˆ‘ä»¬çš„&lt;code>Header&lt;/code>ç‹¬ç«‹å¹¶ä¸”ä¸éœ€è¦ä¸å…¶ä»–ç»„ä»¶è§£è€¦åˆã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">export default class App extends React.Component {
render() {
return (
&amp;lt;Header&amp;gt;
&amp;lt;Navigation /&amp;gt;
&amp;lt;/Header&amp;gt;
);
}
}
// Header.jsx
export default class Header extends React.Component {
render() {
return &amp;lt;header&amp;gt;{ this.props.children }&amp;lt;/header&amp;gt;;
}
};
&lt;/code>&lt;/pre>&lt;p>è¿™ç§æ–¹å¼ä¹Ÿæœ‰åŠ©äºæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è¾“å…¥ç©ºç™½çš„&lt;code>div&lt;/code>å…ƒç´ ï¼Œä»è€Œå°†è¦æµ‹è¯•çš„ç›®æ ‡å…ƒç´ éš”ç¦»å¼€æ¥è€Œä¸“æ³¨äºæˆ‘ä»¬éœ€è¦æµ‹è¯•çš„éƒ¨åˆ†ã€‚&lt;/p>
&lt;h2 id="å°†å­ç»„ä»¶ä»¥å±æ€§æ–¹å¼ä¼ å…¥">å°†å­ç»„ä»¶ä»¥å±æ€§æ–¹å¼ä¼ å…¥&lt;/h2>
&lt;p>React ç»„ä»¶å¯ä»¥æ¥å— Props ä½œä¸ºè¾“å…¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©å°†éœ€è¦å°è£…çš„ç»„ä»¶ä»¥ Props æ–¹å¼ä¼ å…¥:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">class App extends React.Component {
render() {
var title = &amp;lt;h1&amp;gt;Hello there!&amp;lt;/h1&amp;gt;;
return (
&amp;lt;Header title={ title }&amp;gt;
&amp;lt;Navigation /&amp;gt;
&amp;lt;/Header&amp;gt;
);
}
};
// Header.jsx
export default class Header extends React.Component {
render() {
return (
&amp;lt;header&amp;gt;
{ this.props.title }
&amp;lt;hr /&amp;gt;
{ this.props.children }
&amp;lt;/header&amp;gt;
);
}
};
&lt;/code>&lt;/pre>&lt;p>è¿™ç§æ–¹å¼åœ¨æˆ‘ä»¬éœ€è¦å¯¹ä¼ å…¥çš„å¾…ç»„åˆç»„ä»¶è¿›è¡Œä¸€äº›ä¿®æ­£æ—¶éå¸¸é€‚ç”¨ã€‚&lt;/p>
&lt;h1 id="higher-order-components">Higher-order components&lt;/h1>
&lt;p>Higher-Order Components æ¨¡å¼çœ‹ä¸Šå»éå¸¸ç±»ä¼¼äºè£…é¥°å™¨æ¨¡å¼ï¼Œå®ƒä¼šç”¨äºåŒ…è£¹æŸä¸ªç»„ä»¶ç„¶åä¸ºå…¶æ·»åŠ ä¸€äº›æ–°çš„åŠŸèƒ½ã€‚è¿™é‡Œå±•ç¤ºä¸€ä¸ªç®€å•çš„ç”¨äºæ„é€  Higher-Order Component çš„å‡½æ•°:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-var" data-lang="var"> class Enhance extends React.Component {
render() {
return (
&amp;lt;Component
{...this.state}
{...this.props}
/&amp;gt;
)
}
};
export default enhanceComponent;
&lt;/code>&lt;/pre>&lt;p>é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šæ„å»ºä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œæ¥æ”¶åŸå§‹çš„ç»„ä»¶ç„¶åè¿”å›ä¸€ä¸ªæ‰€è°“çš„å¢å¼ºæˆ–è€…åŒ…è£¹åçš„ç‰ˆæœ¬ï¼Œè­¬å¦‚:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-var" data-lang="var">class App extends React.Component {
render() {
return React.createElement(enhanceComponent(OriginalComponent));
}
};
&lt;/code>&lt;/pre>&lt;p>ä¸€èˆ¬æ¥è¯´ï¼Œé«˜é˜¶ç»„ä»¶çš„é¦–è¦å·¥ä½œå°±æ˜¯æ¸²æŸ“åŸå§‹çš„ç»„ä»¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¹Ÿä¼šå°† Props ä¸ State ä¼ é€’è¿›å»ï¼Œå°†è¿™ä¸¤ä¸ªå±æ€§ä¼ é€’è¿›å»ä¼šæœ‰åŠ©äºæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ•°æ®ä»£ç†ã€‚HOC æ¨¡å¼å…è®¸æˆ‘ä»¬æ§åˆ¶ç»„ä»¶çš„è¾“å…¥ï¼Œå³å°†éœ€è¦ä¼ å…¥çš„æ•°æ®ä»¥ Props ä¼ é€’è¿›å»ã€‚è­¬å¦‚æˆ‘ä»¬éœ€è¦ä¸ºåŸå§‹ç»„ä»¶æ·»åŠ ä¸€äº›é…ç½®:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-var" data-lang="var">var enhanceComponent = (Component) =&amp;gt;
class Enhance extends React.Component {
render() {
return (
&amp;lt;Component
{...this.state}
{...this.props}
title={ config.appTitle }
/&amp;gt;
)
}
};
&lt;/code>&lt;/pre>&lt;p>è¿™é‡Œå¯¹äº&lt;code>configuration&lt;/code>çš„ç»†èŠ‚å®ç°ä¼šè¢«éšè—åˆ°é«˜é˜¶ç»„ä»¶ä¸­ï¼ŒåŸå§‹ç»„ä»¶åªéœ€è¦äº†è§£ä» Props ä¸­è·å–åˆ°&lt;code>title&lt;/code>å˜é‡ç„¶åæ¸²æŸ“åˆ°ç•Œé¢ä¸Šã€‚åŸå§‹ç»„ä»¶å¹¶ä¸ä¼šå…³å¿ƒå˜é‡å­˜äºä½•åœ°ï¼Œä»ä½•è€Œæ¥ï¼Œè¿™ç§æ¨¡å¼æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºæˆ‘ä»¬èƒ½å¤Ÿä»¥ç‹¬ç«‹çš„æ¨¡å¼å¯¹è¯¥ç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼Œå¹¶ä¸”å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å¯¹è¯¥ç»„ä»¶è¿›è¡Œ Mockingã€‚åœ¨ HOC æ¨¡å¼ä¸‹æˆ‘ä»¬çš„åŸå§‹ç»„ä»¶ä¼šå˜æˆè¿™æ ·å­:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-var" data-lang="var">&lt;/code>&lt;/pre>&lt;h1 id="dependency-injection">Dependency injection&lt;/h1>
&lt;p>æˆ‘ä»¬å†™çš„å¤§éƒ¨åˆ†ç»„ä»¶ä¸æ¨¡å—éƒ½ä¼šåŒ…å«ä¸€äº›ä¾èµ–ï¼Œåˆé€‚çš„ä¾èµ–ç®¡ç†æœ‰åŠ©äºåˆ›å»ºè‰¯å¥½å¯ç»´æŠ¤çš„é¡¹ç›®ç»“æ„ã€‚è€Œæ‰€è°“çš„ä¾èµ–æ³¨å…¥æŠ€æœ¯æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œæ— è®ºæ˜¯åœ¨ Java è¿˜æ˜¯å…¶ä»–åº”ç”¨ç¨‹åºä¸­ï¼Œä¾èµ–æ³¨å…¥éƒ½å—åˆ°äº†å¹¿æ³›çš„ä½¿ç”¨ã€‚è€Œ React ä¸­å¯¹äºä¾èµ–æ³¨å…¥çš„éœ€è¦ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œè®©æˆ‘ä»¬å‡è®¾æœ‰å¦‚ä¸‹çš„åº”ç”¨æ ‘ç»“æ„:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">export default function Title(props) {
return &amp;lt;h1&amp;gt;{ props.title }&amp;lt;/h1&amp;gt;;
}
// Header.jsx
import Title from &amp;#39;./Title.jsx&amp;#39;;
export default function Header() {
return (
&amp;lt;header&amp;gt;
&amp;lt;Title /&amp;gt;
&amp;lt;/header&amp;gt;
);
}
// App.jsx
import Header from &amp;#39;./Header.jsx&amp;#39;;
class App extends React.Component {
constructor(props) {
super(props);
this.state = { title: &amp;#39;React in patterns&amp;#39; };
}
render() {
return &amp;lt;Header /&amp;gt;;
}
};
&lt;/code>&lt;/pre>&lt;p>&lt;code>title&lt;/code>è¿™ä¸ªå˜é‡çš„å€¼æ˜¯åœ¨&lt;code>App&lt;/code>ç»„ä»¶ä¸­è¢«å®šä¹‰å¥½çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä¼ å…¥åˆ°&lt;code>Title&lt;/code>ç»„ä»¶ä¸­ã€‚æœ€ç›´æ¥çš„æ–¹æ³•å°±æ˜¯å°†å…¶ä»&lt;code>App&lt;/code>ç»„ä»¶ä¼ å…¥åˆ°&lt;code>Header&lt;/code>ç»„ä»¶ï¼Œç„¶åå†ç”±&lt;code>Header&lt;/code>ç»„ä»¶ä¼ å…¥åˆ°&lt;code>Title&lt;/code>ç»„ä»¶ä¸­ã€‚è¿™ç§æ–¹æ³•åœ¨è¿™é‡Œæè¿°çš„ç®€å•çš„ä»…æœ‰ä¸‰ä¸ªç»„ä»¶çš„åº”ç”¨ä¸­è¿˜æ˜¯éå¸¸æ¸…æ™°å¯ç»´æŠ¤çš„ï¼Œä¸è¿‡éšç€é¡¹ç›®åŠŸèƒ½ä¸å¤æ‚åº¦çš„å¢åŠ ï¼Œè¿™ç§å±‚æ¬¡åŒ–çš„ä¼ å€¼æ–¹å¼ä¼šå¯¼è‡´å¾ˆå¤šçš„ç»„ä»¶è¦å»è€ƒè™‘å®ƒä»¬å¹¶ä¸éœ€è¦çš„å±æ€§ã€‚åœ¨ä¸Šæ–‡æ‰€è®²çš„ HOC æ¨¡å¼ä¸­æˆ‘ä»¬å·²ç»ä½¿ç”¨äº†æ•°æ®æ³¨å…¥çš„æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åŒæ ·çš„æŠ€æœ¯æ¥æ³¨å…¥&lt;code>title&lt;/code>å˜é‡:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">var title = &amp;#39;React in patterns&amp;#39;;
var enhanceComponent = (Component) =&amp;gt;
class Enhance extends React.Component {
render() {
return (
&amp;lt;Component
{...this.state}
{...this.props}
title={ title }
/&amp;gt;
)
}
};
export default enhanceComponent;
// Header.jsx
import enhance from &amp;#39;./enhance.jsx&amp;#39;;
import Title from &amp;#39;./Title.jsx&amp;#39;;
var EnhancedTitle = enhance(Title);
export default function Header() {
return (
&amp;lt;header&amp;gt;
&amp;lt;EnhancedTitle /&amp;gt;
&amp;lt;/header&amp;gt;
);
}
&lt;/code>&lt;/pre>&lt;p>åœ¨ä¸Šæ–‡è¿™ç§ HOC æ¨¡å¼ä¸­ï¼Œ&lt;code>title&lt;/code>å˜é‡è¢«åŒ…å«åœ¨äº†ä¸€ä¸ªéšè—çš„ä¸­é—´å±‚ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ä½œä¸º Props å€¼ä¼ å…¥åˆ°åŸå§‹çš„&lt;code>Title&lt;/code>å˜é‡ä¸­å¹¶ä¸”å¾—åˆ°ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚è¿™ç§æ–¹å¼æ€æƒ³æ˜¯ä¸é”™ï¼Œä¸è¿‡è¿˜æ˜¯åªè§£å†³äº†éƒ¨åˆ†é—®é¢˜ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ä¸å»æ˜¾å¼åœ°å°†&lt;code>title&lt;/code>å˜é‡ä¼ é€’åˆ°&lt;code>Title&lt;/code>ç»„ä»¶ä¸­å³å¯ä»¥è¾¾åˆ°åŒæ ·çš„&lt;code>enhance.jsx&lt;/code>æ•ˆæœã€‚
React ä¸ºæˆ‘ä»¬æä¾›äº†&lt;code>context&lt;/code>çš„æ¦‚å¿µï¼Œ&lt;code>context&lt;/code>æ˜¯è´¯ç©¿äºæ•´ä¸ª React ç»„ä»¶æ ‘å…è®¸æ¯ä¸ªç»„ä»¶è®¿é—®çš„å¯¹è±¡ã€‚æœ‰ç‚¹åƒæ‰€è°“çš„ Event Busï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­å¦‚ä¸‹æ‰€ç¤º:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">var context = { title: &amp;#39;React in patterns&amp;#39; };
class App extends React.Component {
getChildContext() {
return context;
}
...
};
App.childContextTypes = {
title: React.PropTypes.string
};
// a place where we need data
class Inject extends React.Component {
render() {
var title = this.context.title;
...
}
}
Inject.contextTypes = {
title: React.PropTypes.string
};
&lt;/code>&lt;/pre>&lt;p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ context å¯¹è±¡å¿…é¡»è¦é€šè¿‡&lt;code>childContextTypes&lt;/code>ä¸&lt;code>contextTypes&lt;/code>æŒ‡æ˜å…¶æ„æˆã€‚å¦‚æœåœ¨&lt;code>context&lt;/code>å¯¹è±¡ä¸­æœªæŒ‡æ˜è¿™äº›é‚£ä¹ˆ&lt;code>context&lt;/code>ä¼šè¢«è®¾ç½®ä¸ºç©ºï¼Œè¿™å¯èƒ½ä¼šæ·»åŠ äº›é¢å¤–çš„ä»£ç ã€‚å› æ­¤æˆ‘ä»¬æœ€å¥½ä¸è¦å°†&lt;code>context&lt;/code>å½“åšä¸€ä¸ªç®€å•çš„ object å¯¹è±¡è€Œä¸ºå…¶è®¾ç½®ä¸€äº›å°è£…æ–¹æ³•:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">export default {
data: {},
get(key) {
return this.data[key];
},
register(key, value) {
this.data[key] = value;
}
}
&lt;/code>&lt;/pre>&lt;p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„&lt;code>App&lt;/code>ç»„ä»¶ä¼šè¢«æ”¹é€ æˆè¿™æ ·å­:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-import" data-lang="import">dependencies.register(&amp;#39;title&amp;#39;, &amp;#39;React in patterns&amp;#39;);
class App extends React.Component {
getChildContext() {
return dependencies;
}
render() {
return &amp;lt;Header /&amp;gt;;
}
};
App.childContextTypes = {
data: React.PropTypes.object,
get: React.PropTypes.func,
register: React.PropTypes.func
};
&lt;/code>&lt;/pre>&lt;p>è€Œåœ¨&lt;code>Title&lt;/code>ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå¦‚ä¸‹è®¾ç½®:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">export default class Title extends React.Component {
render() {
return &amp;lt;h1&amp;gt;{ this.context.get(&amp;#39;title&amp;#39;) }&amp;lt;/h1&amp;gt;
}
}
Title.contextTypes = {
data: React.PropTypes.object,
get: React.PropTypes.func,
register: React.PropTypes.func
};
&lt;/code>&lt;/pre>&lt;p>å½“ç„¶æˆ‘ä»¬ä¸å¸Œæœ›åœ¨æ¯æ¬¡è¦ä½¿ç”¨&lt;code>contextTypes&lt;/code>çš„æ—¶å€™éƒ½éœ€è¦æ˜¾å¼åœ°å£°æ˜ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å£°æ˜ç»†èŠ‚åŒ…å«åœ¨ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ä¸­ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">import wire from &amp;#39;./wire&amp;#39;;
function Title(props) {
return &amp;lt;h1&amp;gt;{ props.title }&amp;lt;/h1&amp;gt;;
}
export default wire(Title, [&amp;#39;title&amp;#39;], function resolve(title) {
return { title };
});
&lt;/code>&lt;/pre>&lt;p>è¿™é‡Œçš„&lt;code>wire&lt;/code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ React ç»„ä»¶å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ç³»åˆ—éœ€è¦æ³¨å…¥çš„ä¾èµ–å€¼ï¼Œæ³¨æ„ï¼Œè¿™äº›ä¾èµ–å€¼åŠ¡å¿…å·²ç»è°ƒç”¨è¿‡&lt;code>register&lt;/code>å‡½æ•°ã€‚æœ€åä¸€ä¸ªå‚æ•°åˆ™æ˜¯æ‰€è°“çš„æ˜ å°„å‡½æ•°ï¼Œå®ƒæ¥æ”¶å­˜å‚¨åœ¨&lt;code>context&lt;/code>ä¸­çš„æŸä¸ªåŸå§‹å€¼ç„¶åè¿”å› React Props ä¸­éœ€è¦çš„å€¼ã€‚å› ä¸ºåœ¨è¿™ä¸ªä¾‹å­é‡Œ&lt;code>context&lt;/code>ä¸­å­˜å‚¨çš„å€¼ä¸&lt;code>Title&lt;/code>ç»„ä»¶ä¸­éœ€è¦çš„å€¼éƒ½æ˜¯&lt;code>title&lt;/code>å˜é‡ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥è¿”å›å³å¯ã€‚ä¸è¿‡åœ¨çœŸå®çš„åº”ç”¨ä¸­å¯èƒ½æ˜¯ä¸€ä¸ªæ•°æ®é›†åˆã€é…ç½®ç­‰ç­‰ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-export" data-lang="export"> class Inject extends React.Component {
render() {
var resolved = dependencies.map(this.context.get.bind(this.context));
var props = mapper(...resolved);
return React.createElement(Component, props);
}
}
Inject.contextTypes = {
data: React.PropTypes.object,
get: React.PropTypes.func,
register: React.PropTypes.func
};
return Inject;
};
&lt;/code>&lt;/pre>&lt;p>è¿™é‡Œçš„ Inject å°±æ˜¯æŸä¸ªå¯ä»¥è®¿é—®&lt;code>context&lt;/code>çš„é«˜é˜¶ç»„ä»¶ï¼Œè€Œ&lt;code>mapper&lt;/code>å°±æ˜¯ç”¨äºæ¥æ”¶&lt;code>context&lt;/code>ä¸­çš„æ•°æ®å¹¶å°†å…¶è½¬åŒ–ä¸ºç»„ä»¶æ‰€éœ€è¦çš„ Props çš„å‡½æ•°ã€‚å®é™…ä¸Šç°åœ¨å¤§éƒ¨åˆ†çš„ä¾èµ–æ³¨å…¥çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯åŸºäº&lt;code>context&lt;/code>ï¼Œæˆ‘è§‰å¾—äº†è§£è¿™ç§æ–¹å¼çš„åº•å±‚åŸç†è¿˜æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚è­¬å¦‚ç°åœ¨æµè¡Œçš„&lt;code>Redux&lt;/code>ï¼Œå…¶æ ¸å¿ƒçš„&lt;code>connect&lt;/code>å‡½æ•°ä¸&lt;code>Provider&lt;/code>ç»„ä»¶éƒ½æ˜¯åŸºäº&lt;code>context&lt;/code>ã€‚&lt;/p>
&lt;h1 id="one-direction-data-flow">One direction data flow&lt;/h1>
&lt;p>å•å‘æ•°æ®æµæ˜¯ React ä¸­ä¸»è¦çš„æ•°æ®é©±åŠ¨æ¨¡å¼ï¼Œå…¶æ ¸å¿ƒæ¦‚å¿µåœ¨äºç»„ä»¶å¹¶ä¸ä¼šä¿®æ”¹å®ƒä»¬æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œå®ƒä»¬åªæ˜¯è´Ÿè´£æ¥æ”¶æ–°çš„æ•°æ®è€Œåé‡æ–°æ¸²æŸ“åˆ°ç•Œé¢ä¸Šæˆ–è€…å‘å‡ºæŸäº› Action ä»¥è§¦å‘æŸäº›ä¸“é—¨çš„ä¸šåŠ¡ä»£ç æ¥ä¿®æ”¹æ•°æ®å­˜å‚¨ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬å…ˆè®¾ç½®ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæŒ‰é’®çš„&lt;code>Switcher&lt;/code>ç»„ä»¶ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»è¯¥æŒ‰é’®æ—¶ä¼šè§¦å‘æŸä¸ª&lt;code>flag&lt;/code>å˜é‡çš„æ”¹å˜:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-class" data-lang="class"> constructor(props) {
super(props);
this.state = { flag: false };
this._onButtonClick = e =&amp;gt; this.setState({ flag: !this.state.flag });
}
render() {
return (
&amp;lt;button onClick={ this._onButtonClick }&amp;gt;
{ this.state.flag ? &amp;#39;lights on&amp;#39; : &amp;#39;lights off&amp;#39; }
&amp;lt;/button&amp;gt;
);
}
};
// ... and we render it
class App extends React.Component {
render() {
return &amp;lt;Switcher /&amp;gt;;
}
};
&lt;/code>&lt;/pre>&lt;p>æ­¤æ—¶æˆ‘ä»¬å°†æ‰€æœ‰çš„æ•°æ®æ”¾ç½®åˆ°ç»„ä»¶å†…ï¼Œæ¢è¨€ä¹‹ï¼Œ&lt;code>Switcher&lt;/code>æ˜¯å”¯ä¸€çš„åŒ…å«æˆ‘ä»¬&lt;code>flag&lt;/code>å˜é‡çš„åœ°æ–¹ï¼Œæˆ‘ä»¬æ¥å°è¯•ä¸‹å°†è¿™äº›æ•°æ®æ‰˜ç®¡äºä¸“é—¨çš„ Store ä¸­:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-var" data-lang="var"> _flag: false,
set: function(value) {
this._flag = value;
},
get: function() {
return this._flag;
}
};
class Switcher extends React.Component {
constructor(props) {
super(props);
this.state = { flag: false };
this._onButtonClick = e =&amp;gt; {
this.setState({ flag: !this.state.flag }, () =&amp;gt; {
this.props.onChange(this.state.flag);
});
}
}
render() {
return (
&amp;lt;button onClick={ this._onButtonClick }&amp;gt;
{ this.state.flag ? &amp;#39;lights on&amp;#39; : &amp;#39;lights off&amp;#39; }
&amp;lt;/button&amp;gt;
);
}
};
class App extends React.Component {
render() {
return &amp;lt;Switcher onChange={ Store.set.bind(Store) } /&amp;gt;;
}
};
&lt;/code>&lt;/pre>&lt;p>è¿™é‡Œçš„&lt;code>Store&lt;/code>å¯¹è±¡æ˜¯ä¸€ä¸ªç®€å•çš„å•ä¾‹å¯¹è±¡ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è®¾ç½®ä¸è·å–&lt;code>_flag&lt;/code>å±æ€§å€¼ã€‚è€Œé€šè¿‡å°†&lt;code>getter&lt;/code>å‡½æ•°ä¼ é€’åˆ°ç»„ä»¶å†…ï¼Œå¯ä»¥å…è®¸æˆ‘ä»¬åœ¨&lt;code>Store&lt;/code>å¤–éƒ¨ä¿®æ”¹è¿™äº›å˜é‡ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„åº”ç”¨å·¥ä½œæµå¤§æ¦‚æ˜¯è¿™æ ·çš„:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-User's" data-lang="User's"> |
Switcher -------&amp;gt; Store
&lt;/code>&lt;/pre>&lt;p>å‡è®¾æˆ‘ä»¬å·²ç»å°†&lt;code>flag&lt;/code>å€¼ä¿å­˜åˆ°æŸä¸ªåç«¯æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºè¯¥ç»„ä»¶è®¾ç½®ä¸€ä¸ªåˆé€‚çš„åˆå§‹çŠ¶æ€ã€‚æ­¤æ—¶å°±ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜åœ¨äºåŒä¸€ä»½æ•°æ®ä¿å­˜åœ¨äº†ä¸¤ä¸ªåœ°æ–¹ï¼Œå¯¹äº UI ä¸&lt;code>Store&lt;/code>åˆ†åˆ«ä¿å­˜äº†å„è‡ªç‹¬ç«‹çš„å…³äº&lt;code>flag&lt;/code>çš„æ•°æ®çŠ¶æ€ï¼Œæˆ‘ä»¬ç­‰äºåœ¨&lt;code>Store&lt;/code>ä¸&lt;code>Switcher&lt;/code>ä¹‹é—´å»ºç«‹äº†åŒå‘çš„æ•°æ®æµ:&lt;code>Store ---&amp;gt; Switcher&lt;/code>ä¸&lt;code>Switcher ---&amp;gt; Store&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-//" data-lang="//">&amp;lt;Switcher
value={ Store.get() }
onChange={ Store.set.bind(Store) } /&amp;gt;
// ... in Switcher component
constructor(props) {
super(props);
this.state = { flag: this.props.value };
...
&lt;/code>&lt;/pre>&lt;p>æ­¤æ—¶æˆ‘ä»¬çš„æ•°æ®æµå‘å˜æˆäº†:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-User's" data-lang="User's"> |
Switcher &amp;lt;-------&amp;gt; Store
^ |
| |
| |
| v
Service communicating
with our backend
&lt;/code>&lt;/pre>&lt;p>åœ¨è¿™ç§åŒå‘æ•°æ®æµä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¤–éƒ¨æ”¹å˜äº†&lt;code>Store&lt;/code>ä¸­çš„çŠ¶æ€ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†æ”¹å˜ä¹‹åçš„æœ€æ–°å€¼æ›´æ–°åˆ°&lt;code>Switcher&lt;/code>ä¸­ï¼Œè¿™æ ·ä¹Ÿåœ¨æ— å½¢ä¹‹é—´å¢åŠ äº†åº”ç”¨çš„å¤æ‚åº¦ã€‚è€Œå•å‘æ•°æ®æµåˆ™æ˜¯è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¼ºåˆ¶åœ¨å…¨å±€åªä¿ç•™ä¸€ä¸ªçŠ¶æ€å­˜å‚¨ï¼Œé€šå¸¸æ˜¯å­˜æ”¾åœ¨ Store ä¸­ã€‚åœ¨å•å‘æ•°æ®æµä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›è®¢é˜… Store ä¸­çŠ¶æ€æ”¹å˜çš„å“åº”å‡½æ•°:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-var" data-lang="var"> _handlers: [],
_flag: &amp;#39;&amp;#39;,
onChange: function(handler) {
this._handlers.push(handler);
},
set: function(value) {
this._flag = value;
this._handlers.forEach(handler =&amp;gt; handler())
},
get: function() {
return this._flag;
}
};
&lt;/code>&lt;/pre>&lt;p>ç„¶åæˆ‘ä»¬åœ¨&lt;code>App&lt;/code>ç»„ä»¶ä¸­è®¾ç½®äº†é’©å­å‡½æ•°ï¼Œè¿™æ ·æ¯æ¬¡&lt;code>Store&lt;/code>æ”¹å˜å…¶å€¼çš„æ—¶å€™æˆ‘ä»¬éƒ½ä¼šå¼ºåˆ¶é‡æ–°æ¸²æŸ“:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-class" data-lang="class"> constructor(props) {
super(props);
Store.onChange(this.forceUpdate.bind(this));
}
render() {
return (
&amp;lt;div&amp;gt;
&amp;lt;Switcher
value={ Store.get() }
onChange={ Store.set.bind(Store) } /&amp;gt;
&amp;lt;/div&amp;gt;
);
}
};
&lt;/code>&lt;/pre>&lt;p>æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„&lt;code>forceUpdate&lt;/code>å¹¶ä¸æ˜¯ä¸€ä¸ªæ¨èçš„ç”¨æ³•ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ HOC æ¨¡å¼æ¥è¿›è¡Œé‡æ¸²æŸ“ï¼Œè¿™é‡Œä½¿ç”¨&lt;code>forceUpdate&lt;/code>åªæ˜¯ç”¨äºæ¼”ç¤ºè¯´æ˜ã€‚åœ¨åŸºäºä¸Šè¿°çš„æ”¹é€ ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åœ¨ç»„ä»¶ä¸­ç»§ç»­ä¿ç•™å†…éƒ¨çŠ¶æ€:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-class" data-lang="class"> constructor(props) {
super(props);
this._onButtonClick = e =&amp;gt; {
this.props.onChange(!this.props.value);
}
}
render() {
return (
&amp;lt;button onClick={ this._onButtonClick }&amp;gt;
{ this.props.value ? &amp;#39;lights on&amp;#39; : &amp;#39;lights off&amp;#39; }
&amp;lt;/button&amp;gt;
);
}
};
&lt;/code>&lt;/pre>&lt;p>è¿™ç§æ¨¡å¼çš„ä¼˜åŠ¿åœ¨äºä¼šå°†æˆ‘ä»¬çš„ç»„ä»¶æ”¹é€ ä¸ºç®€å•çš„&lt;code>Store&lt;/code>ä¸­æ•°æ®çš„å‘ˆç°ï¼Œæ­¤æ—¶æ‰æ˜¯çœŸæ­£æ— çŠ¶æ€çš„ Viewã€‚æˆ‘ä»¬å¯ä»¥ä»¥å®Œå…¨å£°æ˜å¼çš„æ–¹å¼æ¥ç¼–å†™ç»„ä»¶ï¼Œè€Œå°†åº”ç”¨ä¸­å¤æ‚çš„ä¸šåŠ¡é€»è¾‘æ”¾ç½®åˆ°å•ç‹¬çš„åœ°æ–¹ã€‚æ­¤æ—¶æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æµå›¾å˜æˆäº†:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-Service" data-lang="Service">with our backend
^
|
v
Store &amp;lt;-----
||
v|
Switcher ----&amp;gt;
^
|
|
User input
&lt;/code>&lt;/pre>&lt;p>åœ¨è¿™ç§å•å‘æ•°æ®æµä¸­æˆ‘ä»¬ä¸å†éœ€è¦åŒæ­¥ç³»ç»Ÿä¸­çš„å¤šä¸ªéƒ¨åˆ†ï¼Œè¿™ç§å•å‘æ•°æ®æµçš„æ¦‚å¿µå¹¶ä¸ä»…ä»…é€‚ç”¨äºåŸºäº React çš„åº”ç”¨ã€‚&lt;/p></description></item></channel></rss>