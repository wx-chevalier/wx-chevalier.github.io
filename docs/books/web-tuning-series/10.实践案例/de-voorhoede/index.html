<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="本文翻译自 case-study-boosting-front-end-performance。 在 De Voorhoede工作的日子里，我们一直在追寻为用户构建高性能的前端解决方案。不过并不是每个客户会乐于"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/web-tuning-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/de-voorhoede/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/web-tuning-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/de-voorhoede/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/web-tuning-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/de-voorhoede/"><meta property="og:title" content="De Voorhoede | Next-gen Tech Edu"><meta property="og:description" content="本文翻译自 case-study-boosting-front-end-performance。 在 De Voorhoede工作的日子里，我们一直在追寻为用户构建高性能的前端解决方案。不过并不是每个客户会乐于"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>De Voorhoede | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=61ae67112314d68e5047761dcd56584a><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">10.实践案例</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id36d7b1aa74b77e243184ca623292114c")' href=#id36d7b1aa74b77e243184ca623292114c aria-expanded=false aria-controls=id36d7b1aa74b77e243184ca623292114c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/>Web-Tuning-Series</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id36d7b1aa74b77e243184ca623292114c aria-expanded=false aria-controls=id36d7b1aa74b77e243184ca623292114c><i class="fa-solid fa-angle-down" id=caret-id36d7b1aa74b77e243184ca623292114c></i></a></div><ul class="nav docs-sidenav collapse show" id=id36d7b1aa74b77e243184ca623292114c><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd529716a1e7169949c296fda3bd011a7")' href=#idd529716a1e7169949c296fda3bd011a7 aria-expanded=false aria-controls=idd529716a1e7169949c296fda3bd011a7 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/>1.浏览器工作机制</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd529716a1e7169949c296fda3bd011a7 aria-expanded=false aria-controls=idd529716a1e7169949c296fda3bd011a7><i class="fa-solid fa-angle-right" id=caret-idd529716a1e7169949c296fda3bd011a7></i></a></div><ul class="nav docs-sidenav collapse" id=idd529716a1e7169949c296fda3bd011a7><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id29980000b2234db245e7296601ace81f")' href=#id29980000b2234db245e7296601ace81f aria-expanded=false aria-controls=id29980000b2234db245e7296601ace81f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/1.%E7%BD%91%E7%BB%9C%E4%B8%8E%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82/>1.网络与资源请求</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id29980000b2234db245e7296601ace81f aria-expanded=false aria-controls=id29980000b2234db245e7296601ace81f><i class="fa-solid fa-angle-right" id=caret-id29980000b2234db245e7296601ace81f></i></a></div><ul class="nav docs-sidenav collapse" id=id29980000b2234db245e7296601ace81f><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/1.%E7%BD%91%E7%BB%9C%E4%B8%8E%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82/%E7%BD%91%E7%BB%9C%E4%B8%8E%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82/>网络与资源请求</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida6711542c80746bf5ff1da00c6a463e6")' href=#ida6711542c80746bf5ff1da00c6a463e6 aria-expanded=false aria-controls=ida6711542c80746bf5ff1da00c6a463e6 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/2.%E8%A7%A3%E6%9E%90%E4%B8%8E%E6%B8%B2%E6%9F%93/>2.解析与渲染</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida6711542c80746bf5ff1da00c6a463e6 aria-expanded=false aria-controls=ida6711542c80746bf5ff1da00c6a463e6><i class="fa-solid fa-angle-right" id=caret-ida6711542c80746bf5ff1da00c6a463e6></i></a></div><ul class="nav docs-sidenav collapse" id=ida6711542c80746bf5ff1da00c6a463e6><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/2.%E8%A7%A3%E6%9E%90%E4%B8%8E%E6%B8%B2%E6%9F%93/%E8%A7%A3%E6%9E%90%E4%B8%8E%E6%B8%B2%E6%9F%93/>解析与渲染</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8524bcf0e8e540226a8c6e8e38064770")' href=#id8524bcf0e8e540226a8c6e8e38064770 aria-expanded=false aria-controls=id8524bcf0e8e540226a8c6e8e38064770 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/3.%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/>3.事件处理</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8524bcf0e8e540226a8c6e8e38064770 aria-expanded=false aria-controls=id8524bcf0e8e540226a8c6e8e38064770><i class="fa-solid fa-angle-right" id=caret-id8524bcf0e8e540226a8c6e8e38064770></i></a></div><ul class="nav docs-sidenav collapse" id=id8524bcf0e8e540226a8c6e8e38064770><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/3.%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/>事件处理</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id102c574ee876bd0c85606b1c20ff0fc3")' href=#id102c574ee876bd0c85606b1c20ff0fc3 aria-expanded=false aria-controls=id102c574ee876bd0c85606b1c20ff0fc3 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/4.%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/>4.页面的生命周期</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id102c574ee876bd0c85606b1c20ff0fc3 aria-expanded=false aria-controls=id102c574ee876bd0c85606b1c20ff0fc3><i class="fa-solid fa-angle-right" id=caret-id102c574ee876bd0c85606b1c20ff0fc3></i></a></div><ul class="nav docs-sidenav collapse" id=id102c574ee876bd0c85606b1c20ff0fc3><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/4.%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/>页面的生命周期</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id99af97529fa6d6982ab41f4b6cf02a1f")' href=#id99af97529fa6d6982ab41f4b6cf02a1f aria-expanded=false aria-controls=id99af97529fa6d6982ab41f4b6cf02a1f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/5.%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/>5.渲染引擎</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id99af97529fa6d6982ab41f4b6cf02a1f aria-expanded=false aria-controls=id99af97529fa6d6982ab41f4b6cf02a1f><i class="fa-solid fa-angle-right" id=caret-id99af97529fa6d6982ab41f4b6cf02a1f></i></a></div><ul class="nav docs-sidenav collapse" id=id99af97529fa6d6982ab41f4b6cf02a1f><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/5.%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/renderingng/>RenderingNG</a></li><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/5.%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%9E%B6%E6%9E%84/>进程与线程架构</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id1dbb16443fca9ef9747c880be9100b58")' href=#id1dbb16443fca9ef9747c880be9100b58 aria-expanded=false aria-controls=id1dbb16443fca9ef9747c880be9100b58 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/5.%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84/>浏览器多进程架构</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id1dbb16443fca9ef9747c880be9100b58 aria-expanded=false aria-controls=id1dbb16443fca9ef9747c880be9100b58><i class="fa-solid fa-angle-right" id=caret-id1dbb16443fca9ef9747c880be9100b58></i></a></div><ul class="nav docs-sidenav collapse" id=id1dbb16443fca9ef9747c880be9100b58><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/5.%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84/chrome-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84/>Chrome 多进程架构</a></li><li class="child level"><a href=/books/web-tuning-series/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6/5.%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84/edge-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84/>Edge 多进程架构</a></li></ul></div></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9c5b3805e01eb78ed8ec0702d3a2eb1c")' href=#id9c5b3805e01eb78ed8ec0702d3a2eb1c aria-expanded=false aria-controls=id9c5b3805e01eb78ed8ec0702d3a2eb1c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/>10.实践案例</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9c5b3805e01eb78ed8ec0702d3a2eb1c aria-expanded=false aria-controls=id9c5b3805e01eb78ed8ec0702d3a2eb1c><i class="fa-solid fa-angle-down" id=caret-id9c5b3805e01eb78ed8ec0702d3a2eb1c></i></a></div><ul class="nav docs-sidenav collapse show" id=id9c5b3805e01eb78ed8ec0702d3a2eb1c><li class="child level active"><a href=/books/web-tuning-series/10.%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B/de-voorhoede/>De Voorhoede</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2f0141ed96fbfc4b559019282b16598a")' href=#id2f0141ed96fbfc4b559019282b16598a aria-expanded=false aria-controls=id2f0141ed96fbfc4b559019282b16598a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/>2.性能监控与系统化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2f0141ed96fbfc4b559019282b16598a aria-expanded=false aria-controls=id2f0141ed96fbfc4b559019282b16598a><i class="fa-solid fa-angle-right" id=caret-id2f0141ed96fbfc4b559019282b16598a></i></a></div><ul class="nav docs-sidenav collapse" id=id2f0141ed96fbfc4b559019282b16598a><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id788ccbff8914a33d19fa8a2c8004fbc4")' href=#id788ccbff8914a33d19fa8a2c8004fbc4 aria-expanded=false aria-controls=id788ccbff8914a33d19fa8a2c8004fbc4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/>99.参考资料</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id788ccbff8914a33d19fa8a2c8004fbc4 aria-expanded=false aria-controls=id788ccbff8914a33d19fa8a2c8004fbc4><i class="fa-solid fa-angle-right" id=caret-id788ccbff8914a33d19fa8a2c8004fbc4></i></a></div><ul class="nav docs-sidenav collapse" id=id788ccbff8914a33d19fa8a2c8004fbc4><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E8%BF%99%E4%BA%9B%E5%B9%B4%E7%BB%8F%E9%AA%8C%E9%83%BD%E5%9C%A8%E8%BF%99%E4%BA%86/>2021-应用性能前端监控，字节跳动这些年经验都在这了</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idbfc38da46d6ed9dcfdaf4ef4b5aad248")' href=#idbfc38da46d6ed9dcfdaf4ef4b5aad248 aria-expanded=false aria-controls=idbfc38da46d6ed9dcfdaf4ef4b5aad248 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E4%BD%93%E9%AA%8C%E5%BA%A6%E9%87%8F/>体验度量</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idbfc38da46d6ed9dcfdaf4ef4b5aad248 aria-expanded=false aria-controls=idbfc38da46d6ed9dcfdaf4ef4b5aad248><i class="fa-solid fa-angle-right" id=caret-idbfc38da46d6ed9dcfdaf4ef4b5aad248></i></a></div><ul class="nav docs-sidenav collapse" id=idbfc38da46d6ed9dcfdaf4ef4b5aad248><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E4%BD%93%E9%AA%8C%E5%BA%A6%E9%87%8F/google-rail/>Google RAIL</a></li><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E4%BD%93%E9%AA%8C%E5%BA%A6%E9%87%8F/google-web-vitals/>Google Web Vitals</a></li><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E4%BD%93%E9%AA%8C%E5%BA%A6%E9%87%8F/%E5%85%BC%E5%AE%B9%E6%80%A7/>兼容性</a></li><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E4%BD%93%E9%AA%8C%E5%BA%A6%E9%87%8F/%E5%8F%AF%E8%AE%BF%E9%97%AE%E6%80%A7/>可访问性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idaa211a457472eb8560657af5dab983e0")' href=#idaa211a457472eb8560657af5dab983e0 aria-expanded=false aria-controls=idaa211a457472eb8560657af5dab983e0 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/>异常监控与分析</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idaa211a457472eb8560657af5dab983e0 aria-expanded=false aria-controls=idaa211a457472eb8560657af5dab983e0><i class="fa-solid fa-angle-right" id=caret-idaa211a457472eb8560657af5dab983e0></i></a></div><ul class="nav docs-sidenav collapse" id=idaa211a457472eb8560657af5dab983e0><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E5%B8%B8%E8%A7%81%E5%BC%82%E5%B8%B8/>常见异常</a></li><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E9%94%99%E8%AF%AF%E6%8D%95%E8%8E%B7/>错误捕获</a></li><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/>监控体系</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3db5274a2d6ecb8cd8ee9b339faed80f")' href=#id3db5274a2d6ecb8cd8ee9b339faed80f aria-expanded=false aria-controls=id3db5274a2d6ecb8cd8ee9b339faed80f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E5%BC%82%E5%B8%B8%E4%B8%8A%E6%8A%A5/>异常上报</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id3db5274a2d6ecb8cd8ee9b339faed80f aria-expanded=false aria-controls=id3db5274a2d6ecb8cd8ee9b339faed80f><i class="fa-solid fa-angle-right" id=caret-id3db5274a2d6ecb8cd8ee9b339faed80f></i></a></div><ul class="nav docs-sidenav collapse" id=id3db5274a2d6ecb8cd8ee9b339faed80f><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E5%BC%82%E5%B8%B8%E4%B8%8A%E6%8A%A5/%E4%BD%BF%E7%94%A8-gif-%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82/>使用 GIF 发送请求</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id11f7f139ee6fa5d8f34bd89d841a611d")' href=#id11f7f139ee6fa5d8f34bd89d841a611d aria-expanded=false aria-controls=id11f7f139ee6fa5d8f34bd89d841a611d aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90/>用户行为分析</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id11f7f139ee6fa5d8f34bd89d841a611d aria-expanded=false aria-controls=id11f7f139ee6fa5d8f34bd89d841a611d><i class="fa-solid fa-angle-right" id=caret-id11f7f139ee6fa5d8f34bd89d841a611d></i></a></div><ul class="nav docs-sidenav collapse" id=id11f7f139ee6fa5d8f34bd89d841a611d><li class="child level"><a href=/books/web-tuning-series/2.%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E7%B3%BB%E7%BB%9F%E5%8C%96/%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90/%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90/%E7%94%A8%E6%88%B7%E8%BF%BD%E8%B8%AA/>用户追踪</a></li></ul></div></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id351fbf9240ee3ada78257b60e3d6f1c5")' href=#id351fbf9240ee3ada78257b60e3d6f1c5 aria-expanded=false aria-controls=id351fbf9240ee3ada78257b60e3d6f1c5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>3.性能优化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id351fbf9240ee3ada78257b60e3d6f1c5 aria-expanded=false aria-controls=id351fbf9240ee3ada78257b60e3d6f1c5><i class="fa-solid fa-angle-right" id=caret-id351fbf9240ee3ada78257b60e3d6f1c5></i></a></div><ul class="nav docs-sidenav collapse" id=id351fbf9240ee3ada78257b60e3d6f1c5><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida8c274c8d077b69b7c6294c22c3ff947")' href=#ida8c274c8d077b69b7c6294c22c3ff947 aria-expanded=false aria-controls=ida8c274c8d077b69b7c6294c22c3ff947 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/>内存优化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida8c274c8d077b69b7c6294c22c3ff947 aria-expanded=false aria-controls=ida8c274c8d077b69b7c6294c22c3ff947><i class="fa-solid fa-angle-right" id=caret-ida8c274c8d077b69b7c6294c22c3ff947></i></a></div><ul class="nav docs-sidenav collapse" id=ida8c274c8d077b69b7c6294c22c3ff947><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/>内存使用分析</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/>内存泄露优化</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idad8cd761f0e4612637f83dafaebe0239")' href=#idad8cd761f0e4612637f83dafaebe0239 aria-expanded=false aria-controls=idad8cd761f0e4612637f83dafaebe0239 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/>图片优化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idad8cd761f0e4612637f83dafaebe0239 aria-expanded=false aria-controls=idad8cd761f0e4612637f83dafaebe0239><i class="fa-solid fa-angle-right" id=caret-idad8cd761f0e4612637f83dafaebe0239></i></a></div><ul class="nav docs-sidenav collapse" id=idad8cd761f0e4612637f83dafaebe0239><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/webp/>Webp</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E8%A7%86%E9%A2%91%E4%BC%98%E5%8C%96/>视频优化</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E4%B8%8E%E8%BD%AC%E6%8D%A2/>图片格式与转换</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/>图片压缩</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/>图片优化</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8077861be05259c47fb7f64e57aff80b")' href=#id8077861be05259c47fb7f64e57aff80b aria-expanded=false aria-controls=id8077861be05259c47fb7f64e57aff80b aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/>渲染执行优化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8077861be05259c47fb7f64e57aff80b aria-expanded=false aria-controls=id8077861be05259c47fb7f64e57aff80b><i class="fa-solid fa-angle-right" id=caret-id8077861be05259c47fb7f64e57aff80b></i></a></div><ul class="nav docs-sidenav collapse" id=id8077861be05259c47fb7f64e57aff80b><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%B8%8E%E6%B8%B2%E6%9F%93%E7%AD%96%E7%95%A5/>布局与渲染策略</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E4%BA%A4%E4%BA%92%E4%B8%8E%E5%8A%A8%E7%94%BB/>交互与动画</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E8%84%9A%E6%9C%AC%E8%A7%A3%E6%9E%90%E4%B8%8E%E6%89%A7%E8%A1%8C/>脚本解析与执行</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E7%AD%96%E7%95%A5/>渲染策略</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82%E4%B8%8E%E7%BC%93%E5%AD%98/>资源请求与缓存</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-iddf4548667aadcd776e7319ffcbf1a7f4")' href=#iddf4548667aadcd776e7319ffcbf1a7f4 aria-expanded=false aria-controls=iddf4548667aadcd776e7319ffcbf1a7f4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/>资源加载优化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#iddf4548667aadcd776e7319ffcbf1a7f4 aria-expanded=false aria-controls=iddf4548667aadcd776e7319ffcbf1a7f4><i class="fa-solid fa-angle-right" id=caret-iddf4548667aadcd776e7319ffcbf1a7f4></i></a></div><ul class="nav docs-sidenav collapse" id=iddf4548667aadcd776e7319ffcbf1a7f4><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E5%85%B3%E9%94%AE%E6%B8%B2%E6%9F%93%E8%B7%AF%E5%BE%84/>关键渲染路径</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E6%87%92%E5%8A%A0%E8%BD%BD/>懒加载</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E8%AE%BE%E8%AE%A1%E4%BC%98%E5%8C%96/>设计优化</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E9%A2%84%E5%8A%A0%E8%BD%BD/>预加载</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E5%AD%97%E4%BD%93%E4%BC%98%E5%8C%96/>字体优化</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id094f9d1c11f001a52c202fd7d0836b54")' href=#id094f9d1c11f001a52c202fd7d0836b54 aria-expanded=false aria-controls=id094f9d1c11f001a52c202fd7d0836b54 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/>4.移动端与响应式</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id094f9d1c11f001a52c202fd7d0836b54 aria-expanded=false aria-controls=id094f9d1c11f001a52c202fd7d0836b54><i class="fa-solid fa-angle-right" id=caret-id094f9d1c11f001a52c202fd7d0836b54></i></a></div><ul class="nav docs-sidenav collapse" id=id094f9d1c11f001a52c202fd7d0836b54><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9e68ecdcae5d3f5b01f86515f1ea3056")' href=#id9e68ecdcae5d3f5b01f86515f1ea3056 aria-expanded=false aria-controls=id9e68ecdcae5d3f5b01f86515f1ea3056 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/h5-%E4%BC%98%E5%8C%96/>H5 优化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9e68ecdcae5d3f5b01f86515f1ea3056 aria-expanded=false aria-controls=id9e68ecdcae5d3f5b01f86515f1ea3056><i class="fa-solid fa-angle-right" id=caret-id9e68ecdcae5d3f5b01f86515f1ea3056></i></a></div><ul class="nav docs-sidenav collapse" id=id9e68ecdcae5d3f5b01f86515f1ea3056><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/h5-%E4%BC%98%E5%8C%96/%E8%A7%A6%E6%91%B8%E6%BB%9A%E5%8A%A8/>触摸滚动</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/h5-%E4%BC%98%E5%8C%96/%E5%83%8F%E7%B4%A0%E9%80%82%E9%85%8D/>像素适配</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/h5-%E4%BC%98%E5%8C%96/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/>用户体验</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf2f0e88fbc0bde09fca81ab15bbad6a6")' href=#idf2f0e88fbc0bde09fca81ab15bbad6a6 aria-expanded=false aria-controls=idf2f0e88fbc0bde09fca81ab15bbad6a6 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/pwa/>PWA</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf2f0e88fbc0bde09fca81ab15bbad6a6 aria-expanded=false aria-controls=idf2f0e88fbc0bde09fca81ab15bbad6a6><i class="fa-solid fa-angle-right" id=caret-idf2f0e88fbc0bde09fca81ab15bbad6a6></i></a></div><ul class="nav docs-sidenav collapse" id=idf2f0e88fbc0bde09fca81ab15bbad6a6><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/pwa/app-manifest/>App Manifest</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/pwa/serviceworker/>ServiceWorker</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/pwa/workbox/>Workbox</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/pwa/%E7%A6%BB%E7%BA%BF%E5%AD%98%E5%82%A8/>离线存储</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/pwa/%E7%A6%BB%E7%BA%BF%E4%BC%98%E5%85%88/>离线优先</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id86cda91ab067747491ae2b3efbac271b")' href=#id86cda91ab067747491ae2b3efbac271b aria-expanded=false aria-controls=id86cda91ab067747491ae2b3efbac271b aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/>响应式适配</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id86cda91ab067747491ae2b3efbac271b aria-expanded=false aria-controls=id86cda91ab067747491ae2b3efbac271b><i class="fa-solid fa-angle-right" id=caret-id86cda91ab067747491ae2b3efbac271b></i></a></div><ul class="nav docs-sidenav collapse" id=id86cda91ab067747491ae2b3efbac271b><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id99dbf977602d2878fdce749c7ebd8f4e")' href=#id99dbf977602d2878fdce749c7ebd8f4e aria-expanded=false aria-controls=id99dbf977602d2878fdce749c7ebd8f4e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%AA%92%E4%BB%8B%E6%9F%A5%E8%AF%A2/>媒介查询</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id99dbf977602d2878fdce749c7ebd8f4e aria-expanded=false aria-controls=id99dbf977602d2878fdce749c7ebd8f4e><i class="fa-solid fa-angle-right" id=caret-id99dbf977602d2878fdce749c7ebd8f4e></i></a></div><ul class="nav docs-sidenav collapse" id=id99dbf977602d2878fdce749c7ebd8f4e><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%AA%92%E4%BB%8B%E6%9F%A5%E8%AF%A2/%E5%AA%92%E4%BB%8B%E6%9F%A5%E8%AF%A2/>媒介查询</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%AA%92%E4%BB%8B%E6%9F%A5%E8%AF%A2/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/>响应式设计</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id329f29e471f882ac9c1ae79bf61f66df")' href=#id329f29e471f882ac9c1ae79bf61f66df aria-expanded=false aria-controls=id329f29e471f882ac9c1ae79bf61f66df aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/>响应式布局</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id329f29e471f882ac9c1ae79bf61f66df aria-expanded=false aria-controls=id329f29e471f882ac9c1ae79bf61f66df><i class="fa-solid fa-angle-right" id=caret-id329f29e471f882ac9c1ae79bf61f66df></i></a></div><ul class="nav docs-sidenav collapse" id=id329f29e471f882ac9c1ae79bf61f66df><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/>响应式布局</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/%E9%95%BF%E5%AE%BD%E6%AF%94/>长宽比</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idfee2b10138283a6288d7e6f31bd95b1f")' href=#idfee2b10138283a6288d7e6f31bd95b1f aria-expanded=false aria-controls=idfee2b10138283a6288d7e6f31bd95b1f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%BA%E5%AF%B8/>响应式尺寸</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idfee2b10138283a6288d7e6f31bd95b1f aria-expanded=false aria-controls=idfee2b10138283a6288d7e6f31bd95b1f><i class="fa-solid fa-angle-right" id=caret-idfee2b10138283a6288d7e6f31bd95b1f></i></a></div><ul class="nav docs-sidenav collapse" id=idfee2b10138283a6288d7e6f31bd95b1f><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%BA%E5%AF%B8/%E5%9F%BA%E4%BA%8E-vw-%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/>基于 vw 的移动端适配</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%BA%E5%AF%B8/%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8/>屏幕尺寸</a></li><li class="child level"><a href=/books/web-tuning-series/4.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%8E%E5%93%8D%E5%BA%94%E5%BC%8F/%E5%93%8D%E5%BA%94%E5%BC%8F%E9%80%82%E9%85%8D/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%BA%E5%AF%B8/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%BA%E5%AF%B8/>响应式尺寸</a></li></ul></div></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idfb20e8ed6306a10b16dc355dcf6d34f5")' href=#idfb20e8ed6306a10b16dc355dcf6d34f5 aria-expanded=false aria-controls=idfb20e8ed6306a10b16dc355dcf6d34f5 aria-hidden=false data-toggle=collapse></div></div><li class="child level"><a href=/books/web-tuning-series/introduction/>INTRODUCTION</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#static-site-generator>Static Site Generator</a></li><li><a href=#image-delivery>Image Delivery</a><ul><li><a href=#webp>WebP</a></li><li><a href=#picture-标签><code>picture</code> 标签</a></li><li><a href=#图片多格式生成>图片多格式生成</a></li></ul></li><li><a href=#svg-animation>SVG Animation</a></li><li><a href=#custom-web-fonts>Custom Web Fonts</a></li></ul><ul><li><a href=#lazy-load-js>Lazy Load JS</a></li><li><a href=#lazy-load-css>Lazy Load CSS</a></li></ul><ul><li><a href=#configuration>Configuration</a></li><li><a href=#https>HTTPS</a></li><li><a href=#cookies>Cookies</a></li><li><a href=#file-level-caching>File Level Caching</a></li></ul><ul><li><a href=#roadmap>Roadmap</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>De Voorhoede</h1><div class=article-style><blockquote><p>本文翻译自 <a href=https://css-tricks.com/case-study-boosting-front-end-performance/ target=_blank rel=noopener>case-study-boosting-front-end-performance</a>。</p></blockquote><p>在 <a href=https://www.voorhoede.nl/en/ target=_blank rel=noopener>De Voorhoede</a>工作的日子里，我们一直在追寻为用户构建高性能的前端解决方案。不过并不是每个客户会乐于遵循我们的性能指南，以至于我们必须一遍又一遍地跟他们解释那些保证他们能够战胜竞争对手的性能策略的重要性。最近我们也重构了自己的官方主页，使其能够拥有更快地响应速度与更好地性能表
现。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/screenshot-of-site.png alt=img loading=lazy data-zoomable></div></div></figure></p><h1 id=性能调优始于设计>性能调优始于设计</h1><p>在前端项目中，我们常常与产品经理以及 UI 设计讨论如何在美感与性能之间达到平衡，我们坚信更快地内容呈现是好的用户体验的不可分割的一部分。在我们自己的网站中，我们是以性能优于美感。好的内容、布局、图片与交互都是构成你网站吸引力的不可或缺的部分，不过这些复杂的元素的使用往往也意味着页面加载速度的增加。设计的核心即在于决定我们网站需要呈现哪些内容，往往这里的内容会指图片、字体这样的偏静态的部分，我们首先也从对于静态内容的优化开始。</p><h2 id=static-site-generator>Static Site Generator</h2><p>为了演示与测试方便，我们基于 NodeJS 搭建了一个混合使用 MarkDown 与 JSON 作为配置的静态网站生成器，其中一个简单的博客类型的网站的配置信息如下:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;keywords&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;performance&#34;</span><span class=p>,</span> <span class=s2>&#34;critical rendering path&#34;</span><span class=p>,</span> <span class=s2>&#34;static site&#34;</span><span class=p>,</span> <span class=s2>&#34;...&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;publishDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2016-08-12&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;authors&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;Declan&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>而其内容为:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-md data-lang=md><span class=line><span class=cl><span class=gh># A case study on boosting front-end performance
</span></span></span><span class=line><span class=cl><span class=gh></span>
</span></span><span class=line><span class=cl>At [<span class=nt>De Voorhoede</span>](<span class=na>https://www.voorhoede.nl/en/</span>) we try to boost front-end performance...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>## Design for performance
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>In our projects we have daily discussions...
</span></span></code></pre></div><p>下面，我们就这个静态网站，进行一些讨论。</p><h2 id=image-delivery>Image Delivery</h2><p>图片是网站的不可或缺的部分，其能够大大提升网站的表现力与视觉效果，而目前<a href="http://httparchive.org/interesting.php?a=All&l=Jul%2015%202016" target=_blank rel=noopener>平均大小为 2406KB 的网页中就有 1535KB 是图片资源</a>，可见图片占据了静态资源多么大的一个比重，这也是我们需要重点优化的部分。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/average-bytes-per-page-chart.jpg alt=img loading=lazy data-zoomable></div></div></figure></p><h3 id=webp>WebP</h3><p><a href=https://developers.google.com/speed/webp/ target=_blank rel=noopener>WebP</a> 是面向现代网页的高压缩低损失的图片格式，通常会比 JPEG 小 25%左右。然后 WebP 目前被很多人忽视，也不常使用。截止到本文撰写的时候，WebP 目前只能够在<a href="http://caniuse.com/#feat=webp" target=_blank rel=noopener>Chrome, Opera and Android</a> (大概占用户数的 50%)这些浏览器中使用，不过我们还是有办法以 JPG/PNG 来弥补部分浏览器中不支持 WebP 的缺憾。</p><h3 id=picture-标签><code>picture</code> 标签</h3><p>使用 picture 标签可以方便的对于 WebP 格式不支持的情况下完成替换:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>picture</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>source</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;image/webp&#34;</span> <span class=na>srcset</span><span class=o>=</span><span class=s>&#34;image-l.webp&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;(min-width: 640px)&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>source</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;image/webp&#34;</span> <span class=na>srcset</span><span class=o>=</span><span class=s>&#34;image-m.webp&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;(min-width: 320px)&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>source</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;image/webp&#34;</span> <span class=na>srcset</span><span class=o>=</span><span class=s>&#34;image-s.webp&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>source</span> <span class=na>srcset</span><span class=o>=</span><span class=s>&#34;image-l.jpg&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;(min-width: 640px)&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>source</span> <span class=na>srcset</span><span class=o>=</span><span class=s>&#34;image-m.jpg&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;(min-width: 320px)&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>source</span> <span class=na>srcset</span><span class=o>=</span><span class=s>&#34;image-s.jpg&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>img</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;Description of the image&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;image-l.jpg&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>picture</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>这里我们使用了 <a href=https://github.com/scottjehl/picturefill target=_blank rel=noopener>picturefill by Scott Jehl</a> 作为 Polyfill 库来保证低版本的浏览器中能够支持 picture 标签，并且保证跨浏览器的功能一致性。并且我们还使用了 img 标签来保证那些不支持 picture 的浏览器能够正常工作。</p><h3 id=图片多格式生成>图片多格式生成</h3><p>现在我们已经可以通过设置不同的图片尺寸、格式来保证图片的分发优化，不过我们总不希望每次要用一张图片的时候就去生成 6 个不同的尺寸/实例。我们希望有一种抽象的方法可以帮我们自动完成这一步，为我们自动生成不同的格式/尺寸，然后自动插入合适的 picture 元素，在我们的静态网站生成器中是这么做的：</p><ul><li>首先是要<a href=https://github.com/mahnunchik/gulp-responsive target=_blank rel=noopener>gulp responsive</a>来生成不同尺寸的图片，该插件同样会输出 WebP 格式的图片</li><li>压缩生成好的图片</li><li>用户只需要在 MarkDown 中编写<code>![Description of the image](image.jpg)</code>即可</li><li>我们自定义的 MarkDown 渲染引擎会在处理过程中自动使用 picture 元素替换这些 img 标签</li></ul><h2 id=svg-animation>SVG Animation</h2><p>我们的网站中也存在着很多的 Icon 以及动画性质图片，这里我们是选择 SVG 作为 Icon 与 Animation 的格式，主要考虑有下:</p><ul><li><p>SVG 是矢量表示，往往比位图文件更小</p></li><li><p>SVG 自带响应式功效，能够根据容器大小进行自动缩放，因此我们不需要再为了 picture 元素生成不同尺寸的图片</p></li><li><p>最重要的一点是我们可以使用 CSS 去改变其样式或者添加动画效果，关于这一点可以参考<a href=https://codepen.io/voorhoede/pen/qNgWod/ target=_blank rel=noopener>CodePen 上的这个演示</a>。</p></li></ul><h2 id=custom-web-fonts>Custom Web Fonts</h2><p>我们首先回顾下浏览器是如何使用自定义字体的，当浏览器识别到用户在 CSS 中基于<code>@font-size</code>定义的字体时，会尝试下载该字体文件。而在下载的过程中，浏览器是不会展示该字体所属的文本内容，最终导致了所谓的<code>Flash of Invisible Text</code>现象。现在很多的网站都存在这个问题，这也是导致用户体验差的一个重要原因，即会影响用户最主要的内容浏览这一操作。而我们的优化点即在于首先将字体设置为默认字体，而后在自定义的 Web Font 下载完毕之后对标准字体再进行替换操作，并且重新渲染整个文本块。而如果自定义的字体下载失败，整个内容还是能保证基本的可读性，不会对用户体验造成毁灭性的打击。<figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/voorhoede-fonts.jpg alt loading=lazy data-zoomable></div></div></figure></p><p>首先，我们会为需要使用到的 Web Fonts 创建最小子集，即只将那些需要使用的字体提取出来，而并不需要让用户下载整个字体集，这里推荐使用<a href=https://www.fontsquirrel.com/tools/webfont-generator target=_blank rel=noopener>Font squirrel webfont generator</a>。另外，我们还需要为字体的下载设置监视器，即保证能够在字体下载完毕之后自动回调，这里我们使用的是<a href=https://github.com/bramstein/fontfaceobserver target=_blank rel=noopener>fontfaceobserver</a>，它会为页面自动创建一个监视器，在侦测到所有的自定义 Web Fonts 下载完毕后，会为整个页面添加默认的类名:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>html</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-family</span><span class=p>:</span> <span class=n>Georgia</span><span class=p>,</span> <span class=kc>serif</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nt>html</span><span class=p>.</span><span class=nc>fonts-loaded</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-family</span><span class=p>:</span> <span class=n>Noto</span><span class=p>,</span> <span class=n>Georgia</span><span class=p>,</span> <span class=kc>serif</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>不过现在 CSS 的<code>font-display</code>属性也原生提供了我们这种替换功能，更多详情可见<a href=https://developers.google.com/web/updates/2016/02/font-display target=_blank rel=noopener>font-display</a>属性。</p><h1 id=js-与-css-的懒加载>JS 与 CSS 的懒加载</h1><p>总的来说我们希望所有的资源能够尽可能快地加载完毕，不过往往为了保证首页加载的速度，我们会考虑将部分非首屏需要的 JS/CSS 文件进行延迟加载，或者对于重复的视图使用浏览器本地缓存。</p><h2 id=lazy-load-js>Lazy Load JS</h2><p>目前来说，我们的网站都是偏向于静态，并不需要太多的 JavaScript 介入，不过考虑到日后的扩展空间，我们还是构建了一套完整的 JS 的工作流。众所周知，如果将 JS 直接放置到 head 标签中，其会阻塞整个页面的渲染。对于该点，最简单的方式就是将会阻塞渲染的 JS 脚本移动到页面的尾部，在整个首屏渲染完毕之后再进行加载。另一个常用的手段就是依然保持 JS 文件位于 head 标签中，不过为其添加一个<code>defer</code>的属性，这保证了浏览器只会先将该脚本下载下来，然后等到整个页面加载完毕再执行该脚本。另一个需要注意的是，因为我们并不使用类似于 jQuery 这样的第三方依赖库，而更多的依赖于浏览器原生的特性，因此我们希望在合适的浏览器内加载合适版本的 JS 代码，其效果大概如下:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Mustard Cutting
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=s2>&#34;querySelector&#34;</span> <span class=k>in</span> <span class=nb>document</span> <span class=o>&amp;&amp;</span> <span class=s2>&#34;addEventListener&#34;</span> <span class=k>in</span> <span class=nb>window</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;&lt;script src=&#34;index.js&#34; defer&gt;&lt;\/script&gt;&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=lazy-load-css>Lazy Load CSS</h2><p>正如上文所述，我们的网站偏向于静态展示，因此首屏的最大问题就是 CSS 文件的加载问题。浏览器会在 head 标签中声明的所有 CSS 文件下载完毕之前一直处于阻塞状态，这种机制很是明智的，不然的话浏览器在加载多个 CSS 文件的时候会进行重复的布局与渲染，这更是对于性能的浪费。为了避免非首屏的 CSS 文件阻塞页面渲染，我们使用<a href=https://github.com/filamentgroup/loadCSS target=_blank rel=noopener>loadCSS</a>这个小的工具库来进行异步的 CSS 文件加载，它会在 CSS 文件加载完毕后执行回调。不过，异步加载 CSS 也会带来一个新的问题，如果我们将所有的 CSS 全部设置为了异步加载，那么用户会首先看到单纯的 HTML 页面，这也会给用户不好的体验。那么我们就需要在异步加载与首屏渲染之间找到一个平衡点，即首先加载那些必要的 CSS 文件。我们一般将首屏渲染中必要的 CSS 文件成为 Critical CSS，即关键的 CSS 文件，代指在保证页面的可读性的前提下需要加载的最少的 CSS 文件数目。Critical CSS 的选定会是一个非常耗时的过程，特别是我们网站本身的 CSS 样式设置也在不停变更，我们不可能完全依赖于人工去提取出关键的 CSS 文件，这里推荐<a href=https://github.com/addyosmani/critical target=_blank rel=noopener>Critical</a>这个辅助工具能够帮你自动提取压缩 Critical CSS。下图的一个对比即是仅加载 Critical CSS 与加载全部 CSS 的区别:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/voorhoede-fold.jpg alt loading=lazy data-zoomable></div></div></figure></p><p>上图中红色的线，即是所谓的折叠分割点。</p><h1 id=服务端与缓存>服务端与缓存</h1><p>高性能的前端离不开服务端的支持，在我们的实践中也发现不同的服务端配置同样会影响到前端的性能。目前我们主要使用 Apache Web Server 作为中间件，并且通过 HTTPS 来安全地传递内容。</p><h2 id=configuration>Configuration</h2><p>我们首先对于合适的服务端配置做了些调研，这里推荐是使用<a href=https://github.com/h5bp/server-configs-apache target=_blank rel=noopener>H5BP Boilerplate Apache Configuration</a>作为配置模板，它是个不错的兼顾了性能与安全性的配置建议。同样地它也提供了面向其他服务端环境的配置。我们对于大部分的 HTML、CSS 以及 JavaScript 都开启了 GZip 压缩选项，并且对于大部分的资源都设置了缓存策略，详见下文的 File Level Caching 章节。</p><h2 id=https>HTTPS</h2><p>使用 HTTPS 可以保证站点的安全性，但是也会影响到你网站的性能表现，性能损耗主要发生在建立 SSL 握手协议的时候，这会导致很多的延迟，不过我们同样可以通过某些设置来进行优化。</p><ul><li><p>设置 HTTP Strict Transport Security 请求头可以让服务端告诉浏览器其只允许通过 HTTPS 进行交互，这就避免了浏览器从 HTTP 再重定向到 HTTPS 的时间消耗。</p></li><li><p>设置 TLS false start 允许客户端在第一轮 TLS 中就能够立刻传递加密数据。握手协议余下的操作，譬如确认没有人进行中间人监听可以同步进行，这一点也能节约部分时间。</p></li><li><p>设置 TLS Session Resumption，当浏览器与服务端曾经通过 TLS 进行过通信，那么浏览器会自动记录下 Session Identifier，当下次需要重新建立连接的时候，其可以复用该 Identifier，从而解决了一轮的时间。</p></li></ul><p>这里推荐扩展阅读下 <a href="https://www.youtube.com/watch?v=YMfW1bfyGSY" target=_blank rel=noopener>Mythbusting HTTPS: Squashing security’s urban legends by Emily Stark</a>。</p><h2 id=cookies>Cookies</h2><p>我们并没有使用某个服务端框架，而是直接使用了静态的 Apache Web Server，不过 Apache Web Server 也是能够读取 Cookie 并且进行些简单的操作。譬如在下面这个例子中我们将 CSS 缓存信息存放在了 Cookie 中，然后交付 Apache 进行判断是否需要重复加载 CSS 文件:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- #if expr=&#34;($HTTP_COOKIE!=/css-loaded/) || ($HTTP_COOKIE=/.*css-loaded=([^;]+);?.*/ &amp;&amp; ${1} != &#39;0d82f.css&#39; )&#34;--&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>noscript</span><span class=p>&gt;&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;0d82f.css&#34;</span> <span class=p>/&gt;&lt;/</span><span class=nt>noscript</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>loadCSS</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>onloadCSS</span><span class=p>(</span><span class=nx>stylesheet</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>setCookie</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>expInDays</span><span class=p>)</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>stylesheet</span> <span class=o>=</span> <span class=nx>loadCSS</span><span class=p>(</span><span class=s1>&#39;0d82f.css&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>onloadCSS</span><span class=p>(</span><span class=nx>stylesheet</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>setCookie</span><span class=p>(</span><span class=s1>&#39;css-loaded&#39;</span><span class=p>,</span> <span class=s1>&#39;0d82f&#39;</span><span class=p>,</span> <span class=mi>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}());</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>/* Critical CSS here */</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- #else --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;0d82f.css&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- #endif --&gt;</span>
</span></span></code></pre></div><p>这里 Apache Server 中的逻辑控制代码就是有点类似于注释形式的 <code>&lt;!-- #</code>，其主要包含以下步骤:</p><ul><li><p><code>$HTTP_COOKIE!=/css-loaded/</code> 检测是否有设置过 CSS 缓存相关的 Cookie</p></li><li><p><code>$HTTP_COOKIE=/.*css-loaded=([^;]+);?.*/ && ${1} != '0d82f.css'</code> 检测缓存的 CSS 版本是否为当前版本</p></li><li><p>If <code>&lt;!-- #if expr="..." --></code> 值为 <code>true</code> 我们便能假设该用户是第一次访问该站点</p></li><li><p>如果用户是首次浏览，我们添加了一个 <code>&lt;noscript></code> 标签，里面还包含了一个阻塞型的 <code>&lt;link rel="stylesheet"></code> 标签。添加该标签的意义在于我们在下面是使用 JavaScript 来异步加载 CSS 文件，而在用户禁止 JavaScript 的情况下也能保证可以通过该标签来正常加载 CSS 文件。</p></li><li><p><code>&lt;!-- #else --></code> 表达式在用户二次访问该页面时，我们可以认为 CSS 文件已经被加载过了，因此可以直接从本地缓存中加载而不需要重复请求。</p></li></ul><p>上述策略同样可以应用于 Web Fonts 的加载，最终的 Cookie 如下所示:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/voorhoede-cookies.jpg alt loading=lazy data-zoomable></div></div></figure></p><h2 id=file-level-caching>File Level Caching</h2><p>在上文可以发现，我们严重依赖于浏览器缓存来处理用户重复访问时资源加载的问题，理想情况下我们肯定希望能够永久地缓存 CSS、JS、Fonts 以及图片文件，然后在某个文件发生变化的时候将缓存设置为失效。这里我们设置了以 <code>https://www.voorhoede.nl/assets/css/main.css?v=1.0.4</code> 形式，即在请求路径上加上版本号的方式进行缓存。不过这种方式的缺陷在于如果我们更换了资源文件的存放地址，那么所有的缓存也就自然失效了。这里我们使用了 <a href=https://github.com/sindresorhus/gulp-rev target=_blank rel=noopener>gulp-rev</a> 以及 <a href=https://github.com/jamesknelson/gulp-rev-replace target=_blank rel=noopener>gulp-rev-replace</a> 来为文件添加 Hash 值，从而保证了仅当文件内容发生变化的时候文件请求路径才会发生改变，即将每个文件的缓存验证独立开来。</p><h1 id=result>Result</h1><p>上面我们介绍了很多的优化手段，这里我们以实验的形式来对优化的结果与效果进行分析。我们可以用类似于 <a href=https://developers.google.com/speed/pagespeed/insights/ target=_blank rel=noopener>PageSpeed Insights</a> 或者 <a href=http://www.webpagetest.org/ target=_blank rel=noopener>WebPagetest</a> 来进行性能测试或者网络分析。我觉得最好的测试你站点渲染性能的方式就是在限流的情况下观察页面的呈现效果，Google Chrome 内置了限流的功能：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/voorhoede-network-analysis.jpg alt loading=lazy data-zoomable></div></div></figure></p><p>这里我们将我们的网络环境设置为了 50KB/S 的 GPRS 网络环境，我们总共花费了 2.27 秒完成了首屏渲染。上图中黄线左侧的时间即指明了从 HTML 文件开始下载到下载完成所耗费的时间，该 HTML 文件中已经包含了关键的 CSS 代码，因此整个页面已经保证了基本的可用性与可交互型。而剩下的比较大的资源都会进行延时加载，这正是我们想要达到的目标。我们也可以使用 PageSpeed 来测试下网站的性能，可以看出我们得分很不错:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/pagespeed-insights-voorhoede.jpg alt loading=lazy data-zoomable></div></div></figure></p><p>而在 WebPagetest 中，我们看出了如下的结果:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://cdn.css-tricks.com/wp-content/uploads/2016/08/webpagetest-voorhoede.jpg alt loading=lazy data-zoomable></div></div></figure></p><h2 id=roadmap>Roadmap</h2><p>优化之路漫漫，永无止境，我们在未来也会关注以下几个方面：</p><ul><li><p>HTTP/2:我们目前已经开始尝试使用 HTTP/2，而本篇文章中提到的很多的优化的要点都是面向 HTTP/1.1 的。简言之，HTTP/1.1 诞生之初还是处于 Table 布局与行内样式流行的时代，它并没有考虑到现在所面对的 2.6MB 大小，包含 200 多个网络请求的页面。为了弥合这老的协议的缺陷，我们不得不连接 JS 与 CSS 文件、使用行内样式、对于小图片使用 Data URL 等等。这些操作都是为了节约请求次数，而 HTTP/2 中允许在同一个 TCP 请求中进行多个并发的请求，这样就会允许我们不需要再去进行大量的文件合并操作。</p></li><li><p>Service Workers:这是现代浏览器提供的后台工作线程，可以允许我们为网站添加譬如离线支持、推送消息、后台同步等等很多复杂的操作。</p></li><li><p>CDN:目前我们是自己维护网站，而在真实的应用场景下可以考虑使用 CDN 服务来减少服务端与客户端之间的物理距离，从而减少传输时延。</p></li></ul></div><div class=article-widget><div class="container-xl row post-nav"></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>