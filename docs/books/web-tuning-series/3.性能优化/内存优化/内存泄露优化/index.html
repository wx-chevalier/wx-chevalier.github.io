<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½ æ— è®ºæ˜¯åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿã€æœåŠ¡ç«¯åº”ç”¨ç¨‹åºè¿˜æ˜¯ iOSã€Android åŸç”Ÿåº”ç”¨éƒ½ä¼šå­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼ŒWeb åº”ç”¨è‡ªç„¶ä¹Ÿä¸å¯é¿å…åœ°å­˜åœ¨ç€ç±»ä¼¼çš„é—®é¢˜ã€‚è™½ç„¶å› ä¸ºç½‘é¡µå¾€å¾€éƒ½æ˜¯å³ç”¨å³èµ°ï¼Œè¾ƒå°‘åœ°å­˜åœ¨æŸ"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/"><meta property="og:title" content="å†…å­˜æ³„éœ²ä¼˜åŒ– | Next-gen Tech Edu"><meta property="og:description" content="å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½ æ— è®ºæ˜¯åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿã€æœåŠ¡ç«¯åº”ç”¨ç¨‹åºè¿˜æ˜¯ iOSã€Android åŸç”Ÿåº”ç”¨éƒ½ä¼šå­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼ŒWeb åº”ç”¨è‡ªç„¶ä¹Ÿä¸å¯é¿å…åœ°å­˜åœ¨ç€ç±»ä¼¼çš„é—®é¢˜ã€‚è™½ç„¶å› ä¸ºç½‘é¡µå¾€å¾€éƒ½æ˜¯å³ç”¨å³èµ°ï¼Œè¾ƒå°‘åœ°å­˜åœ¨æŸ"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>å†…å­˜æ³„éœ²ä¼˜åŒ– | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=b07ebf65a2dfbb217798bc66dc0f1d59><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>æœç´¢</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=å…³é—­><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=åˆ‡æ¢å¯¼èˆª>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>ç¬”è®°ï¼ˆä¸‡ç¯‡ï¼‰</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>çŸ¥è¯†å›¾è°±</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>å®éªŒå®¤</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft æ–¹å—ä¸–ç•Œ</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D çŸ¥è¯†å¡ç‰Œ</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>å…¶ä»–é˜…è¯»æ¸ é“</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>çŸ¥ä¹</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>æ˜é‡‘</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=æœç´¢><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">å†…å­˜ä¼˜åŒ–</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>æœç´¢...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id351fbf9240ee3ada78257b60e3d6f1c5")' href=#id351fbf9240ee3ada78257b60e3d6f1c5 aria-expanded=false aria-controls=id351fbf9240ee3ada78257b60e3d6f1c5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>3.æ€§èƒ½ä¼˜åŒ–</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id351fbf9240ee3ada78257b60e3d6f1c5 aria-expanded=false aria-controls=id351fbf9240ee3ada78257b60e3d6f1c5><i class="fa-solid fa-angle-down" id=caret-id351fbf9240ee3ada78257b60e3d6f1c5></i></a></div><ul class="nav docs-sidenav collapse show" id=id351fbf9240ee3ada78257b60e3d6f1c5><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida8c274c8d077b69b7c6294c22c3ff947")' href=#ida8c274c8d077b69b7c6294c22c3ff947 aria-expanded=false aria-controls=ida8c274c8d077b69b7c6294c22c3ff947 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/>å†…å­˜ä¼˜åŒ–</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida8c274c8d077b69b7c6294c22c3ff947 aria-expanded=false aria-controls=ida8c274c8d077b69b7c6294c22c3ff947><i class="fa-solid fa-angle-down" id=caret-ida8c274c8d077b69b7c6294c22c3ff947></i></a></div><ul class="nav docs-sidenav collapse show" id=ida8c274c8d077b69b7c6294c22c3ff947><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/>å†…å­˜ä½¿ç”¨åˆ†æ</a></li><li class="child level active"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BC%98%E5%8C%96/>å†…å­˜æ³„éœ²ä¼˜åŒ–</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idad8cd761f0e4612637f83dafaebe0239")' href=#idad8cd761f0e4612637f83dafaebe0239 aria-expanded=false aria-controls=idad8cd761f0e4612637f83dafaebe0239 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/>å›¾ç‰‡ä¼˜åŒ–</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idad8cd761f0e4612637f83dafaebe0239 aria-expanded=false aria-controls=idad8cd761f0e4612637f83dafaebe0239><i class="fa-solid fa-angle-right" id=caret-idad8cd761f0e4612637f83dafaebe0239></i></a></div><ul class="nav docs-sidenav collapse" id=idad8cd761f0e4612637f83dafaebe0239><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/webp/>Webp</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E8%A7%86%E9%A2%91%E4%BC%98%E5%8C%96/>è§†é¢‘ä¼˜åŒ–</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E4%B8%8E%E8%BD%AC%E6%8D%A2/>å›¾ç‰‡æ ¼å¼ä¸è½¬æ¢</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/>å›¾ç‰‡å‹ç¼©</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96/>å›¾ç‰‡ä¼˜åŒ–</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8077861be05259c47fb7f64e57aff80b")' href=#id8077861be05259c47fb7f64e57aff80b aria-expanded=false aria-controls=id8077861be05259c47fb7f64e57aff80b aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/>æ¸²æŸ“æ‰§è¡Œä¼˜åŒ–</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8077861be05259c47fb7f64e57aff80b aria-expanded=false aria-controls=id8077861be05259c47fb7f64e57aff80b><i class="fa-solid fa-angle-right" id=caret-id8077861be05259c47fb7f64e57aff80b></i></a></div><ul class="nav docs-sidenav collapse" id=id8077861be05259c47fb7f64e57aff80b><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%B8%8E%E6%B8%B2%E6%9F%93%E7%AD%96%E7%95%A5/>å¸ƒå±€ä¸æ¸²æŸ“ç­–ç•¥</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E4%BA%A4%E4%BA%92%E4%B8%8E%E5%8A%A8%E7%94%BB/>äº¤äº’ä¸åŠ¨ç”»</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E8%84%9A%E6%9C%AC%E8%A7%A3%E6%9E%90%E4%B8%8E%E6%89%A7%E8%A1%8C/>è„šæœ¬è§£æä¸æ‰§è¡Œ</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E7%AD%96%E7%95%A5/>æ¸²æŸ“ç­–ç•¥</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E6%B8%B2%E6%9F%93%E6%89%A7%E8%A1%8C%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E8%AF%B7%E6%B1%82%E4%B8%8E%E7%BC%93%E5%AD%98/>èµ„æºè¯·æ±‚ä¸ç¼“å­˜</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-iddf4548667aadcd776e7319ffcbf1a7f4")' href=#iddf4548667aadcd776e7319ffcbf1a7f4 aria-expanded=false aria-controls=iddf4548667aadcd776e7319ffcbf1a7f4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/>èµ„æºåŠ è½½ä¼˜åŒ–</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#iddf4548667aadcd776e7319ffcbf1a7f4 aria-expanded=false aria-controls=iddf4548667aadcd776e7319ffcbf1a7f4><i class="fa-solid fa-angle-right" id=caret-iddf4548667aadcd776e7319ffcbf1a7f4></i></a></div><ul class="nav docs-sidenav collapse" id=iddf4548667aadcd776e7319ffcbf1a7f4><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E5%85%B3%E9%94%AE%E6%B8%B2%E6%9F%93%E8%B7%AF%E5%BE%84/>å…³é”®æ¸²æŸ“è·¯å¾„</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E6%87%92%E5%8A%A0%E8%BD%BD/>æ‡’åŠ è½½</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E8%AE%BE%E8%AE%A1%E4%BC%98%E5%8C%96/>è®¾è®¡ä¼˜åŒ–</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E9%A2%84%E5%8A%A0%E8%BD%BD/>é¢„åŠ è½½</a></li><li class="child level"><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/%E5%AD%97%E4%BD%93%E4%BC%98%E5%8C%96/>å­—ä½“ä¼˜åŒ–</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>ç›®å½•</a></li></ul><nav id=TableOfContents><ul><li><a href=#å…¨å±€å˜é‡>å…¨å±€å˜é‡</a></li><li><a href=#å®šæ—¶å™¨ä¸é—­åŒ…>å®šæ—¶å™¨ä¸é—­åŒ…</a></li><li><a href=#dom-å¼•ç”¨ä¸ç›‘å¬å™¨>DOM å¼•ç”¨ä¸ç›‘å¬å™¨</a></li><li><a href=#iframe>iframe</a></li><li><a href=#web-worker>Web Worker</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=ç‹ä¸‹é‚€æœˆç†Šçš„å¾®ä¿¡å…¬ä¼—å·></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>å†…å­˜æ³„éœ²ä¼˜åŒ–</h1><div class=article-style><h1 id=å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½>å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½</h1><p>æ— è®ºæ˜¯åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿã€æœåŠ¡ç«¯åº”ç”¨ç¨‹åºè¿˜æ˜¯ iOSã€Android åŸç”Ÿåº”ç”¨éƒ½ä¼šå­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼ŒWeb åº”ç”¨è‡ªç„¶ä¹Ÿä¸å¯é¿å…åœ°å­˜åœ¨ç€ç±»ä¼¼çš„é—®é¢˜ã€‚è™½ç„¶å› ä¸ºç½‘é¡µå¾€å¾€éƒ½æ˜¯å³ç”¨å³èµ°ï¼Œè¾ƒå°‘åœ°å­˜åœ¨æŸä¸ªç½‘é¡µé•¿æœŸè¿è¡Œçš„é—®é¢˜ï¼Œå³ä½¿å­˜åœ¨å†…å­˜æ³„æ¼å¯èƒ½è¡¨ç°åœ°ä¹Ÿä¸æ˜æ˜¾ï¼›ä½†æ˜¯åœ¨æŸäº›æ•°æ®å±•ç¤ºå‹çš„ï¼Œéœ€è¦é•¿æœŸè¿è¡Œçš„é¡µé¢ä¸Šï¼Œå¦‚æœä¸åŠæ—¶è§£å†³å†…å­˜æ³„æ¼å¯èƒ½ä¼šå¯¼è‡´ç½‘é¡µå æ®è¿‡å¤§åœ°å†…å­˜ï¼Œä¸ä»…å½±å“é¡µé¢æ€§èƒ½ï¼Œè¿˜å¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„å´©æºƒã€‚<a href=https://parg.co/UHG target=_blank rel=noopener>å‰ç«¯æ¯å‘¨æ¸…å•</a>æ¨èè¿‡çš„ <a href=https://parg.co/bnw target=_blank rel=noopener>How JavaScript works</a> å°±æ˜¯éå¸¸ä¸é”™åœ°ä»‹ç» JavaScript è¿è¡Œæœºåˆ¶çš„ç³»åˆ—æ–‡ç« ï¼Œå…¶ä¹Ÿå¯¹å†…å­˜ç®¡ç†ä¸å†…å­˜æ³„æ¼æœ‰è¿‡åˆ†æï¼Œæœ¬æ–‡éƒ¨åˆ†å›¾ç‰‡ä¸ç¤ºä¾‹ä»£ç å³æ¥è‡ªæ­¤ç³»åˆ—ã€‚</p><p>ç±»ä¼¼äº C è¿™æ ·çš„è¯­è¨€æä¾›äº† <code>malloc()</code> ä¸ <code>free()</code> è¿™æ ·çš„åº•å±‚å†…å­˜ç®¡ç†åŸå­æ“ä½œï¼Œå¼€å‘è€…éœ€è¦æ˜¾å¼æ‰‹åŠ¨åœ°è¿›è¡Œå†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾ï¼›è€Œ Java è¿™æ ·çš„è¯­è¨€åˆ™æ˜¯æä¾›äº†è‡ªåŠ¨åŒ–çš„å†…å­˜å›æ”¶æœºåˆ¶ï¼Œç¬”è€…åœ¨<a href=https://parg.co/UcF target=_blank rel=noopener>åƒåœ¾å›æ”¶ç®—æ³•ä¸ JVM åƒåœ¾å›æ”¶å™¨ç»¼è¿°</a>ä¸€æ–‡ä¸­æœ‰è¿‡ä»‹ç»ã€‚JavaScript ä¹Ÿæ˜¯é‡‡ç”¨çš„è‡ªåŠ¨åŒ–å†…å­˜å›æ”¶æœºåˆ¶ï¼Œæ— è®ºæ˜¯ Objectã€String ç­‰éƒ½æ˜¯ç”±åƒåœ¾å›æ”¶è¿›ç¨‹è‡ªåŠ¨å›æ”¶å¤„ç†ã€‚è‡ªåŠ¨åŒ–å†…å­˜å›æ”¶å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬å°±å¯ä»¥å¿½ç•¥å†…å­˜ç®¡ç†çš„ç›¸å…³æ“ä½œï¼Œåè€Œå¯èƒ½ä¼šå¯¼è‡´æ›´ä¸æ˜“å‘ç°çš„å†…å­˜æ³„æ¼å‡ºç°ã€‚</p><h1 id=å†…å­˜åˆ†é…ä¸å›æ”¶>å†…å­˜åˆ†é…ä¸å›æ”¶</h1><p>ç¬”è€…åœ¨ <a href=https://parg.co/Ucj target=_blank rel=noopener>JavaScript Event Loop æœºåˆ¶è¯¦è§£ä¸ Vue.js ä¸­å®è·µåº”ç”¨</a>ä¸€æ–‡ä¸­ä»‹ç»è¿‡ JavaScript çš„å†…å­˜æ¨¡å‹ï¼Œå…¶ä¸»è¦ä¹Ÿæ˜¯ç”±å †ã€æ ˆã€é˜Ÿåˆ—ä¸‰æ–¹é¢ç»„æˆï¼š</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src="https://github.com/wx-chevalier/OSS/raw/master/2017/8/1/1-ZSFHnq9iMHIApVLcgwczPQ.png?raw=true" alt loading=lazy data-zoomable></div></div></figure></p><p>å…¶ä¸­é˜Ÿåˆ—æŒ‡çš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ã€æ ˆå°±æ˜¯å‡½æ•°æ‰§è¡Œæ ˆï¼Œå…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://coding.net/u/hoteam/p/Cache/git/raw/master/2017/10/1/1-W7L7JN5q4p7w2E7HbBYS3g.jpeg alt="JavaScript æ ˆæ¨¡å‹" loading=lazy data-zoomable></div></div></figure></p><p>è€Œä¸»è¦çš„ç”¨æˆ·åˆ›å»ºçš„å¯¹è±¡å°±å­˜æ”¾åœ¨å †ä¸­ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å†…å­˜åˆ†æä¸å†…å­˜æ³„æ¼å®šä½æ‰€éœ€è¦å…³æ³¨çš„ä¸»è¦çš„åŒºåŸŸã€‚æ‰€è°“å†…å­˜ï¼Œä»ç¡¬ä»¶çš„è§’åº¦æ¥çœ‹ï¼Œå°±æ˜¯æ— æ•°è§¦å‘å™¨çš„ç»„åˆï¼›æ¯ä¸ªè§¦å‘å™¨èƒ½å¤Ÿå­˜æ”¾ 1 bit ä½çš„æ•°æ®ï¼Œä¸åŒçš„è§¦å‘å™¨ç”±å”¯ä¸€çš„æ ‡è¯†ç¬¦å®šä½ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è¯¥æ ‡è¯†ç¬¦è¯»å†™è¯¥è§¦å‘å™¨ã€‚æŠ½è±¡æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å†…å­˜å½“åšæ¯”ç‰¹æ•°ç»„ï¼Œè€Œæ•°æ®å°±æ˜¯åœ¨å†…å­˜ä¸­é¡ºåºæ’å¸ƒï¼š</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://camo.githubusercontent.com/53847fa71f5bb05c52788adddb2d61efe847eecb/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f3830302f312a3561426f75346f6e6c314238786c67776f4754444f672e706e67 alt=1*W7L7JN5q4p7w2E7HbBYS3g loading=lazy data-zoomable></div></div></figure></p><p>JavaScript ä¸­å¼€å‘è€…å¹¶ä¸éœ€è¦æ‰‹åŠ¨åœ°ä¸ºå¯¹è±¡ç”³è¯·å†…å­˜ï¼Œåªéœ€è¦å£°æ˜å˜é‡ï¼ŒJavaScript Runtime å³å¯ä»¥è‡ªåŠ¨åœ°åˆ†é…å†…å­˜ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>n</span> <span class=o>=</span> <span class=mi>374</span><span class=p>;</span> <span class=c1>// allocates memory for a number
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>s</span> <span class=o>=</span> <span class=s2>&#34;sessionstack&#34;</span><span class=p>;</span> <span class=c1>// allocates memory for a string
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>o</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>b</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span> <span class=c1>// allocates memory for an object and its contained values
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=s2>&#34;str&#34;</span><span class=p>];</span> <span class=c1>// (like object) allocates memory for the
</span></span></span><span class=line><span class=cl><span class=c1>// array and its contained values
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>f</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=c1>// allocates a function (which is a callable object)
</span></span></span><span class=line><span class=cl><span class=c1>// function expressions also allocate an object
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>someElement</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>someElement</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>backgroundColor</span> <span class=o>=</span> <span class=s2>&#34;blue&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p>æŸä¸ªå¯¹è±¡çš„å†…å­˜ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºäº†å†…å­˜åˆ†é…ã€å†…å­˜ä½¿ç”¨ä¸å†…å­˜å›æ”¶è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œå½“æŸä¸ªå¯¹è±¡ä¸å†è¢«éœ€è¦æ—¶ï¼Œå®ƒå°±åº”è¯¥è¢«æ¸…é™¤å›æ”¶ï¼›æ‰€è°“çš„åƒåœ¾å›æ”¶å™¨ï¼ŒGarbage Collector å³æ˜¯è´Ÿè´£è¿½è¸ªå†…å­˜åˆ†é…æƒ…å†µã€åˆ¤æ–­æŸä¸ªè¢«åˆ†é…çš„å†…å­˜æ˜¯å¦æœ‰ç”¨ï¼Œå¹¶ä¸”è‡ªåŠ¨å›æ”¶æ— ç”¨çš„å†…å­˜ã€‚å¤§éƒ¨åˆ†çš„åƒåœ¾å›æ”¶å™¨æ˜¯æ ¹æ®å¼•ç”¨(Reference)æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œæ‰€è°“çš„å¼•ç”¨å³æ˜¯æŸä¸ªå¯¹è±¡æ˜¯å¦ä¾èµ–äºå…¶ä»–å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨ä¾èµ–å…³ç³»å³å­˜åœ¨å¼•ç”¨ï¼›è­¬å¦‚æŸä¸ª JavaScript å¯¹è±¡å¼•ç”¨äº†å®ƒçš„åŸå‹å¯¹è±¡ã€‚æœ€ç®€å•çš„åƒåœ¾å›æ”¶ç®—æ³•å³æ˜¯å¼•ç”¨è®¡æ•°(Reference Counting)ï¼Œå³æ¸…é™¤æ‰€æœ‰é›¶å¼•ç”¨çš„å¯¹è±¡ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>o1</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>o2</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>// 2 objects are created.
</span></span></span><span class=line><span class=cl><span class=c1>// &#39;o2&#39; is referenced by &#39;o1&#39; object as one of its properties.
</span></span></span><span class=line><span class=cl><span class=c1>// None can be garbage-collected
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>o3</span> <span class=o>=</span> <span class=nx>o1</span><span class=p>;</span> <span class=c1>// the &#39;o3&#39; variable is the second thing that
</span></span></span><span class=line><span class=cl><span class=c1>// has a reference to the object pointed by &#39;o1&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>o1</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>// now, the object that was originally in &#39;o1&#39; has a
</span></span></span><span class=line><span class=cl><span class=c1>// single reference, embodied by the &#39;o3&#39; variable
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>o4</span> <span class=o>=</span> <span class=nx>o3</span><span class=p>.</span><span class=nx>o2</span><span class=p>;</span> <span class=c1>// reference to &#39;o2&#39; property of the object.
</span></span></span><span class=line><span class=cl><span class=c1>// This object has now 2 references: one as
</span></span></span><span class=line><span class=cl><span class=c1>// a property.
</span></span></span><span class=line><span class=cl><span class=c1>// The other as the &#39;o4&#39; variable
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>o3</span> <span class=o>=</span> <span class=s2>&#34;374&#34;</span><span class=p>;</span> <span class=c1>// The object that was originally in &#39;o1&#39; has now zero
</span></span></span><span class=line><span class=cl><span class=c1>// references to it.
</span></span></span><span class=line><span class=cl><span class=c1>// It can be garbage-collected.
</span></span></span><span class=line><span class=cl><span class=c1>// However, what was its &#39;o2&#39; property is still
</span></span></span><span class=line><span class=cl><span class=c1>// referenced by the &#39;o4&#39; variable, so it cannot be
</span></span></span><span class=line><span class=cl><span class=c1>// freed.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>o4</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span> <span class=c1>// what was the &#39;o2&#39; property of the object originally in
</span></span></span><span class=line><span class=cl><span class=c1>// &#39;o1&#39; has zero references to it.
</span></span></span><span class=line><span class=cl><span class=c1>// It can be garbage collected.
</span></span></span></code></pre></div><p>ä¸è¿‡è¿™ç§ç®—æ³•å¾€å¾€å—åˆ¶äºå¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œå³ä¸¤ä¸ªæ— ç”¨çš„å¯¹è±¡ç›¸äº’å¼•ç”¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>f</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>o1</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>o2</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>  <span class=nx>o1</span><span class=p>.</span><span class=nx>p</span> <span class=o>=</span> <span class=nx>o2</span><span class=p>;</span> <span class=c1>// o1 references o2
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>o2</span><span class=p>.</span><span class=nx>p</span> <span class=o>=</span> <span class=nx>o1</span><span class=p>;</span> <span class=c1>// o2 references o1. This creates a cycle.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>f</span><span class=p>();</span>
</span></span></code></pre></div><p>ç¨ä¸ºå¤æ‚çš„ç®—æ³•å³æ˜¯æ‰€è°“çš„æ ‡è®°-æ¸…é™¤(Mark-Sweep)ç®—æ³•ï¼Œå…¶æ ¹æ®æŸä¸ªå¯¹è±¡æ˜¯å¦å¯è¾¾æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å¯ç”¨ã€‚æ ‡è®°-æ¸…é™¤ç®—æ³•ä¼šä»æŸä¸ªæ ¹å…ƒç´ å¼€å§‹ï¼Œè­¬å¦‚ window å¯¹è±¡å¼€å§‹ï¼Œæ²¿ç€å¼•ç”¨æ ‘å‘ä¸‹éå†ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾çš„å¯¹è±¡ä¸ºå¯ç”¨ï¼Œå¹¶ä¸”æ¸…é™¤å…¶ä»–æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚</p><p>2012 å¹´ä¹‹åï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨éƒ½å®è·µäº†åŸºäºæ ‡è®°-æ¸…é™¤ç®—æ³•çš„åƒåœ¾å›æ”¶å™¨ï¼Œå¹¶ä¸”å„è‡ªä¹Ÿè¿›è¡Œæœ‰é’ˆå¯¹æ€§åœ°ä¼˜åŒ–ã€‚</p><h1 id=å†…å­˜æ³„æ¼>å†…å­˜æ³„æ¼</h1><p>æ‰€è°“çš„å†…å­˜æ³„æ¼ï¼Œå³æ˜¯æŒ‡æŸä¸ªå¯¹è±¡è¢«æ— æ„é—´æ·»åŠ äº†æŸæ¡å¼•ç”¨ï¼Œå¯¼è‡´è™½ç„¶å®é™…ä¸Šå¹¶ä¸éœ€è¦äº†ï¼Œä½†è¿˜æ˜¯èƒ½ä¸€ç›´è¢«éå†å¯è¾¾ï¼Œä»¥è‡´å…¶å†…å­˜å§‹ç»ˆæ— æ³•å›æ”¶ã€‚æœ¬éƒ¨åˆ†æˆ‘ä»¬ç®€è¦è®¨è®ºä¸‹ JavaScript ä¸­å¸¸è§çš„å†…å­˜æ³„æ¼æƒ…å¢ƒä¸å¤„ç†æ–¹æ³•ã€‚åœ¨æ–°ç‰ˆæœ¬çš„ Chrome ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Performance Monitor æ¥åŠ¨æ€ç›‘æµ‹ç½‘é¡µæ€§èƒ½çš„å˜åŒ–ï¼š</p><p>ä¸Šå›¾ä¸­å„é¡¹æŒ‡æ ‡çš„å«ä¹‰ä¸ºï¼š</p><ul><li><strong>CPU usage -</strong> å½“å‰ç«™ç‚¹çš„ CPU ä½¿ç”¨é‡ï¼›</li><li><strong>JS heap size -</strong> åº”ç”¨çš„å†…å­˜å ç”¨é‡ï¼›</li><li><strong>DOM Nodes -</strong> å†…å­˜ä¸­ DOM èŠ‚ç‚¹æ•°ç›®ï¼›</li><li><strong>JS event listeners-</strong> å½“å‰é¡µé¢ä¸Šæ³¨å†Œçš„ JavaScript æ—¶é—´ç›‘å¬å™¨æ•°ç›®;</li><li><strong>Documents -</strong> å½“å‰é¡µé¢ä¸­ä½¿ç”¨çš„æ ·å¼æˆ–è€…è„šæœ¬æ–‡ä»¶æ•°ç›®ï¼›</li><li><strong>Frames -</strong> å½“å‰é¡µé¢ä¸Šçš„ Frames æ•°ç›®ï¼ŒåŒ…æ‹¬ iframe ä¸ workersï¼›</li><li><strong>Layouts / sec -</strong> æ¯ç§’çš„ DOM é‡å¸ƒå±€æ•°ç›®ï¼›</li><li><strong>Style recalcs / sec -</strong> æµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—æ ·å¼çš„é¢‘æ¬¡ï¼›</li></ul><p>å½“å‘ç°æŸä¸ªæ—¶é—´ç‚¹å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Memory æ ‡ç­¾é¡µå°†æ­¤æ—¶çš„å †åˆ†é…æƒ…å†µæ‰“å°ä¸‹æ¥ï¼š</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://coding.net/u/hoteam/p/Cache/git/raw/master/2017/10/1/MemorySnapshotTakeheapsnapshot.png alt="Memory Snapshot Take heap snapshot" loading=lazy data-zoomable></div></div></figure></p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://coding.net/u/hoteam/p/Cache/git/raw/master/2017/10/1/WX20171102-234728.png alt="Memory Snapshot ç»“æœ" loading=lazy data-zoomable></div></div></figure></p><h2 id=å…¨å±€å˜é‡>å…¨å±€å˜é‡</h2><p>JavaScript ä¼šå°†æ‰€æœ‰çš„ä¸ºå£°æ˜çš„å˜é‡å½“åšå…¨å±€å˜é‡è¿›è¡Œå¤„ç†ï¼Œå³å°†å…¶æŒ‚è½½åˆ° global å¯¹è±¡ä¸Šï¼›æµè§ˆå™¨ä¸­è¿™é‡Œçš„ global å¯¹è±¡å°±æ˜¯ window:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>arg</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>bar</span> <span class=o>=</span> <span class=s2>&#34;some text&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç­‰ä»·äº
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>(</span><span class=nx>arg</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>window</span><span class=p>.</span><span class=nx>bar</span> <span class=o>=</span> <span class=s2>&#34;some text&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å¦ä¸€ç§å¸¸è§çš„åˆ›å»ºå…¨å±€å˜é‡çš„æ–¹å¼å°±æ˜¯è¯¯ç”¨ <code>this</code> æŒ‡é’ˆï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>var1</span> <span class=o>=</span> <span class=s2>&#34;potential accidental global&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// Foo called on its own, this points to the global object (window)
</span></span></span><span class=line><span class=cl><span class=c1>// rather than being undefined.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>foo</span><span class=p>();</span>
</span></span></code></pre></div><p>ä¸€æ—¦æŸä¸ªå˜é‡è¢«æŒ‚è½½åˆ°äº† window å¯¹è±¡ï¼Œå°±æ„å‘³ç€å®ƒæ°¸è¿œæ˜¯å¯è¾¾çš„ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½åœ°æ·»åŠ  <code>use strict</code> æˆ–è€…è¿›è¡Œæ¨¡å—åŒ–ç¼–ç (å‚è€ƒ <a href=https://parg.co/Uc2 target=_blank rel=noopener>JavaScript æ¨¡å—æ¼”åŒ–ç®€å²</a>)ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰©å±•ç±»ä¼¼äºä¸‹æ–‡çš„æ‰«æå‡½æ•°ï¼Œæ¥æ£€æµ‹å‡º window å¯¹è±¡çš„éåŸç”Ÿå±æ€§ï¼Œå¹¶åŠ ä»¥åˆ¤æ–­ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>scan</span><span class=p>(</span><span class=nx>o</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>o</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>val</span> <span class=o>=</span> <span class=nx>o</span><span class=p>[</span><span class=nx>key</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Stop if object was created in another window
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=k>typeof</span> <span class=nx>val</span> <span class=o>!==</span> <span class=s2>&#34;string&#34;</span> <span class=o>&amp;&amp;</span>
</span></span><span class=line><span class=cl>      <span class=k>typeof</span> <span class=nx>val</span> <span class=o>!==</span> <span class=s2>&#34;number&#34;</span> <span class=o>&amp;&amp;</span>
</span></span><span class=line><span class=cl>      <span class=k>typeof</span> <span class=nx>val</span> <span class=o>!==</span> <span class=s2>&#34;boolean&#34;</span> <span class=o>&amp;&amp;</span>
</span></span><span class=line><span class=cl>      <span class=o>!</span><span class=p>(</span><span class=nx>val</span> <span class=k>instanceof</span> <span class=nb>Object</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>debugger</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Traverse the nested object hierarchy
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=å®šæ—¶å™¨ä¸é—­åŒ…>å®šæ—¶å™¨ä¸é—­åŒ…</h2><p>æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ <code>setInterval</code> æ¥æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œå¾ˆå¤šçš„æ¡†æ¶ä¹Ÿæä¾›äº†åŸºäºå›è°ƒçš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶ï¼›è¿™å¯èƒ½ä¼šå¯¼è‡´å›è°ƒä¸­å£°æ˜äº†å¯¹äºæŸä¸ªå˜é‡çš„ä¾èµ–ï¼Œè­¬å¦‚ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>serverData</span> <span class=o>=</span> <span class=nx>loadData</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>setInterval</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>renderer</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;renderer&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>renderer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>renderer</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>serverData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=mi>5000</span><span class=p>);</span> <span class=c1>//This will be executed every ~5 seconds.
</span></span></span></code></pre></div><p>å®šæ—¶å™¨ä¿æœ‰å¯¹äº serverData å˜é‡çš„å¼•ç”¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨è¯ï¼Œé‚£ä¹ˆè¯¥å˜é‡ä¹Ÿå°±ä¼šä¸€ç›´å¯è¾¾ï¼Œä¸è¢«å›æ”¶ã€‚è€Œè¿™é‡Œçš„ serverData ä¹Ÿæ˜¯é—­åŒ…å½¢å¼è¢«å¼•å…¥åˆ° setInterval çš„å›è°ƒä½œç”¨åŸŸä¸­ï¼›é—­åŒ…ä¹Ÿæ˜¯å¸¸è§çš„å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„å…ƒå‡¶ä¹‹ä¸€ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>theThing</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>replaceThing</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>originalThing</span> <span class=o>=</span> <span class=nx>theThing</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>unused</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>originalThing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=c1>// a reference to &#39;originalThing&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;hi&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=nx>theThing</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>longStr</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Array</span><span class=p>(</span><span class=mi>1000000</span><span class=p>).</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;*&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>someMethod</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;message&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>setInterval</span><span class=p>(</span><span class=nx>replaceThing</span><span class=p>,</span> <span class=mi>1000</span><span class=p>);</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>sayHi</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>allNames</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>allNames</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;ğŸ‘‹ &#34;</span> <span class=o>+</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>hello</span> <span class=o>=</span> <span class=nx>sayHi</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>1000000</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>hello</span><span class=p>(</span><span class=s2>&#34;Gandhi&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>ä¸Šè¿°ä»£ç ä¸­ replaceThing ä¼šå®šæœŸæ‰§è¡Œï¼Œå¹¶ä¸”åˆ›å»ºå¤§çš„æ•°ç»„ä¸ someMethod é—­åŒ…èµ‹å€¼ç»™ theThingã€‚someMethod ä½œç”¨åŸŸæ˜¯ä¸ unused å…±äº«çš„ï¼Œunused åˆæœ‰ä¸€ä¸ªæŒ‡å‘ originalThing çš„å¼•ç”¨ã€‚å°½ç®¡ unused å¹¶æœªè¢«å®é™…ä½¿ç”¨ï¼ŒtheThing çš„ someMethod æ–¹æ³•å´æœ‰å¯èƒ½ä¼šè¢«å¤–éƒ¨ä½¿ç”¨ï¼Œä¹Ÿå°±å¯¼è‡´äº† unused å§‹ç»ˆå¤„äºå¯è¾¾çŠ¶æ€ã€‚unused åˆä¼šåå‘ä¾èµ–äº theThingï¼Œæœ€ç»ˆå¯¼è‡´å¤§æ•°ç»„å§‹ç»ˆæ— æ³•è¢«æ¸…é™¤ã€‚</p><h2 id=dom-å¼•ç”¨ä¸ç›‘å¬å™¨>DOM å¼•ç”¨ä¸ç›‘å¬å™¨</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šå°† DOM å…ƒç´ å­˜æ”¾åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œè­¬å¦‚å½“æˆ‘ä»¬éœ€è¦é¢‘ç¹æ›´æ–°æŸä¸ªæ•°æ®åˆ—è¡¨æ—¶ï¼Œå¯èƒ½ä¼šå°†ç”¨åˆ°çš„æ•°æ®åˆ—è¡¨å­˜æ”¾åœ¨ JavaScript æ•°ç»„ä¸­ï¼›è¿™ä¹Ÿå°±å¯¼è‡´äº†æ¯ä¸ª DOM å…ƒç´ å­˜åœ¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œåˆ†åˆ«åœ¨ DOM æ ‘ä¸ JavaScript æ•°ç»„ä¸­ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>elements</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>button</span><span class=o>:</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;button&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>image</span><span class=o>:</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;image&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>doStuff</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>elements</span><span class=p>.</span><span class=nx>image</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=s2>&#34;http://example.com/image_name.png&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>removeImage</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// The image is a direct child of the body element.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>removeChild</span><span class=p>(</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;image&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=c1>// At this point, we still have a reference to #button in the
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//global elements object. In other words, the button element is
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//still in memory and cannot be collected by the GC.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å°† DOM æ ‘ä¸ JavaScript æ•°ç»„ä¸­çš„å¼•ç”¨çš†åˆ é™¤ï¼Œæ‰èƒ½çœŸå®åœ°æ¸…é™¤è¯¥å¯¹è±¡ã€‚ç±»ä¼¼çš„ï¼Œåœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ¸…é™¤æŸä¸ª DOM å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆç§»é™¤å…¶ç›‘å¬å™¨ï¼Œå¦åˆ™æµè§ˆå™¨å¹¶ä¸ä¼šè‡ªåŠ¨åœ°å¸®æˆ‘ä»¬æ¸…é™¤è¯¥ç›‘å¬å™¨ï¼Œæˆ–è€…å›æ”¶è¯¥ç›‘å¬å™¨å¼•ç”¨çš„å¯¹è±¡ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>element</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;launch-button&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>counter</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>onClick</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>counter</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>element</span><span class=p>.</span><span class=nx>innerHtml</span> <span class=o>=</span> <span class=s2>&#34;text &#34;</span> <span class=o>+</span> <span class=nx>counter</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>element</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=nx>onClick</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// Do stuff
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>element</span><span class=p>.</span><span class=nx>removeEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=nx>onClick</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>element</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>removeChild</span><span class=p>(</span><span class=nx>element</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// Now when element goes out of scope,
</span></span></span><span class=line><span class=cl><span class=c1>// both element and onClick will be collected even in old browsers // that don&#39;t handle cycles well.
</span></span></span></code></pre></div><p>ç°ä»£æµè§ˆå™¨ä½¿ç”¨çš„ç°ä»£åƒåœ¾å›æ”¶å™¨åˆ™ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åœ°æ£€æµ‹è¿™ç§å¾ªç¯ä¾èµ–ï¼Œå¹¶ä¸”äºˆä»¥æ¸…é™¤ï¼›jQuery ç­‰ç¬¬ä¸‰æ–¹åº“ä¹Ÿä¼šåœ¨æ¸…é™¤å…ƒç´ ä¹‹å‰é¦–å…ˆç§»é™¤å…¶ç›‘å¬äº‹ä»¶ã€‚</p><h2 id=iframe>iframe</h2><p>iframe æ˜¯å¸¸è§çš„ç•Œé¢å…±äº«æ–¹å¼ï¼Œä¸è¿‡å¦‚æœæˆ‘ä»¬åœ¨çˆ¶ç•Œé¢æˆ–è€…å­ç•Œé¢ä¸­æ·»åŠ äº†å¯¹äºçˆ¶ç•Œé¢æŸå¯¹è±¡çš„å¼•ç”¨ï¼Œè­¬å¦‚ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// å­é¡µé¢å†…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>top</span><span class=p>.</span><span class=nx>innerObject</span> <span class=o>=</span> <span class=nx>someInsideObject</span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>top</span><span class=p>.</span><span class=nb>document</span><span class=p>.</span><span class=nx>addEventLister</span><span class=p>(</span><span class=err>â€˜</span><span class=nx>click</span><span class=err>â€™</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span> <span class=err>â€¦</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¤–éƒ¨é¡µé¢
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=nx>innerObject</span> <span class=o>=</span> <span class=nx>iframeEl</span><span class=p>.</span><span class=nx>contentWindow</span><span class=p>.</span><span class=nx>someInsideObject</span>
</span></span></code></pre></div><p>å°±æœ‰å¯èƒ½å¯¼è‡´ iframe å¸è½½(ç§»é™¤å…ƒç´ )ä¹‹åä»ç„¶æœ‰éƒ¨åˆ†å¯¹è±¡ä¿ç•™ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç§»é™¤ iframe ä¹‹å‰æ‰§è¡Œå¼ºåˆ¶çš„é¡µé¢é‡è½½ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>a</span> <span class=nx>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span><span class=o>&gt;</span><span class=nx>Remove</span><span class=o>&lt;</span><span class=err>/a&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>iframe</span> <span class=nx>src</span><span class=o>=</span><span class=s2>&#34;url&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>).</span><span class=nx>click</span><span class=p>(</span><span class=kd>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;iframe&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>].</span><span class=nx>contentWindow</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>reload</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// çº¿ä¸Šç¯å¢ƒå®æµ‹é‡ç½® src æ•ˆæœä¼šæ›´å¥½
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// $(&#39;iframe&#39;)[0].src = &#34;javascript:false&#34;;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>setTimeout</span><span class=p>(</span><span class=kd>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>       <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;iframe&#39;</span><span class=p>).</span><span class=nx>remove</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>æˆ–è€…æ‰‹åŠ¨åœ°æ‰§è¡Œé¡µé¢æ¸…é™¤æ“ä½œï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>onbeforeunload</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nx>$</span><span class=p>(</span><span class=nb>document</span><span class=p>).</span><span class=nx>unbind</span><span class=p>().</span><span class=nx>die</span><span class=p>();</span>    <span class=c1>//remove listeners on document
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>$</span><span class=p>(</span><span class=nb>document</span><span class=p>).</span><span class=nx>find</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>).</span><span class=nx>unbind</span><span class=p>().</span><span class=nx>die</span><span class=p>();</span> <span class=c1>//remove listeners on all nodes
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//clean up cookies
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>/remove items from localStorage</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=web-worker>Web Worker</h2><p>ç°ä»£æµè§ˆå™¨ä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ Web Worker æ¥è¿è¡Œåå°ä»»åŠ¡ï¼Œä¸è¿‡æœ‰æ—¶å€™å¦‚æœæˆ‘ä»¬è¿‡äºé¢‘ç¹ä¸”ä¸åŠ å®¹é”™åœ°åœ¨ä¸»çº¿ç¨‹ä¸å·¥ä½œçº¿ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>send</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>setInterval</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>array1</span><span class=o>:</span> <span class=nx>get100Arrays</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>      <span class=nx>array2</span><span class=o>:</span> <span class=nx>get500Arrays</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>json</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>arbfr</span> <span class=o>=</span> <span class=nx>str2ab</span><span class=p>(</span><span class=nx>json</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>worker</span><span class=p>.</span><span class=nx>postMessage</span><span class=p>(</span><span class=nx>arbfr</span><span class=p>,</span> <span class=p>[</span><span class=nx>arbfr</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>str2ab</span><span class=p>(</span><span class=nx>str</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>buf</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ArrayBuffer</span><span class=p>(</span><span class=nx>str</span><span class=p>.</span><span class=nx>length</span> <span class=o>*</span> <span class=mi>2</span><span class=p>);</span> <span class=c1>// 2 bytes for each char
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>var</span> <span class=nx>bufView</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Uint16Array</span><span class=p>(</span><span class=nx>buf</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>strLen</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>strLen</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>bufView</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>=</span> <span class=nx>str</span><span class=p>.</span><span class=nx>charCodeAt</span><span class=p>(</span><span class=nx>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>buf</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>åœ¨å®é™…çš„ä»£ç ä¸­æˆ‘ä»¬åº”è¯¥æ£€æµ‹ Transferable Objects æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>let</span> <span class=nx>ab</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ArrayBuffer</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>worker</span><span class=p>.</span><span class=nx>postMessage</span><span class=p>(</span><span class=nx>ab</span><span class=p>,</span> <span class=p>[</span><span class=nx>ab</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>ab</span><span class=p>.</span><span class=nx>byteLength</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;TRANSFERABLE OBJECTS are not supported in your browser!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;USING TRANSFERABLE OBJECTS&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;TRANSFERABLE OBJECTS are not supported in your browser!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>ä¸Šä¸€é¡µ</div><a href=/books/web-tuning-series/3.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/ rel=next>å†…å­˜ä½¿ç”¨åˆ†æ</a></div></div></div><div class=body-footer><p>æœ€è¿‘æ›´æ–°äº 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>Â© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"å·²å¤åˆ¶")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>