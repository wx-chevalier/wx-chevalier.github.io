<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="图像绘制 实际上前面我们就已经用到了图像的绘制，如： io.imshow(img) 这一行代码的实质是利用 matplotlib 包对图片进行绘制，绘制成功后，返回一个 matplotlib 类型的数据。因此，我们也可以这样写： import matplotlib.pyplot as plt plt.imshow(img) imshow()函数格式为： matplotlib.pyplot.imshow(X, cmap=None) 其中 X"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E7%BB%98%E5%88%B6%E4%B8%8E%E8%BD%AC%E5%8C%96/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E7%BB%98%E5%88%B6%E4%B8%8E%E8%BD%AC%E5%8C%96/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E7%BB%98%E5%88%B6%E4%B8%8E%E8%BD%AC%E5%8C%96/"><meta property="og:title" content="绘制与转化 | Next-gen Tech Edu"><meta property="og:description" content="图像绘制 实际上前面我们就已经用到了图像的绘制，如： io.imshow(img) 这一行代码的实质是利用 matplotlib 包对图片进行绘制，绘制成功后，返回一个 matplotlib 类型的数据。因此，我们也可以这样写： import matplotlib.pyplot as plt plt.imshow(img) imshow()函数格式为： matplotlib.pyplot.imshow(X, cmap=None) 其中 X"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>绘制与转化 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=c4c4e5ff99d55f36febfdd730174fa37><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">scikit-image</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id4a98f8c933a585f6327329c359469a5e")' href=#id4a98f8c933a585f6327329c359469a5e aria-expanded=false aria-controls=id4a98f8c933a585f6327329c359469a5e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/>计算机视觉</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id4a98f8c933a585f6327329c359469a5e aria-expanded=false aria-controls=id4a98f8c933a585f6327329c359469a5e><i class="fa-solid fa-angle-down" id=caret-id4a98f8c933a585f6327329c359469a5e></i></a></div><ul class="nav docs-sidenav collapse show" id=id4a98f8c933a585f6327329c359469a5e><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2b499c83144bd9a9a4f25fab5049b596")' href=#id2b499c83144bd9a9a4f25fab5049b596 aria-expanded=false aria-controls=id2b499c83144bd9a9a4f25fab5049b596 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/>scikit-image</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2b499c83144bd9a9a4f25fab5049b596 aria-expanded=false aria-controls=id2b499c83144bd9a9a4f25fab5049b596><i class="fa-solid fa-angle-down" id=caret-id2b499c83144bd9a9a4f25fab5049b596></i></a></div><ul class="nav docs-sidenav collapse show" id=id2b499c83144bd9a9a4f25fab5049b596><li class="child level active"><a href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E7%BB%98%E5%88%B6%E4%B8%8E%E8%BD%AC%E5%8C%96/>绘制与转化</a></li><li class="child level"><a href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E5%9F%BA%E7%A1%80%E8%AF%BB%E5%86%99/>基础读写</a></li><li class="child level"><a href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E5%83%8F%E7%B4%A0%E5%A4%84%E7%90%86/>像素处理</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3f4f86f4ab28fa1fb7bcad303e63752a")' href=#id3f4f86f4ab28fa1fb7bcad303e63752a aria-expanded=false aria-controls=id3f4f86f4ab28fa1fb7bcad303e63752a aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2860e7359ada6d2715d255e69fd5c22b")' href=#id2860e7359ada6d2715d255e69fd5c22b aria-expanded=false aria-controls=id2860e7359ada6d2715d255e69fd5c22b aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id28bdeb6657cb1cc12228f529ff04f74a")' href=#id28bdeb6657cb1cc12228f529ff04f74a aria-expanded=false aria-controls=id28bdeb6657cb1cc12228f529ff04f74a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80/>图形学基础</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id28bdeb6657cb1cc12228f529ff04f74a aria-expanded=false aria-controls=id28bdeb6657cb1cc12228f529ff04f74a><i class="fa-solid fa-angle-right" id=caret-id28bdeb6657cb1cc12228f529ff04f74a></i></a></div><ul class="nav docs-sidenav collapse" id=id28bdeb6657cb1cc12228f529ff04f74a><li class="child level"><a href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80/%E5%9B%BE%E5%83%8F%E6%BB%A4%E6%B3%A2/>图像滤波</a></li><li class="child level"><a href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%9F%BA%E7%A1%80/%E4%BF%A1%E5%8F%B7%E4%B8%8E%E5%99%AA%E5%A3%B0/>信号与噪声</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#subplots>subplots</a></li><li><a href=#其它方法绘图并显示>其它方法绘图并显示</a></li></ul><ul><li><a href=#改变图片尺寸-resize>改变图片尺寸 resize</a></li><li><a href=#按比例缩放-rescale>按比例缩放 rescale</a></li><li><a href=#旋转-rotate>旋转 rotate</a></li><li><a href=#图像金字塔>图像金字塔</a></li></ul><ul><li><a href=#gamma-调整>gamma 调整</a></li><li><a href=#log-对数调整>log 对数调整</a></li><li><a href=#判断图像对比度是否偏低>判断图像对比度是否偏低</a></li><li><a href=#调整强度>调整强度</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>绘制与转化</h1><div class=article-style><h1 id=图像绘制>图像绘制</h1><p>实际上前面我们就已经用到了图像的绘制，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>io</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span></code></pre></div><p>这一行代码的实质是利用 matplotlib 包对图片进行绘制，绘制成功后，返回一个 matplotlib 类型的数据。因此，我们也可以这样写：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span></code></pre></div><p>imshow()函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>matplotlib</span><span class=o>.</span><span class=n>pyplot</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>cmap</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span></span></code></pre></div><p>其中 X 是要绘制的图像或数组。cmap 是颜色图谱（colormap), 默认绘制为 RGB(A)颜色空间。其它可选的颜色图谱如下列表：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-s data-lang=s><span class=line><span class=cl>颜色图谱                          描述
</span></span><span class=line><span class=cl><span class=n>autumn</span>                        红<span class=o>-</span>橙<span class=o>-</span>黄
</span></span><span class=line><span class=cl><span class=n>bone</span>                          黑<span class=o>-</span>白，<span class=n>x</span>线
</span></span><span class=line><span class=cl><span class=n>cool</span>                          青<span class=o>-</span>洋红
</span></span><span class=line><span class=cl><span class=n>copper</span>                         黑<span class=o>-</span>铜
</span></span><span class=line><span class=cl><span class=n>flag</span>                           红<span class=o>-</span>白<span class=o>-</span>蓝<span class=o>-</span>黑
</span></span><span class=line><span class=cl><span class=n>gray</span>                              黑<span class=o>-</span>白
</span></span><span class=line><span class=cl><span class=n>hot</span>                            黑<span class=o>-</span>红<span class=o>-</span>黄<span class=o>-</span>白
</span></span><span class=line><span class=cl><span class=n>hsv</span>                <span class=n>hsv</span>颜色空间，红<span class=o>-</span>黄<span class=o>-</span>绿<span class=o>-</span>青<span class=o>-</span>蓝<span class=o>-</span>洋红<span class=o>-</span>红
</span></span><span class=line><span class=cl><span class=n>inferno</span>                     黑<span class=o>-</span>红<span class=o>-</span>黄
</span></span><span class=line><span class=cl><span class=n>jet</span>                             蓝<span class=o>-</span>青<span class=o>-</span>黄<span class=o>-</span>红
</span></span><span class=line><span class=cl><span class=n>magma</span>                      黑<span class=o>-</span>红<span class=o>-</span>白
</span></span><span class=line><span class=cl><span class=n>pink</span>                               黑<span class=o>-</span>粉<span class=o>-</span>白
</span></span><span class=line><span class=cl><span class=n>plasma</span>                       绿<span class=o>-</span>红<span class=o>-</span>黄
</span></span><span class=line><span class=cl><span class=n>prism</span>                         红<span class=o>-</span>黄<span class=o>-</span>绿<span class=o>-</span>蓝<span class=o>-</span>紫<span class=m>-.</span><span class=n>..</span><span class=o>-</span>绿模式
</span></span><span class=line><span class=cl><span class=n>spring</span>                             洋红<span class=o>-</span>黄
</span></span><span class=line><span class=cl><span class=n>summer</span>                             绿<span class=o>-</span>黄
</span></span><span class=line><span class=cl><span class=n>viridis</span>                             蓝<span class=o>-</span>绿<span class=o>-</span>黄
</span></span><span class=line><span class=cl><span class=n>winter</span>                             蓝<span class=o>-</span>绿
</span></span></code></pre></div><p>用的比较多的有 gray, jet 等，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>image</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>,</span><span class=n>cmap</span><span class=o>=</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>jet</span><span class=p>)</span>
</span></span></code></pre></div><p>在窗口上绘制完图片后，返回一个 AxesImage 对象。要在窗口上显示这个对象，我们可以调用 show()函数来进行显示，但进行练习的时候（ipython 环境中），一般我们可以省略 show() 函数，也能自动显示出来。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>io</span><span class=p>,</span><span class=n>data</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>astronaut</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>dst</span><span class=o>=</span><span class=n>io</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>dst</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>io</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>可以看到，类型是&rsquo;matplotlib.image.AxesImage&rsquo;。显示一张图片，我们通常更愿意这样写：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>io</span><span class=p>,</span><span class=n>data</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>astronaut</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><h1 id=matplotlib-多窗口>matplotlib 多窗口</h1><p>matplotlib 是一个专业绘图的库，相当于 matlab 中的 plot,可以设置多个 figure 窗口,设置 figure 的标题，隐藏坐标尺，甚至可以使用 subplot 在一个 figure 中显示多张图片。一般我们可以这样导入 matplotlib 库：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span></code></pre></div><p>也就是说，我们绘图实际上用的是 matplotlib 包的 pyplot 模块。用 figure 函数和 subplot 函数分别创建主窗口与子图，分开并同时显示宇航员图片的三个通道：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>astronaut</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>num</span><span class=o>=</span><span class=s1>&#39;astronaut&#39;</span><span class=p>,</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=mi>8</span><span class=p>))</span>  <span class=c1>#创建一个名为astronaut的窗口,并设置大小</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>     <span class=c1>#将窗口分为两行两列四个子图，则可显示四幅图片</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;origin image&#39;</span><span class=p>)</span>   <span class=c1>#第一幅图片标题</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>      <span class=c1>#绘制第一幅图片</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span>     <span class=c1>#第二个子图</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;R channel&#39;</span><span class=p>)</span>   <span class=c1>#第二幅图片标题</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>[:,:,</span><span class=mi>0</span><span class=p>],</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>      <span class=c1>#绘制第二幅图片,且为灰度图</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>     <span class=c1>#不显示坐标尺寸</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span>     <span class=c1>#第三个子图</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;G channel&#39;</span><span class=p>)</span>   <span class=c1>#第三幅图片标题</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>[:,:,</span><span class=mi>1</span><span class=p>],</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>      <span class=c1>#绘制第三幅图片,且为灰度图</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>     <span class=c1>#不显示坐标尺寸</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>)</span>     <span class=c1>#第四个子图</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;B channel&#39;</span><span class=p>)</span>   <span class=c1>#第四幅图片标题</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>[:,:,</span><span class=mi>2</span><span class=p>],</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>      <span class=c1>#绘制第四幅图片,且为灰度图</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>     <span class=c1>#不显示坐标尺寸</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>   <span class=c1>#显示窗口</span>
</span></span></code></pre></div><p>在图片绘制过程中，我们用 matplotlib.pyplot 模块下的 figure() 函数来创建显示窗口，该函数的格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>matplotlib</span><span class=o>.</span><span class=n>pyplot</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>num</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>dpi</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>edgecolor</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span></span></code></pre></div><p>所有参数都是可选的，都有默认值，因此调用该函数时可以不带任何参数，其中：</p><ul><li>num: 整型或字符型都可以。如果设置为整型，则该整型数字表示窗口的序号。如果设置为字符型，则该字符串表示窗口的名称。用该参数来命名窗口，如果两个窗口序号或名相同，则后一个窗口会覆盖前一个窗口。</li><li>figsize: 设置窗口大小。是一个 tuple 型的整数，如 figsize=（8，8）</li><li>dpi: 整形数字，表示窗口的分辨率。</li><li>facecolor: 窗口的背景颜色。</li><li>edgecolor: 窗口的边框颜色。</li></ul><p>用 figure() 函数创建的窗口，只能显示一幅图片，如果想要显示多幅图片，则需要将这个窗口再划分为几个子图，在每个子图中显示不同的图片。我们可以使用 subplot() 函数来划分子图，函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>matplotlib</span><span class=o>.</span><span class=n>pyplot</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=n>nrows</span><span class=p>,</span> <span class=n>ncols</span><span class=p>,</span> <span class=n>plot_number</span><span class=p>)</span>
</span></span></code></pre></div><p>nrows: 子图的行数。ncols: 子图的列数。plot_number: 当前子图的编号。如 <code>plt.subplot(2,2,1)</code> 则表示将 figure 窗口划分成了 2 行 2 列共 4 个子图，当前为第 1 个子图。我们有时也可以用这种写法：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>221</span><span class=p>)</span>
</span></span></code></pre></div><p>两种写法效果是一样的。每个子图的标题可用 title()函数来设置，是否使用坐标尺可用 axis()函数来设置，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>221</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&#34;first subwindow&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=subplots>subplots</h2><p>用 subplots 来创建显示窗口与划分子图，除了上面那种方法创建显示窗口和划分子图，还有另外一种编写方法也可以，如下例:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span><span class=p>,</span><span class=n>color</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>immunohistochemistry</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>hsv</span> <span class=o>=</span> <span class=n>color</span><span class=o>.</span><span class=n>rgb2hsv</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>axes</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=p>,</span> <span class=n>ax1</span><span class=p>,</span> <span class=n>ax2</span><span class=p>,</span> <span class=n>ax3</span> <span class=o>=</span> <span class=n>axes</span><span class=o>.</span><span class=n>ravel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;Original image&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>hsv</span><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>0</span><span class=p>],</span> <span class=n>cmap</span><span class=o>=</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;H&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ax2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>hsv</span><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>1</span><span class=p>],</span> <span class=n>cmap</span><span class=o>=</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax2</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;S&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ax3</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>hsv</span><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>2</span><span class=p>],</span> <span class=n>cmap</span><span class=o>=</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax3</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;V&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>ax</span> <span class=ow>in</span> <span class=n>axes</span><span class=o>.</span><span class=n>ravel</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>ax</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>  <span class=c1>#自动调整subplot间的参数</span>
</span></span></code></pre></div><p>直接用 subplots()函数来创建并划分窗口。注意，比前面的 subplot()函数多了一个 s，该函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>matplotlib</span><span class=o>.</span><span class=n>pyplot</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>nrows</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>ncols</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><p>nrows: 所有子图行数，默认为 1。ncols: 所有子图列数，默认为 1。返回一个窗口 figure, 和一个 tuple 型的 ax 对象，该对象包含所有的子图,可结合 ravel()函数列出所有子图，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>axes</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=p>,</span> <span class=n>ax1</span><span class=p>,</span> <span class=n>ax2</span><span class=p>,</span> <span class=n>ax3</span> <span class=o>=</span> <span class=n>axes</span><span class=o>.</span><span class=n>ravel</span><span class=p>()</span>
</span></span></code></pre></div><p>创建了 2 行 2 列 4 个子图，分别取名为 ax0,ax1,ax2 和 ax3, 每个子图的标题用 set_title()函数来设置，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>ax0</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;Original image&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>如果有多个子图，我们还可以使用 tight_layout()函数来调整显示的布局，该函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>matplotlib</span><span class=o>.</span><span class=n>pyplot</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>(</span><span class=n>pad</span><span class=o>=</span><span class=mf>1.08</span><span class=p>,</span> <span class=n>h_pad</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>w_pad</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>rect</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span></span></code></pre></div><p>所有的参数都是可选的，调用该函数时可省略所有的参数。</p><ul><li>pad: 主窗口边缘和子图边缘间的间距，默认为 1.08</li><li>h_pad, w_pad: 子图边缘之间的间距，默认为 pad_inches</li><li>rect: 一个矩形区域，如果设置这个值，则将所有的子图调整到这个矩形区域内。</li></ul><p>一般调用为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>  <span class=c1>#自动调整subplot间的参数</span>
</span></span></code></pre></div><h2 id=其它方法绘图并显示>其它方法绘图并显示</h2><p>除了使用 matplotlib 库来绘制图片，skimage 还有另一个子模块 viewer，也提供一个函数来显示图片。不同的是，它利用 Qt 工具来创建一块画布，从而在画布上绘制图像。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage.viewer</span> <span class=kn>import</span> <span class=n>ImageViewer</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>coins</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>viewer</span> <span class=o>=</span> <span class=n>ImageViewer</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>viewer</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>最后总结一下，绘制和显示图片常用到的函数有：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>函数名</span>     <span class=n>功能</span>  <span class=n>调用格式</span>
</span></span><span class=line><span class=cl><span class=n>figure</span>  <span class=n>创建一个显示窗口</span>    <span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>num</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=mi>8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>imshow</span>  <span class=n>绘制图片</span>    <span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>image</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>show</span>    <span class=n>显示窗口</span>    <span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>subplot</span>     <span class=n>划分子图</span>    <span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>title</span>   <span class=n>设置子图标题</span><span class=p>(</span><span class=n>与subplot结合使用</span><span class=err>）</span>   <span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;origin image&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>axis</span>    <span class=n>是否显示坐标尺</span>     <span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>subplots</span>    <span class=n>创建带有多个子图的窗口</span>     <span class=n>fig</span><span class=p>,</span><span class=n>axes</span><span class=o>=</span><span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=mi>8</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>ravel</span>   <span class=n>为每个子图设置变量</span>   <span class=n>ax0</span><span class=p>,</span><span class=n>ax1</span><span class=p>,</span><span class=n>ax2</span><span class=p>,</span><span class=n>ax3</span><span class=o>=</span><span class=n>axes</span><span class=o>.</span><span class=n>ravel</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>set_title</span>   <span class=n>设置子图标题</span><span class=err>（</span><span class=n>与axes结合使用</span><span class=err>）</span>  <span class=n>ax0</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;first window&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>tight_layout</span>    <span class=n>自动调整子图显示布局</span>  <span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
</span></span></code></pre></div><h1 id=图像的形变与缩放>图像的形变与缩放</h1><p>图像的形变与缩放，使用的是 skimage 的 transform 模块，函数比较多，功能齐全。</p><h2 id=改变图片尺寸-resize>改变图片尺寸 resize</h2><p>函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>skimage</span><span class=o>.</span><span class=n>transform</span><span class=o>.</span><span class=n>resize</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>output_shape</span><span class=p>)</span>
</span></span></code></pre></div><p>其中 image 是需要改变尺寸的图片，output_size 是新的图片尺寸。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>transform</span><span class=p>,</span><span class=n>data</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>camera</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>dst</span><span class=o>=</span><span class=n>transform</span><span class=o>.</span><span class=n>resize</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=p>(</span><span class=mi>80</span><span class=p>,</span> <span class=mi>60</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>121</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;before resize&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>122</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;before resize&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>将 camera 图片由原来的 512x512 大小，变成了 80x60 大小。从下图中的坐标尺，我们能够看出来：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9kKMV.png alt=缩放图片示范 loading=lazy data-zoomable></div></div></figure></p><h2 id=按比例缩放-rescale>按比例缩放 rescale</h2><p>函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>skimage</span><span class=o>.</span><span class=n>transform</span><span class=o>.</span><span class=n>rescale</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>scale</span><span class=p>[,</span> <span class=o>...</span><span class=p>])</span>
</span></span></code></pre></div><p>scale 参数可以是单个 float 数，表示缩放的倍数，也可以是一个 float 型的 tuple，如[0.2,0.5],表示将行列数分开进行缩放：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>transform</span><span class=p>,</span><span class=n>data</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>camera</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=c1>#图片原始大小</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>transform</span><span class=o>.</span><span class=n>rescale</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>)</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=c1>#缩小为原来图片大小的0.1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>transform</span><span class=o>.</span><span class=n>rescale</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=p>[</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.25</span><span class=p>])</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=c1>#缩小为原来图片行数一半，列数四分之一</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>transform</span><span class=o>.</span><span class=n>rescale</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=c1>#放大为原来图片大小的2倍</span>
</span></span></code></pre></div><p>结果为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=p>(</span><span class=mi>512</span><span class=p>,</span> <span class=mi>512</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>51</span><span class=p>,</span> <span class=mi>51</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>256</span><span class=p>,</span> <span class=mi>128</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1024</span><span class=p>,</span> <span class=mi>1024</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=旋转-rotate>旋转 rotate</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>skimage</span><span class=o>.</span><span class=n>transform</span><span class=o>.</span><span class=n>rotate</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>angle</span><span class=p>[,</span> <span class=o>...</span><span class=p>],</span><span class=n>resize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span></code></pre></div><p>angle 参数是个 float 类型数，表示旋转的度数，resize 用于控制在旋转时，是否改变大小，默认为 False。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>transform</span><span class=p>,</span><span class=n>data</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>camera</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=c1>#图片原始大小</span>
</span></span><span class=line><span class=cl><span class=n>img1</span><span class=o>=</span><span class=n>transform</span><span class=o>.</span><span class=n>rotate</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=mi>60</span><span class=p>)</span> <span class=c1>#旋转90度，不改变大小</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img1</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img2</span><span class=o>=</span><span class=n>transform</span><span class=o>.</span><span class=n>rotate</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span><span class=n>resize</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=c1>#旋转30度，同时改变大小</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img2</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>121</span><span class=p>)</span><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;rotate 60&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img1</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>122</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;rotate 30&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>img2</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>显示结果:</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9kdsK.png alt loading=lazy data-zoomable></div></div></figure></p><h2 id=图像金字塔>图像金字塔</h2><p>以多分辨率来解释图像的一种有效但概念简单的结构就是图像金字塔。图像金字塔最初用于机器视觉和图像压缩，一幅图像的金字塔是一系列以金字塔形状排列的分辨率逐步降低的图像集合。金字塔的底部是待处理图像的高分辨率表示，而顶部是低分辨率的近似。当向金字塔的上层移动时，尺寸和分辨率就降低。</p><p>在此，我们举一个高斯金字塔的应用实例，函数原型为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>skimage</span><span class=o>.</span><span class=n>transform</span><span class=o>.</span><span class=n>pyramid_gaussian</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>downscale</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></div><p>downscale 控制着金字塔的缩放比例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span><span class=p>,</span><span class=n>transform</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>astronaut</span><span class=p>()</span> <span class=c1>#载入宇航员图片</span>
</span></span><span class=line><span class=cl><span class=n>rows</span><span class=p>,</span> <span class=n>cols</span><span class=p>,</span> <span class=n>dim</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>shape</span> <span class=c1>#获取图片的行数，列数和通道数</span>
</span></span><span class=line><span class=cl><span class=n>pyramid</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>transform</span><span class=o>.</span><span class=n>pyramid_gaussian</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>downscale</span><span class=o>=</span><span class=mi>2</span><span class=p>))</span> <span class=c1>#产生高斯金字塔图像#共生成了log(512)=9幅金字塔图像，加上原始图像共10幅，pyramid[0]-pyramid[1]</span>
</span></span><span class=line><span class=cl><span class=n>composite_image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=n>rows</span><span class=p>,</span> <span class=n>cols</span> <span class=o>+</span> <span class=n>cols</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>double</span><span class=p>)</span> <span class=c1>#生成背景composite_image[:rows, :cols, :] = pyramid[0] #融合原始图像</span>
</span></span><span class=line><span class=cl><span class=n>i_row</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>pyramid</span><span class=p>[</span><span class=mi>1</span><span class=p>:]:</span>
</span></span><span class=line><span class=cl>       <span class=n>n_rows</span><span class=p>,</span> <span class=n>n_cols</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=n>shape</span><span class=p>[:</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>       <span class=n>composite_image</span><span class=p>[</span><span class=n>i_row</span><span class=p>:</span><span class=n>i_row</span> <span class=o>+</span> <span class=n>n_rows</span><span class=p>,</span> <span class=n>cols</span><span class=p>:</span><span class=n>cols</span> <span class=o>+</span> <span class=n>n_cols</span><span class=p>]</span> <span class=o>=</span> <span class=n>p</span> <span class=c1>#循环融合9幅金字塔图像</span>
</span></span><span class=line><span class=cl>       <span class=n>i_row</span> <span class=o>+=</span> <span class=n>n_rows</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>composite_image</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9kDde.png alt loading=lazy data-zoomable></div></div></figure></p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9kcRI.png alt loading=lazy data-zoomable></div></div></figure></p><p>上右图，就是 10 张金字塔图像，下标为 0 的表示原始图像，后面每层的图像行和列变为上一层的一半，直至变为 1。除了高斯金字塔外，还有其它的金字塔，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>skimage</span><span class=o>.</span><span class=n>transform</span><span class=o>.</span><span class=n>pyramid_laplacian</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>downscale</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></div><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9kWsf.png alt loading=lazy data-zoomable></div></div></figure></p><h1 id=对比度与亮度调整>对比度与亮度调整</h1><p>图像亮度与对比度的调整，是放在 skimage 包的 exposure 模块里面。</p><h2 id=gamma-调整>gamma 调整</h2><p>原理：I=Ig，对原图像的像素，进行幂运算，得到新的像素值。公式中的 g 就是 gamma 值。如果 gamma>1, 新图像比原图像暗；如果 gamma&lt;1,新图像比原图像亮。函数格式为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>skimage</span><span class=o>.</span><span class=n>exposure</span><span class=o>.</span><span class=n>adjust_gamma</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>gamma</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><p>gamma 参数默认为 1，原像不发生变化 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span><span class=p>,</span> <span class=n>exposure</span><span class=p>,</span> <span class=n>img_as_float</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>img_as_float</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>moon</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>gam1</span><span class=o>=</span> <span class=n>exposure</span><span class=o>.</span><span class=n>adjust_gamma</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=c1>#调暗</span>
</span></span><span class=line><span class=cl><span class=n>gam2</span><span class=o>=</span> <span class=n>exposure</span><span class=o>.</span><span class=n>adjust_gamma</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>)</span> <span class=c1>#调亮plt.figure(&#39;adjust_gamma&#39;,figsize=(8,8))</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>131</span><span class=p>)</span><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;origin image&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>image</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>132</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;gamma=2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>gam1</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>133</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;gamma=0.5&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>gam2</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9EmuV.png alt loading=lazy data-zoomable></div></div></figure></p><h2 id=log-对数调整>log 对数调整</h2><p>这个刚好和 gamma 相反，原理：I=log(I)。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span><span class=p>,</span> <span class=n>exposure</span><span class=p>,</span> <span class=n>img_as_float</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>img_as_float</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>moon</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>gam1</span><span class=o>=</span> <span class=n>exposure</span><span class=o>.</span><span class=n>adjust_log</span><span class=p>(</span><span class=n>image</span><span class=p>)</span> <span class=c1>#对数调整</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=s1>&#39;adjust_gamma&#39;</span><span class=p>,</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=mi>8</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>121</span><span class=p>)</span><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;origin image&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>image</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span><span class=p>(</span><span class=mi>122</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;log&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>gam1</span><span class=p>,</span><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s1>&#39;off&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://s1.ax1x.com/2020/06/15/N9EMEF.png alt loading=lazy data-zoomable></div></div></figure></p><h2 id=判断图像对比度是否偏低>判断图像对比度是否偏低</h2><p>函数：is_low_contrast(img)，返回一个 bool 型值：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>data</span><span class=p>,</span> <span class=n>exposure</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>moon</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>result</span><span class=o>=</span><span class=n>exposure</span><span class=o>.</span><span class=n>is_low_contrast</span><span class=p>(</span><span class=n>image</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span></code></pre></div><p>输出为 False。</p><h2 id=调整强度>调整强度</h2><p>函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>skimage.exposure.rescale_intensity<span class=o>(</span>image, <span class=nv>in_range</span><span class=o>=</span><span class=s1>&#39;image&#39;</span>, <span class=nv>out_range</span><span class=o>=</span><span class=s1>&#39;dtype&#39;</span><span class=o>)</span>
</span></span></code></pre></div><p>in_range 表示输入图片的强度范围，默认为&rsquo;image&rsquo;, 表示用图像的最大/最小像素值作为范围
out_range 表示输出图片的强度范围，默认为&rsquo;dype&rsquo;, 表示用图像的类型的最大/最小值作为范围
默认情况下，输入图片的[min,max]范围被拉伸到[dtype.min, dtype.max]，如果 dtype=uint8, 那么 dtype.min=0, dtype.max=255</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>exposure</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>51</span><span class=p>,</span> <span class=mi>102</span><span class=p>,</span> <span class=mi>153</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mat</span><span class=o>=</span><span class=n>exposure</span><span class=o>.</span><span class=n>rescale_intensity</span><span class=p>(</span><span class=n>image</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mat</span><span class=p>)</span>
</span></span></code></pre></div><p>输出为[ 0 127 255]
即像素最小值由 51 变为 0，最大值由 153 变为 255，整体进行了拉伸，但是数据类型没有变，还是 uint8
前面我们讲过，可以通过 img_as_float()函数将 unit8 类型转换为 float 型，实际上还有更简单的方法，就是乘以 1.0</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>51</span><span class=p>,</span> <span class=mi>102</span><span class=p>,</span> <span class=mi>153</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>image</span><span class=o>*</span><span class=mf>1.0</span><span class=p>)</span>
</span></span></code></pre></div><p>即由[51,102,153]变成了[ 51. 102. 153.]，而<strong>float 类型的范围是[0,1]</strong>，因此对 float 进行 rescale_intensity 调整后，范围变为 [0,1],而不是[ 0,255]：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>exposure</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>51</span><span class=p>,</span> <span class=mi>102</span><span class=p>,</span> <span class=mi>153</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>tmp</span><span class=o>=</span><span class=n>image</span><span class=o>*</span><span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>mat</span><span class=o>=</span><span class=n>exposure</span><span class=o>.</span><span class=n>rescale_intensity</span><span class=p>(</span><span class=n>tmp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mat</span><span class=p>)</span>
</span></span></code></pre></div><p>结果为 [ 0. 0.5 1. ]，如果原始像素值不想被拉伸，只是等比例缩小，就使用 in_range 参数，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>exposure</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>51</span><span class=p>,</span> <span class=mi>102</span><span class=p>,</span> <span class=mi>153</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>tmp</span><span class=o>=</span><span class=n>image</span><span class=o>*</span><span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>mat</span><span class=o>=</span><span class=n>exposure</span><span class=o>.</span><span class=n>rescale_intensity</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span><span class=n>in_range</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>255</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mat</span><span class=p>)</span>
</span></span></code></pre></div><p>输出为：[ 0.2 0.4 0.6]，即原像素值除以 255，如果参数 in_range 的[main,max]范围要比原始像素值的范围[min,max] 大或者小，那就进行裁剪，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>mat</span><span class=o>=</span>exposure.rescale_intensity<span class=o>(</span>tmp,in_range<span class=o>=(</span>0,102<span class=o>))</span>
</span></span><span class=line><span class=cl>print<span class=o>(</span>mat<span class=o>)</span>
</span></span></code></pre></div><p>输出[ 0.5 1. 1. ]，即原像素值除以 102，超出 1 的变为 1，如果一个数组里面有负数，现在想调整到正数，就使用 out_range 参数。如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>skimage</span> <span class=kn>import</span> <span class=n>exposure</span>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=o>-</span><span class=mi>10</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>int8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mat</span><span class=o>=</span><span class=n>exposure</span><span class=o>.</span><span class=n>rescale_intensity</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>out_range</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>127</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mat</span><span class=p>)</span>
</span></span></code></pre></div><p>输出 [0 63 127]。</p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/deeplearning-series/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/scikit-image/%E5%9F%BA%E7%A1%80%E8%AF%BB%E5%86%99/ rel=prev>基础读写</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>