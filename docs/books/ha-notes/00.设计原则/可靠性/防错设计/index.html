<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="防错设计 Poka-yoke 是精益制造（Lean Manufacturing）领域的一个概念，意思是“防错”。Poka-yoke 的概念最早是新乡重夫在丰田汽车引入的。Wikepedia 上对 Poka-yoke 的介绍： Poka-yoke (ポカヨケ) is a Japanese term"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%98%B2%E9%94%99%E8%AE%BE%E8%AE%A1/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.fab3cd1900ae35687457073b2d518207.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%98%B2%E9%94%99%E8%AE%BE%E8%AE%A1/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%98%B2%E9%94%99%E8%AE%BE%E8%AE%A1/"><meta property="og:title" content="防错设计 | Next-gen Tech Edu"><meta property="og:description" content="防错设计 Poka-yoke 是精益制造（Lean Manufacturing）领域的一个概念，意思是“防错”。Poka-yoke 的概念最早是新乡重夫在丰田汽车引入的。Wikepedia 上对 Poka-yoke 的介绍： Poka-yoke (ポカヨケ) is a Japanese term"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>防错设计 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=ecea9e3726a6f85054f349179bcc83c6><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">可靠性</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idba9c4bc1e5b4993f5c9756489b46bbaa")' href=#idba9c4bc1e5b4993f5c9756489b46bbaa aria-expanded=false aria-controls=idba9c4bc1e5b4993f5c9756489b46bbaa aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/>00.设计原则</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idba9c4bc1e5b4993f5c9756489b46bbaa aria-expanded=false aria-controls=idba9c4bc1e5b4993f5c9756489b46bbaa><i class="fa-solid fa-angle-down" id=caret-idba9c4bc1e5b4993f5c9756489b46bbaa></i></a></div><ul class="nav docs-sidenav collapse show" id=idba9c4bc1e5b4993f5c9756489b46bbaa><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2e9e0f5b938bc54b500a3a82d4010723")' href=#id2e9e0f5b938bc54b500a3a82d4010723 aria-expanded=false aria-controls=id2e9e0f5b938bc54b500a3a82d4010723 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id06da9e73d3be9017c84b0b6347e3cafe")' href=#id06da9e73d3be9017c84b0b6347e3cafe aria-expanded=false aria-controls=id06da9e73d3be9017c84b0b6347e3cafe aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idaace843a2c20ca8235145c4e1f504437")' href=#idaace843a2c20ca8235145c4e1f504437 aria-expanded=false aria-controls=idaace843a2c20ca8235145c4e1f504437 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/>可靠性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idaace843a2c20ca8235145c4e1f504437 aria-expanded=false aria-controls=idaace843a2c20ca8235145c4e1f504437><i class="fa-solid fa-angle-down" id=caret-idaace843a2c20ca8235145c4e1f504437></i></a></div><ul class="nav docs-sidenav collapse show" id=idaace843a2c20ca8235145c4e1f504437><li class="child level active"><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%98%B2%E9%94%99%E8%AE%BE%E8%AE%A1/>防错设计</a></li><li class="child level"><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E5%8F%AF%E9%9D%A0%E6%80%A7/>可靠性</a></li><li class="child level"><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E9%9D%A2%E5%90%91%E5%A4%B1%E8%B4%A5%E7%9A%84%E8%AE%BE%E8%AE%A1/>面向失败的设计</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id95cd84781f765ba77c824bfda7f524f3")' href=#id95cd84781f765ba77c824bfda7f524f3 aria-expanded=false aria-controls=id95cd84781f765ba77c824bfda7f524f3 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/>可扩展性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id95cd84781f765ba77c824bfda7f524f3 aria-expanded=false aria-controls=id95cd84781f765ba77c824bfda7f524f3><i class="fa-solid fa-angle-right" id=caret-id95cd84781f765ba77c824bfda7f524f3></i></a></div><ul class="nav docs-sidenav collapse" id=id95cd84781f765ba77c824bfda7f524f3><li class="child level"><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/%E8%B4%9F%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD/>负载与性能</a></li><li class="child level"><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/>可扩展性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc2da0da305f1ff14c1e8c9157e4cc9e5")' href=#idc2da0da305f1ff14c1e8c9157e4cc9e5 aria-expanded=false aria-controls=idc2da0da305f1ff14c1e8c9157e4cc9e5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/>可维护性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc2da0da305f1ff14c1e8c9157e4cc9e5 aria-expanded=false aria-controls=idc2da0da305f1ff14c1e8c9157e4cc9e5><i class="fa-solid fa-angle-right" id=caret-idc2da0da305f1ff14c1e8c9157e4cc9e5></i></a></div><ul class="nav docs-sidenav collapse" id=idc2da0da305f1ff14c1e8c9157e4cc9e5><li class="child level"><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7/>可维护性</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>防错设计</h1><div class=article-style><h1 id=防错设计>防错设计</h1><p>Poka-yoke 是精益制造（Lean Manufacturing）领域的一个概念，意思是“防错”。Poka-yoke 的概念最早是新乡重夫在丰田汽车引入的。Wikepedia 上对 Poka-yoke 的介绍：</p><blockquote><p>Poka-yoke (ポカヨケ) is a Japanese term that means &ldquo;mistake-proofing&rdquo; or &ldquo;inadvertent error prevention&rdquo;. A poka-yoke is any mechanism in any process that helps an equipment operator avoid (yokeru) mistakes (poka). Its purpose is to eliminate product defects by preventing, correcting, or drawing attention to human errors as they occur. The concept was formalized, and the term adopted, by Shigeo Shingo as part of the Toyota Production System.</p></blockquote><blockquote><p>More broadly, the term can refer to any behavior-shaping constraint designed into a process to prevent incorrect operation by the user.</p></blockquote><p>Poka-yoke 在生活中的例子，譬如柴油的加油管是插不到汽油车的加油口里的，汽油的加油管是插不到柴油车的加油口里的。当时就觉得这个设计很赞，很安全，能够防止人搞错。</p><h1 id=输入值的及时校验>输入值的及时校验</h1><ul><li><p>有特定长度的、特定格式的，有 ISO 标准的，都要在值被输入的第一时刻，对长度格式等做充分的校验，校验发现不符合标准的，直接按照 illegal parameter 拒绝掉。</p></li><li><p>含有非法字符的配置值，要在第一时间就校验出来并 rejec 掉，不能让它进入我们的系统。如果进来了，在生效前要做好校验。我们要有这样一种设计模式：当发现配置值非法的时候，系统能够自我保护，不加载有问题的新配置，继续使用老配置；同时，为了确保新部署的系统也能正常工作，配置要有多版本，否则，正在运行中的系统能自我保护，但一旦重启了就别无选择只能加载有问题的新配置了。</p></li><li><p>全角双引号是东亚（中日韩）同学特别容易遇到的问题，很多富文本编辑器（包括 Microsoft Office）都会自动的把半角引号变成全角的。所以，如果需要开一个文本临时保存一下，要用 Sublime Text、<a href=https://code.visualstudio.com/ target=_blank rel=noopener>VS Code</a>等代码编辑器。这些编辑器不会做半角/全角的自动转换。</p></li><li><p>容易半角全角问题的除了引号以外，还有逗号（<code>，</code> vs. <code>,</code>）、减号（<code>-</code> vs. <code>−</code>）、括号（<code>()</code> vs. <code>()</code>）。这些也是很容易出问题的。文本编辑器里的字体要设置成比较容易辨识半角全角的。这个道理和识别<code>0O</code>和<code>1lI</code>是一样的道理。<strong>增强视觉辨识效果</strong>，是防错的一个很有效的手段。</p></li><li><p>各种解析和转义代码（例如，URL escape、Unicode 到 ASCII 的转换、XML/Json/CSV 等格式在序列化和反序列化时对特殊字符处理等等），尽量不要自己去写代码，尽量用成熟的二方或三方类库。要对转义有敬畏心，健壮完备的转义逻辑不是件容易的事情，是需要投入一定的时间和精力去夯实的。宁可多花一点时间去找成熟的二方或三方类库，也不要为了节省时间自己写个简单的逻辑。</p></li><li><p>接口和数据模型的各种字段要定义清楚：支持什么字符、不支持什么字符。需求文档如果有关于特殊字符的处理逻辑，例如“不支持特殊字符”，那必须要求需求文档完整定义清楚什么是“特殊字符”。后面要增加支持的字符，就要改需求、走一个完整的设计编码测试闭环。对于输入值，要第一时间做校验，如有不支持的字符，第一时间抛错。</p></li></ul><h1 id=开发环境与生产环境的权限隔离>开发环境与生产环境的权限隔离</h1><ul><li><p>网络隔离：生产环境的资源，例如数据库、SFTP、API 等，都要尽可能配 IP 地址白名单，只有白名单上的 source IP 可以访问。不过，IP 地址白名单这个东西本身也是很容易出错的，要非常小心，要有很好的防错设计和监控应急能力。IP 白名单一旦改错，网络访问不通，可能引起大面积的故障</p></li><li><p>权限隔离：访问线下环境的账号和访问线上环境的账号必须是两个。同一个账号不可以同时有线上和线下的权限，防止搞错、调串。另外，如果是授予给工程师的生产环境访问权限，要做到授权范围最小、时间最短，必须要是 JIT（Just In Time），即要用的时候申请，用完之后马上回收。对范围大、有效期长的修改权限（读权限可以适当放宽）要严格管控。</p></li></ul><h1 id=交互界面的高辨识度>交互界面的高辨识度</h1></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/ha-notes/00.%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/%E5%8F%AF%E9%9D%A0%E6%80%A7/%E5%8F%AF%E9%9D%A0%E6%80%A7/ rel=prev>可靠性</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>