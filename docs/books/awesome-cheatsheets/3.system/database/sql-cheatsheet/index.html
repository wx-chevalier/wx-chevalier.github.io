<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="SQL 语法速览与备忘清单 SQL 是 Structrued Query Language 的缩写，即结构化查询语言。它是负责与 ANSI(美国国家标准学会)维护的数据库交互的标准。作为关系数据库的标准语言，它已被众多商用 DBMS 产品所采用，使得它已成为关系数据库领域中"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/awesome-cheatsheets/3.system/database/sql-cheatsheet/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/awesome-cheatsheets/3.system/database/sql-cheatsheet/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/awesome-cheatsheets/3.system/database/sql-cheatsheet/"><meta property="og:title" content="SQL-CheatSheet | Next-gen Tech Edu"><meta property="og:description" content="SQL 语法速览与备忘清单 SQL 是 Structrued Query Language 的缩写，即结构化查询语言。它是负责与 ANSI(美国国家标准学会)维护的数据库交互的标准。作为关系数据库的标准语言，它已被众多商用 DBMS 产品所采用，使得它已成为关系数据库领域中"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><meta property="article:modified_time" content="2023-04-16T20:01:58+08:00"><title>SQL-CheatSheet | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=8bf9f402d3df552aa30fdaf93f8e0606><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">Database</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id61726f9f112a127c6915681dc58e31cf")' href=#id61726f9f112a127c6915681dc58e31cf aria-expanded=false aria-controls=id61726f9f112a127c6915681dc58e31cf aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/3.system/>3.System</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id61726f9f112a127c6915681dc58e31cf aria-expanded=false aria-controls=id61726f9f112a127c6915681dc58e31cf><i class="fa-solid fa-angle-down" id=caret-id61726f9f112a127c6915681dc58e31cf></i></a></div><ul class="nav docs-sidenav collapse show" id=id61726f9f112a127c6915681dc58e31cf><li class="child level"><a href=/books/awesome-cheatsheets/3.system/cache-cheatsheet/>Cache-CheatSheet</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id82e7fc5dd01917513c9c0a4302302c47")' href=#id82e7fc5dd01917513c9c0a4302302c47 aria-expanded=false aria-controls=id82e7fc5dd01917513c9c0a4302302c47 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/3.system/database/>Database</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id82e7fc5dd01917513c9c0a4302302c47 aria-expanded=false aria-controls=id82e7fc5dd01917513c9c0a4302302c47><i class="fa-solid fa-angle-down" id=caret-id82e7fc5dd01917513c9c0a4302302c47></i></a></div><ul class="nav docs-sidenav collapse show" id=id82e7fc5dd01917513c9c0a4302302c47><li class="child level"><a href=/books/awesome-cheatsheets/3.system/database/mongodb-cheatsheet/>MongoDB-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/database/mysql-cheatsheet/>MySQL-Cheatsheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/database/oracle-cheatsheet/>Oracle-CheatSheet</a></li><li class="child level active"><a href=/books/awesome-cheatsheets/3.system/database/sql-cheatsheet/>SQL-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idee445444f225f9eb0ab4bfb9751b9b81")' href=#idee445444f225f9eb0ab4bfb9751b9b81 aria-expanded=false aria-controls=idee445444f225f9eb0ab4bfb9751b9b81 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/3.system/devops/>DevOps</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idee445444f225f9eb0ab4bfb9751b9b81 aria-expanded=false aria-controls=idee445444f225f9eb0ab4bfb9751b9b81><i class="fa-solid fa-angle-right" id=caret-idee445444f225f9eb0ab4bfb9751b9b81></i></a></div><ul class="nav docs-sidenav collapse" id=idee445444f225f9eb0ab4bfb9751b9b81><li class="child level"><a href=/books/awesome-cheatsheets/3.system/devops/backend-ops-cheatsheet/>Backend-Ops-CheatSheet</a></li></ul></div><li class="child level"><a href=/books/awesome-cheatsheets/3.system/kara-systemdesign-cheatsheet/>Kara-SystemDesign-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/live-cheatsheet/>Live-CheatSheet</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd3c42b252a4f776f388230c97ca5897e")' href=#idd3c42b252a4f776f388230c97ca5897e aria-expanded=false aria-controls=idd3c42b252a4f776f388230c97ca5897e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/3.system/microcn/>MicroCN</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd3c42b252a4f776f388230c97ca5897e aria-expanded=false aria-controls=idd3c42b252a4f776f388230c97ca5897e><i class="fa-solid fa-angle-right" id=caret-idd3c42b252a4f776f388230c97ca5897e></i></a></div><ul class="nav docs-sidenav collapse" id=idd3c42b252a4f776f388230c97ca5897e><li class="child level"><a href=/books/awesome-cheatsheets/3.system/microcn/auth-cheatsheet/>Auth-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/microcn/graphql-cheatsheet/>GraphQL-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/microcn/ha-cheatsheet/>HA-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/microcn/microservice-cheatsheet/>MicroService-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/microcn/nginx-cheatsheet/>Nginx-CheatSheet</a></li></ul></div><li class="child level"><a href=/books/awesome-cheatsheets/3.system/redis-cheatsheet/>Redis-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/softwaretest-cheatsheet/>SoftwareTest-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/spring-cheatsheet/>Spring-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/3.system/springboot-cheatsheet/>SpringBoot-CheatSheet</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#text-types>Text types</a></li><li><a href=#number-types>Number types</a></li><li><a href=#date-types>Date types</a></li></ul><ul><li><a href=#库>库</a></li></ul><ul><li><a href=#索引>索引</a></li><li><a href=#查询>查询</a><ul><li><a href=#联合查询>联合查询</a></li><li><a href=#子查询>子查询</a></li></ul></li><li><a href=#插入与更新>插入与更新</a></li></ul><ul><li><a href=#数据库管理>数据库管理</a></li><li><a href=#时间与日期>时间与日期</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>SQL-CheatSheet</h1><div class=article-style><h1 id=sql-语法速览与备忘清单>SQL 语法速览与备忘清单</h1><p>SQL 是 Structrued Query Language 的缩写，即结构化查询语言。它是负责与 ANSI(美国国家标准学会)维护的数据库交互的标准。作为关系数据库的标准语言，它已被众多商用 DBMS 产品所采用，使得它已成为关系数据库领域中一个主流语言，不仅包含数据查询功能，还包括插入、删除、更新和数据定义功能。最为重要的 SQL92 版本的详细标准可以查看<a href=http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt target=_blank rel=noopener>这里</a>，或者在 <a href=https://en.wikipedia.org/wiki/SQL target=_blank rel=noopener>Wiki</a> 上查看 SQL 标准的变化。</p><ul><li>DDL 是数据定义语言的简称，它涉及到数据库模式和描述，即数据应该如何在数据库中存在。</li><li>DML 是数据操作语言的简称，它处理数据操作，包括最常见的 SQL 语句，如 SELECT、INSERT、UPDATE、DELETE 等，它被用来存储、修改、检索、删除和更新数据库中的数据。</li><li>DCL 是数据控制语言的简称，包括 GRANT 等命令，主要涉及数据库系统的权利、权限和其他控制。</li></ul><h1 id=数据类型>数据类型</h1><h2 id=text-types>Text types</h2><table><thead><tr><th>数据类型</th><th>说明</th><th></th><th></th></tr></thead><tbody><tr><td>CHAR(size)</td><td>保存一个固定长度的字符串（可以包含字母、数字和特殊字符）。固定的大小在括号中指定。最多可以存储 255 个字符。</td><td></td><td></td></tr><tr><td>VARCHAR(size)</td><td>存放一个可变长度的字符串（可以包含字母、数字和特殊字符）。最大的尺寸在括号中指定。最多可以存储 255 个字符。注意：如果你输入一个大于 255 的值，它将被转换成 TEXT 类型。</td><td></td><td></td></tr><tr><td>TINYTEXT</td><td>保存一个最大长度为 255 个字符的字符串。</td><td></td><td></td></tr><tr><td>TEXT</td><td>保存一个最大长度为 65,535 个字符的字符串。</td><td></td><td></td></tr><tr><td>BLOB</td><td>用于 BLOB（二进制大型对象）。最多可以容纳 65,535 个字节的数据</td><td></td><td>BLOB</td></tr><tr><td>MEDIUMTEXT</td><td>存储一个最大长度为 16,777,215 个字符的字符串</td><td></td><td></td></tr><tr><td>MEDIUMBLOB</td><td>用于 BLOB（二进制大型对象）。最多可以容纳 16,777,215 字节的数据。</td><td></td><td></td></tr><tr><td>LONGTEXT</td><td>保存最大长度为 4,294,967,295 个字符的字符串</td><td></td><td></td></tr><tr><td>LONGBLOB</td><td>用于 BLOB（二进制大型对象）。最多可以容纳 4,294,967,295 字节的数据。</td><td></td><td></td></tr><tr><td>ENUM(x,y,z,etc.)</td><td>让你输入一个可能的值列表。在一个 ENUM 列表中，你最多可以列出 65535 个值。如果插入一个不在列表中的值，将插入一个空白值。注意：值是按照你输入的顺序排序的。你以这种格式输入可能的值。ENUM(&lsquo;X&rsquo;,&lsquo;Y&rsquo;,&lsquo;Z&rsquo;)</td><td></td><td></td></tr><tr><td>SET</td><td>与 ENUM 类似，只是 SET 最多可以包含 64 个列表项，并且可以存储多个选择</td><td></td><td></td></tr></tbody></table><h2 id=number-types>Number types</h2><table><thead><tr><th>数据类型</th><th>说明</th><th></th><th></th></tr></thead><tbody><tr><td>TINYINT(size)</td><td>-128 to 127 normal. 0 到 255 <code>UNSIGNED*</code>。可以在括号内指定最大的数字数</td><td></td><td>SMALLINT(size)</td></tr><tr><td>SMALLINT(size)</td><td>-32768 至 32767 正常。0 至 65535 <code>UNSIGNED*</code>。可以在括号中指定最大的数字数。</td><td></td><td></td></tr><tr><td>MEDIUMINT(size)</td><td>-8388608 至 8388607 正常。0 至 16777215 <code>UNSIGNED*</code>。可以在括号内指定最大的数字数</td><td></td><td>INT(size)</td></tr><tr><td>INT(size)</td><td>-2147483648 至 2147483647 正常。0 至 4294967295 <code>UNSIGNED*</code>。可以在括号内指定最大的数字数</td><td></td><td>BIGINT(size)</td></tr><tr><td>BIGINT(size)</td><td>-9223372036854775808 至 9223372036854775807 正常。0 到 18446744073709551615 <code>UNSIGNED*</code>。可以在括号中指定最大的数字数</td><td></td><td></td></tr><tr><td>FLOAT(size,d)</td><td>一个带有浮动小数点的小数字。最大的数字数可以在 size 参数中指定。小数点右边的最大位数可在 d 参数中指定。</td><td></td><td></td></tr><tr><td>DOUBLE(size,d)</td><td>一个带有浮动小数点的大数字。可在 size 参数中指定最大位数。小数点右边的最大位数在 d 参数中指定。</td><td></td><td></td></tr><tr><td>DECIMAL(size,d)</td><td>一个以字符串形式存储的 DOUBLE，允许使用固定的小数点。最大的数字数可以在 size 参数中指定。小数点右边的最大位数在 d 参数中指定。</td><td></td><td></td></tr></tbody></table><h2 id=date-types>Date types</h2><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td>DATE()</td><td>一个日期。格式。格式：YYYY-MM-DDN 注：支持的范围是'1000-01-01&rsquo;到'9999-12-31&rsquo;。</td></tr><tr><td>DATETIME()</td><td>一个日期和时间的组合。格式。YYYY-MM-DD HH:MI:SSNote: 支持的范围是从'1000-01-01 00:00:00&rsquo;到'9999-12-31 23:59:59&rsquo;。</td></tr><tr><td>TIMESTAMP()</td><td>一个时间戳。TIMESTAMP 值是以 Unix 纪元（&lsquo;1970-01-01 00:00:00&rsquo;UTC）以来的秒数存储。格式。YYYY-MM-DD HH:MI:SSNote: 支持的范围是从'1970-01-01 00:00:01&rsquo; UTC 到'2038-01-09 03:14:07&rsquo; UTC。</td></tr></tbody></table><p>| 时间()｜一个时间。格式。HH:MI:SS 注：支持的范围是从&rsquo;-838:59:59&rsquo;到'838:59:59&rsquo;。
| 年份() | 两位数或四位数格式的年份。注：允许四位数格式的数值。1901 至 2155。允许的两位数格式的值。70 至 69，代表 1970 年至 2069 年的年份。</p><h1 id=基础语法>基础语法</h1><h2 id=库>库</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Comments start with two hyphens. End each command with a semicolon.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- SQL is not case-sensitive about keywords. The sample commands here
</span></span></span><span class=line><span class=cl><span class=c1>-- follow the convention of spelling them in upper-case because it makes
</span></span></span><span class=line><span class=cl><span class=c1>-- it easier to distinguish them from database, table, and column names.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Create and delete a database. Database and table names are case-sensitive.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>someDatabase</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=n>someDatabase</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- List available databases.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>DATABASES</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Use a particular existing database.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>USE</span><span class=w> </span><span class=n>employees</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h1 id=表>表</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Create a table called tablename1, with the two columns shown, for
</span></span></span><span class=line><span class=cl><span class=c1>-- the database currently in use. Lots of other options are available
</span></span></span><span class=line><span class=cl><span class=c1>-- for how you specify the columns, such as their datatypes.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>CREATE TABLE &lt;table_name1&gt; (
</span></span></span><span class=line><span class=cl><span class=cm>    &lt;col_name1&gt; &lt;col_type1&gt;,
</span></span></span><span class=line><span class=cl><span class=cm>    &lt;col_name2&gt; &lt;col_type2&gt;,
</span></span></span><span class=line><span class=cl><span class=cm>    &lt;col_name3&gt; &lt;col_type3&gt;
</span></span></span><span class=line><span class=cl><span class=cm>    PRIMARY KEY (&lt;col_name1&gt;),
</span></span></span><span class=line><span class=cl><span class=cm>    FOREIGN KEY (&lt;col_name2&gt;) REFERENCES &lt;table_name2&gt;(&lt;col_name2&gt;)
</span></span></span><span class=line><span class=cl><span class=cm>);
</span></span></span><span class=line><span class=cl><span class=cm>**/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tablename1</span><span class=w> </span><span class=p>(</span><span class=n>fname</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span><span class=w> </span><span class=n>lname</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>20</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Check if not exit and create
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=o>`</span><span class=n>test</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>USE</span><span class=w> </span><span class=o>`</span><span class=n>test</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=o>@</span><span class=n>OLD_FOREIGN_KEY_CHECKS</span><span class=o>=@@</span><span class=n>FOREIGN_KEY_CHECKS</span><span class=p>,</span><span class=w> </span><span class=n>FOREIGN_KEY_CHECKS</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=n>tblsample</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>recid</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>cvfilename</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>250</span><span class=p>)</span><span class=w>  </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>cvpagenumber</span><span class=o>`</span><span class=w>  </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>cilineno</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=mi>11</span><span class=p>)</span><span class=w>  </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>batchname</span><span class=o>`</span><span class=w>  </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=k>type</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=k>data</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w>  </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>IF</span><span class=w> </span><span class=n>OBJECT_ID</span><span class=p>(</span><span class=s1>&#39;tbl_kunde&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;U&#39;</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>tbl_kunde</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>id_kunde</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>fi_moral_nr</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>25</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>vorname</span><span class=w> </span><span class=nb>varchar</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>wohnort</span><span class=w> </span><span class=nb>varchar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Insert a row of data into the table tablename1. This assumes that the
</span></span></span><span class=line><span class=cl><span class=c1>-- table has been defined to accept these values as appropriate for it.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>tablename1</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=s1>&#39;Richard&#39;</span><span class=p>,</span><span class=s1>&#39;Mutt&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- In tablename1, change the fname value to &#39;John&#39;
</span></span></span><span class=line><span class=cl><span class=c1>-- for all rows that have an lname value of &#39;Mutt&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>UPDATE</span><span class=w> </span><span class=n>tablename1</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>fname</span><span class=o>=</span><span class=s1>&#39;John&#39;</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>lname</span><span class=o>=</span><span class=s1>&#39;Mutt&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Delete rows from the tablename1 table
</span></span></span><span class=line><span class=cl><span class=c1>-- where the lname value begins with &#39;M&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tablename1</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>lname</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;M%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Delete all rows from the tablename1 table, leaving the empty table.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>tablename1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Remove the entire tablename1 table.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tablename1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Foreign Key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>FK_fi_moral_nr</span><span class=w> </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>fi_moral_nr</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>tkey_moral</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>CASCADE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Constraint
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tkey_moral</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>PK_id_moral_nr</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>id_moral_nr</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>FK_fi_moral_nr</span><span class=w> </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>fi_moral_nr</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>tkey_moral</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>CASCADE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=索引>索引</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Create
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>unique</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>ix_kund_name</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Disable
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>alter</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>ix_kund_name</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=n>disable</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Rebuild
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>alter</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>ix_kund_name</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=n>rebuild</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Reorganize
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>alter</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>ix_kund_name</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=n>reorganize</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Drop
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>drop</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>ix_kund_name</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Alter
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>drop</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>ix_kund_name</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w>
</span></span></span></code></pre></div><h2 id=查询>查询</h2><table><thead><tr><th>Name</th><th>Command</th></tr></thead><tbody><tr><td>Select with regexp in where clause</td><td><code>select * from expenses where date regexp '2013-0[4-5]' limit 2;</code></td></tr><tr><td>Select with like in where clause</td><td><code>select * from expenses where date like '2013-0%' limit 2;</code></td></tr><tr><td>Select unix timestamp</td><td><code>select unix_timestamp(createtime) from expenses limit 1;</code></td></tr><tr><td>Offset limit</td><td><code>select * from student limit 4 offset 9</code></td></tr><tr><td>Use replace function</td><td><code>UPDATE tb1 SET f1=REPLACE(f1, 'abc', 'def');</code></td></tr><tr><td>Use if function</td><td>select Db, IF(IFNULL(User, “”)=”“, DB, User) from db;</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Select all rows and columns from the current database&#39;s departments table.
</span></span></span><span class=line><span class=cl><span class=c1>-- Default activity is for the interpreter to scroll the results on your screen.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Retrieve all rows from the departments table,
</span></span></span><span class=line><span class=cl><span class=c1>-- but only the dept_no and dept_name columns.
</span></span></span><span class=line><span class=cl><span class=c1>-- Splitting up commands across lines is OK.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>dept_no</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>dept_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Retrieve all departments columns, but just 5 rows.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>5</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Retrieve dept_name column values from the departments
</span></span></span><span class=line><span class=cl><span class=c1>-- table where the dept_name value has the substring &#39;en&#39;.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>dept_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>dept_name</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%en%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Retrieve all columns from the departments table where the dept_name
</span></span></span><span class=line><span class=cl><span class=c1>-- column starts with an &#39;S&#39; and has exactly 4 characters after it.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>dept_name</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;S____&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Select title values from the titles table but don&#39;t show duplicates.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>title</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>titles</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Same as above, but sorted (case-sensitive) by the title values.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>title</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>titles</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>title</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Show the number of rows in the departments table.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Show the number of rows in the departments table that
</span></span></span><span class=line><span class=cl><span class=c1>-- have &#39;en&#39; as a substring of the dept_name value.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>departments</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>dept_name</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%en%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- A JOIN of information from multiple tables: the titles table shows
</span></span></span><span class=line><span class=cl><span class=c1>-- who had what job titles, by their employee numbers, from what
</span></span></span><span class=line><span class=cl><span class=c1>-- date to what date. Retrieve this information, but instead of the
</span></span></span><span class=line><span class=cl><span class=c1>-- employee number, use the employee number as a cross-reference to
</span></span></span><span class=line><span class=cl><span class=c1>-- the employees table to get each employee&#39;s first and last name
</span></span></span><span class=line><span class=cl><span class=c1>-- instead. (And only get 10 rows.)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>employees</span><span class=p>.</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>employees</span><span class=p>.</span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>titles</span><span class=p>.</span><span class=n>title</span><span class=p>,</span><span class=w> </span><span class=n>titles</span><span class=p>.</span><span class=n>from_date</span><span class=p>,</span><span class=w> </span><span class=n>titles</span><span class=p>.</span><span class=n>to_date</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>titles</span><span class=w> </span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>employees</span><span class=w> </span><span class=k>ON</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>employees</span><span class=p>.</span><span class=n>emp_no</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>titles</span><span class=p>.</span><span class=n>emp_no</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- List all the tables in all the databases. Implementations typically provide
</span></span></span><span class=line><span class=cl><span class=c1>-- their own shortcut command to do this with the database currently in use.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>INFORMATION_SCHEMA</span><span class=p>.</span><span class=n>TABLES</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>TABLE_TYPE</span><span class=o>=</span><span class=s1>&#39;BASE TABLE&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Sub Query
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>course_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>section</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>semester</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>‘</span><span class=n>Fall</span><span class=err>’</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=k>year</span><span class=o>=</span><span class=w> </span><span class=mi>2009</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>course_id</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SELECT</span><span class=w> </span><span class=n>course_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>FROM</span><span class=w> </span><span class=n>section</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>WHERE</span><span class=w> </span><span class=n>semester</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>‘</span><span class=n>Spring</span><span class=err>’</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=k>year</span><span class=o>=</span><span class=w> </span><span class=mi>2010</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h3 id=联合查询>联合查询</h3><p>在一个查询输出中把两个表连接在一起。第三行很重要，因为它显示了这两个表的关系（在本例中是它们的键值）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>items</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=k>state</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=p>,</span><span class=w> </span><span class=n>items</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=o>=</span><span class=n>seller_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span></code></pre></div><p>取 &ldquo;LEFT &ldquo;或 &ldquo;RIGHT &ldquo;左边的表（本例中为 customers），并加入它，不管它是否有任何值。所以上面的语句显示了所有的用户/客户，即使他们没有销售任何东西。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://assets.ng-tech.icu/superbed/2021/08/14/611743c05132923bf8c3d1c3.jpg alt=联合查询 loading=lazy data-zoomable></div></div></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Having and without join
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>dt_name</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=n>tkey_interpret</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>i</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w>  </span><span class=n>s</span><span class=p>.</span><span class=n>fi_interpret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>id_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>dt_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>having</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=p>)</span><span class=w> </span><span class=n>de</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Join the hard way Inner Join
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>dt_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=n>tkey_interpret</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>i</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w>  </span><span class=n>s</span><span class=p>.</span><span class=n>fi_interpret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>id_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Multi Join
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>sa</span><span class=p>.</span><span class=n>id_jahr</span><span class=p>,</span><span class=w> </span><span class=n>st</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=p>,</span><span class=w> </span><span class=n>ip</span><span class=p>.</span><span class=n>dt_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>tass_stueck_sampler</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>ss</span><span class=p>,</span><span class=w> </span><span class=n>tkey_sampler</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>sa</span><span class=p>,</span><span class=w> </span><span class=n>tkey_interpret</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>ip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>ss</span><span class=p>.</span><span class=n>id_fi_stueck_nr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>st</span><span class=p>.</span><span class=n>id_stueck_nr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>and</span><span class=w> </span><span class=n>ss</span><span class=p>.</span><span class=n>id_fi_jahr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sa</span><span class=p>.</span><span class=n>id_jahr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>and</span><span class=w>  </span><span class=n>st</span><span class=p>.</span><span class=n>fi_interpret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ip</span><span class=p>.</span><span class=n>id_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w>  </span><span class=n>st</span><span class=p>.</span><span class=n>dt_stueck_titel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Join the right way Inner Equi Key Joining
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=p>,</span><span class=w> </span><span class=n>dt_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>tkey_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>on</span><span class=w> </span><span class=n>fi_interpret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>id_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Multi Inner Equi Key Joining
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>id_fi_jahr</span><span class=p>,</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=p>,</span><span class=w> </span><span class=n>dt_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>join</span><span class=w> </span><span class=n>tass_stueck_sampler</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>id_fi_stueck_nr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>id_stueck_nr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>join</span><span class=w> </span><span class=n>tkey_interpret</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>fi_interpret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>id_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w>  </span><span class=n>dt_stueck_titel</span><span class=w>
</span></span></span></code></pre></div><h3 id=子查询>子查询</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Select with Subqueries Select max and min values
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Titel</span><span class=p>,</span><span class=w> </span><span class=n>dt_zeit</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Zeit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>dt_zeit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=n>dt_zeit</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>or</span><span class=w> </span><span class=n>dt_zeit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>min</span><span class=p>(</span><span class=n>dt_zeit</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>dt_zeit</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Select with query in condition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Titel</span><span class=p>,</span><span class=w> </span><span class=n>dt_zeit</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Zeit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>dt_zeit</span><span class=w> </span><span class=k>between</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>dt_zeit</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=p>)</span><span class=o>*</span><span class=mi>0</span><span class=p>.</span><span class=mi>9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>and</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>dt_zeit</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=p>)</span><span class=o>*</span><span class=mi>1</span><span class=p>.</span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>dt_zeit</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Select query as value
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Titel</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>dt_zeit</span><span class=o>/</span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>dt_zeit</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=p>)</span><span class=o>*</span><span class=mi>100</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>Zeit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;You Shook Me&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Union Unify two result sets with a condition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>dt_stueck_titel</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>titel</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;stück&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=s1>&#39;type&#39;</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_stueck</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>union</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=n>dt_name</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>titel</span><span class=p>,</span><span class=w>  </span><span class=s1>&#39;inter&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=s1>&#39;type&#39;</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tkey_interpret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>union</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=n>dt_stao</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>titel</span><span class=p>,</span><span class=w>  </span><span class=s1>&#39;stao&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=s1>&#39;type&#39;</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tkey_standort</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>t</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>titel</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;%boy%&#39;</span><span class=w>
</span></span></span></code></pre></div><h2 id=插入与更新>插入与更新</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Selected fields
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>tkey_moral</span><span class=w> </span><span class=p>(</span><span class=n>id_moral_nr</span><span class=p>,</span><span class=w> </span><span class=n>moral_bez</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;gut&#39;</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;schlecht&#39;</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;schlecht&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- All fields
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>3838</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;Meier&#39;</span><span class=p>,</span><span class=s1>&#39;Laura&#39;</span><span class=p>,</span><span class=s1>&#39;Waldibrücke&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=p>(</span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=p>,</span><span class=w> </span><span class=n>password</span><span class=p>,</span><span class=w> </span><span class=k>location</span><span class=p>,</span><span class=w> </span><span class=n>dept</span><span class=p>,</span><span class=w>  </span><span class=n>is_admin</span><span class=p>,</span><span class=w> </span><span class=n>register_date</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Fred&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Smith&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;fred@gmail.com&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;123456&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;New York&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;design&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>now</span><span class=p>()),</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Sara&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Watson&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;sara@gmail.com&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;123456&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;New York&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;design&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>now</span><span class=p>()),(</span><span class=s1>&#39;Will&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Jackson&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;will@yahoo.com&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;123456&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Rhode Island&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;development&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>now</span><span class=p>()),(</span><span class=s1>&#39;Paula&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Johnson&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;paula@yahoo.com&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;123456&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Massachusetts&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;sales&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>now</span><span class=p>()),(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Spears&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;tom@yahoo.com&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;123456&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Massachusetts&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;sales&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Update by conditions
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>UPDATE</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>NAME</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Menzer&#39;</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>NAME</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Waltenspühl-Menzer&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UPDATE</span><span class=w> </span><span class=n>tass_police</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>praem_stufe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>101</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>praem_stufe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>108</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Delete
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>delete</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>delete</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tkey_moral</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id_moral_nr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>delete</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>tbl_kunde</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>vorname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Peter&#39;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Fischer&#39;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>vorname</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Martin&#39;</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Müller&#39;</span><span class=w>
</span></span></span></code></pre></div><h1 id=mysql>MySQL</h1><h2 id=数据库管理>数据库管理</h2><table><thead><tr><th>Name</th><th>Command</th></tr></thead><tbody><tr><td>mysql connect</td><td><code>mysql -u$username -p$password -P$port -h$dbhost $dbname</code></td></tr><tr><td>database encoding</td><td><code>set names utf8;</code></td></tr><tr><td>List databases</td><td><code>show databases;</code></td></tr><tr><td>List tables for current db</td><td><code>show tables;</code></td></tr><tr><td>Check table definition</td><td><code>describe $tablename;</code></td></tr><tr><td>Run sql in non-interactive way</td><td>=mysql -uUSER -pPASSWORD databasename -e “select * from t limit 10”=</td></tr><tr><td>Import db</td><td><code>mysql -uUSER -pPASSWORD dbname &lt; backup.sql</code></td></tr><tr><td>export db</td><td><code>mysqldump -uUSER -pPASSWORD DATABASE > backup.sql</code></td></tr><tr><td>export db without schema</td><td><code>mysqldump -uUSER -pPASSWORD DATABASE --no-data=true --add-drop-table=false > backup.sql</code></td></tr><tr><td>Grant access</td><td>=GRANT SUPER ON <code>DBNAME</code>.<code>user</code> TO ‘DBUSER’@’%’=</td></tr><tr><td>Add column</td><td><code>ALTER TABLE expenses ADD COLUMN createtime timestamp not null default now();</code></td></tr><tr><td>Delete Column</td><td><code>ALTER TABLE expenses DROP COLUMN createtime;</code></td></tr><tr><td>Delete index</td><td><code>DROP INDEX indexname ON table_name;</code></td></tr><tr><td>Create index</td><td><code>create index idindex on table_name(col_name) using btree;</code></td></tr><tr><td>Reset password</td><td>UPDATE mysql.user SET Password=PASSWORD(‘MyNewPass’) WHERE User=’root’; FLUSH PRIVILEGES;</td></tr><tr><td></td><td><code>drop user 'braindenny'@'%'; flush privileges; CREATE USER...</code></td></tr><tr><td></td><td><code>CREATE USER 'myuser'@'%' IDENTIFIED BY 'MYPASSWORD';</code></td></tr><tr><td>mysql8 grant privileges to user</td><td><code>GRANT ALL PRIVILEGES ON mydbname.* TO 'myuser'@'%' WITH GRANT OPTION;</code></td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=err>$</span><span class=w> </span><span class=n>mysql</span><span class=w> </span><span class=o>-</span><span class=n>u</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>-</span><span class=n>p</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Show Users
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>User</span><span class=p>,</span><span class=w> </span><span class=k>Host</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>mysql</span><span class=p>.</span><span class=k>user</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Create User
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;someuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;somepassword&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Grant All Priveleges On All Databases
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GRANT</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>.</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;someuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>FLUSH</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Show Grants
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>GRANTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=s1>&#39;someuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Remove Grants
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>REVOKE</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>,</span><span class=w> </span><span class=k>GRANT</span><span class=w> </span><span class=k>OPTION</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;someuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Delete User
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;someuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=时间与日期>时间与日期</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 今天
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>to_days</span><span class=p>(</span><span class=err>时间字段名</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>to_days</span><span class=p>(</span><span class=n>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 昨天
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>TO_DAYS</span><span class=p>(</span><span class=n>NOW</span><span class=p>())</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>TO_DAYS</span><span class=p>(</span><span class=err>时间字段名</span><span class=p>)</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 7天
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>DATE_SUB</span><span class=p>(</span><span class=n>CURDATE</span><span class=p>(),</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>7</span><span class=w> </span><span class=k>DAY</span><span class=p>)</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=err>时间字段名</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 近30天
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>DATE_SUB</span><span class=p>(</span><span class=n>CURDATE</span><span class=p>(),</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>30</span><span class=w> </span><span class=k>DAY</span><span class=p>)</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=nb>date</span><span class=p>(</span><span class=err>时间字段名</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 本月
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>DATE_FORMAT</span><span class=p>(</span><span class=w> </span><span class=err>时间字段名</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;%Y%m&#39;</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>DATE_FORMAT</span><span class=p>(</span><span class=w> </span><span class=n>CURDATE</span><span class=p>(</span><span class=w> </span><span class=p>),</span><span class=w> </span><span class=s1>&#39;%Y%m&#39;</span><span class=w> </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 上一月
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>PERIOD_DIFF</span><span class=p>(</span><span class=w> </span><span class=n>date_format</span><span class=p>(</span><span class=w> </span><span class=n>now</span><span class=p>(</span><span class=w> </span><span class=p>),</span><span class=w> </span><span class=s1>&#39;%Y%m&#39;</span><span class=w> </span><span class=p>),</span><span class=w> </span><span class=n>date_format</span><span class=p>(</span><span class=w> </span><span class=err>时间字段名</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;%Y%m&#39;</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询本季度数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=o>`</span><span class=n>ht_invoice_information</span><span class=o>`</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>QUARTER</span><span class=p>(</span><span class=n>create_date</span><span class=p>)</span><span class=o>=</span><span class=n>QUARTER</span><span class=p>(</span><span class=n>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询上季度数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=o>`</span><span class=n>ht_invoice_information</span><span class=o>`</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>QUARTER</span><span class=p>(</span><span class=n>create_date</span><span class=p>)</span><span class=o>=</span><span class=n>QUARTER</span><span class=p>(</span><span class=n>DATE_SUB</span><span class=p>(</span><span class=n>now</span><span class=p>(),</span><span class=nb>interval</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=n>QUARTER</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询本年数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=o>`</span><span class=n>ht_invoice_information</span><span class=o>`</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>YEAR</span><span class=p>(</span><span class=n>create_date</span><span class=p>)</span><span class=o>=</span><span class=k>YEAR</span><span class=p>(</span><span class=n>NOW</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询上年数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=o>`</span><span class=n>ht_invoice_information</span><span class=o>`</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>year</span><span class=p>(</span><span class=n>create_date</span><span class=p>)</span><span class=o>=</span><span class=k>year</span><span class=p>(</span><span class=n>date_sub</span><span class=p>(</span><span class=n>now</span><span class=p>(),</span><span class=nb>interval</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>year</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询当前这周的数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>submittime</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>enterprise</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>YEARWEEK</span><span class=p>(</span><span class=n>date_format</span><span class=p>(</span><span class=n>submittime</span><span class=p>,</span><span class=s1>&#39;%Y-%m-%d&#39;</span><span class=p>))</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>YEARWEEK</span><span class=p>(</span><span class=n>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询上周的数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>submittime</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>enterprise</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>YEARWEEK</span><span class=p>(</span><span class=n>date_format</span><span class=p>(</span><span class=n>submittime</span><span class=p>,</span><span class=s1>&#39;%Y-%m-%d&#39;</span><span class=p>))</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>YEARWEEK</span><span class=p>(</span><span class=n>now</span><span class=p>())</span><span class=o>-</span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询当前月份的数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>submittime</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>enterprise</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>date_format</span><span class=p>(</span><span class=n>submittime</span><span class=p>,</span><span class=s1>&#39;%Y-%m&#39;</span><span class=p>)</span><span class=o>=</span><span class=n>date_format</span><span class=p>(</span><span class=n>now</span><span class=p>(),</span><span class=s1>&#39;%Y-%m&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询距离当前现在6个月的数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>submittime</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>enterprise</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>submittime</span><span class=w> </span><span class=k>between</span><span class=w> </span><span class=n>date_sub</span><span class=p>(</span><span class=n>now</span><span class=p>(),</span><span class=nb>interval</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=k>month</span><span class=p>)</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>now</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询上个月的数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>submittime</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>enterprise</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>date_format</span><span class=p>(</span><span class=n>submittime</span><span class=p>,</span><span class=s1>&#39;%Y-%m&#39;</span><span class=p>)</span><span class=o>=</span><span class=n>date_format</span><span class=p>(</span><span class=n>DATE_SUB</span><span class=p>(</span><span class=n>curdate</span><span class=p>(),</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>MONTH</span><span class=p>),</span><span class=s1>&#39;%Y-%m&#39;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h1 id=links>Links</h1><ul><li>2022-Next Level Database Techniques For Developers</li></ul></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/awesome-cheatsheets/3.system/database/oracle-cheatsheet/ rel=next>Oracle-CheatSheet</a></div></div></div><div class=body-footer><p>最近更新于 2023-04-16</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>