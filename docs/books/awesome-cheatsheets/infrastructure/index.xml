<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Infrastructure | Next-gen Tech Edu</title>
    <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/</link>
      <atom:link href="https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/index.xml" rel="self" type="application/rss+xml" />
    <description>Infrastructure</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language>
    <image>
      <url>https://ng-tech.icu/media/sharing.png</url>
      <title>Infrastructure</title>
      <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/</link>
    </image>
    
    <item>
      <title>Blockchain-CheatSheet</title>
      <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/blockchain-cheatsheet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/blockchain-cheatsheet/</guid>
      <description>&lt;h1 id=&#34;åŒºå—é“¾&#34;&gt;åŒºå—é“¾&lt;/h1&gt;
&lt;p&gt;In essence, the blockchain is a shared, programmable, cryptographically secure and therefore trusted ledger which no single user controls and which can be inspected by anyone.- Klaus Schwab&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾æŠ€æœ¯æ˜¯æœ€è¿‘åœ¨äº’è”ç½‘æŠ€æœ¯å‰æ²¿æ¯”è¾ƒç«çš„ä¸€ä¸ªè¯¾é¢˜ï¼Œå®ƒçš„å‡ºç°è§£å†³äº†åœ¨ç‚¹å¯¹ç‚¹é€šä¿¡ä¸­ä¸€ç›´å­˜åœ¨çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼Œå³è‘—åçš„æ‹œå åº­å°†å†›é—®é¢˜ã€‚é€šä¿—åœ°è®²å°±æ˜¯åœ¨ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç½‘ç»œä¸­å¦‚ä½•å¯¹ä¸€ä¸ªä¿¡æ¯ä¼ é€’(æ¯”å¦‚ä¸€ç¬”æ”¯ä»˜)è¾¾æˆå…¨ç½‘å…±è¯†ã€‚&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾ç”±æ—¶é—´åºåˆ—çš„é“¾å¼æ•°æ®å—æ„æˆï¼Œæä¾›äº†æ‹œå åº­å®¹é”™ã€å¹¶åŸºäºå…±è¯†åè®®ä¿è¯äº†æœ€ç»ˆä¸€è‡´æ€§çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼è´¦æœ¬æ•°æ®åº“ï¼Œæ˜¯æ¯”ç‰¹å¸çš„åº•å±‚æŠ€æœ¯ï¼Œå’Œæ¯”ç‰¹å¸æ˜¯ç›¸ä¼´ç›¸ç”Ÿçš„å…³ç³»ã€‚åŒºå—é“¾æœ¬èº«å…¶å®æ˜¯ä¸€ä¸²ä½¿ç”¨å¯†ç å­¦ç›¸å…³è”æ‰€äº§ç”Ÿçš„æ•°æ®å—ï¼Œæ¯ä¸€ä¸ªæ•°æ®å—ä¸­åŒ…å«äº†å¤šæ¬¡æ¯”ç‰¹å¸ç½‘ç»œäº¤æ˜“æœ‰æ•ˆç¡®è®¤çš„ä¿¡æ¯ã€‚
æ¯å½“æœ‰åŠ å¯†äº¤æ˜“äº§ç”Ÿæ—¶ï¼Œç½‘ç»œä¸­æœ‰å¼ºå¤§è¿ç®—èƒ½åŠ›çš„çŸ¿å·¥(Miner)å°±å¼€å§‹åˆ©ç”¨ç®—æ³•è§£å¯†éªŒè¯äº¤æ˜“ï¼Œåˆ›é€ å‡ºæ–°çš„åŒºå—æ¥è®°å½•æœ€æ–°çš„äº¤æ˜“ã€‚æ–°çš„åŒºå—æŒ‰ç…§æ—¶é—´é¡ºåºçº¿æ€§åœ°è¢«è¡¥å……åˆ°åŸæœ‰çš„åŒºå—é“¾æœ«ç«¯ï¼Œè¿™ä¸ªè´¦æœ¬å°±ä¼šä¸åœåœ°å¢é•¿å’Œå»¶é•¿ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¤æ‚çš„å…¬å…±é’¥åŒ™å’Œç§äººé’¥åŒ™çš„è®¾ç½®ï¼ŒåŒºå—é“¾ç½‘ç»œå°†æ•´ä¸ªé‡‘èç½‘ç»œçš„æ‰€æœ‰äº¤æ˜“çš„è´¦æœ¬å®æ—¶å¹¿æ’­ï¼Œå®æ—¶å°†äº¤æ˜“è®°å½•åˆ†å‘åˆ°æ¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯æ¯ä¸ªäººåªèƒ½å¯¹è‡ªå·±çš„è´¢äº§è¿›è¡Œä¿®æ”¹ã€‚å½“ç„¶ï¼Œè´¦æœ¬é‡Œä¹Ÿæœ‰åˆ«äººçš„äº¤æ˜“è®°å½•ï¼Œè™½ç„¶å¯ä»¥çœ‹åˆ°æ•°å€¼å’Œå¯¹åº”çš„äº¤æ˜“åœ°å€(åŸºæœ¬ä¸Šè¿™æ˜¯ç”±ä¸€æ®µå†—é•¿çš„ä¹±åºå­—æ¯å’Œæ•°å­—ç»„æˆ)ï¼Œä½†æ˜¯å¦‚æœä¸å€Ÿç”¨å…¶ä»–&lt;/p&gt;
&lt;p&gt;æŠ€æœ¯æ‰‹æ®µä¹Ÿæ ¹æœ¬æ— æ³•çŸ¥é“äº¤æ˜“è€…çš„çœŸå®èº«ä»½ã€‚
å¦‚æœä»ä¸åŒçš„æŠ€æœ¯è§’åº¦æ¥å‰–æï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·çœ‹å¾…åŒºå—é“¾ï¼šå®ƒæ˜¯ä¸€ç§æ•°æ®åº“ã€ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ä¸€ç§ç½‘ç»œåº•å±‚åè®®ã€‚
(1)æ•°æ®åº“ã€‚åŒºå—é“¾æ˜¯ä¸€ç§å…¬å…±æ•°æ®åº“ï¼Œå®ƒè®°å½•äº†ç½‘é™…é—´æ‰€æœ‰çš„äº¤æ˜“ä¿¡æ¯ï¼Œéšæ—¶æ›´æ–°ï¼Œè®©æ¯ä¸ªç”¨æˆ·å¯ä»¥é€šè¿‡åˆæ³•çš„æ‰‹æ®µä»ä¸­è¯»å–ä¿¡æ¯ï¼Œå†™å…¥ä¿¡æ¯ã€‚ä½†åˆæœ‰ä¸€å¥—ç‰¹æ®Šçš„æœºåˆ¶ï¼Œé˜²æ­¢ä»¥å¾€çš„æ•°æ®è¢«ç¯¡æ”¹ã€‚
(2)åˆ†å¸ƒå¼ç³»ç»Ÿã€‚åŒºå—é“¾æ˜¯ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå®ƒä¸å­˜å‚¨æ”¾ç½®åœ¨æŸä¸€ä¸¤ä¸ªç‰¹å®šçš„æœåŠ¡å™¨æˆ–å®‰å…¨èŠ‚ç‚¹ä¸Šï¼Œè€Œæ˜¯åˆ†å¸ƒå¼åœ°å­˜åœ¨äºç½‘ç»œä¸Šæ‰€æœ‰çš„å®Œæ•´èŠ‚ç‚¹ä¸Šï¼Œåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¿ç•™ä¿¡æ¯å¤‡ä»½ã€‚
(3)ç½‘ç»œåº•å±‚åè®®ã€‚åŒºå—é“¾æ˜¯ä¸€ç§å…±è¯†åè®®ï¼ŒåŸºäºè¿™ç§åè®®ï¼Œå¯ä»¥åœ¨å…¶ä¸Šå¼€å‘å‡ºæ•°ç›®ç¹å¤šçš„åº”ç”¨ã€‚è¿™äº›åº”ç”¨åœ¨æ¯ä¸€æ—¶åˆ»éƒ½ä¿å­˜ä¸€æ¡æœ€é•¿çš„ã€æœ€å…·æƒå¨çš„ã€å…±åŒè®¤å¯çš„æ•°æ®è®°å½•ï¼Œå¹¶éµå¾ªå…±åŒè®¤å¯çš„æœºåˆ¶è¿›è¡Œæ— é¡»ä¸­é—´æƒå¨ä»²è£çš„ã€ç›´æ¥çš„ã€ç‚¹å¯¹ç‚¹çš„äº¤äº’ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ•°å­—è´§å¸&#34;&gt;æ•°å­—è´§å¸&lt;/h1&gt;
&lt;p&gt;æ•°å­—è´§å¸åº”ç”¨æ–¹å‘&lt;/p&gt;
&lt;p&gt;æ•°å­—è´§å¸æ˜¯åŒºå—é“¾çš„ç¬¬ä¸€å¤§åº”ç”¨ç±»å‹ï¼Œå…¶å®ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ç§æ— ä¸»æƒã€ç¤¾åŒºè‡ªæ²»çš„è´§å¸å½¢å¼ã€‚æ•°å­—è´§å¸é€šå¸¸æ˜¯åŸºäºåŒºå—é“¾æŠ€æœ¯ã€åœ¨å…¨çƒèŒƒå›´å†…å…¬å¼€å‘è¡Œçš„ã€å¹¶ä¸”æ²¡æœ‰ä»»ä½•å›½å®¶æ”¿åºœèƒŒä¹¦çš„è™šæ‹Ÿè´§å¸ï¼Œè¿™ç§è™šæ‹Ÿè´§å¸å…·æœ‰â€œå»ä¿¡ä»»â€ã€â€œç‚¹å¯¹ç‚¹â€ã€â€œå…¬å¼€è®°è´¦â€ã€â€œä¸å¯ç¯¡æ”¹â€ç­‰ç‰¹å¾ã€‚&lt;/p&gt;
&lt;p&gt;æ€»é‡é€æ˜å…¬å¼€ã€‚æ•°å­—è´§å¸çš„å‘è¡Œæ˜¯åœ¨é¡¹ç›®åˆ›å»ºä¹‹åˆï¼Œæ˜¯ç™½çš®ä¹¦äº‹å…ˆå°±è§„å®šå¥½äº†çš„ï¼Œç™½çš®ä¹¦é€šå¸¸æ˜¯ä¸€ä¸ªåŒºå—é“¾é¡¹ç›®å…¬å¼€å‘å¸ƒçš„ä¸€ç§é˜è¿°æ€§æ–‡æ¡£ï¼Œå…¶ä¸­ç®€è¿°äº†é¡¹ç›®çš„å®—æ—¨å’Œæ„¿æ™¯ä»¥åŠè®¾è®¡è“å›¾ã€‚&lt;/p&gt;
&lt;p&gt;æ•°å­—è´§å¸ç¼“æ…¢é‡Šæ”¾ã€‚æ•°å­—è´§å¸ç¼“æ…¢é‡Šæ”¾ã€‚æŒ–çŸ¿ä¸ºæ•°å­—è´§å¸çš„ç¼“æ…¢é‡Šæ”¾æä¾›äº†ä¸€ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç æ‰§è¡Œè§„åˆ™ã€‚ç”±äºæˆ‘ä»¬åœ¨ç™½çš®ä¹¦ä¸­è§„å®šå¥½äº†æ€»é‡å’Œæ•°å­—è´§å¸é‡Šæ”¾çš„æœºåˆ¶ï¼Œç™½çš®ä¹¦çš„å†…å®¹ä¼šæˆä¸ºæ•´ä¸ªç¤¾åŒºçš„åŸºç¡€å…±è¯†ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®çš„ä¸»ç½‘ä¸Šçº¿ä¹‹åï¼Œæ•°å­—è´§å¸çš„é‡Šæ”¾ä¸å†æ˜¯äººä¸ºæ§åˆ¶ï¼Œè€Œæ˜¯åœ¨ä»£ç å±‚é¢ä½“ç°ï¼Œä»£ç å°†è´Ÿè´£æ§åˆ¶æ•°å­—è´§å¸çš„é‡Šæ”¾ï¼Œè¿™é‡Œå»é™¤äº†äººä¸ºæ“ä½œçš„å› ç´ ã€‚&lt;/p&gt;
&lt;p&gt;æ•°å­—èµ„äº§&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿèµ„äº§ä¸€èˆ¬åŒ…æ‹¬æœ‰é‡‘èèµ„äº§ã€æ¸¸æˆä»£å¸ã€æ•°å­—ç‰ˆæƒã€åŸŸåã€ç”¨æˆ·æµé‡ç­‰ã€‚ç”±äºè™šæ‹Ÿèµ„äº§ä¸éœ€è¦ä¸å®ä½“èµ„äº§è¿›è¡ŒæŒ‚é’©ï¼Œæ‰€ä»¥åœ¨å¯¹åº”åˆ°åŒºå—é“¾ä¸Šæ›´ä¸ºæ–¹ä¾¿ã€‚å®ƒå…·ä½“çš„åº”ç”¨å½¢å¼åœ¨ä¾›åº”é“¾é‡‘èã€ç¥¨æ®å¸‚åœºéƒ½æœ‰æ‰€ä½“ç°ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨è¿™é‡Œï¼Œç®€å•ä»æŠ€æœ¯çš„è§’åº¦ä»‹ç»ä¸€ä¸‹ ICOï¼ŒICO çš„ä¸­æ–‡åæ˜¯é¦–æ¬¡ä»£å¸å‘è¡Œï¼Œåˆç§°ä¸ºåŒºå—é“¾ä¼—ç­¹ï¼Œè¿™æ˜¯ä¸€ç§æ–°å‹çš„èèµ„æ¨¡å¼ï¼ŒæŠ•èµ„è€…å¯ä»¥ç”¨æ‰‹ä¸­çš„æ¯”ç‰¹å¸ æˆ–å…¶ä»–ä»£å¸æŠ• åˆ°ä¸€äº›åŒºå—é“¾åˆ›å§‹é¡¹ç›®ã€‚&lt;/p&gt;
&lt;h1 id=&#34;åŒºå—é“¾çš„è¡åŒ–&#34;&gt;åŒºå—é“¾çš„è¡åŒ–&lt;/h1&gt;
&lt;h2 id=&#34;ç¬¬ä¸€ä»£&#34;&gt;ç¬¬ä¸€ä»£&lt;/h2&gt;
&lt;p&gt;ç¬¬ä¸€ä»£åŒºå—é“¾æŠ€æœ¯å‘å±•å‡ºçš„å»ä¸­å¿ƒåŒ–ã€ä¸ä¾èµ–ç¬¬ä¸‰æ–¹è®¤è¯çš„é˜²æ­¢å¤šé‡æ”¯ä»˜çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œå¤§å¹…åº¦é™ä½äº†ä¸­é—´äº¤æ˜“å’Œæ”¯ä»˜è´¹ç”¨ã€‚å¦å¤–å°±æ˜¯ä¾èµ–äºå¯†ç æŠ€æœ¯ï¼Œè§£å†³äº†å‚ä¸æ–¹çš„ä¿¡ä»»é—®é¢˜ã€‚
ä½†æ˜¯è¿™ä¸€ä»£æŠ€æœ¯ï¼Œåœ¨äºå“²å­¦æ€ç»´ä¸Šå¯¹å…¨æ°‘é€‰ä¸¾å½¢æˆå…±è¯†æœºåˆ¶çš„è¿‡äºç†æƒ³åŒ–çš„åšæŒï¼Œå¯¼è‡´äº†æ•ˆç‡çš„ä½ä¸‹ã€‚æ¯”å¦‚æ¯”ç‰¹å¸çš„ä»»ä½•äº¤æ˜“å’Œæ”¯ä»˜éœ€è¦è‡³å°‘ 10 åˆ†é’Ÿæ‰èƒ½åˆæ­¥å®Œæˆ(é€šè¿‡æ”¹è¿›çš„å…¶ä»–ç³»ç»Ÿï¼Œå¯ä»¥&lt;/p&gt;
&lt;p&gt;æ¯”ç‰¹å¸çš„åŒºå—é“¾åº”ç”¨äºä»·å€¼ä¼ é€’ï¼Œå°±æ˜¯è½¬è´¦ï¼Œæ‰€ä»¥æœ€ç®€å•çš„åº”ç”¨å°±æ˜¯åœ¨é‡‘èé¢†åŸŸï¼Œæ¯”å¦‚è·¨å¢ƒè½¬è´¦ï¼Œæ”¯ä»˜æ±‡å…‘ã€‚ä¸¥æ ¼è¯´èµ·æ¥ï¼Œæ•°å­—è´§å¸å…¶å®æ˜¯åŒºå—é“¾æœ€ç®€å•ã€æœ€ç›´æ¥çš„åº”ç”¨åœºæ™¯ã€‚ç»å¤§å¤šæ•°çš„åŒºå—é“¾é¡¹ç›®ï¼Œéƒ½ä¼šæœ‰è‡ªå·±çš„å†…ç”Ÿä»£å¸ã€‚&lt;/p&gt;
&lt;p&gt;å…±è¯†æœºåˆ¶ï¼Œå°±æ˜¯æ‰€æœ‰è®°è´¦èŠ‚ç‚¹ä¹‹é—´å¦‚ä½•åŒºåŸŸè¾¾æˆå…±è¯†ï¼Œæ¥é€‰æ‹©å’Œè®¤å®šè®°å½•çš„çœŸå®æ€§å’Œæœ‰æ•ˆæ€§ã€‚å…¨ç½‘è®¤å¯çš„æ˜¯æœ€é•¿çš„ä¸€æ¡åŒºå—é“¾ï¼Œå› ä¸ºåœ¨æ­¤ä¹‹ä¸Šçš„å·¥ä½œé‡æœ€å¤§ã€‚å¦‚æœæƒ³è¦ä¿®æ”¹æŸä¸ªåŒºå—å†…çš„äº¤æ˜“ä¿¡æ¯ï¼Œå°±å¿…é¡»å°†è¯¥åŒºå—å’Œåé¢æ‰€æœ‰åŒºå—çš„ä¿¡æ¯è¿›è¡Œä¿®æ”¹ã€‚è¿™ç§å…±è¯†æœºåˆ¶æ—¢å¯ä»¥ä½œä¸ºè®¤å®šçš„æ‰‹æ®µï¼Œåˆå¯ä»¥é¿å…è™šå‡äº¤æ˜“å’Œä¿¡æ¯ç¯¡æ”¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŒºå—ä¸è´¦æœ¬&#34;&gt;åŒºå—ä¸è´¦æœ¬&lt;/h2&gt;
&lt;p&gt;åŒºå—é“¾ç½‘ç»œä¸­ï¼Œæ•°æ®ä»¥æ–‡ä»¶çš„å½¢å¼è¢«æ°¸ä¹…è®°å½•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŒºå—ã€‚ä¸€ä¸ªåŒºå—æ˜¯ä¸€äº›æˆ–æ‰€æœ‰æœ€æ–°æ¯”ç‰¹å¸äº¤æ˜“çš„è®°å½•é›†ï¼Œä¸”æœªè¢«å…¶ä»–å…ˆå‰çš„åŒºå—è®°å½•ã€‚åŒºå—å¯ä»¥æƒ³åƒä¸ºä¸€ä¸ªåŸå¸‚è®°å½•è€…çš„è®°å½•æœ¬ä¸Šçš„å•ç‹¬ä¸€é¡µçº¸(å¯¹æˆ¿åœ°äº§äº§æƒçš„å˜æ›´è®°å½•)æˆ–è€…æ˜¯è‚¡ç¥¨äº¤æ˜“æ‰€çš„æ€»å¸æœ¬ã€‚åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ–°åŒºå—è¢«åŠ å…¥åˆ°è®°å½•æœ€å(åœ¨æ¯”ç‰¹å¸ä¸­çš„åç§°ä¸ºï¼šå—é“¾)ï¼Œä¸€æ—¦å†™ä¸Šï¼Œå°±å†ä¹Ÿä¸èƒ½æ”¹å˜æˆ–åˆ é™¤ã€‚æ¯ä¸ªåŒºå—è®°å½•äº†å®ƒè¢«åˆ›å»ºä¹‹å‰å‘ç”Ÿçš„æ‰€æœ‰äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªåŒºå—åŒ…æ‹¬ä¸€äº›æˆ–æ‰€æœ‰è¿‘æœŸäº¤æ˜“ã€å‰ä¸€ä¸ªåŒºå—çš„å¼•ç”¨ï¼Œä»¥åŠå…¶ä»–æ•°æ®ã€‚å®ƒè¿˜åŒ…æ‹¬ä¸€ä¸ªæŒ–çŸ¿éš¾åº¦çš„ç­”æ¡ˆâ€”â€”è¯¥ç­”æ¡ˆå¯¹æ¯ä¸ªåŒºå—æ˜¯å”¯ä¸€çš„ã€‚æ–°åŒºå—å¦‚æœæ²¡æœ‰æ­£ç¡®ç­”æ¡ˆï¼Œä¸èƒ½è¢«å‘é€åˆ°ç½‘ç»œä¸­â€”â€”â€œæŒ–çŸ¿â€çš„è¿‡ç¨‹æœ¬è´¨ä¸Šæ˜¯åœ¨ç«äº‰ä¸­ â€œè§£å†³â€å½“å‰åŒºå—ã€‚æ¯ä¸ªåŒºå—ä¸­çš„æ•°å­¦é—®é¢˜éš¾ä»¥è§£å†³ï¼Œä½†æ˜¯ä¸€æ—¦å‘ç°äº†ä¸€ä¸ªæœ‰æ•ˆè§£ï¼Œå…¶ä»–ç½‘ç»œèŠ‚ç‚¹å¾ˆå®¹æ˜“éªŒè¯è¿™ä¸ªè§£çš„æ­£ç¡®æ€§ï¼Œå¯¹äºç»™å®šçš„åŒºå—å¯èƒ½æœ‰å¤šä¸ªæœ‰æ•ˆè§£ï¼Œä½†å¯¹äºè¦è§£å†³çš„åŒºå—æ¥è¯´åªéœ€ä¸€ä¸ªè§£ã€‚
å› ä¸ºæ¯è§£å†³ä¸€ä¸ªåŒºå—ï¼Œéƒ½ä¼šå¾—åˆ°æ–°äº§ç”Ÿçš„æ¯”ç‰¹å¸å¥–åŠ±ï¼Œæ¯ä¸ªåŒºå—åŒ…å«ä¸€ä¸ªè®°å½•ï¼Œè®°å½•ä¸­çš„æ¯”ç‰¹å¸åœ°å€æ˜¯æœ‰æƒè·å¾—æ¯”ç‰¹å¸å¥–åŠ±çš„åœ°å€ã€‚è¿™ä¸ªçºªå½•è¢«ç§°ä¸ºç”Ÿäº§äº¤æ˜“æˆ–è€… Coinbase äº¤æ˜“ï¼Œå®ƒç»å¸¸æ˜¯æ¯ä¸ªåŒºå—çš„ç¬¬ä¸€ä¸ªäº¤æ˜“ã€‚æ¯ä¸ªåŒºå—ç”Ÿäº§çš„æ¯”ç‰¹å¸æ•°é‡æ˜¯ 50 ä¸ªï¼Œæ¯äº§ç”Ÿ 21 ä¸‡ä¸ªåŒºå—åå‡å°‘ä¸€åŠ(æ—¶é—´å¤§çº¦æ˜¯ 4 å¹´)ã€‚&lt;/p&gt;
&lt;p&gt;å‘é€è€…åœ¨ç½‘ç»œä¸­å¹¿æ’­æ¯”ç‰¹å¸äº¤æ˜“ï¼Œæ‰€æœ‰è¯•å›¾è§£å†³åŒºå—çš„çŸ¿å·¥èŠ‚ç‚¹ï¼Œæ”¶é›†äº†è¿™äº›äº¤æ˜“è®°å½•ï¼ŒæŠŠå®ƒä»¬åŠ åˆ°çŸ¿å·¥èŠ‚ç‚¹æ­£åœ¨è§£å†³çš„åŒºå—ä¸­ã€‚
æŒ–çŸ¿éš¾åº¦ç”±æ¯”ç‰¹å¸ç½‘ç»œè‡ªåŠ¨è°ƒæ•´ï¼Œä½¿ä¹‹å®ç°å¹³å‡æ¯å°æ—¶è§£å†³ 6 ä¸ªåŒºå—çš„ç›®æ ‡ã€‚æ¯ 2016 ä¸ªåŒºå—(å¤§çº¦ä¸¤å‘¨)åï¼Œæ‰€æœ‰å®¢æˆ·ç«¯æŠŠæ–°åŒºå—çš„å®é™…æ•°ç›®ä¸ç›®æ ‡æ•°é‡ç›¸æ¯”è¾ƒï¼Œå¹¶ä¸”æŒ‰ç…§å·®å¼‚çš„ç™¾åˆ†æ¯”è°ƒæ•´ç›®æ ‡ Hash å€¼ï¼Œæ¥å¢åŠ (æˆ–é™ä½)äº§ç”ŸåŒºå—çš„éš¾åº¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…±è¯†æœºåˆ¶ä¸å·¥ä½œé‡è¯æ˜&#34;&gt;å…±è¯†æœºåˆ¶ä¸å·¥ä½œé‡è¯æ˜&lt;/h2&gt;
&lt;p&gt;POWï¼šProof of Workï¼Œå·¥ä½œè¯æ˜ã€‚
æ¯”ç‰¹å¸åœ¨ Block çš„ç”Ÿæˆè¿‡ç¨‹ä¸­ä½¿ç”¨äº† POW æœºåˆ¶ï¼Œä¸€ä¸ªç¬¦åˆè¦æ±‚çš„ Block Hash ç”± N ä¸ªå‰å¯¼é›¶æ„æˆï¼Œé›¶çš„ä¸ªæ•°å–å†³äºç½‘ç»œçš„éš¾åº¦å€¼ã€‚è¦å¾—åˆ°åˆç†çš„ Block Hash éœ€è¦ç»è¿‡å¤§é‡å°è¯•è®¡ç®—ï¼Œè®¡ç®—æ—¶é—´å–å†³äºæœºå™¨çš„å“ˆå¸Œè¿ç®—é€Ÿåº¦ã€‚å½“æŸä¸ªèŠ‚ç‚¹æä¾›å‡ºä¸€ä¸ªåˆç†çš„ Block Hash å€¼ï¼Œè¯´æ˜è¯¥èŠ‚ç‚¹ç¡®å®ç»è¿‡äº†å¤§é‡çš„å°è¯•è®¡ç®—ï¼Œå½“ç„¶ï¼Œå¹¶ä¸èƒ½å¾—å‡ºè®¡ç®—æ¬¡æ•°çš„ç»å¯¹å€¼ï¼Œå› ä¸ºå¯»æ‰¾åˆç† Hash æ˜¯ä¸€ä¸ªæ¦‚ç‡äº‹ä»¶ã€‚å½“èŠ‚ç‚¹æ‹¥æœ‰å å…¨ç½‘ n% çš„ç®—åŠ›æ—¶ï¼Œè¯¥èŠ‚ç‚¹å³æœ‰ n/100 çš„æ¦‚ç‡æ‰¾åˆ° Block Hashã€‚
POSï¼šProof of Stakeï¼Œè‚¡æƒè¯æ˜ã€‚
POSï¼Œä¹Ÿç§°è‚¡æƒè¯æ˜ï¼Œç±»ä¼¼äºè´¢äº§å‚¨å­˜åœ¨é“¶è¡Œï¼Œè¿™ç§æ¨¡å¼ä¼šæ ¹æ®ä½ æŒæœ‰æ•°å­—è´§å¸çš„é‡å’Œæ—¶é—´ï¼Œåˆ†é…ç»™ä½ ç›¸åº”çš„åˆ©æ¯ã€‚
ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªæ ¹æ®ä½ æŒæœ‰è´§å¸çš„é‡å’Œæ—¶é—´ï¼Œç»™ä½ å‘åˆ©æ¯çš„ä¸€ä¸ªåˆ¶åº¦ï¼Œåœ¨è‚¡æƒè¯æ˜ POS æ¨¡å¼ä¸‹ï¼Œæœ‰ä¸€ä¸ªåè¯å«å¸é¾„ï¼Œæ¯ä¸ªå¸æ¯å¤©äº§ç”Ÿ 1 å¸é¾„ï¼Œæ¯”å¦‚ä½ æŒæœ‰ 100 ä¸ªå¸ï¼Œæ€»å…±æŒæœ‰äº† 30 å¤©ï¼Œé‚£ä¹ˆï¼Œæ­¤æ—¶ä½ çš„å¸é¾„å°±ä¸º 3000ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ å‘ç°äº†ä¸€ä¸ª POS åŒºå—ï¼Œä½ çš„å¸é¾„å°±ä¼šè¢«æ¸…ç©ºä¸º 0ã€‚ä½ æ¯è¢«æ¸…ç©º 365 å¸é¾„ï¼Œä½ å°†ä¼šä»åŒºå—ä¸­è·å¾— 0.05 ä¸ªå¸çš„åˆ©æ¯(å‡å®šåˆ©æ¯å¯ç†è§£ä¸ºå¹´åˆ©ç‡ 5%)ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œåˆ©æ¯ = 3000 * 5% / 365 = 0.41 ä¸ªå¸ï¼Œè¿™ä¸‹å°±å¾ˆæœ‰æ„æ€äº†ï¼ŒæŒå¸æœ‰åˆ©æ¯ã€‚&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ç‘æ³¢å¸(Ripple)
ç‘æ³¢å¸æ˜¯ Ripple ç½‘ç»œè¿è¡Œçš„åŸºç¡€è´§å¸ï¼Œå°±åƒæ¯”ç‰¹å¸ä¸€æ ·å¯ä»¥åœ¨æ•´ä¸ªç½‘ç»œä¸­æµé€šï¼Œè€Œä¸å¿…å±€é™äºç†Ÿäººåœˆå­ã€‚ç‘æ³¢å¸å¼•å…¥ç½‘å…³ç³»ç»Ÿï¼Œå®ƒç±»ä¼¼äºè´§å¸å…‘æ¢æœºæ„ï¼Œå…è®¸äººä»¬æŠŠæ³•å®šè´§å¸æ³¨å…¥ã€æŠ½ç¦» Ripple ç½‘ç»œï¼Œå¹¶å¯å……å½“å€Ÿè´·åŒæ–¹çš„æ¡¥æ¢ã€‚&lt;/li&gt;
&lt;li&gt;è±ç‰¹å¸(Litecoin)
è±ç‰¹å¸ä¸æ¯”ç‰¹å¸ç›¸æ¯”å…·æœ‰ä¸‰ç§æ˜¾è‘—å·®å¼‚ï¼šç¬¬ä¸€ï¼Œè±ç‰¹å¸ç½‘ç»œå¤§çº¦æ¯ 2.5 åˆ†é’Ÿ(è€Œä¸æ˜¯ 10 åˆ†é’Ÿ)å°±å¯ä»¥å¤„ç†ä¸€ä¸ªå—ï¼Œå› æ­¤å¯ä»¥æä¾›æ›´å¿«çš„äº¤æ˜“ç¡®è®¤ï¼›ç¬¬äºŒï¼Œè±ç‰¹å¸ç½‘ç»œé¢„æœŸäº§å‡º 8400 ä¸‡ä¸ªè±ç‰¹å¸ï¼Œæ˜¯æ¯”ç‰¹å¸ç½‘ç»œå‘è¡Œè´§å¸é‡çš„å››å€ä¹‹å¤šï¼›ç¬¬ä¸‰ï¼Œè±ç‰¹å¸åœ¨å…¶å·¥ä½œé‡è¯æ˜ç®—æ³•ä¸­ä½¿ç”¨äº†ç”± Colin Percival(ç§‘æ— Â· ç€è¥¿ç“¦å°”)é¦–æ¬¡æå‡ºçš„ Scrypt åŠ å¯†ç®—æ³•ï¼Œè¿™ä½¿å¾—ç›¸æ¯”äºæ¯”ç‰¹å¸ï¼Œåœ¨æ™®é€šè®¡ç®—æœºä¸Šè¿›è¡Œè±ç‰¹å¸æŒ–æ˜æ›´ä¸ºå®¹æ˜“(åœ¨ ASIC çŸ¿æœºè¯ç”Ÿä¹‹å‰)ã€‚æ¯ä¸€ä¸ªè±ç‰¹å¸è¢«åˆ†æˆ 100000000 ä¸ªæ›´å°çš„å•ä½ï¼Œé€šè¿‡ 8 ä½å°æ•°æ¥ç•Œå®šã€‚ä¸åŒäºæ¯”ç‰¹å¸ï¼ŒScrypt æ‰€å…·æœ‰çš„å†…å­˜å¯†é›†ç‰¹æ€§è®©è±ç‰¹å¸æ›´é€‚åˆç”¨å›¾å½¢å¤„ç†å™¨(GPU)è¿›è¡Œâ€œæŒ–çŸ¿â€ã€‚ä¸º Scrypt å®æ–½çš„ FPGA(ç°åœºå¯ç¼–è¾‘é€»è¾‘é—¨é˜µåˆ—)å’Œ ASIC(ä¸“ç”¨é›†æˆç”µè·¯)ï¼Œç›¸æ¯”äºæ¯”ç‰¹å¸ä½¿ç”¨çš„ sha256ï¼Œæ›´ä¸ºæ˜‚è´µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç¬¬äºŒä»£&#34;&gt;ç¬¬äºŒä»£&lt;/h2&gt;
&lt;h3 id=&#34;æ™ºèƒ½åˆçº¦&#34;&gt;æ™ºèƒ½åˆçº¦&lt;/h3&gt;
&lt;p&gt;1.ä»¥å¤ªåŠ(Ethereum)
ä»¥å¤ªåŠæ˜¯ä¸‹ä¸€ä»£å¯†ç å­¦è´¦æœ¬ï¼Œæ”¯æŒä¼—å¤šçš„é«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨æˆ·å‘è¡Œè´§å¸ã€æ™ºèƒ½åè®®ã€å»ä¸­å¿ƒåŒ–çš„äº¤æ˜“ã€æ™®éè®¤ä¸ºçš„ç¬¬ä¸€ä¸ªå®Œå…¨çš„å»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡(DAOs)æˆ–å»ä¸­å¿ƒåŒ–è‡ªæ²»å…¬å¸(DACs)åº”ç”¨ã€‚ä½¿ä»¥å¤ªåŠä¸ä¼—ä¸åŒçš„æ˜¯å®ç°è¿™äº›åŠŸèƒ½çš„æ–¹å¼ã€‚ä»¥å¤ªåŠå¹¶ä¸æ˜¯æŠŠæ¯ä¸€å•ä¸ªç±»å‹çš„åŠŸèƒ½ä½œä¸ºç‰¹æ€§æ¥ç‰¹åˆ«æ”¯æŒï¼Œç›¸åï¼Œä»¥å¤ªåŠåŒ…æ‹¬ä¸€ä¸ªå†…ç½®çš„å›¾çµå®Œå¤‡çš„è„šæœ¬è¯­è¨€ï¼Œå…è®¸é€šè¿‡è¢«ç§°ä¸ºâ€œåˆåŒâ€çš„æœºåˆ¶æ¥ä¸ºè‡ªå·±æƒ³å®ç°çš„ç‰¹æ€§å†™ä»£ç ã€‚ä¸€ä¸ªåˆåŒå°±åƒä¸€ä¸ªè‡ªåŠ¨çš„ä»£ç†ï¼Œæ¯å½“æ¥æ”¶åˆ°ä¸€ç¬”äº¤æ˜“ï¼ŒåˆåŒå°±ä¼šè¿è¡Œç‰¹å®šçš„ä¸€æ®µä»£ç ï¼Œè¿™æ®µä»£ç èƒ½ä¿®æ”¹åˆåŒå†…éƒ¨çš„æ•°æ®å­˜å‚¨æˆ–è€…å‘é€äº¤æ˜“ã€‚é«˜çº§çš„åˆåŒç”šè‡³èƒ½ä¿®æ”¹è‡ªèº«çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æ™ºèƒ½åˆçº¦ï¼Œå®Œå…¨ç”±ä»£ç ç»„æˆã€è‡ªåŠ¨æ‰§è¡Œçš„åˆçº¦ã€‚å¯ä»¥è‡ªåŠ¨æ ¸æŸ¥æŸäº‹æ˜¯å¦å‘ç”Ÿã€æŸç‰©æ˜¯å¦å­˜åœ¨ã€æŸäº‹æ˜¯å¦å®Œæˆç­‰â€œæ¡ä»¶åˆ¤æ–­â€ç±»æ¡æ¬¾ï¼Œå¹¶æ®æ­¤å¯¹èµ„é‡‘è¿›è¡Œç›¸åº”çš„è½¬ç§»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä»£è®®åˆ¶&#34;&gt;ä»£è®®åˆ¶&lt;/h3&gt;
&lt;p&gt;ç¬¬äºŒä»£åŒºå—é“¾æŠ€æœ¯çš„ä¸€ä¸ªæ–¹å‘å°±æ˜¯åƒç¾å›½çš„ Ripple å…¬å¸(è¯¦è§æœ¬ä¹¦ç¬¬å››ç« ç¬¬ä¸‰èŠ‚)é‚£æ ·ï¼Œå¼€å§‹è€ƒè™‘ç”¨äººæ°‘ä»£è¡¨å¤§ä¼šçš„ä»£è®®åˆ¶åº¦æ¥è¾¾æˆç³»ç»Ÿå…±è¯†â€”â€”å°±æ˜¯å¯¹å„ç§äº¤æ˜“å’Œæ”¯ä»˜çš„è®¤å®šï¼Œä¸æ˜¯ä¼ ç»Ÿä¸­å¿ƒåŒ–çš„å•ä¸€ä¸­å¿ƒè®¤å®šï¼Œä¹Ÿä¸æ˜¯ç¬¬ä¸€ä»£åŒºå—é“¾æŠ€æœ¯çš„å…¨æ°‘å‚ä¸è®¤å®šï¼Œè€Œæ˜¯ä¾é å¤§å®¶ä¿¡ä»»çš„äººæ°‘ä»£è¡¨å¤§ä¼šåˆ¶åº¦æ¥ä»£è®®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¬¬ä¸‰ä»£&#34;&gt;ç¬¬ä¸‰ä»£&lt;/h2&gt;
&lt;p&gt;ç¬¬ä¸‰ä»£åŒºå—é“¾æŠ€æœ¯ç‰ˆæœ¬çš„æ ¸å¿ƒç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼Œå°±æ˜¯å˜â€œç»å¯¹å»ä¸­å¿ƒåŒ–â€ä¸ºâ€œæœ‰æ•ˆå»ä¸­å¿ƒåŒ–â€ã€‚&lt;/p&gt;
&lt;h1 id=&#34;åº”ç”¨ä¸ä¸è¶³&#34;&gt;åº”ç”¨ä¸ä¸è¶³&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;å…¬å¼€è®°è´¦&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ¯å®¶æ¯æˆ·éƒ½è®°è´¦ï¼Œè´¦ç°¿ä¸Šä¸å†è®°è½½æ¯æˆ·æ‘æ°‘çš„ä½™é¢ï¼Œè€Œåªè®°è½½æ¯ä¸€ç¬” Transactionï¼Œå³è®°è½½æ¯ä¸€ç¬”äº¤æ˜“çš„ä»˜æ¬¾äººã€æ”¶æ¬¾äººå’Œä»˜æ¬¾é‡‘é¢ã€‚â€œå…¬å¼€è®°è´¦â€å°±æ˜¯å…¨ç½‘æ‰€æœ‰äººéƒ½å¯ä»¥éšæ—¶æŸ¥çœ‹ä¸€å¥—è´¦æœ¬ï¼Œç„¶åæŒ‰ç…§è§„åˆ™é€æ˜å…¬å¼€åœ°è¿›è¡Œè®°è´¦ã€‚&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;åˆ›å»ºåˆ›ä¸–åŒºå—&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ›ä¸–åŒºå—æ˜¯æˆ‘ä»¬ç”Ÿæˆå…¨æ‘å…¬å¼€è´¦æœ¬çš„ç¬¬ä¸€ç¬”äº¤æ˜“çš„ç¬¬ä¸€ä¸ªä¿¡å°ï¼Œå¥½æ¯”ä¸€ç¯‡æ–‡ç« æ€»å¾—æœ‰ä¸ªå¼€å¤´ä¸€æ ·ã€‚&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;äº¤æ˜“&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‘é•¿å†™å¥½ Transaction ä»¥åï¼Œè¿˜éœ€è¦æ‹¿å‡ºè‡ªå·±çš„å°ç« ï¼Œåœ¨ Transaction ä¸Šç›–ç« ï¼Œè¿™ä¸ªç›–ç« çš„è¿‡ç¨‹ä¹Ÿå°±ç›¸å½“äºåŒºå—é“¾ä¸­çš„ç­¾åã€‚è¿™ä¸ªç« ï¼Œå…¨æ‘äººéƒ½å¯ä»¥æ‹¿æ‰«æå™¨æ‰«ä¸€ä¸‹éªŒè¯æ˜¯å¦æœ‰æ•ˆï¼Œå³éªŒè¯ä»˜æ¬¾äººçš„ç« æ˜¯å¦æœ‰æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;ç”¨è‡ªå·±çš„ç§é’¥ç­¾åï¼Œè¯æ˜äº¤æ˜“æ˜¯è‡ªå·±å‘èµ·çš„ã€‚ç”¨å¯¹æ–¹çš„å…¬é’¥åŠ å¯†ï¼Œä»¥ä¿è¯åªæœ‰æ­£ç¡®çš„æ¥æ”¶æ–¹æ‰èƒ½è·å¾—ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;æ‰“åŒ… Transactionï¼ˆæŒ–çŸ¿ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ˜¯ä¸ºäº†è®©æ‰“åŒ…äº¤æ˜“çš„äººèƒ½å¤Ÿåœ¨ä¿¡å°ä¸Šç½²åï¼Œè¡¨ç¤ºè¿™æ¬¡æ‰“åŒ…æ˜¯ç”±æŸæŸæŸæ‰“åŒ…çš„ï¼Œå…¶æ¬¡å…¨æ‘çš„äº¤æ˜“å¯èƒ½éå¸¸å¤šï¼Œéœ€è¦è£…é…æ ‡å·ï¼Œæ–¹ä¾¿å¤§å®¶æŸ¥è¯¢ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ä¿¡å°æŠŠ Transaction è£…èµ·æ¥ï¼Œè¿™ä¸ªä¿¡å°å°±æ˜¯åŒºå—é“¾ä¸­çš„â€œåŒºå—â€ï¼Œè¿™ä¸ªå°è£…è¿‡ç¨‹å°±æ˜¯â€œæ‰“åŒ…äº¤æ˜“â€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ç»™å¤§å®¶å‡ºä¸€ä¸ªéš¾é¢˜ï¼Œè°å…ˆè§£å‡ºè¿™ä¸ªéš¾é¢˜çš„ç­”æ¡ˆï¼Œè°å°±æœ‰æƒåˆ©æŠŠ Transaction è£…åˆ°ä¸€ä¸ªä¿¡å°ä¸­ï¼Œå¹¶ä¸”è¦åœ¨æ­¤ä¿¡å°ä¸Šç›–ä¸Šè‡ªå·±çš„ç« ã€‚ç­”æ¡ˆéå¸¸å¥½éªŒè¯ï¼Œä½†æ˜¯è®¡ç®—è¿‡ç¨‹æ˜¯ä¸€ä¸ªå°è¯•çš„è¿‡ç¨‹ï¼Œéœ€è¦è€—è´¹å¤§é‡çš„ç²¾åŠ›ã€‚è€Œåœ¨çœŸå®çš„æ¯”ç‰¹å¸ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„ç›®æ ‡å“ˆå¸Œï¼Œè¿™ä¹Ÿå°±æ˜¯æ¯”ç‰¹å¸çŸ¿å·¥æ‰€åšçš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;çŸ¿å·¥åœ¨æ‰“åŒ…ä¹‹åèƒ½å¤Ÿè·å¾—å¯¹åº”çš„å¥–åŠ±&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;å¹¿æ’­äº¤æ˜“&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¹¿æ’­çš„å†…å®¹åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¹¿æ’­ Transactionï¼Œä¸€ç§æ˜¯å¹¿æ’­ä¿¡å°ã€‚ç¬¬ä¸€ç§å¹¿æ’­æ˜¯æ„å‘³ç€è¿˜æœ‰æœªè¢«æ‰“åŒ…çš„ Transactionï¼Œè€Œç¬¬äºŒç§å¹¿æ’­ä¿¡å°åˆ™æ„å‘³ç€è¿™ä¸ª Transaction å·²ç»è¢«æŸä¸ªçŸ¿å·¥ç¡®è®¤ã€‚&lt;/p&gt;
&lt;p&gt;æ”¶åˆ°äº†å¹¿æ’­çš„é€šçŸ¥åï¼Œå¤§å®¶å…ˆéªŒè¯ä¿¡å°ä¸Šéš¾é¢˜çš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ï¼Œè¿™æ ·ä¾¿å¯ä»¥éªŒè¯å‡ºä¿¡å°æ˜¯å¦è¢«ä¼ªé€ ï¼Œæ¥ç€éªŒé‡Œé¢çš„æ¯ç¬”äº¤æ˜“ï¼Œæœ€åè¿˜è¦éªŒè¯ä¿¡å°èƒŒé¢çš„å†…å®¹ï¼Œå³ä¸Šä¸€ä¸ªä¿¡å°çš„æ‘˜è¦æ˜¯å¦æ­£ç¡®ã€‚å› ä¸ºä¸Šä¸€ä¸ªä¿¡å°å¤§å®¶éƒ½å·²ç»ç¡®è®¤ï¼Œæ‰€ä»¥è¿™æ ·å¯ä»¥æå¤§åœ°è§„é¿ä½œå¼Šçš„å¯èƒ½ã€‚å¦‚æœè§‰å¾—æ²¡é—®é¢˜ï¼Œå°±å¯ä»¥å­˜å…¥æœ¬åœ°æ•°æ®åº“ä¸­äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”ç‰¹å¸çš„å‘å¸ƒæ—¶é—´ä¸º 2009 å¹´ 1 æœˆ 9 å·ï¼Œé¢„è®¡å®ƒçš„æŒ–çŸ¿å¯ä»¥ä¸€ç›´æŒç»­åˆ° 2140 å¹´ï¼Œå‘è¡Œæ€»é‡æ”¶æ•›åˆ° 2100 ä¸‡ã€‚æ¯”ç‰¹å¸çš„å‡ºå—æ—¶é—´æ˜¯ 10 åˆ†é’Ÿï¼Œå‡ºå—æ—¶é—´æ˜¯æŒ‡å…¨ç½‘å¹³å‡äº§ç”Ÿä¸€ä¸ªåŒºå—çš„æ—¶é—´é—´éš”ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å¤ªåŠæ˜¯ä¸€ä¸ªåŒºå—é“¾åº”ç”¨å¹³å°ï¼Œå®ƒçš„æå¤§åˆ›æ–°åœ¨äºå®ƒæä¾›äº†æ™ºèƒ½åˆçº¦è¿™ç§å¯ä»¥è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘çš„å·¥å…·ï¼Œæ™ºèƒ½åˆçº¦æ˜¯ä¸€ç§å¯ç¼–ç¨‹çš„åˆçº¦ï¼Œåˆçº¦æ˜¯ç”±ç”¨æˆ·ç¼–å†™å¹¶ä¸”éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šçš„ã€‚
ä»¥å¤ªåŠçš„ä¼˜åŠ¿æ˜¯ä¸ºå…¨ä¸–ç•Œçš„å¼€å‘è€…ä»¬æä¾›äº†ä¸€ç§å¼€å‘å·¥å…·ï¼Œè¿™ç§å·¥å…·è®©æ‰€æœ‰äººéƒ½èƒ½é‡Šæ”¾å‡ºå·¨å¤§çš„åˆ›é€ åŠ›ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šå¯ä»¥çœ‹æˆï¼šåªè¦æ˜¯æœ‰ä¸€å®šæŠ€æœ¯åŸºç¡€çš„å¼€å‘è€…ï¼Œé€šè¿‡æ™ºèƒ½åˆçº¦å¯ä»¥éšæ—¶ä¸ºä»¥å¤ªåŠè´¡çŒ®å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ç‘æ³¢å¸ï¼ˆRippleï¼‰æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¦ç±»çš„åŒºå—é“¾é¡¹ç›®ï¼Œå› ä¸ºä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ç§æ”¯ä»˜ç»“ç®—åè®®ï¼Œç‘æ³¢å¸ä¸éœ€è¦æŒ–çŸ¿ï¼Œå®ƒæ˜¯é€šè¿‡ä¸€ç§å«â€œOpen Coinâ€çš„ç®—æ³•ï¼Œæä¾›ç‘æ³¢åè®®å…±è¯†æ¥è¾¾åˆ°è®°è´¦çš„ç›®çš„ã€‚
ç‘æ³¢å¸æ—¨åœ¨ä¸ºå…¨çƒè·¨å¢ƒæœºæ„æä¾›äº†é«˜æ•ˆç‡çš„æ”¯ä»˜è¿‡ç¨‹ï¼Œæä¾›è¾ƒå¥½çš„å…¨çƒæ”¯ä»˜ä½“éªŒã€‚å› ä¸ºæ¶‰åŠäº†æœºæ„ä¹‹é—´çš„èµ„äº§è½¬ç§»ï¼Œç‘æ³¢å¸è¢«è®¾è®¡æˆéœ€è¦å‡†å…¥è®¸å¯æ‰èƒ½è¿›å…¥ç‘æ³¢çš„æ”¯ä»˜ç½‘ç»œï¼Œè¿™ä¸€ç‚¹æœ‰äº›åƒæˆ‘ä»¬æ‰€è¯´çš„è”ç›Ÿé“¾ã€‚&lt;/p&gt;
&lt;p&gt;åŒ¿åæ€§åŒºå—é“¾é¡¹ç›®æ˜¯æŒ‡ï¼šä½¿ç”¨äº¤æ˜“åŒ¿åæŠ€æœ¯ï¼Œè®©å…¬å¼€å¯æŸ¥è¯¢çš„äº¤æ˜“å†…å®¹å˜æˆç§å¯†çš„åŒ¿åæ€§åŒºå—é“¾é¡¹ç›®ã€‚å¸‚å€¼æ¯”è¾ƒä¸é”™çš„æœ‰é—¨ç½—å¸ã€è¾¾ä¸–å¸ã€Zcash ä¸‰ç§ï¼Œå®ƒä»¬åˆ†åˆ«ä½¿ç”¨äº†ä¸åŒç±»å‹çš„åŒ¿åæŠ€æœ¯ï¼Œä¸ºåŒºå—é“¾æŠ€æœ¯çš„åŒ¿åç‰¹æ€§å‘å±•åšå‡ºäº†è´¡çŒ®ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å…±è¯†æœºåˆ¶&#34;&gt;å…±è¯†æœºåˆ¶&lt;/h1&gt;
&lt;p&gt;å…±è¯†æœºåˆ¶æ˜¯åŒºå—é“¾æ˜¯æ ¸å¿ƒçš„ç»„æˆè¦ç´ ä¹‹ä¸€ï¼Œå®ƒå†³å®šäº†åŒºå—é“¾çš„ä¸šåŠ¡ååé‡ã€äº¤æ˜“é€Ÿåº¦ã€ä¸å¯ç¯¡æ”¹æ€§ã€å‡†å…¥é—¨æ§›ç­‰ç­‰ï¼Œæ˜¯æœ€ä¸ºå…³é”®çš„æŠ€æœ¯è¦ç´ ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;å…±è¯†æœºåˆ¶ä¸»è¦è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;è°æœ‰æƒåˆ©ï¼›
ä½œå¼Šé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;PoWï¼ˆProof of Workï¼‰å·¥ä½œé‡è¯æ˜å¯ä»¥è§£å†³ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼ŒPoWï¼ˆProof of Workï¼‰å·¥ä½œé‡è¯æ˜å¯ä»¥è§£å†³ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥ç®€åŒ–æˆè°æ‹¥æœ‰çš„è®¡ç®—èµ„æºæ›´å¤šï¼Œè°å°±æ‹¥æœ‰æ•´ä¸ªç³»ç»Ÿçš„æœ€å¤§æ¦‚ç‡çš„è®°è´¦æƒã€‚ä¸€æ—¦è¿™ä¸ªæ¦‚ç‡è¶…è¿‡ä¸€åŠä»¥ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±æœ‰ä¸€å®šçš„ä¸­å¿ƒåŒ–é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå½±å“è®°è´¦æƒçš„å”¯ä¸€å› ç´ åªæœ‰è®¡ç®—èµ„æºï¼ˆç®—åŠ›ï¼‰çš„å¤§å°ï¼Œå¦‚æœæƒ³ç¯¡æ”¹äº¤æ˜“ï¼Œåªèƒ½æŠ•å…¥å¤§é‡çš„è®¡ç®—èµ„æºä¸æ•´ä¸ªç³»ç»Ÿä¸­å…¶ä»–æ‰€æœ‰äººè¿›è¡Œå¯¹æŠ—ï¼Œè¿™æ˜¯ååˆ†å›°éš¾çš„ï¼Œå°¤å…¶åœ¨æ•´ä¸ªç³»ç»Ÿæœ‰ä¸€å®šåŸºç¡€è®¡ç®—èµ„æºï¼ˆç®—åŠ›ï¼‰çš„æƒ…å†µä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;PoW ä¸­ä¸€ä¸ªæœ‰è¶£çš„è®¾è®¡æ˜¯æ¿€åŠ±æœºåˆ¶ï¼Œåœ¨ PoW å…±è¯†æœºåˆ¶ä¸‹ï¼Œæˆ‘ä»¬å‡è®¾æ‰€æœ‰å‚ä¸è€…éƒ½æ˜¯ç†æ€§çš„ï¼Œç†æ€§çš„äººå¦‚æœä½œå¼Šã€ç¯¡æ”¹è´¦æœ¬è‚¯å®šéœ€è¦æŠ•å…¥æˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—èµ„æºï¼Œæ”¶ç›Šæ˜¯ç¯¡æ”¹è´¦æœ¬è·å¾—çš„æ”¶ç›Šå‡å»æŠ•å…¥æˆæœ¬ï¼Œè¿™ä¸ªæ”¶ç›Šå¾€å¾€å°äºè¯šå®è®¡ç®—æ‰€è·å¾—çš„æ”¶ç›Šã€‚æ‰€ä»¥ï¼Œä½œå¼Šè€…åœ¨ä½œå¼Šè¿‡ç¨‹ä¸­æŠ•å…¥çš„è®¡ç®—èµ„æºè¿‡å¤§ï¼Œåè€Œå¾—ä¸å¿å¤±ã€‚&lt;/p&gt;
&lt;p&gt;åŒèŠ±æ”»å‡»æ˜¯æŒ‡ä¸€ä¸ªä»£å¸è¢«èŠ±è´¹äº†ä¸¤æ¬¡ï¼Œè¿™åœ¨ä»»æ„çš„åŒºå—é“¾ç³»ç»Ÿä¸­æ˜¯ä¸è¢«å…è®¸çš„ã€‚å¦‚æœé¿å…äº†åŒèŠ±é—®é¢˜ï¼ŒåŸºæœ¬å°±èƒ½é¿å…ä¸Šè¿°ä½œå¼Šä¸­æ”¶ç›Šè¿‡å¤§çš„é—®é¢˜ï¼Œå› ä¸ºæ”»å‡»è€…é¦–å…ˆè¦çªƒå–åˆ°ä½ çš„ç§é’¥ï¼ŒåŒæ—¶åˆèƒ½æ§åˆ¶äº†ä½ çš„è®¡ç®—èµ„æºï¼ˆç®—åŠ›ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è§„åˆ™ä¸€ï¼šä¸€ä¸ªä»£å¸å¦‚æœå·²ç»è¢«èŠ±è´¹ï¼Œé‚£ä¹ˆä¼šè¢«æ ‡è®°æˆå·²èŠ±è´¹ï¼Œå¦‚æœå†æ¬¡æ¥æ”¶åˆ°è¿™ä¸ªä»£å¸è¢«èŠ±è´¹çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè®°è´¦èŠ‚ç‚¹ä¼šæ‹’ç»æ‰“åŒ…è¿™ç¬”äº¤æ˜“ï¼›&lt;/p&gt;
&lt;p&gt;è§„åˆ™äºŒï¼šå¦‚æœåŒæ—¶æ¥æ”¶åˆ°ä¸¤ä¸ªä¿¡å°ï¼Œè¿™ä¸¤ä¸ªä¿¡å°ä¸­è£…çš„ä¸¤ç¬”äº¤æ˜“å‡ºç°äº†ä¸€ä¸ªä»£å¸è¢«èŠ±è´¹äº†ä¸¤æ¬¡çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åˆ†å‰ï¼ˆForkï¼‰ï¼Œé‚£ä¹ˆé€‰æ‹©æŒ–çŸ¿éš¾åº¦æ¯”è¾ƒå¤§çš„é‚£ä¸ªä¿¡å°ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒåŒºå—é“¾æ˜¯ä¸€ä¸ªæä¾›äº†æ‹œå åº­å®¹é”™ã€å¹¶ä¿è¯äº†æœ€ç»ˆä¸€è‡´æ€§çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼›ä»æ•°æ®ç»“æ„ä¸Šçœ‹ï¼Œå®ƒæ˜¯åŸºäºæ—¶é—´åºåˆ—çš„é“¾å¼æ•°æ®å—ç»“æ„ï¼ŒåŒºå—é“¾æŒ‰æ—¶é—´åºåˆ—åŒ–åŒºå—æ•°æ®ï¼Œæ•´ä¸ªç½‘ç»œæœ‰ä¸€ä¸ªæœ€ç»ˆç¡®å®šçŠ¶æ€ï¼›ä»èŠ‚ç‚¹æ‹“æ‰‘ä¸Šçœ‹ï¼Œå®ƒæ‰€æœ‰çš„èŠ‚ç‚¹äº’ä¸ºå†—ä½™å¤‡ä»½ï¼›ä»æ“ä½œä¸Šçœ‹ï¼Œå®ƒæä¾›äº†åŸºäºå¯†ç å­¦çš„å…¬ç§é’¥ç®¡ç†ä½“ç³»æ¥ç®¡ç†è´¦æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸Šæˆ‘ä»¬å¯ä»¥å‘ç°æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠç­‰å…¬é“¾æ˜¯åé‡é«˜å¯ç”¨æ€§ã€åˆ†åŒºå®¹å¿æ€§ï¼ˆAPï¼‰ï¼Œæ»¡è¶³æœ€ç»ˆä¸€è‡´æ€§ï¼ˆCï¼‰ä¸” TPS è¾ƒä½çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚
æˆ‘ä»¬åœ¨è®¨è®ºåŒºå—é“¾æ—¶ï¼Œé€šå¸¸æŒ‡çš„æ˜¯å…¬æœ‰åŒºå—é“¾ã€‚&lt;/p&gt;
&lt;p&gt;ï¼Œæˆ‘ä»¬é‡‡ç”¨ä»€ä¹ˆæ ·çš„ç®—æ³•ï¼ˆå…±è¯†æœºåˆ¶ï¼‰æ‰èƒ½å¤Ÿä¸ºå®ƒæä¾›ä¸€ä¸ªå¯ä¿¡ä»»çš„ç¯å¢ƒï¼Œå¹¶ä¸”ä½¿å¾—ï¼š&lt;/p&gt;
&lt;p&gt;èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®äº¤æ¢è¿‡ç¨‹ä¸å¯ç¯¡æ”¹ï¼Œå¹¶ä¸”å·²ç”Ÿæˆçš„å†å²è®°å½•ä¸å¯è¢«ç¯¡æ”¹ï¼›
æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®ä¼šåŒæ­¥åˆ°æœ€æ–°æ•°æ®ï¼Œå¹¶ä¸”ä¼šéªŒè¯æœ€æ–°æ•°æ®çš„æœ‰æ•ˆæ€§ï¼›
åŸºäºå°‘æ•°æœä»å¤šæ•°çš„åŸåˆ™ï¼Œæ•´ä½“èŠ‚ç‚¹ç»´æŠ¤çš„æ•°æ®æœ¬èº«å¯ä»¥å®¢è§‚åæ˜ äº¤æ¢å†å²ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€è°“è”ç›Ÿé“¾ï¼Œå°±æ˜¯è¿™ä¸ªåŒºå—é“¾å…·æœ‰å‡†å…¥è®¸å¯ï¼Œä¸åƒå…¬é“¾ï¼Œä»»ä½•äººéƒ½å¯ä»¥éšæ—¶è¿›å…¥ã€‚å‡†å…¥è®¸å¯ä¹Ÿå°±æ„å‘³ç€å€™é€‰èŠ‚ç‚¹è¿›å…¥åŒºå—é“¾æ—¶éœ€è¦å¾—åˆ°å·²ç»åœ¨ç½‘ç»œä¸­çš„èŠ‚ç‚¹è®¸å¯ï¼Œæ‰€ä»¥è”ç›Ÿé“¾ä¹Ÿå«åšè®¸å¯é“¾ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†å…¬é“¾å’Œè”ç›Ÿé“¾çš„æ¦‚å¿µï¼Œè¿˜æœ‰ä¸€ç§åŒºå—é“¾æ¦‚å¿µï¼Œå«ä½œä¾§é“¾ã€‚&lt;/p&gt;
&lt;p&gt;ä¾§é“¾æ˜¯ä¸€ç§åŒå‘æŒ‚é’©æŠ€æœ¯ï¼Œå°†ä¸»é“¾ä¸­çš„ä»£å¸é”å®šåˆ°ä¾§é“¾ä¸­ä½¿ç”¨ã€‚æ‰€ä»¥å¯ä»¥å°†ä¸»é“¾çœ‹ä½œä¸»å¹²é“ï¼Œä¾§é“¾çœ‹ä½œä¸ä¸»é“¾ç›¸å¯¹ç‹¬ç«‹çš„ä¸€æ¡åˆ†æ”¯é“ï¼Œä½œä¸ºä¸»é“¾åŠŸèƒ½çš„ä½è€¦åˆæ‹“å±•ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”ç‰¹å¸çš„ P2P ç½‘ç»œåŸºäº TCP æ„å»ºï¼Œä¸»ç½‘é»˜è®¤é€šä¿¡ç«¯å£ä¸º 8333ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å¤ªåŠçš„ P2P ç½‘ç»œåˆ™ä¸æ¯”ç‰¹å¸ä¸å¤ªç›¸åŒï¼Œä»¥å¤ªåŠ P2P ç½‘ç»œæ˜¯ä¸€ä¸ªå®Œå…¨åŠ å¯†çš„ç½‘ç»œï¼Œæä¾› UDP å’Œ TCP ä¸¤ç§è¿æ¥æ–¹å¼ï¼Œä¸»ç½‘é»˜è®¤ TCP é€šä¿¡ç«¯å£æ˜¯ 30303ï¼Œæ¨èçš„ UDP å‘ç°ç«¯å£ä¸º 30301ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;P2P ç½‘ç»œåè®®
P2P ç½‘ç»œåè®®æ˜¯æ‰€æœ‰åŒºå—é“¾çš„æœ€åº•å±‚æ¨¡å—ï¼Œè´Ÿè´£äº¤æ˜“æ•°æ®çš„ç½‘ç»œä¼ è¾“å’Œå¹¿æ’­ã€èŠ‚ç‚¹å‘ç°å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šå¸¸æˆ‘ä»¬æ‰€ç”¨çš„éƒ½æ˜¯æ¯”ç‰¹å¸ P2P ç½‘ç»œåè®®æ¨¡å—ï¼Œå®ƒéµå¾ªä¸€å®šçš„äº¤äº’åŸåˆ™ã€‚æ¯”å¦‚ï¼šåˆæ¬¡è¿æ¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¼šè¢«è¦æ±‚æŒ‰ç…§æ¡æ‰‹åè®®æ¥ç¡®è®¤çŠ¶æ€ï¼Œåœ¨æ¡æ‰‹ä¹‹åå¼€å§‹è¯·æ±‚ Peer èŠ‚ç‚¹çš„åœ°å€æ•°æ®ä»¥åŠåŒºå—æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¥— P2P äº¤äº’åè®®ä¹Ÿå…·æœ‰è‡ªå·±çš„æŒ‡ä»¤é›†åˆï¼ŒæŒ‡ä»¤ä½“ç°åœ¨åœ¨æ¶ˆæ¯å¤´ï¼ˆMessage Header) çš„å‘½ä»¤ï¼ˆcommandï¼‰åŸŸä¸­ï¼Œè¿™äº›å‘½ä»¤ä¸ºä¸Šå±‚æä¾›äº†èŠ‚ç‚¹å‘ç°ã€èŠ‚ç‚¹è·å–ã€åŒºå—å¤´è·å–ã€åŒºå—è·å–ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•
åœ¨ç»å…¸åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸï¼Œæˆ‘ä»¬æœ‰ Raft å’Œ Paxos ç®—æ³•å®¶æ—ä»£è¡¨çš„éæ‹œå åº­å®¹é”™ç®—æ³•ï¼Œä»¥åŠå…·æœ‰æ‹œå åº­å®¹é”™ç‰¹æ€§çš„ PBFT å…±è¯†ç®—æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœä»æŠ€æœ¯æ¼”åŒ–çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªå›¾ï¼Œå…¶ä¸­ï¼ŒåŒºå—é“¾æŠ€æœ¯æŠŠåŸæ¥çš„åˆ†å¸ƒå¼ç®—æ³•è¿›è¡Œäº†ç»æµå­¦ä¸Šçš„æ‹“å±•ã€‚&lt;/p&gt;
&lt;p&gt;è€Œåœ¨åŒºå—é“¾é¢†åŸŸï¼Œå¤šé‡‡ç”¨ PoW å·¥ä½œé‡è¯æ˜ç®—æ³•ã€PoS æƒç›Šè¯æ˜ç®—æ³•ï¼Œä»¥åŠ DPoS ä»£ç†æƒç›Šè¯æ˜ç®—æ³•ï¼Œä»¥ä¸Šä¸‰ç§æ˜¯ä¸šç•Œä¸»æµçš„å…±è¯†ç®—æ³•ï¼Œè¿™äº›ç®—æ³•ä¸ç»å…¸åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ä¸åŒçš„æ˜¯èå…¥äº†ç»æµå­¦åšå¼ˆçš„æ¦‚å¿µï¼Œä¸‹é¢æˆ‘åˆ†åˆ«ç®€å•ä»‹ç»è¿™ä¸‰ç§å…±è¯†ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;PoWï¼šé€šå¸¸æ˜¯æŒ‡åœ¨ç»™å®šçš„çº¦æŸä¸‹ï¼Œæ±‚è§£ä¸€ä¸ªç‰¹å®šéš¾åº¦çš„æ•°å­¦é—®é¢˜ï¼Œè°è§£çš„é€Ÿåº¦å¿«ï¼Œè°å°±èƒ½è·å¾—è®°è´¦æƒï¼ˆå‡ºå—ï¼‰æƒåˆ©ã€‚è¿™ä¸ªæ±‚è§£è¿‡ç¨‹å¾€å¾€ä¼šè½¬æ¢æˆè®¡ç®—é—®é¢˜ï¼Œæ‰€ä»¥åœ¨æ¯”æ‹¼é€Ÿåº¦çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå°±å˜æˆäº†è°çš„è®¡ç®—æ–¹æ³•æ›´ä¼˜ï¼Œä»¥åŠè°çš„è®¾å¤‡æ€§èƒ½æ›´å¥½ã€‚æ¯”ç‰¹å¸æœ¬èº«çš„æ¼”åŒ–å¾ˆå¥½åœ°è¯ é‡Šäº†è¿™ä¸ªé—®é¢˜ï¼Œä¸­æœ¬èªè®¾è®¡çš„æ€è·¯æœ¬æ¥æ˜¯ç”± CPU è®¡ç®—ã€‚éšç€å¸‚åœºå‘å±•ï¼Œäººä»¬å‘ç° GPU ä¹Ÿå¯ä»¥å‚ä¸å…¶ä¸­ï¼Œè€Œä¸”æ•ˆç‡å¯ä»¥è¾¾åˆ°åå€ç™¾å€ï¼Œç°åœ¨ï¼Œè¿™é¡¹å·¥ä½œåŸºæœ¬ä»¥ ASIC ä¸“ä¸šæŒ–çŸ¿èŠ¯ç‰‡ä¸ºä¸»ã€‚&lt;/p&gt;
&lt;p&gt;PoSï¼šè¿™æ˜¯ä¸€ç§è‚¡æƒè¯æ˜æœºåˆ¶ï¼Œå®ƒçš„åŸºæœ¬æ¦‚å¿µæ˜¯äº§ç”ŸåŒºå—çš„éš¾åº¦åº”è¯¥ä¸ä½ åœ¨ç½‘ç»œé‡Œæ‰€å çš„è‚¡æƒï¼ˆæ‰€æœ‰æƒå æ¯”ï¼‰æˆæ¯”ä¾‹ï¼Œç›®å‰æœ‰ä¸‰ä¸ªç‰ˆæœ¬ PoS1.0ã€PoS2.0ã€PoS3.0ã€‚å®ƒå®ç°çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šä½¿ç”¨ä½ æ‰€é”å®šä»£å¸çš„å¸é¾„ï¼ˆCoinAgeï¼‰ä»¥åŠä¸€ä¸ªå°çš„å·¥ä½œé‡è¯æ˜ï¼Œå»è®¡ç®—ä¸€ä¸ªç›®æ ‡å€¼ï¼Œå½“æ»¡è¶³ç›®æ ‡å€¼æ—¶ï¼Œä½ å°†å¯èƒ½è·å–è®°è´¦æƒã€‚&lt;/p&gt;
&lt;p&gt;DPoSï¼šç®€å•æ¥ç†è§£å°±æ˜¯å°† PoS å…±è¯†ç®—æ³•ä¸­çš„è®°è´¦è€…è½¬æ¢ä¸ºæŒ‡å®šèŠ‚ç‚¹æ•°ç»„æˆçš„å°åœˆå­ï¼Œè€Œä¸æ˜¯æ‰€æœ‰äººéƒ½å¯ä»¥å‚ä¸è®°è´¦ï¼Œè¿™ä¸ªåœˆå­å¯èƒ½æ˜¯ 21 ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ 101 ä¸ªèŠ‚ç‚¹ã€‚è¿™ä¸€ç‚¹å–å†³äºè®¾è®¡ï¼Œåªæœ‰è¿™ä¸ªåœˆå­ä¸­çš„èŠ‚ç‚¹æ‰èƒ½è·å¾—è®°è´¦æƒã€‚è¿™å°†æå¤§åœ°æé«˜ç³»ç»Ÿçš„ååé‡ï¼Œå› ä¸ºæ›´å°‘çš„èŠ‚ç‚¹ä¹Ÿå°±æ„å‘³ç€ç½‘ç»œå’ŒèŠ‚ç‚¹çš„å¯æ§ã€‚&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;åŠ å¯†ç­¾åç®—æ³•&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨åŒºå—é“¾é¢†åŸŸï¼Œå“ˆå¸Œç®—æ³•æ˜¯åº”ç”¨å¾—æœ€å¤šçš„ç®—æ³•ã€‚å“ˆå¸Œç®—æ³•å…·æœ‰æŠ—ç¢°æ’æ€§ã€åŸåƒä¸å¯é€†ã€éš¾é¢˜å‹å¥½æ€§ç­‰ç‰¹å¾ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œé™¤äº†æŒ–çŸ¿ç®—æ³•ï¼Œæˆ‘ä»¬è¿˜ä¼šä½¿ç”¨åˆ° RIPEMD160 ç®—æ³•ï¼Œä¸»è¦ç”¨äºç”Ÿæˆåœ°å€ï¼Œä¼—å¤šçš„æ¯”ç‰¹å¸è¡ç”Ÿä»£ç ä¸­ï¼Œç»å¤§éƒ¨åˆ†éƒ½é‡‡ç”¨äº†æ¯”ç‰¹å¸çš„åœ°å€è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†åœ°å€ï¼Œæˆ‘ä»¬è¿˜ä¼šä½¿ç”¨åˆ°æœ€æ ¸å¿ƒçš„ï¼Œä¹Ÿæ˜¯åŒºå—é“¾ Token ç³»ç»Ÿçš„åŸºçŸ³ï¼šå…¬ç§é’¥å¯†ç ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¯”ç‰¹å¸å¤§ç±»çš„ä»£ç ä¸­ï¼ŒåŸºæœ¬ä¸Šä½¿ç”¨çš„éƒ½æ˜¯ ECDSAã€‚ECDSA æ˜¯ ECC ä¸ DSA çš„ç»“åˆï¼Œæ•´ä¸ªç­¾åè¿‡ç¨‹ä¸ DSA ç±»ä¼¼ï¼Œæ‰€ä¸ä¸€æ ·çš„æ˜¯ç­¾åä¸­é‡‡å–çš„ç®—æ³•ä¸º ECCï¼ˆæ¤­åœ†æ›²çº¿å‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;è´¦æˆ·ä¸äº¤æ˜“æ¨¡å‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŒºå—é“¾çš„è´¦æœ¬ç‰¹æ€§ï¼Œé€šå¸¸åˆ†ä¸º UTXO ç»“æ„ä»¥åŠåŸºäº Account-Balance ç»“æ„çš„è´¦æœ¬ç»“æ„ï¼Œæˆ‘ä»¬ä¹Ÿç§°ä¸ºè´¦æœ¬æ¨¡å‹ã€‚UTXO æ˜¯â€œunspent transaction input/outputâ€çš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æŒ‡â€œæœªèŠ±è´¹çš„äº¤æ˜“è¾“å…¥è¾“å‡ºâ€ã€‚&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾çš„å…±è¯†ç®—æ³•ï¼Œæˆ‘åœ¨æŸäº›åœºåˆç›´æ¥ç§°ä½œåŸºäºç»æµå­¦çš„åšå¼ˆç®—æ³•ï¼Œä»¥åŒºåˆ«äºç»å…¸åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•æ€è·¯ï¼Œå®ƒçš„æ•´ä½“æ€è·¯å°±æ˜¯è®©æ”»å‡»è€…çš„æ”»å‡»æˆæœ¬è¿œè¿œå¤§äºæ”¶ç›Šã€‚&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾ä¸­çš„å…±è¯†ç®—æ³•ç›®å‰å…·æœ‰å·¥ä¸šæˆç†Ÿåº¦çš„æ˜¯ PoWï¼Œå¦å¤–ä¸¤ç§æ¯”è¾ƒæˆç†Ÿçš„æ˜¯ PoS å’Œ DPoSï¼Œå…¶æ¬¡è¿˜æœ‰ä¸€äº›å˜ç§å’Œå•ä¸€å¸ç§ä½¿ç”¨çš„å…±è¯†ç®—æ³•ï¼Œä¾‹å¦‚ Ripple å…±è¯†ã€PoC å…±è¯†ï¼ˆæ¦‚å¿µæ€§è¯æ˜ï¼‰ã€PoE å…±è¯†ï¼ˆå­˜åœ¨æ€§è¯æ˜ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ PoW å…±è¯†ç®—æ³•çš„æƒ…å†µä¸‹ï¼Œå®¹é”™é˜ˆå€¼æ˜¯ 50%ï¼Œè€Œ PBFT åŠå…¶å˜ç§çš„å®¹é”™é˜ˆå€¼æ˜¯ 33% å·¦å³ï¼Œè¿™é‡Œçš„ç™¾åˆ†æ¯”æ˜¯æŒ‡ä½œå¼ŠèŠ‚ç‚¹å å…¨ç½‘èŠ‚ç‚¹çš„ æ¯”ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;PoX ç±»çš„ç®—æ³•å…¶å®éƒ½å»¶ç»­äº† PoW çš„è®¾è®¡ç†å¿µï¼Œç›¸æ¯”è¾ƒç»å…¸åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ï¼ŒPoX ç±»ç®—æ³•é€šè¿‡ æ¦‚ç‡é€‰æ‹©è®°è´¦è€…é™ä½äº†æ½œåœ¨çš„ææ¡ˆè€…ï¼Œå¦å¤–æ˜¯å»¶é•¿äº†è¾¾æˆæœ€ç»ˆä¸€è‡´æ€§çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¡é™ä½äº†ç³»ç»Ÿé€šä¿¡å¤æ‚åº¦ï¼Œæ¯æ¬¡è®°è´¦ç³»ç»Ÿçš„ç¡®å®šæ€§å…¶å®æ˜¯æ¦‚ç‡ç¡®å®šçš„ï¼Œåˆç”±äºè¢«é€‰ä¸­éœ€è¦ä»˜å‡ºæˆæœ¬ï¼Œæ­¤å¤„æ‰æé«˜äº†è®°è´¦æˆæœ¬é˜ˆå€¼ï¼Œç»“åˆåŒºå—é“¾çš„åŸºç¡€ä»£å¸è®¾è®¡ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¤©æ‰çš„æƒ³æ³•ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Docker-Cheatsheet</title>
      <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/docker-cheatsheet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/docker-cheatsheet/</guid>
      <description>&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/45699770-5d0a0f00-bb9d-11e8-8ce7-82650bfcbb39.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ“– èŠ‚é€‰è‡ª &lt;a href=&#34;https://parg.co/o9d&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Awesome CheatSheet/Docker CheatSheet&lt;/a&gt;ï¼Œå¯¹æ¥è‡ª&lt;a href=&#34;https://docs.docker.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;åŠ &lt;a href=&#34;https://parg.co/o90&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker Links&lt;/a&gt; ä¸­é“¾æ¥å†…å®¹çš„å½’æ¡£æ•´ç†ï¼ŒåŒ…å«äº†æ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„ Docker æ¦‚å¿µä¸å‘½ä»¤ï¼Œå¦‚æœå¯¹äº Linux å¸¸ç”¨æ“ä½œå°šä¸ç†Ÿæ‚‰çš„å¯ä»¥å‚è€ƒ &lt;a href=&#34;https://parg.co/oiT&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linux Commands CheatSheet&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;docker-cheatsheet--docker-é…ç½®ä¸å®è·µæ¸…å•&#34;&gt;Docker CheatSheet | Docker é…ç½®ä¸å®è·µæ¸…å•&lt;/h1&gt;
&lt;p&gt;å®¹å™¨æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­å»ºç«‹éš”ç¦»ä¸Šä¸‹æ–‡çš„ä¸€ç§æ–¹æ³•ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„åŒ…å«äº†ä¸€ç»„å·²å®‰è£…çš„è½¯ä»¶å’Œç›¸å…³é…ç½®çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚ç”±äºå®ƒä»¬æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå› æ­¤ä»»ä½•å®¹å™¨éƒ½ä¸èƒ½ç›´æ¥è®¿é—®æˆ–å½±å“å…¶ä»–å®¹å™¨æˆ–åº•å±‚å®¿ä¸»æ“ä½œç³»ç»Ÿã€‚Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº Go è¯­è¨€ å¹¶éµä» Apache2.0 åè®®å¼€æºã€‚Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/43813144-f630ba5c-9af6-11e8-8443-175666d4615a.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿæœºæœ€å¤§çš„ç“¶é¢ˆåœ¨äºå…¶éœ€è¦ç‰¹æ®Šç¡¬ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯æ”¯æŒï¼Œå¹¶ä¸”æºå¸¦å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼›è€Œ Docker æ²¡æœ‰ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œå¯ä»¥è¿è¡Œåœ¨ç‰©ç†æœºã€è™šæ‹Ÿæœº, ç”šè‡³åµŒå¥—è¿è¡Œåœ¨ Docker å®¹å™¨å†…ï¼Œå¹¶ä¸”å…¶ä¸æºå¸¦æ“ä½œç³»ç»Ÿçš„ï¼Œä¼šè½»å·§å¾ˆå¤šã€‚åœ¨è°ƒç”¨å®¿ä¸»æœºçš„å†…å­˜ã€CPUã€ç£ç›˜ç­‰ç­‰èµ„æºæ—¶ï¼Œè™šæ‹Ÿæœºæ˜¯åˆ©ç”¨ Hypervisor å»è™šæ‹ŸåŒ–å†…å­˜ï¼Œæ•´ä¸ªè°ƒç”¨è¿‡ç¨‹æ˜¯è™šæ‹Ÿå†…å­˜-&amp;gt;è™šæ‹Ÿç‰©ç†å†…å­˜-&amp;gt;çœŸæ­£ç‰©ç†å†…å­˜ï¼Œä½†æ˜¯ Docker æ˜¯åˆ©ç”¨ Docker Engine å»è°ƒç”¨å®¿ä¸»çš„çš„èµ„æºï¼Œè¿™æ—¶å€™è¿‡ç¨‹æ˜¯è™šæ‹Ÿå†…å­˜-&amp;gt;çœŸæ­£ç‰©ç†å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;Docker ç»¼åˆè¿ç”¨äº† Cgroup, Linux Namespaceï¼ŒSecomp capability, Selinux ç­‰æœºåˆ¶ï¼Œåœ¨ &lt;a href=&#34;./Docker-Internals-CheatSheet&#34;&gt;Docker Internals CheatSheet&lt;/a&gt; ä¸­æˆ‘ä»¬ä¼šæœ‰è¯¦ç»†çš„è®¨è®ºï¼Œæˆ–è€…å‰å¾€ &lt;a href=&#34;https://github.com/wx-chevalier/Backend-Boilerplate/tree/master/docker&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Backend Boilerplate/docker&lt;/a&gt; æµè§ˆå¸¸è§æœåŠ¡/åº”ç”¨çš„ Docker é…ç½®æ¡ˆä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/44158672-dec2d480-a0e7-11e8-9f50-ce83c9638853.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&#34;å®‰è£…ä¸é…ç½®&#34;&gt;å®‰è£…ä¸é…ç½®&lt;/h1&gt;
&lt;h2 id=&#34;docker-ce&#34;&gt;Docker CE&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨&lt;a href=&#34;https://mirrors.ustc.edu.cn/help/docker-ce.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç§‘å¤§çš„ Docker CE æº&lt;/a&gt;è¿›è¡Œå®‰è£…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ›´æ”¹ Ubuntu é»˜è®¤æºåœ°å€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo sed -i &lt;span class=&#34;s1&#34;&gt;&amp;#39;s/archive.ubuntu.com/mirrors.ustc.edu.cn/g&amp;#39;&lt;/span&gt; /etc/apt/sources.list
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®‰è£…å¿…å¤‡çš„ç³»ç»Ÿå‘½ä»¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get install -y python-software-properties
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; sudo apt-key add -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo add-apt-repository &lt;span class=&#34;s2&#34;&gt;&amp;#34;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;lsb_release -cs&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; stable&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ apt-cache policy docker-ce &lt;span class=&#34;c1&#34;&gt;# åˆ—ä¸¾ docker-ce ç‰ˆæœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ apt-get install docker-ce&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;17.03.2-ce....
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;daemon-configuration&#34;&gt;Daemon Configuration&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é…ç½®å¼€æœºè‡ªå¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å–æ¶ˆå¼€æœºè‡ªå¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl disable docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹å­˜å‚¨è·¯å¾„ï¼ŒæŒ‡å®šé•œåƒå­˜å‚¨åœ°å€ï¼Œå…è®¸è¿œç¨‹è®¿é—®ï¼›æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ systemd ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;ï¼Œæ­¤å¤„ä»¥ä¿®æ”¹æœåŠ¡ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä½¿ç”¨ systemctl å‘½ä»¤è¡Œä¿®æ”¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl edit docker.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æˆ–è€…æŸ¥æ‰¾é…ç½®åœ°å€å¹¶ä½¿ç”¨ Vim ä¿®æ”¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ systemctl status docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¿®æ”¹æ–‡ä»¶å†…å®¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Service&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;ExecStart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;ExecStart&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/bin/dockerd -H fd:// -H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock --insecure-registry 10.196.108.176:5000 --dns 114.114.114.114 --dns 8.8.8.8 --dns 8.8.4.4 -g /mnt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åé‡å¯æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é‡æ–°è½½å…¥æœåŠ¡é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é‡å¯ Docker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl restart docker.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ¤æ–­æ˜¯å¦é…ç½®æˆåŠŸ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo netstat -lntp &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep dockerd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;docker-swarm&#34;&gt;Docker Swarm&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨ä¸»èŠ‚ç‚¹å¯åŠ¨ Swarm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker swarm init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹ Swarm å¯†é’¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker swarm join-token -q worker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨ä¸»èŠ‚ç‚¹å¯åŠ¨ Procontainer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -it -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨ä¸»èŠ‚ç‚¹å¯åŠ¨ Registry&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -d -p 5000:5000 --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;always --name registry registry:2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å°†å­èŠ‚ç‚¹åŠ å…¥åˆ° Swarm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker swarm join &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--token &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;TOKEN&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;10.196.108.176:2377
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å¸¸ç”¨é…ç½®&#34;&gt;å¸¸ç”¨é…ç½®&lt;/h2&gt;
&lt;h3 id=&#34;ä»£ç†&#34;&gt;ä»£ç†&lt;/h3&gt;
&lt;p&gt;é‰´äº gcr åŸŸåçš„ä¸å¯ç”¨ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ &lt;a href=&#34;https://hub.docker.com/r/bluebu/shadowsocks-privoxy/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ss-privoxy&lt;/a&gt; ç­‰å·¥å…·æ­å»º Docker æºä»£ç†ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ&lt;a href=&#34;https://www.jianshu.com/p/13f4b23824d8&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;æ‰‹åŠ¨é…ç½®å®¢æˆ·ç«¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -i -t -e &lt;span class=&#34;nv&#34;&gt;SERVER_ADDR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ss.server.ip -e &lt;span class=&#34;nv&#34;&gt;SERVER_PORT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;port -e &lt;span class=&#34;nv&#34;&gt;PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;123456&lt;/span&gt; bluebu/shadowsocks-privoxy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œéœ€è¦å…ˆå®‰è£… sslocal å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ apt install python3-pip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ pip3 install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†™å…¥ä½ çš„é…ç½®æ–‡ä»¶åˆ°ä¾‹å¦‚ &lt;code&gt;config.json&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;server_port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;local_port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;password&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;method&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;chacha20-ietf-poly1305&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;timeout&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;600&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sslocal -c config.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ—¶ä¸€ä¸ª socks5 ä»£ç†åœ¨ä½ æœ¬æœºå°±å¯åŠ¨äº†ã€‚ä¸‹é¢å®‰è£…é…ç½® privoxy æŠŠä»–è½¬æˆ http/https ä»£ç†ã€‚å®‰è£…ç•¥ã€‚ä¿®æ”¹/æ·»åŠ ä¸¤ä¸ª privoxy çš„é…ç½®(å¯¹äº ubuntu, åœ¨ /etc/privoxy/config)ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;listen-address 0.0.0.0:8118        # æ‰€æœ‰ interface ä¸Šç›‘å¬æµé‡
forward-socks5 / 127.0.0.1:1080 .  # æµé‡å¯¼å‘æœ¬æœºä¸Šçš„ ss ä»£ç†
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ—¶å¯ä»¥è®¿é—®ä¸€ä¸‹ä¸å­˜åœ¨çš„ç½‘ç«™æµ‹è¯•ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;HTTP_PROXY=127.0.0.1:8118 HTTPS_PROXY=127.0.0.1:8118 curl https://www.google.com
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢ä¿®æ”¹å„å°æœºå™¨çš„ docker é…ç½®(å‡å®šæˆ‘ä»¬çš„ master å†…ç½‘åœ°å€ &lt;code&gt;1.1.1.2&lt;/code&gt;, å…¶ä»–ä¸¤å°æœºå™¨åœ°å€ä¸º &lt;code&gt;1.1.1.3&lt;/code&gt; å’Œ &lt;code&gt;1.1.1.4&lt;/code&gt;)ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[Environment]
Environment=&amp;#34;HTTP_PROXY=127.0.0.1:8118&amp;#34; &amp;#34;HTTPS_PROXY=127.0.0.1:8118&amp;#34; &amp;#34;NO_PROXY=localhost,127.0.0.1,1.1.1.2,1.1.1.3,1.1.1.4&amp;#34;

...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¯å¢ƒå˜é‡ &lt;code&gt;NO_PROXY&lt;/code&gt; é¡¾åæ€ä¹‰ï¼Œå®ƒä¸æ”¯æŒ CIDR åº”è¯¥ï¼Œæ‰€ä»¥éœ€è¦ä½ æšä¸¾ä¸€ä¸‹é›†ç¾¤ä¸»æœºåœ°å€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å­˜å‚¨ä¸æ—¥å¿—&#34;&gt;å­˜å‚¨ä¸æ—¥å¿—&lt;/h3&gt;
&lt;p&gt;çº¿ä¸Šç³»ç»Ÿä¸­æˆ‘ä»¬å¾€å¾€ä¹Ÿéœ€è¦å¯¹äº Docker äº§ç”Ÿçš„&lt;/p&gt;
&lt;h1 id=&#34;é•œåƒ&#34;&gt;é•œåƒ&lt;/h1&gt;
&lt;p&gt;é•œåƒæè¿°äº† Docker å®¹å™¨è¿è¡Œçš„åˆå§‹æ–‡ä»¶ç³»ç»Ÿ, åŒ…å«è¿è¡Œåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–ã€‚å³å¯ä»¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿ, ä¹Ÿå¯ä»¥ä»…åŒ…å«åº”ç”¨æ‰€éœ€çš„æœ€å° bin/lib æ–‡ä»¶é›†åˆã€‚Docker é•œåƒå’Œå®¹å™¨é‡‡ç”¨åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿç»“æ„, æ¯ä¸ªå®¹å™¨åŒ…å«ä¸€å±‚è–„è–„çš„å¯å†™å±‚, åªè¯»éƒ¨åˆ†æ˜¯å…±äº«çš„ï¼Œè¿™ç§æœºåˆ¶ä¿è¯äº†èµ„æºçš„å¯å¤ç”¨æ€§ï¼Œå‡å°‘äº†é•œåƒä¸å®¹å™¨çš„ç©ºé—´å ç”¨ã€‚Docker é•œåƒå­˜å‚¨å¼•æ“æœ‰ aufs, devicemapper, overlay ç­‰å¤šç§å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ„å»ºä¸æ‹‰å–&#34;&gt;æ„å»ºä¸æ‹‰å–&lt;/h2&gt;
&lt;p&gt;ç¼–å†™å®Œæˆ Dockerfile ä¹‹åï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;docker build&lt;/code&gt; å‘½ä»¤æ¥åˆ›å»ºé•œåƒï¼›å…³äº Dockfile çš„å…·ä½“è¯­æ³•ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹æ–‡ã€‚Dockfile åŸºæœ¬çš„æ ¼å¼ä¸º &lt;code&gt;docker build [ é€‰é¡¹ ] è·¯å¾„&lt;/code&gt;ï¼Œè¯¥å‘½ä»¤å°†è¯»å–æŒ‡å®šè·¯å¾„ä¸‹(åŒ…æ‹¬å­ç›®å½•)çš„ Dockerfileï¼Œå¹¶å°†è¯¥è·¯å¾„ä¸‹æ‰€æœ‰å†…å®¹å‘é€ç»™ Docker æœåŠ¡ç«¯ï¼Œç”±æœåŠ¡ç«¯æ¥åˆ›å»ºé•œåƒã€‚å› æ­¤ä¸€èˆ¬å»ºè®®æ”¾ç½® Dockerfile çš„ç›®å½•ä¸ºç©ºç›®å½•ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ &lt;code&gt;.dockerignore&lt;/code&gt; æ–‡ä»¶(æ¯ä¸€è¡Œæ·»åŠ ä¸€æ¡åŒ¹é…æ¨¡å¼)æ¥è®© Docker å¿½ç•¥è·¯å¾„ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é•œåƒçš„å®Œæ•´ tag ä¸ä»…åŒ…å«é•œåƒåå­—, è¿˜æŒ‡æ˜äº†é•œåƒä»å“ªé‡Œæ¥, è¦åˆ°å“ªé‡Œå», å°±åƒä¸€ä¸ª URLã€‚å¯ä»¥é€šè¿‡ &lt;code&gt;-t&lt;/code&gt; é€‰é¡¹æŒ‡å®šé•œåƒçš„æ ‡ç­¾ä¿¡æ¯ï¼Œè­¬å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo docker build -t myrepo/myapp /tmp/test1/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker build -t username/image_name:tag_name .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker tag SOURCE_IMAGE&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;:TAG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; TARGET_IMAGE&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;:TAG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Docker æ”¯æŒä» Registry æ‹‰å–é•œåƒï¼Œæˆ–è€…å°†æŸä¸ªå®¹å™¨ä¿å­˜ä¸ºé•œåƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ‹‰å–é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker pull image_name
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å°†æŸä¸ªå®¹å™¨ä¿å­˜ä¸ºé•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker commit -m â€œcommit messageâ€ -a â€œauthorâ€  container_name username/image_name:tag
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Docker æ”¯æŒå°†é•œåƒä¿å­˜ä¸ºæ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿é•œåƒçš„å¯¼å‡ºä¸åŠ è½½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¿å­˜é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker save --output saved-image.tar my-image:1.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker save my-image:1.0.0 &amp;gt; saved-image.tar
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker save my_image:my_tag &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; gzip &amp;gt; my_image.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¯¼å…¥é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker load --input saved-image.tar
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker load &amp;lt; saved-image.tar
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é•œåƒç®¡ç†&#34;&gt;é•œåƒç®¡ç†&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;docker images&lt;/code&gt; å‘½ä»¤ä¼šåˆ—ä¸¾å‡ºå…¨éƒ¨çš„é•œåƒ:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
mynewimage          latest              4d2eab1c0b9a        5 minutes ago       278.1 MB
ubuntu              14.04               ad892dd21d60        11 days ago         275.5 MB
&amp;lt;none&amp;gt;              &amp;lt;none&amp;gt;              6b0a59aa7c48        11 days ago         169.4 MB
&amp;lt;none&amp;gt;              &amp;lt;none&amp;gt;              6cfa4d1f33fb        7 weeks ago         0 B
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Docker ä¸­é•œåƒä¸»è¦åˆ†ä¸ºä¸‰ç§çŠ¶æ€:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å·²ä½¿ç”¨é•œåƒ(used image): æŒ‡æ‰€æœ‰å·²è¢«å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰å…³è”çš„é•œåƒã€‚å³ docker ps -a çœ‹åˆ°çš„æ‰€æœ‰å®¹å™¨ä½¿ç”¨çš„é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;æœªå¼•ç”¨é•œåƒ(unreferenced image): æ²¡æœ‰è¢«åˆ†é…æˆ–ä½¿ç”¨åœ¨å®¹å™¨ä¸­çš„é•œåƒï¼Œä½†å®ƒæœ‰ Tag ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ‚¬ç©ºé•œåƒ(dangling image): æœªé…ç½®ä»»ä½• Tagï¼ˆä¹Ÿå°±æ— æ³•è¢«å¼•ç”¨ï¼‰çš„é•œåƒï¼Œæ‰€ä»¥æ‚¬ç©ºã€‚è¿™é€šå¸¸æ˜¯ç”±äºé•œåƒ build çš„æ—¶å€™æ²¡æœ‰æŒ‡å®š -t å‚æ•°é…ç½® Tag å¯¼è‡´çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ—ä¸¾æœªä½¿ç”¨çš„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker images --filter &lt;span class=&#34;s2&#34;&gt;&amp;#34;dangling=true&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æ‰€æœ‰æ— ç”¨çš„é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rmi &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker images -q -f &lt;span class=&#34;nv&#34;&gt;dangling&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;dockfile&#34;&gt;Dockfile&lt;/h2&gt;
&lt;p&gt;Dockerfile ç”±ä¸€è¡Œè¡Œå‘½ä»¤è¯­å¥ç»„æˆï¼Œå¹¶ä¸”æ”¯æŒä»¥ &lt;code&gt;#&lt;/code&gt; å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚ä¸€èˆ¬çš„ï¼ŒDockerfile åˆ†ä¸ºå››éƒ¨åˆ†ï¼šåŸºç¡€é•œåƒä¿¡æ¯ã€ç»´æŠ¤è€…ä¿¡æ¯ã€é•œåƒæ“ä½œæŒ‡ä»¤å’Œå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤ï¼›æŒ‡ä»¤çš„ä¸€èˆ¬æ ¼å¼ä¸º &lt;code&gt;INSTRUCTION arguments&lt;/code&gt;ï¼ŒæŒ‡ä»¤åŒ…æ‹¬ &lt;code&gt;FROM&lt;/code&gt;ã€&lt;code&gt;MAINTAINER&lt;/code&gt;ã€&lt;code&gt;RUN&lt;/code&gt; ç­‰ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# MongoDB Dockerfile&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# https://github.com/dockerfile/mongodb&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Pull base image.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;FROM dockerfile/ubuntu
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ENV SOURCE http://downloads-distro.mongodb.org/repo/ubuntu-upstart
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Install MongoDB.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RUN &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10 &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;deb $SOURCE dist 10gen&amp;#39;&lt;/span&gt; &amp;gt; /etc/apt/sources.list.d/mongodb.list &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  apt-get update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  apt-get install -y mongodb-org &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  rm -rf /var/lib/apt/lists/*
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ENV PATH /usr/local/mongo/bin:&lt;span class=&#34;nv&#34;&gt;$PATH&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Define mountable directories.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VOLUME &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/data/db&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Define working directory.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;WORKDIR /data
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Define default command.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CMD &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;mongod&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Expose ports.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#   - 27017: process&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#   - 28017: http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;EXPOSE &lt;span class=&#34;m&#34;&gt;27017&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;EXPOSE &lt;span class=&#34;m&#34;&gt;28017&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼Œä¸€å¼€å§‹å¿…é¡»æŒ‡æ˜æ‰€åŸºäºçš„é•œåƒåç§°ï¼Œæ¥ä¸‹æ¥æ¨èè¯´æ˜ç»´æŠ¤è€…ä¿¡æ¯ã€‚åé¢åˆ™æ˜¯é•œåƒæ“ä½œæŒ‡ä»¤ï¼Œä¾‹å¦‚ &lt;code&gt;RUN&lt;/code&gt; æŒ‡ä»¤ï¼Œ&lt;code&gt;RUN&lt;/code&gt; æŒ‡ä»¤å°†å¯¹é•œåƒæ‰§è¡Œè·Ÿéšçš„å‘½ä»¤ã€‚æ¯è¿è¡Œä¸€æ¡ &lt;code&gt;RUN&lt;/code&gt; æŒ‡ä»¤ï¼Œé•œåƒæ·»åŠ æ–°çš„ä¸€å±‚ï¼Œå¹¶æäº¤ã€‚æœ€åæ˜¯ &lt;code&gt;CMD&lt;/code&gt; æŒ‡ä»¤ï¼Œæ¥æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„æ“ä½œå‘½ä»¤ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡ä»¤å&lt;/th&gt;
&lt;th&gt;æ ¼å¼&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;FROM&lt;/td&gt;
&lt;td&gt;æ ¼å¼ä¸º &lt;code&gt;FROM &amp;lt;image&amp;gt;&lt;/code&gt;æˆ–&lt;code&gt;FROM &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»ä¸º &lt;code&gt;FROM&lt;/code&gt; æŒ‡ä»¤&lt;/td&gt;
&lt;td&gt;å¦‚æœåœ¨åŒä¸€ä¸ª Dockerfile ä¸­åˆ›å»ºå¤šä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª &lt;code&gt;FROM&lt;/code&gt; æŒ‡ä»¤(æ¯ä¸ªé•œåƒä¸€æ¬¡)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MAINTAINER&lt;/td&gt;
&lt;td&gt;æ ¼å¼ä¸º &lt;code&gt;MAINTAINER &amp;lt;name&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯ï¼Œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RUN&lt;/td&gt;
&lt;td&gt;&lt;code&gt;RUN &amp;lt;command&amp;gt;&lt;/code&gt;æˆ–&lt;code&gt;RUN [&amp;quot;executable&amp;quot;, &amp;quot;param1&amp;quot;, &amp;quot;param2&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å‰è€…å°†åœ¨ shell ç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤ï¼Œå³ &lt;code&gt;/bin/sh -c&lt;/code&gt;ï¼›åè€…åˆ™ä½¿ç”¨ &lt;code&gt;exec&lt;/code&gt; æ‰§è¡Œã€‚æŒ‡å®šä½¿ç”¨å…¶å®ƒç»ˆç«¯å¯ä»¥é€šè¿‡ç¬¬äºŒç§æ–¹å¼å®ç°ï¼Œä¾‹å¦‚ &lt;code&gt;RUN [&amp;quot;/bin/bash&amp;quot;, &amp;quot;-c&amp;quot;, &amp;quot;echo hello&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¡ &lt;code&gt;RUN&lt;/code&gt; æŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒåŸºç¡€ä¸Šæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¹¶æäº¤ä¸ºæ–°çš„é•œåƒã€‚å½“å‘½ä»¤è¾ƒé•¿æ—¶å¯ä»¥ä½¿ç”¨ &lt;code&gt;\&lt;/code&gt; æ¥æ¢è¡Œï¼Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CMD&lt;/td&gt;
&lt;td&gt;æ”¯æŒä¸‰ç§æ ¼å¼,&lt;code&gt;CMD [&amp;quot;executable&amp;quot;,&amp;quot;param1&amp;quot;,&amp;quot;param2&amp;quot;]&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;exec&lt;/code&gt; æ‰§è¡Œï¼Œæ¨èæ–¹å¼ï¼›&lt;code&gt;CMD command param1 param2&lt;/code&gt; åœ¨ &lt;code&gt;/bin/sh&lt;/code&gt; ä¸­æ‰§è¡Œï¼Œæä¾›ç»™éœ€è¦äº¤äº’çš„åº”ç”¨ï¼›&lt;code&gt;CMD [&amp;quot;param1&amp;quot;,&amp;quot;param2&amp;quot;]&lt;/code&gt; æä¾›ç»™ &lt;code&gt;ENTRYPOINT&lt;/code&gt; çš„é»˜è®¤å‚æ•°ï¼›&lt;/td&gt;
&lt;td&gt;æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€æ¡ &lt;code&gt;CMD&lt;/code&gt; å‘½ä»¤ã€‚å¦‚æœæŒ‡å®šäº†å¤šæ¡å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€æ¡ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœç”¨æˆ·å¯åŠ¨å®¹å™¨æ—¶å€™æŒ‡å®šäº†è¿è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰ &lt;code&gt;CMD&lt;/code&gt; æŒ‡å®šçš„å‘½ä»¤&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EXPOSE&lt;/td&gt;
&lt;td&gt;&lt;code&gt;EXPOSE &amp;lt;port&amp;gt; [&amp;lt;port&amp;gt;...]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å‘Šè¯‰ Docker æœåŠ¡ç«¯å®¹å™¨æš´éœ²çš„ç«¯å£å·ï¼Œä¾›äº’è”ç³»ç»Ÿä½¿ç”¨&lt;/td&gt;
&lt;td&gt;åœ¨å¯åŠ¨å®¹å™¨æ—¶éœ€è¦é€šè¿‡ -p æ¥æŒ‡å®šç«¯å£æ˜ å°„ï¼ŒDocker ä¸»æœºä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£è½¬å‘åˆ°æŒ‡å®šçš„ç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENV&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ENV&amp;lt;key&amp;gt;&amp;lt;value&amp;gt;&lt;/code&gt;ã€‚æŒ‡å®šä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œä¼šè¢«åç»­ &lt;code&gt;RUN&lt;/code&gt; æŒ‡ä»¤ä½¿ç”¨ï¼Œå¹¶åœ¨å®¹å™¨è¿è¡Œæ—¶ä¿æŒ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ADD&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ADD&amp;lt;src&amp;gt;&amp;lt;dest&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¯¥å‘½ä»¤å°†å¤åˆ¶æŒ‡å®šçš„ &lt;code&gt;&amp;lt;src&amp;gt;&lt;/code&gt; åˆ°å®¹å™¨ä¸­çš„ &lt;code&gt;&amp;lt;dest&amp;gt;&lt;/code&gt;ï¼Œ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;src&amp;gt;&lt;/code&gt; å¯ä»¥æ˜¯ Dockerfile æ‰€åœ¨ç›®å½•çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª URLï¼›è¿˜å¯ä»¥æ˜¯ä¸€ä¸ª tar æ–‡ä»¶(è‡ªåŠ¨è§£å‹ä¸ºç›®å½•)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;COPY&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COPY &amp;lt;src&amp;gt;&amp;lt;dest&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¤åˆ¶æœ¬åœ°ä¸»æœºçš„ &lt;code&gt;&amp;lt;src&amp;gt;&lt;/code&gt;(ä¸º Dockerfile æ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„)åˆ°å®¹å™¨ä¸­çš„ &lt;code&gt;dest&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å½“ä½¿ç”¨æœ¬åœ°ç›®å½•ä¸ºæºç›®å½•æ—¶ï¼Œæ¨èä½¿ç”¨ &lt;code&gt;COPY&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ENTRYPOINT&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ENTRYPOINT [&amp;quot;executable&amp;quot;, &amp;quot;param1&amp;quot;, &amp;quot;param2&amp;quot;]&lt;/code&gt;ï¼Œä½¿ç”¨æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œï¼›&lt;code&gt;ENTRYPOINT command param1 param2&lt;/code&gt;ï¼Œä¼šåœ¨ Shell ä¸­æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸å¯è¢« &lt;code&gt;docker run&lt;/code&gt; æä¾›çš„å‚æ•°è¦†ç›–ã€‚æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª &lt;code&gt;ENTRYPOINT&lt;/code&gt;ï¼Œå½“æŒ‡å®šå¤šä¸ªæ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªèµ·æ•ˆï¼Œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VOLUME&lt;/td&gt;
&lt;td&gt;&lt;code&gt;VOLUME [&amp;quot;/data&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»æœ¬åœ°ä¸»æœºæˆ–å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ•°æ®åº“å’Œéœ€è¦ä¿æŒçš„æ•°æ®ç­‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;USER&lt;/td&gt;
&lt;td&gt;&lt;code&gt;USER daemon&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„ &lt;code&gt;RUN&lt;/code&gt; ä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;WORKDIR&lt;/td&gt;
&lt;td&gt;&lt;code&gt;WORKDIR /path/to/workdir&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºåç»­çš„ &lt;code&gt;RUN&lt;/code&gt;ã€&lt;code&gt;CMD&lt;/code&gt;ã€&lt;code&gt;ENTRYPOINT&lt;/code&gt; æŒ‡ä»¤é…ç½®å·¥ä½œç›®å½•&lt;/td&gt;
&lt;td&gt;å¯ä»¥ä½¿ç”¨å¤šä¸ª &lt;code&gt;WORKDIR&lt;/code&gt; æŒ‡ä»¤ï¼Œåç»­å‘½ä»¤å¦‚æœå‚æ•°æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä¼šåŸºäºä¹‹å‰å‘½ä»¤æŒ‡å®šçš„è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å½“æœåŠ¡ä¸éœ€è¦ç®¡ç†å‘˜æƒé™æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥å‘½ä»¤æŒ‡å®šè¿è¡Œç”¨æˆ·ã€‚å¹¶ä¸”å¯ä»¥åœ¨ä¹‹å‰åˆ›å»ºæ‰€éœ€è¦çš„ç”¨æˆ·ï¼Œä¾‹å¦‚ï¼š&lt;code&gt;RUN groupadd -r postgres &amp;amp;&amp;amp; useradd -r -g postgres postgres&lt;/code&gt;ï¼›è¦ä¸´æ—¶è·å–ç®¡ç†å‘˜æƒé™å¯ä»¥ä½¿ç”¨ &lt;code&gt;gosu&lt;/code&gt;ï¼Œè€Œä¸æ¨è &lt;code&gt;sudo&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;RUNã€CMD å’Œ ENTRYPOINT è¿™ä¸‰ä¸ª Dockerfile æŒ‡ä»¤çœ‹ä¸Šå»å¾ˆç±»ä¼¼ï¼Œå¾ˆå®¹æ˜“æ··æ·†ã€‚RUN æ‰§è¡Œå‘½ä»¤å¹¶åˆ›å»ºæ–°çš„é•œåƒå±‚ï¼ŒRUN ç»å¸¸ç”¨äºå®‰è£…è½¯ä»¶åŒ…ã€‚CMD è®¾ç½®å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å‚æ•°ï¼Œä½† CMD èƒ½å¤Ÿè¢« docker run åé¢è·Ÿçš„å‘½ä»¤è¡Œå‚æ•°æ›¿æ¢ã€‚ENTRYPOINT é…ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤ã€‚æˆ‘ä»¬ç»å¸¸å¯ä»¥ä½¿ç”¨ ENTRYPOINT æŒ‡å®šå›ºå®šå‘½ä»¤ï¼Œä½¿ç”¨ CMD åŠ¨æ€ä¼ å…¥å‚æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;ENTRYPOINT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/bin/echo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;world&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# docker run -it &amp;lt;image&amp;gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Hello world&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# docker run -it &amp;lt;image&amp;gt; John&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Hello John&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Docker æ¨èçš„æ˜¯å•ä¸ªå®¹å™¨æ‰§è¡Œå•ä¸ªä»»åŠ¡çš„å…³æ³¨ç‚¹åˆ†ç¦»ç­–ç•¥ï¼Œå®¹å™¨çš„ä¸»è¿›ç¨‹ä¼šè´Ÿè´£ç®¡ç†æ‰€æœ‰çš„å­è¿›ç¨‹ã€‚å¦‚æœæˆ‘ä»¬æœªåœ¨è‡ªå®šä¹‰åˆå§‹åŒ–è„šæœ¬ä¸­è€ƒè™‘å¤ªå¤šå­è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ &lt;code&gt;--init&lt;/code&gt; å‚æ•°æ¥å…è®¸ Docker è‡ªåŠ¨æ³¨å…¥ init è¿›ç¨‹ä½œä¸ºä¸»è¿›ç¨‹ï¼Œå…¶ä¼šåœ¨å®¹å™¨å…³é—­æ—¶å€™è‡ªåŠ¨å¤„ç†æ‰€æœ‰çš„æ´¾ç”Ÿçš„å­è¿›ç¨‹ï¼Œå¹¶ä¸”ç›¸å¯¹äºå®Œæ•´çš„ sysvinit æˆ–è€… systemd æ›´ä¸ºè½»é‡çº§ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨å•ä¸ªå®¹å™¨ä¸­è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ supervisord æˆ–è€…&lt;a href=&#34;https://docs.docker.com/config/containers/multi-service_container/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªå®šä¹‰è„šæœ¬&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; ubuntu:latest&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; apt-get update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y supervisor&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; mkdir -p /var/log/supervisor&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; supervisord.conf /etc/supervisor/conf.d/supervisord.conf&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; my_first_process my_first_process&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; my_second_process my_second_process&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/bin/supervisord&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;registry&#34;&gt;Registry&lt;/h2&gt;
&lt;p&gt;Docker å…è®¸æˆ‘ä»¬å»ºç«‹ç§æœ‰çš„ Registry æ¥å­˜æ”¾äºç®¡ç†é•œåƒï¼Œç›´æ¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯åˆ›å»ºç§æœ‰ Registryï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -d -p 5000:5000 --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;always --name registry registry:2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‚è€ƒä¸Šæ–‡æè¿°æˆ‘ä»¬å¯çŸ¥ï¼Œé•œåƒåçš„å‰ç¼€å³è¡¨ç¤ºè¯¥é•œåƒæ‰€å±çš„ Registry åœ°å€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ tag æ–¹å¼å°†æŸä¸ªé•œåƒæ¨é€åˆ°ç§æœ‰ä»“åº“ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ‹‰å–å…¬å…±é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker pull ubuntu:16.04
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¸ºé•œåƒæ·»åŠ  Registry ä¿¡æ¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker tag ubuntu:16.04 custom-domain:5000/my-ubuntu
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å°†å…¶æ¨é€åˆ°ç§æœ‰é•œåƒåº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker push custom-domain:5000/my-ubuntu
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä»ç§æœ‰é•œåƒåº“ä¸­æ‹‰å–é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker pull custom-domain:5000/my-ubuntu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šé•œåƒåº“çš„å­˜æ”¾åœ°å€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-v /mnt/registry:/var/lib/registry
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬çš„å†…éƒ¨ä»“åº“å¹¶ä¸ä¼šé…ç½® HTTPSï¼Œå¦‚æœå¸Œæœ›ä»¥ HTTP æ–¹å¼è®¿é—®ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ä»»ä½•éœ€è¦æ¨é€/æ‹‰å–é•œåƒçš„æœºå™¨ä¸Šé…ç½®éå®‰å…¨åŸŸåï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;insecure-registries&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;myregistry.example.com:5000&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºç§æœ‰ä»“åº“é…ç½®æƒé™è®¤è¯ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦æ·»åŠ  TLS æ”¯æŒï¼Œå¹¶ä¸”é…ç½®è®¤è¯æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ mkdir auth
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --entrypoint htpasswd &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  registry:2 -Bbn cscan cscancscan &amp;gt; ~/auth/htpasswd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ openssl req -new -newkey rsa:4096 -days &lt;span class=&#34;m&#34;&gt;365&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;                -subj &lt;span class=&#34;s2&#34;&gt;&amp;#34;/CN=localhost&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;                -nodes -x509  &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;                -keyout ~/certs/domain.key &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;                -out ~/certs/domain.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå¯ä»¥ä½¿ç”¨ Compose æ–‡ä»¶æ¥æè¿°æ‰€éœ€è¦çš„ TLS ä»¥åŠ AUTH å‚æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;registry-srv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;registry:2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;m&#34;&gt;5000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;REGISTRY_HTTP_TLS_CERTIFICATE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/certs/domain.crt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;REGISTRY_HTTP_TLS_KEY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/certs/domain.key&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;REGISTRY_AUTH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;htpasswd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;REGISTRY_AUTH_HTPASSWD_PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/auth/htpasswd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;REGISTRY_AUTH_HTPASSWD_REALM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Registry Realm&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;/opt/registry:/var/lib/registry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;~/certs:/certs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;~/auth:/auth&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥ä½¿ç”¨ Docker Compose å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker-compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç™»å½•åˆ°é•œåƒæœåŠ¡å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker login myregistrydomain.com:5000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å¤šé˜¶æ®µæ„å»º&#34;&gt;å¤šé˜¶æ®µæ„å»º&lt;/h2&gt;
&lt;p&gt;éšç€ 17.05 ç‰ˆæœ¬çš„å‘å¸ƒï¼ŒDocker å¯¹äºé•œåƒæ„å»ºè¿™å—ä¹Ÿä½œäº†ä¸€é¡¹é‡è¦æ›´æ–°ï¼Œé‚£å°±æ˜¯ multi-stage buildï¼ˆå¤šé˜¶æ®µæ„å»ºï¼‰ï¼Œè¿™æœ‰åŠ©äºæ–¹ä¾¿æºä»£ç æ§åˆ¶ï¼Œå‡å°é•œåƒä½“ç§¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# First stage: complete build environment&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; maven:3.5.0-jdk-8-alpine AS builder&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# add pom.xml and source code&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; ./pom.xml pom.xml&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; ./src src/&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# package jar&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; mvn clean package&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Second stage: minimal runtime environment&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;From&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; openjdk:8-jre-alpine&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# copy jar from the first stage&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --from&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;builder target/msb-1.0.jar msb.jar&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# run jar&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;java&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-jar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;msb.jar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹äº multi-stage buildï¼Œå…¶å…³é”®ç‚¹ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨å‰é¢é˜¶æ®µçš„ FROM æŒ‡ä»¤åé¢å¢åŠ äº†ä¸€ä¸ª AS å‚æ•°ï¼Œå¯ä¸ºè¯¥æ„å»ºé˜¶æ®µå‘½åï¼Œä¾¿äºåç»­æ„å»ºé˜¶æ®µå¼•ç”¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM image[:tag | @digest] AS stage
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨åç»­é˜¶æ®µçš„ COPY æŒ‡ä»¤åé¢å¢åŠ äº†&amp;ndash;from å‚æ•°ï¼ŒæŒ‡æ˜å¼•ç”¨å‰é¢å“ªä¸€ä¸ªæ„å»ºé˜¶æ®µçš„æˆæœï¼Œæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;COPY --from=stage ...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŒç†ï¼Œå¤šé˜¶æ®µæ„å»ºåŒæ ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†å¤šä¸ªå½¼æ­¤ä¾èµ–çš„é¡¹ç›®é€šè¿‡ä¸€ä¸ª Dockerfile å°±å¯è½»æ¾æ„å»ºå‡ºæœŸæœ›çš„å®¹å™¨é•œåƒï¼Œè€Œä¸ç”¨æ‹…å¿ƒé•œåƒå¤ªå¤§ã€æºç æ³„éœ²ç­‰é£é™©ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å®¹å™¨&#34;&gt;å®¹å™¨&lt;/h1&gt;
&lt;p&gt;Docker ä¸­é•œåƒæ˜¯åªè¯»çš„, åˆ›å»ºå®¹å™¨æ—¶åªæ˜¯åœ¨é•œåƒä¸Šé¢æ–°å»ºä¸€ä¸ªå¯å†™å±‚, ä¸éœ€è¦å¤åˆ¶æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ, å› è€Œå¯ä»¥å®ç°æ¯«ç§’çº§åˆ›å»ºã€‚&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/45262735-4f42e400-b44f-11e8-96a0-79c305006be8.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¯åœæ§åˆ¶&#34;&gt;å¯åœæ§åˆ¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;docker create&lt;/code&gt;: åˆ›å»ºä¸€ä¸ªå®¹å™¨ä½†æ˜¯ä¸å¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker rename&lt;/code&gt;: å…è®¸é‡å‘½åå®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker run&lt;/code&gt;: åœ¨åŒä¸€ä¸ªæ“ä½œä¸­åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker rm&lt;/code&gt;: åˆ é™¤å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker update&lt;/code&gt;: æ›´æ–°å®¹å™¨çš„èµ„æºé™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®¹å™¨ä¼šåœ¨ç»“æŸå‘½ä»¤ä¹‹åè‡ªåŠ¨é€€å‡ºï¼Œä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤é€‰é¡¹å¯ä»¥å°†å®¹å™¨ä¿æŒåœ¨æ¿€æ´»çŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-i&lt;/code&gt; å³ä½¿åœ¨æ²¡æœ‰é™„ç€çš„æƒ…å†µä¸‹ä¾ç„¶ä¿æŒ STDIN å¤„äºå¼€å¯ã€‚å•çº¯ä½¿ç”¨ -i å‘½ä»¤æ˜¯ä¸ä¼šå‡ºç° &lt;code&gt;root@689d580b6416:/&lt;/code&gt; è¿™ç§å‰ç¼€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-t&lt;/code&gt; åˆ†é…ä¸€ä¸ªä¼ª TTY æ§åˆ¶å°&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºï¼Œå¹¶ä¸”å¯åŠ¨æŸä¸ªå®¹å™¨ä»¥æ‰§è¡ŒæŸä¸ªå‘½ä»¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -ti --name container_name image_name &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºï¼Œå¯åŠ¨å®¹å™¨æ‰§è¡ŒæŸä¸ªå‘½ä»¤ç„¶ååˆ é™¤è¯¥å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run --rm -ti image_name &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºï¼Œå¯åŠ¨å®¹å™¨ï¼Œå¹¶ä¸”æ˜ å°„å·ä¸ç«¯å£ï¼ŒåŒæ—¶è®¾ç½®ç¯å¢ƒå˜é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -it --rm -p 8080:8080 -v /path/to/agent.jar:/agent.jar -e &lt;span class=&#34;nv&#34;&gt;JAVA_OPTS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;â€-javaagent:/agent.jarâ€ tomcat:8.0.29-jre8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºå®¹å™¨ï¼ŒæŒ‡å®šç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run --network&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;lt;NETWORK&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run --rm -d --network host --name my_nginx nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‡å®šæ ‡ç­¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -l my-label --label com.example.foo&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;bar ubuntu bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ›å»ºå®¹å™¨æ—¶ï¼Œå®ƒä¸ä¼šå°†å…¶ä»»ä½•ç«¯å£å‘å¸ƒåˆ°å¤–éƒ¨ä¸–ç•Œã€‚è¦ä½¿ç«¯å£å¯ç”¨äº Docker ä¹‹å¤–çš„æœåŠ¡æˆ–æœªè¿æ¥åˆ°å®¹å™¨ç½‘ç»œçš„ Docker å®¹å™¨ï¼Œè¯·ä½¿ç”¨ &amp;ndash;publish æˆ–-p æ ‡å¿—ã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªé˜²ç«å¢™è§„åˆ™ï¼Œå°†å®¹å™¨ç«¯å£æ˜ å°„åˆ° Docker ä¸»æœºä¸Šçš„ç«¯å£ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ‡å¿—å€¼&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-p 8080:80&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ° Docker ä¸»æœºçš„ 8080 ç«¯å£(TCP)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-p 8080:80/udp&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ° Docker ä¸»æœºçš„ 8080 ç«¯å£(UDP)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-p 8080:80/tcp -p 8080:80/udp&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ° Docker ä¸»æœºçš„ 8080 ç«¯å£(TCP å’Œ UDP)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¯åŠ¨/åœæ­¢æŸä¸ªå®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;start&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;stop&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; container_name
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨æŸä¸ªå®¹å™¨å†…æ‰§è¡ŒæŸæ¡å‘½ä»¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -ti container_name command.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„è¾“å‡ºæ—¥å¿—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker logs -ft container_name
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;çŠ¶æ€æŸ¥è¯¢&#34;&gt;çŠ¶æ€æŸ¥è¯¢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docker ps æŸ¥çœ‹è¿è¡Œä¸­çš„æ‰€æœ‰å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;docker logs ä»å®¹å™¨ä¸­è·å–æ—¥å¿—ã€‚(ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—é©±åŠ¨ï¼Œä¸è¿‡åœ¨ 1.10 ä¸­ï¼Œå®ƒåªæ”¯æŒ json-file å’Œ journald)&lt;/li&gt;
&lt;li&gt;docker inspect æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„æ‰€æœ‰ä¿¡æ¯(åŒ…æ‹¬ IP åœ°å€)ã€‚&lt;/li&gt;
&lt;li&gt;docker events ä»å®¹å™¨ä¸­è·å–äº‹ä»¶(events)ã€‚&lt;/li&gt;
&lt;li&gt;docker port æŸ¥çœ‹å®¹å™¨çš„å…¬å¼€ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;docker top æŸ¥çœ‹å®¹å™¨ä¸­æ´»åŠ¨è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;docker stats æŸ¥çœ‹å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;docker diff æŸ¥çœ‹å®¹å™¨çš„ FS ä¸­æœ‰å˜åŒ–æ–‡ä»¶ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ ¹æ®æ¡ä»¶è¿‡æ»¤æŸ¥è¯¢&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker ps --filter &lt;span class=&#34;s2&#34;&gt;&amp;#34;name=nostalgic&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨åˆ—è¡¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker stats --all
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ‰¹é‡æŸ¥çœ‹æ—¥å¿—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; i in &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -qf &lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;wsat_slave*&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;==================&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker logs &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep aisec&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç®¡ç†é…ç½®&#34;&gt;ç®¡ç†é…ç½®&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨æ—¶ä¹Ÿå¯ä»¥å®¹å™¨çš„é‡å¯ç­–ç•¥ï¼Œå³æ˜¯å½“å®¹å™¨å‡ºé”™é€€å‡ºæˆ–è€…å®¿ä¸»æœºé‡å¯æ—¶å€™ï¼Œå®¹å™¨çš„åº”å¯¹ç­–ç•¥ï¼›é‡å¯ç­–ç•¥åŒæ ·ä¼šä¿è¯ç›¸å…³è”çš„å®¹å™¨ä»¥æ­£ç¡®çš„é¡ºåºé‡å¯ï¼Œé¿å…æ„å¤–çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;no: ä¸è¿›è¡Œé‡å¯&lt;/li&gt;
&lt;li&gt;on-failure: å½“å®¹å™¨ä»¥éé›¶çŠ¶æ€ç é€€å‡ºæ—¶é‡å¯å®¹å™¨&lt;/li&gt;
&lt;li&gt;unless-stopped: å½“æŸä¸ªå®¹å™¨è¢«æ˜¾æ€§å…³é—­æˆ–è€… Docker æœ¬èº«å…³é—­æˆ–é‡å¯æ—¶é‡å¯&lt;/li&gt;
&lt;li&gt;always: æ— è®ºå‡ºç°ä»»ä½•æƒ…å†µéƒ½é‡å¯å®¹å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è®¾ç½®é‡å¯ç­–ç•¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#â€ŠOff, On-failure, Unless-stopped, Always&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -dit â€” restart unless-stopped &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;CONTAINER&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥é€šè¿‡å¤šç§è¿‡æ»¤æ¡ä»¶æ¥è¿›è¡Œå®¹å™¨çš„ç§»é™¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å…³é—­æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker &lt;span class=&#34;nb&#34;&gt;kill&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ‰¹é‡é‡å¯å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker restart &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ ¹æ® IDæˆ–Name ç§»é™¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm idOrName
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç§»é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ ¹æ®çŠ¶æ€ç§»é™¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -q -f &lt;span class=&#34;s1&#34;&gt;&amp;#39;status=exited&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ ¹æ®æ ‡ç­¾ç§»é™¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep rabbitmq &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; awk &lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;46 hours ago&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å®¹å™¨ä¸­çš„æ–‡ä»¶è¿›è¡Œå¯¼å…¥å¯¼å‡ºæ“ä½œ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker cp åœ¨å®¹å™¨å’Œæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚&lt;/li&gt;
&lt;li&gt;docker export å°†å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿåˆ‡æ¢ä¸ºå‹ç¼©åŒ…(tarball archive stream)è¾“å‡ºåˆ° STDOUTã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èµ„æºé…é¢&#34;&gt;èµ„æºé…é¢&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code&gt;docker stats&lt;/code&gt; å‘½ä»¤æ¥æŸ¥çœ‹ Docker å®¹å™¨çš„æ€§èƒ½çŠ¶æ€ä¸èµ„æºå ç”¨:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker stats redis1 redis2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;CONTAINER           CPU %               MEM USAGE / LIMIT     MEM %               NET IO             BLOCK IO
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;redis1              0.07%               &lt;span class=&#34;m&#34;&gt;796&lt;/span&gt; KB / &lt;span class=&#34;m&#34;&gt;64&lt;/span&gt; MB        1.21%               &lt;span class=&#34;m&#34;&gt;788&lt;/span&gt; B / &lt;span class=&#34;m&#34;&gt;648&lt;/span&gt; B       3.568 MB / &lt;span class=&#34;m&#34;&gt;512&lt;/span&gt; KB
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;memory&#34;&gt;Memory&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -it -m 300M ubuntu:14.04 /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;cpu&#34;&gt;CPU&lt;/h3&gt;
&lt;p&gt;åœ¨çº¿ä¸Šç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å³å¸Œæœ›èƒ½å¤Ÿå°½é‡é¿å… CPU ç©ºé—´æ—¶é—´ç‰‡ï¼Œæœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œä¹Ÿè¦ä¿éšœé‡ç‚¹ä¸šåŠ¡çš„èµ„æºå ç”¨ï¼Œé¿å…å› æŸä¸ªå¼‚å¸¸å®¹å™¨å ç”¨æˆ–ä¸åˆç†ä½¿ç”¨æ•´æœº CPU èµ„æºï¼Œé€ æˆå®¿ä¸»æœºä¸Šå¤§é‡å®¹å™¨å¼‚å¸¸ï¼›æ­¤æ—¶å•å®¹å™¨çš„ CPU èµ„æºçº¦æŸåŠä¸Šé™å°†å˜å¾—éå¸¸é‡è¦ï¼Œæ—¢ä¸èƒ½é™å¾—å¤ªæ­»ï¼Œåˆä¸èƒ½é™ä¸ä½ï¼Œå°†é€šè¿‡å†…æ ¸å’Œè°ƒåº¦ç³»ç»Ÿçš„é™åˆ¶æœºåˆ¶æ¥ä¿éšœèµ„æºç¨³å®šæ€§ã€‚Docker å…è®¸ä½¿ç”¨ cpus, cpuset-cpus, cpu-shares ç­‰æ¥é™åˆ¶å®¹å™¨çš„è®¡ç®—èµ„æºå ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‡å®šå®¹å™¨å¯å ç”¨çš„ CPU æ ¸ç¼–å·ï¼Œ0-3 è¡¨ç¤ºå ç”¨å››ä¸ªæ ¸ï¼Œ1,3 è¡¨ç¤ºå ç”¨ä¸¤ä¸ªæ ¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -it --cpuset-cpus&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1,3&amp;#34;&lt;/span&gt; ubuntu /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æœ€å¤šå…è®¸å ç”¨å• CPU 50% çš„è®¡ç®—èµ„æºï¼Œå¦‚æœåŒæ ¸ CPUï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º 1.5 ç­‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -it --cpus&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.5&amp;#34;&lt;/span&gt; ubuntu /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¸åŒçš„å€¼èƒ½å¤ŸæŒ‡å®šä¸åŒçš„å®¹å™¨æƒé‡ï¼Œç”¨äºåŠ¨æ€åˆ†é… CPU èµ„æº&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -it --cpu-shares&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;512&amp;#34;&lt;/span&gt; ubuntu /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CPU Set ä¿éšœäº†å®¹å™¨çš„ CPU æ ¸æ•°ï¼Œå®‰å…¨æ€§è¾ƒå¼ºï¼Œä½†æ˜¯æ•´ä½“èµ„æºåˆ©ç”¨ç‡ä½ã€‚å¦‚æœå®¹å™¨å®é™…å¹¶ä¸éœ€è¦å¦‚æ­¤å¤šæ ¸çš„ CPU èµ„æºæ¥å¤„ç†ä»»åŠ¡åˆ™ä¼šé€ æˆèµ„æºæµªè´¹ï¼Œå¹¶ä¸”å¯¼è‡´å…¶ä»–å®¹å™¨ä¸Šçš„ä»»åŠ¡æ— æ³•åˆ©ç”¨è¯¥å®¹å™¨ä¸Šçš„ CPU ç©ºé—²æ—¶é—´ç‰‡ï¼Œäººä¸ºé˜»æ–­äº† CPU é—²æ—¶å¤ç”¨çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CPU Share å…è®¸é€šè¿‡å…±äº«çš„æ–¹å¼è·å¾— CPU èµ„æºï¼Œä¸åŒçš„å®¹å™¨å…±äº«ä¸€å®šæ€»é‡çš„ CPU è®¡ç®—èƒ½åŠ›ï¼Œæ¯ä¸ªå®¹å™¨éƒ½ç»‘å®šå…¨é‡æ ¸ï¼Œè€Œæ¯ä¸ªå®¹å™¨è·å–ä¸€å®šä»½é¢çš„ CPU è®¡ç®—åŠ›ã€‚è¯¥æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªå®¹å™¨çš„ CPU èµ„æºåˆ†é…ä¸å†ä»¥æ•´æ ¸åˆ†é…ï¼Œè€Œæ˜¯å¯ç²¾ç»†åˆ° CPU æ—¶é—´ç‰‡ä»½é¢çš„ç²’åº¦ï¼Œå¹¶ä¸”æ˜¯è¿ç»­çš„ CPU æ ¸èƒ½åŠ›å€¼ã€‚å½“æ•´æœºé—²æ—¶ï¼Œå¯ä»¥è®©è¾ƒä¸ºç¹å¿™çš„ä¸šåŠ¡è·å¾—æ•´æœºç©ºé—²ã€‚é‡‡ç”¨ CPU èµ„æºå…±äº«çš„æœºåˆ¶ï¼Œå…¶èµ„æºéš”ç¦»æ€§æ²¡æœ‰ set æ¨¡å¼å¼ºï¼Œå¯¹äºæä¸ªåˆ« CPU èµ„æºæ•æ„Ÿå‹ä¸šåŠ¡ï¼Œæœ‰å¯èƒ½å‡ºç°å¶å°”ç­‰å¾… CPU æ—¶é—´ç‰‡çš„æƒ…å†µï¼Œè€Œå½±å“ä¸šåŠ¡ç¨³å®šæ€§ã€‚å¯¹äºæå°‘æ•°çš„è¿™ç±»ä¸šåŠ¡ï¼Œæˆ‘ä»¬å®¹è®¸ç»§ç»­ä½¿ç”¨ CPU set æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;storage&#34;&gt;Storage&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨ Device Mapper ä½œä¸ºåº•å±‚å­˜å‚¨é©±åŠ¨ï¼Œåˆ™å¯ä»¥é€šè¿‡ Docker daemon çš„å¦‚ä¸‹å‚æ•°æ¥å…¨å±€é™åˆ¶å•ä¸ªå®¹å™¨å ç”¨ç©ºé—´çš„å¤§å°:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é™åˆ¶å•ä¸ªå®¹å™¨æœ€å¤šå ç”¨ 20G ç©ºé—´ï¼Œå°†åº”ç”¨äºä»»ä½•æ–°å»ºå®¹å™¨ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ --storage-opt dm.basesize&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;20G
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæ˜¯ btrfs å­˜å‚¨é©±åŠ¨ï¼Œå¯ä½¿ç”¨å…¶æä¾›çš„ subvolume åŠŸèƒ½æ¥å®ç°ã€‚ä¸€ä¸ªå®¹å™¨ä¼šå¯¹åº”ä¸€ä¸ª subvolumeã€‚é’ˆå¯¹å®¹å™¨å¯¹åº”çš„ subvolume å¯ç”¨å¹¶é…ç½® quota å³å¯é™åˆ¶å…¶ç£ç›˜ç©ºé—´:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ btrfs qgroup limit -e 50G /var/lib/docker/btrfs/subvolumes/&amp;lt;CONTAINER_ID&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆäºˆå¯¹å•ä¸ªè®¾å¤‡è®¿é—®æƒé™:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;docker run -it --device=/dev/ttyUSB0 debian bash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆäºˆæ‰€æœ‰è®¾å¤‡è®¿é—®æƒé™:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;docker run -it --privileged -v /dev/bus/usb:/dev/bus/usb debian bash
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;èµ„æºé…ç½®&#34;&gt;èµ„æºé…ç½®&lt;/h1&gt;
&lt;h2 id=&#34;volume--æ•°æ®å·&#34;&gt;Volume | æ•°æ®å·&lt;/h2&gt;
&lt;p&gt;å®¹å™¨è¿è¡Œæ—¶åº”è¯¥å°½é‡ä¿æŒå®¹å™¨å­˜å‚¨å±‚ä¸å‘ç”Ÿå†™æ“ä½œï¼Œå¯¹äºæ•°æ®åº“ç±»éœ€è¦ä¿å­˜åŠ¨æ€æ•°æ®çš„åº”ç”¨ï¼Œå…¶æ•°æ®åº“æ–‡ä»¶åº”è¯¥ä¿å­˜äºå·(Volume)ä¸­ã€‚ä¸ºäº†é˜²æ­¢è¿è¡Œæ—¶ç”¨æˆ·å¿˜è®°å°†åŠ¨æ€æ–‡ä»¶æ‰€ä¿å­˜ç›®å½•æŒ‚è½½ä¸ºå·ï¼Œåœ¨ Dockerfile ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆæŒ‡å®šæŸäº›ç›®å½•æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å¦‚æœç”¨æˆ·ä¸æŒ‡å®šæŒ‚è½½ï¼Œå…¶åº”ç”¨ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå‘å®¹å™¨å­˜å‚¨å±‚å†™å…¥å¤§é‡æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®å·æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å·ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®å·çš„ä½¿ç”¨ï¼Œç±»ä¼¼äº Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mountã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# the following creates a tmpfs volume called foo with a size of 100 megabyte and uid of 1000.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker volume create --driver &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --opt &lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;tmpfs &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --opt &lt;span class=&#34;nv&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;tmpfs &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --opt &lt;span class=&#34;nv&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;100m,uid&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    foo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;nother example that uses nfs to mount the /path/to/dir in rw mode from 192.168.1.1:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker volume create --driver &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --opt &lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nfs &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --opt &lt;span class=&#34;nv&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;192.168.1.1,rw &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --opt &lt;span class=&#34;nv&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:/path/to/dir &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    foo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -it &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name devtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -v myvol2:/app &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Mounts&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;volume&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;myvol2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Source&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/docker/volumes/myvol2/_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Destination&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/app&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Driver&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;local&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Mode&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;RW&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Propagation&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Docker &lt;code&gt;-v&lt;/code&gt; æ ‡è®°ä¹Ÿå¯ä»¥æŒ‡å®šæŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„ç›®å½• / æ–‡ä»¶åˆ°å®¹å™¨ä¸­å»ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‚è½½ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo docker run -d -P --name web -v /src/webapp:/opt/webapp training/webapp python app.py
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‚è½½æ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo docker run --rm -it -v ~/.bash_history:/.bash_history ubuntu /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Docker æŒ‚è½½æ•°æ®å·çš„é»˜è®¤æƒé™æ˜¯è¯»å†™ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡ `:ro` æŒ‡å®šä¸ºåªè¯»ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo docker run -d -P --name web -v /src/webapp:/opt/webapp:ro
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;training/webapp python app.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šDockerfile ä¸­ä¸æ”¯æŒè¿™ç§ç”¨æ³•ï¼Œè¿™æ˜¯å› ä¸º Dockerfile æ˜¯ä¸ºäº†ç§»æ¤å’Œåˆ†äº«ç”¨çš„ã€‚ç„¶è€Œï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„æ ¼å¼ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ç›®å‰è¿˜ä¸èƒ½æ”¯æŒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;l&#34;&gt;VOLUME /data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;network--ç½‘ç»œ&#34;&gt;Network | ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;Linux åœ¨ç½‘ç»œæ ˆä¸­å¼•å…¥ç½‘ç»œå‘½åç©ºé—´ï¼Œå°†ç‹¬ç«‹çš„ç½‘ç»œåè®®æ ˆéš”ç¦»åˆ°ä¸åŒçš„å‘½ä»¤ç©ºé—´ä¸­ï¼Œå½¼æ­¤é—´æ— æ³•é€šä¿¡ï¼›Docker åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œå®ç°ä¸å®¹å™¨é—´çš„ç½‘ç»œéš”ç¦»ï¼Œå¹¶ä¸”å¼•å…¥ Veth è®¾å¤‡å¯¹æ¥å®ç°åœ¨ä¸åŒç½‘ç»œå‘½åç©ºé—´çš„é€šä¿¡ã€‚Linux ç³»ç»ŸåŒ…å«ä¸€ä¸ªå®Œæ•´çš„è·¯ç”±åŠŸèƒ½ï¼Œå½“ IP å±‚åœ¨å¤„ç†æ•°æ®å‘é€æˆ–è½¬å‘çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è·¯ç”±è¡¨æ¥å†³å®šå‘å¾€å“ªé‡Œã€‚Netfilter è´Ÿè´£åœ¨å†…æ ¸ä¸­æ‰§è¡Œå„ç§æŒ‚æ¥çš„è§„åˆ™(è¿‡æ»¤ã€ä¿®æ”¹ã€ä¸¢å¼ƒç­‰)ï¼Œè¿è¡Œåœ¨å†…æ ¸æ¨¡å¼ä¸­ï¼›Iptables æ¨¡å¼æ˜¯åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹è¿è¡Œçš„è¿›ç¨‹ï¼Œè´Ÿè´£ååŠ©ç»´æŠ¤å†…æ ¸ä¸­ Netfilter çš„å„ç§è§„åˆ™è¡¨ï¼›é€šè¿‡äºŒè€…çš„é…åˆæ¥å®ç°æ•´ä¸ª Linux ç½‘ç»œåè®®æ ˆä¸­çµæ´»çš„æ•°æ®åŒ…å¤„ç†æœºåˆ¶ã€‚Docker çš„ç½‘ç»œå­ç³»ç»Ÿé‡‡ç”¨äº†åŸºäºé©±åŠ¨çš„å¯æ’æ‹”æœºåˆ¶ï¼Œå…¶é»˜è®¤åŒ…å«äº†å¦‚ä¸‹é©±åŠ¨æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bridge&lt;/code&gt;: é»˜è®¤çš„ç½‘ç»œé©±åŠ¨ï¼Œå¸¸ç”¨äºå¤šä¸ªåº”ç”¨è¿è¡Œä¸ç‹¬ç«‹å®¹å™¨ä¸­å¹¶ä¸”éœ€è¦ç›¸äº’é€šè®¯çš„æ—¶å€™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt;: ç§»é™¤å®¹å™¨ä¸ Docker ä¸»æœºä¹‹é—´çš„ç½‘ç»œéš”ç¦»ï¼Œç›´æ¥ä½¿ç”¨å®¿ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œã€‚åº•å±‚ä¸å®¿ä¸»æœºå…±ç”¨ä¸€ä¸ª Network Namespaceï¼Œå®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;overlay&lt;/code&gt;: Overlay ç½‘ç»œç”¨è¯­è¿æ¥å¤šä¸ª Docker Daemonï¼Œä¿è¯ Docker Swarm æœåŠ¡çš„æ­£å¸¸è¿è¡Œï¼›ç‹¬ç«‹çš„å®¹å™¨ä¸ Swarm æœåŠ¡ï¼Œæˆ–è€…ä¸åŒå®¿ä¸»æœºä¸Šçš„å®¹å™¨åŒæ ·èƒ½å¤Ÿé€šè¿‡ Overlay è¿›è¡Œé€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;none&lt;/code&gt;: å¯¹äºæŒ‡å®šå®¹å™¨ç¦æ­¢æ‰€æœ‰çš„ç½‘ç»œé€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;macvlan&lt;/code&gt;: Macvlan ç½‘ç»œä¼šå…è®¸ç›´æ¥ä¸ºå®¹å™¨åˆ†é… MAC åœ°å€ï¼Œä½¿å…¶ä½œä¸ºçœŸæ­£çš„ç‰©ç†è®¾å¤‡æ¥å…¥åˆ°å®¿ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨ network å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°é»˜è®¤çš„ç½‘ç»œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker network ls
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NETWORK ID          NAME                DRIVER              SCOPE
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;f707aa0ef50d        bridge              bridge              &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;97dd7a032d96        host                host                &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;d5a1bed0b12d        none                null                &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œå½“ Docker å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ª docker0 è™šæ‹Ÿç½‘æ¡¥ï¼Œå³è½¯ä»¶äº¤æ¢æœºï¼Œåœ¨æŒ‚è½½åˆ°å®ƒçš„ç½‘å£ä¹‹é—´è¿›è¡Œè½¬å‘ã€‚åŒæ—¶ï¼ŒDocker éšæœºåˆ†é…ä¸€ä¸ªæœ¬åœ°æœªå ç”¨çš„ç§æœ‰ç½‘æ®µ(åœ¨ RFC1918 ä¸­å®šä¹‰)ä¸­çš„ä¸€ä¸ªåœ°å€ç»™ docker0 æ¥å£ã€‚æ¯”å¦‚å…¸å‹çš„ 172.17.42.1ï¼Œæ©ç ä¸º 255.255.0.0ã€‚æ­¤åå¯åŠ¨çš„å®¹å™¨å†…çš„ç½‘å£ä¹Ÿä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªåŒä¸€ç½‘æ®µ(172.17.0.0/16)çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª Docker å®¹å™¨çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šåˆ›å»ºäº†ä¸€å¯¹ veth pair æ¥å£(å½“æ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¦å¤–ä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥æ”¶åˆ°ç›¸åŒçš„æ•°æ®åŒ…)ã€‚è¿™å¯¹æ¥å£ä¸€ç«¯åœ¨å®¹å™¨å†…ï¼Œå³ eth0ï¼›å¦ä¸€ç«¯åœ¨æœ¬åœ°å¹¶è¢«æŒ‚è½½åˆ° docker0 ç½‘æ¡¥ï¼Œåç§°ä»¥ veth å¼€å¤´(ä¾‹å¦‚ vethAQI2QT)ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸»æœºå¯ä»¥è·Ÿå®¹å™¨é€šä¿¡ï¼Œå®¹å™¨ä¹‹é—´ä¹Ÿå¯ä»¥ç›¸äº’é€šä¿¡ã€‚Docker å°±åˆ›å»ºäº†åœ¨ä¸»æœºå’Œæ‰€æœ‰å®¹å™¨ä¹‹é—´ä¸€ä¸ªè™šæ‹Ÿå…±äº«ç½‘ç»œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºæ–°çš„ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker network create --driver bridge isolated
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‡å®šç½‘æ®µï¼Œå®¿ä¸»æœºä¼šä½œä¸ºé»˜è®¤ç½‘å…³&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker network create --driver&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;bridge --subnet&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;192.168.2.0/24 --gateway&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;192.168.2.10 new_subnet
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºæ—¶å°†æŸä¸ªå®¹å™¨è¿æ¥åˆ°ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker run --network&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;isolated -itd --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;docker-nginx nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å°†æŸä¸ªè¿è¡Œä¸­å®¹å™¨è¿æ¥åˆ°æŸä¸ªç½‘ç»œï¼Œåœ¨è¯¥ç½‘ç»œå†…å¯ä»¥é€šè¿‡å®¹å™¨åè‡ªç”±è®¿é—®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker network connect multi-host-network container1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;dns&#34;&gt;DNS&lt;/h3&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨ä» Docker å®ˆæŠ¤è¿›ç¨‹ç»§æ‰¿ DNS è®¾ç½®ï¼ŒåŒ…æ‹¬ /etc/hosts å’Œ /etc/resolv.confã€‚å¯ä»¥åŸºäºæ¯ä¸ªå®¹å™¨è¦†ç›–è¿™äº›è®¾ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-h HOSTNAME or &amp;ndash;hostname=HOSTNAME è®¾å®šå®¹å™¨çš„ä¸»æœºåï¼Œå®ƒä¼šè¢«å†™åˆ°å®¹å™¨å†…çš„ /etc/hostname å’Œ /etc/hostsã€‚ä½†å®ƒåœ¨å®¹å™¨å¤–éƒ¨çœ‹ä¸åˆ°ï¼Œæ—¢ä¸ä¼šåœ¨ docker ps ä¸­æ˜¾ç¤ºï¼Œä¹Ÿä¸ä¼šåœ¨å…¶ä»–çš„å®¹å™¨çš„ /etc/hosts çœ‹åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ndash;link=CONTAINER_NAME:ALIAS é€‰é¡¹ä¼šåœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œæ·»åŠ ä¸€ä¸ªå…¶ä»–å®¹å™¨çš„ä¸»æœºååˆ° /etc/hosts æ–‡ä»¶ä¸­ï¼Œè®©æ–°å®¹å™¨çš„è¿›ç¨‹å¯ä»¥ä½¿ç”¨ä¸»æœºå ALIAS å°±å¯ä»¥è¿æ¥å®ƒã€‚&lt;/li&gt;
&lt;li&gt;&amp;ndash;dns=IP_ADDRESS æ·»åŠ  DNS æœåŠ¡å™¨åˆ°å®¹å™¨çš„ /etc/resolv.conf ä¸­ï¼Œè®©å®¹å™¨ç”¨è¿™ä¸ªæœåŠ¡å™¨æ¥è§£ææ‰€æœ‰ä¸åœ¨ /etc/hosts ä¸­çš„ä¸»æœºåã€‚&lt;/li&gt;
&lt;li&gt;&amp;ndash;dns-search=DOMAIN è®¾å®šå®¹å™¨çš„æœç´¢åŸŸï¼Œå½“è®¾å®šæœç´¢åŸŸä¸º .example.com æ—¶ï¼Œåœ¨æœç´¢ä¸€ä¸ªåä¸º host çš„ ä¸»æœºæ—¶ï¼ŒDNS ä¸ä»…æœç´¢ hostï¼Œè¿˜ä¼šæœç´¢ host.example.comã€‚æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰ä¸Šè¿°æœ€å 2 ä¸ªé€‰é¡¹ï¼ŒDocker ä¼šé»˜è®¤ç”¨ä¸»æœºä¸Šçš„ /etc/resolv.conf æ¥é…ç½®å®¹å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç©ºé—´æ¸…ç†&#34;&gt;ç©ºé—´æ¸…ç†&lt;/h2&gt;
&lt;p&gt;Docker ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‘ç°å®¿ä¸»èŠ‚ç‚¹çš„ç£ç›˜å®¹é‡æŒç»­å¢é•¿ï¼Œè­¬å¦‚ volume æˆ–è€… overlay2 ç›®å½•å ç”¨äº†å¤§é‡çš„ç©ºé—´ï¼›å¦‚æœä»»å…¶å‘å±•ï¼Œå¯èƒ½å°†ç£ç›˜ç©ºé—´è€—å°½è¿›è€Œå¼•å‘å®¿ä¸»æœºå¼‚å¸¸ï¼Œè¿›è€Œå¯¹ä¸šåŠ¡é€ æˆå½±å“ã€‚Docker çš„å†…ç½® df æŒ‡ä»¤å¯ç”¨äºæŸ¥è¯¢é•œåƒ(Images)ã€å®¹å™¨(Containers)å’Œæœ¬åœ°å·(Local Volumes)ç­‰ç©ºé—´ä½¿ç”¨å¤§æˆ·çš„ç©ºé—´å ç”¨æƒ…å†µã€‚è€Œå®¹å™¨çš„å ç”¨çš„æ€»ç©ºé—´ï¼ŒåŒ…å«å…¶æœ€é¡¶å±‚çš„è¯»å†™å±‚(writable layer)å’Œåº•éƒ¨çš„åªè¯»é•œåƒå±‚(base image layerï¼Œread-only)ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code&gt;ps -s&lt;/code&gt; å‚æ•°æ¥æ˜¾ç¤ºäºŒè€…çš„ç©ºé—´å ç”¨æƒ…å†µ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ç©ºé—´å ç”¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ du -h --max-depth&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; sort
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç©ºé—´å ç”¨æ€»ä½“åˆ†æ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker system df
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¾“å‡ºç©ºé—´å ç”¨ç»†èŠ‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker system df -v
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¾“å‡ºå®¹å™¨çš„ç©ºé—´å ç”¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker ps -s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;docker system prune&lt;/code&gt; æŒ‡ä»¤èƒ½å¤Ÿè¿›è¡Œè‡ªåŠ¨åœ°ç©ºé—´æ¸…ç†ï¼Œå…¶é»˜è®¤ä¼šæ¸…é™¤å·²åœæ­¢çš„å®¹å™¨ã€æœªè¢«ä»»ä½•å®¹å™¨æ‰€ä½¿ç”¨çš„å·ã€æœªè¢«ä»»ä½•å®¹å™¨æ‰€å…³è”çš„ç½‘ç»œã€æ‰€æœ‰æ‚¬ç©ºé•œåƒ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¸€å¹¶æ¸…é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒå’Œæ‚¬ç©ºé•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker system prune --all
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ—ä¸¾æ‚¬ç©ºé•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker images -f &lt;span class=&#34;nv&#34;&gt;dangling&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤å…¨éƒ¨æ‚¬ç©ºé•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker image prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker image prune -a
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æŒ‡å®šæ¨¡å¼çš„é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker images -a &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;pattern&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; awk &lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $3}&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; xargs docker rmi
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤å…¨éƒ¨é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rmi &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker images -a -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤å…¨éƒ¨åœæ­¢çš„å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a -f &lt;span class=&#34;nv&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;exited -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ ¹æ®æŒ‡å®šæ¨¡å¼åˆ é™¤å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a -f &lt;span class=&#34;nv&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;exited -f &lt;span class=&#34;nv&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;created -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep rabbitmq &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; awk &lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤å…¨éƒ¨å®¹å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker stop &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker rm &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker ps -a -q&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ—ä¸¾å¹¶åˆ é™¤æœªè¢«ä½¿ç”¨çš„å·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker volume ls -f &lt;span class=&#34;nv&#34;&gt;dangling&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker volume prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ ¹æ®æŒ‡å®šçš„æ¨¡å¼åˆ é™¤å·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker volume prune --filter &lt;span class=&#34;s2&#34;&gt;&amp;#34;label!=keep&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æœªè¢«å…³è”çš„ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker network prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker network prune --filter &lt;span class=&#34;s2&#34;&gt;&amp;#34;until=24h&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„å°ºå¯¸æˆ–è€…æ¸…ç©ºæ—¥å¿—æ–‡ä»¶:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è®¾ç½®æ—¥å¿—æ–‡ä»¶æœ€å¤§å°ºå¯¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ dockerd ... --log-opt max-size&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10m --log-opt max-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ¸…ç©ºå½“å‰æ—¥å¿—æ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;truncate -s &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; /var/lib/docker/containers/*/*-json.log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;æœåŠ¡æ²»ç†&#34;&gt;æœåŠ¡æ²»ç†&lt;/h1&gt;
&lt;h2 id=&#34;docker-compose&#34;&gt;Docker Compose&lt;/h2&gt;
&lt;p&gt;Docker Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤æ‚ Docker åº”ç”¨çš„å·¥å…·ã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨ï¼Œç„¶åä½¿ç”¨ä¸€æ¡å‘½ä»¤æ¥å¯åŠ¨ä½ çš„åº”ç”¨ï¼Œç„¶åæ‰€æœ‰ç›¸å…³çš„æ“ä½œéƒ½ä¼šè¢«è‡ªåŠ¨å®Œæˆï¼›ç®€å•çš„ Compose æ–‡ä»¶å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‡å®š Docker Compose æ–‡ä»¶ç‰ˆæœ¬&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;3&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;web&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‡å®šä»æœ¬åœ°ç›®å½•è¿›è¡Œç¼–è¯‘&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‡å®šå¯¼å‡ºç«¯å£&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;5000:5000&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ›¿æ¢é»˜è®¤çš„ CMD å‘½ä»¤&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;python app.py&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å°†æœ¬åœ°ç›®å½•ç»‘å®šåˆ°å®¹å™¨å†…ç›®å½•&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;.:/code&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# é•œåƒçš„ ID&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;redis:alpine&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œç”¨åˆ°çš„ Python Web åº”ç”¨çš„ Dockerfile å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Dockerfile&#34; data-lang=&#34;Dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; python:3.4-alpine&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; . /code&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WORKDIR&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; /code&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; pip install -r requirements.txt&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;app.py&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨æœåŠ¡åä½œä¸ºè¿æ¥åœ°å€ï¼Œå³å¯è®¿é—®åˆ° Redis æ•°æ®åº“ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-py&#34; data-lang=&#34;py&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;redis&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6379&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åä½¿ç”¨ docker-compose å‘½ä»¤å¯åŠ¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# äº¤äº’å¼å¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker-compose up
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®ˆæŠ¤è¿›ç¨‹å¼å¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker-compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹è¿è¡Œæƒ…å†µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker-compose ps
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å…³é—­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker-compose stop
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç§»é™¤å†…éƒ¨å·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker-compose down --volumes
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æ¶‰åŠåˆ°æ•°æ®å­˜å‚¨çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æŒ‡å®š docker-compose åˆ›å»ºå‘½åæ•°æ®å·ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;web&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;nginx:alpine&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;volume&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mydata&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volume&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;nocopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;./static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/opt/app/static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;postgres:latest&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/postgres/postgres.sock:/var/run/postgres/postgres.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;dbdata:/var/lib/postgresql/data&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mydata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dbdata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæŸä¸ªæ•°æ®å·å¤©ç„¶éœ€è¦æ˜ å°„åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œåˆ™å¯ä»¥æŒ‡å®š driver çš„ç±»å‹ä¸º local:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;wsat_etc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;driver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;driver_opts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/etc/wsat/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;docker-swarm-1&#34;&gt;Docker Swarm&lt;/h2&gt;
&lt;p&gt;Swarm æ˜¯ Docker å…¬å¸åœ¨ 2014 å¹´ 12 æœˆåˆå‘å¸ƒçš„ä¸€å¥—è¾ƒä¸ºç®€å•çš„å·¥å…·ï¼Œç”¨æ¥ç®¡ç† Docker é›†ç¾¤ï¼Œå®ƒå°†ä¸€ç¾¤ Docker å®¿ä¸»æœºå˜æˆä¸€ä¸ªå•ä¸€çš„ï¼Œè™šæ‹Ÿçš„ä¸»æœºã€‚Swarm ä½¿ç”¨æ ‡å‡†çš„ Docker API æ¥å£ä½œä¸ºå…¶å‰ç«¯è®¿é—®å…¥å£ï¼Œæ¢è¨€ä¹‹ï¼Œå„ç§å½¢å¼çš„ Docker Client(dockerclient in go, docker_py, docker ç­‰)å‡å¯ä»¥ç›´æ¥ä¸ Swarm é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;Swarm Deamon åªæ˜¯ä¸€ä¸ªè°ƒåº¦å™¨(Scheduler)å’Œè·¯ç”±å™¨(Router)ï¼ŒSwarm è‡ªå·±ä¸è¿è¡Œå®¹å™¨ï¼Œå®ƒåªæ˜¯æ¥å— Docker å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ï¼Œè°ƒåº¦é€‚åˆçš„èŠ‚ç‚¹æ¥è¿è¡Œå®¹å™¨ï¼Œè¿™æ„å‘³ç€ï¼Œå³ä½¿ Swarm ç”±äºæŸäº›åŸå› æŒ‚æ‰äº†ï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¹Ÿä¼šç…§å¸¸è¿è¡Œï¼Œå½“ Swarm é‡æ–°æ¢å¤è¿è¡Œä¹‹åï¼Œå®ƒä¼šæ”¶é›†é‡å»ºé›†ç¾¤ä¿¡æ¯ã€‚å¹¶ä¸” Swarm æä¾›çš„è·¯ç”±åŒ¹é…(æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è·¨å®¹å™¨é€šè®¯)éå¸¸å¯é ã€‚åœ¨å•ä¸ªç«¯å£ä¸Šè¿è¡Œä¸€ä¸ªæœåŠ¡ï¼ŒSwarm èŠ‚ç‚¹çš„ä»»æ„ä¸»æœºéƒ½å¯ä»¥è®¿é—®ï¼Œè´Ÿè½½å‡è¡¡å®Œå…¨åœ¨åå°å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/44953944-dfbc7a00-aecd-11e8-93dc-1fe6258aafd0.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Swarm åœ¨ Scheduler èŠ‚ç‚¹è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥æ¥è®¡ç®—æœ€é€‚åˆè¿è¡Œå®¹å™¨çš„èŠ‚ç‚¹ï¼Œç›®å‰æ”¯æŒçš„ç­–ç•¥æœ‰ï¼šRandom, Binpack, Spreadã€‚&lt;/p&gt;
&lt;p&gt;Random é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯éšæœºé€‰æ‹©ä¸€ä¸ª Node æ¥è¿è¡Œå®¹å™¨ï¼Œä¸€èˆ¬ç”¨ä½œè°ƒè¯•ç”¨ã€‚Spread å’Œ Binpack ç­–ç•¥ä¼šæ ¹æ®å„ä¸ªèŠ‚ç‚¹çš„å¯ç”¨çš„ CPU, RAM ä»¥åŠæ­£åœ¨è¿è¡Œçš„å®¹å™¨çš„æ•°é‡æ¥è®¡ç®—åº”è¯¥è¿è¡Œå®¹å™¨çš„èŠ‚ç‚¹ã€‚åœ¨åŒç­‰æ¡ä»¶ä¸‹ï¼ŒSpread ç­–ç•¥ä¼šé€‰æ‹©è¿è¡Œå®¹å™¨æœ€å°‘çš„é‚£å°èŠ‚ç‚¹æ¥è¿è¡Œæ–°çš„å®¹å™¨ï¼ŒBinpack ç­–ç•¥ä¼šé€‰æ‹©è¿è¡Œå®¹å™¨æœ€é›†ä¸­çš„é‚£å°æœºå™¨æ¥è¿è¡Œæ–°çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Spread ç­–ç•¥ä¼šä½¿å¾—å®¹å™¨ä¼šå‡è¡¡çš„åˆ†å¸ƒåœ¨é›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œä¸€æ—¦ä¸€ä¸ªèŠ‚ç‚¹æŒ‚æ‰äº†åªä¼šæŸå¤±å°‘éƒ¨åˆ†çš„å®¹å™¨ã€‚Binpack ç­–ç•¥æœ€å¤§åŒ–çš„é¿å…å®¹å™¨ç¢ç‰‡åŒ–ï¼Œå°±æ˜¯è¯´ Binpack ç­–ç•¥å°½å¯èƒ½çš„æŠŠè¿˜æœªä½¿ç”¨çš„èŠ‚ç‚¹ç•™ç»™éœ€è¦æ›´å¤§ç©ºé—´çš„å®¹å™¨è¿è¡Œï¼Œå°½å¯èƒ½çš„æŠŠå®¹å™¨è¿è¡Œåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šé¢ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service create &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--image nginx &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--replicas &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ›´æ–°æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service update &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--image nginx:alpine &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ é™¤æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service rm nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç¼©å®¹ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ é™¤æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service scale &lt;span class=&#34;nv&#34;&gt;nginx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ‰©å®¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service scale &lt;span class=&#34;nv&#34;&gt;nginx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ—å‡ºæ‰€æœ‰çš„æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service ls
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ—å‡ºä¸€ä¸ªæœåŠ¡çš„æ‰€æœ‰å®ä¾‹(åŒ…æ‹¬æœåŠ¡çš„å¥åº·çŠ¶å†µ)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service ps nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æœåŠ¡çš„è¯¦ç»†ä¿¡æ¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service inspect nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¢åŠ å’Œåˆ é™¤DNS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service update --dns-add 222.222.222.222 tender_hofstadter
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service update --dns-rm 222.222.222.222 tender_hofstadter
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¢åŠ å’Œåˆ é™¤ç«¯å£æ˜ å°„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service update --publish-add 80:80 xenodochial_ritchie
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker service update --publish-rm 80:80 xenodochial_ritchie
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Docker Compose çš„è„šæœ¬æ¥è¿›è¡Œæ‰¹æ¬¡éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker stack deploy application
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;3&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;web&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;registry.gitlab.com/example/example&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# you need to use external image&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;npm run prod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deploy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;update_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parallelism&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;10s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart_policy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;condition&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;on&lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;failure&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>Linux-CheatSheet</title>
      <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/linux-cheatsheet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/linux-cheatsheet/</guid>
      <description>&lt;h1 id=&#34;linux-cheatsheet&#34;&gt;Linux CheatSheet&lt;/h1&gt;
&lt;p&gt;BIOSï¼š&lt;/p&gt;
&lt;p&gt;Basic Input Output System çš„ç¼©ç•¥è¯ï¼Œç›´è¯‘&amp;quot;åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ&amp;quot;ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒæ˜¯ä¸€ç»„å›ºåŒ–åˆ°è®¡ç®—æœºå†…ä¸»æ¿ä¸Šä¸€ä¸ª ROM èŠ¯ç‰‡ä¸Šçš„ç¨‹åºï¼Œå®ƒä¿å­˜ç€è®¡ç®—æœºæœ€é‡è¦çš„åŸºæœ¬è¾“å…¥è¾“å‡ºçš„ç¨‹åºã€å¼€æœºåè‡ªæ£€ç¨‹åºå’Œç³»ç»Ÿè‡ªå¯åŠ¨ç¨‹åºï¼Œå®ƒå¯ä» CMOS ä¸­è¯»å†™ç³»ç»Ÿè®¾ç½®çš„å…·ä½“ä¿¡æ¯ã€‚å…¶ä¸»è¦åŠŸèƒ½æ˜¯ä¸ºè®¡ç®—æœºæä¾›æœ€åº•å±‚çš„ã€æœ€ç›´æ¥çš„ç¡¬ä»¶è®¾ç½®å’Œæ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;GRUBï¼š&lt;/p&gt;
&lt;p&gt;GRand Unified Bootloader ç®€ç§°â€œGRUBâ€ï¼Œæ˜¯ä¸€ä¸ªæ¥è‡ª GNU é¡¹ç›®çš„å¤šæ“ä½œç³»ç»Ÿå¯åŠ¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;UEFI&lt;/p&gt;
&lt;p&gt;Unified Extensible Firmware Interfaceï¼Œå…¨ç§°â€œç»Ÿä¸€çš„å¯æ‰©å±•å›ºä»¶æ¥å£â€&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸€ç§è¯¦ç»†æè¿°ç±»å‹æ¥å£çš„æ ‡å‡†ã€‚è¿™ç§æ¥å£ç”¨äºæ“ä½œç³»ç»Ÿè‡ªåŠ¨ä»é¢„å¯åŠ¨çš„æ“ä½œç¯å¢ƒï¼ŒåŠ è½½åˆ°ä¸€ç§æ“ä½œç³»ç»Ÿä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å¯æ‰©å±•å›ºä»¶æ¥å£ï¼ˆExtensible Firmware Interfaceï¼ŒEFIï¼‰æ˜¯ Intel ä¸º PC å›ºä»¶çš„ä½“ç³»ç»“æ„ã€æ¥å£å’ŒæœåŠ¡æå‡ºçš„å»ºè®®æ ‡å‡†ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç»„åœ¨ OS åŠ è½½ä¹‹å‰ï¼ˆå¯åŠ¨å‰ï¼‰åœ¨æ‰€æœ‰å¹³å°ä¸Šä¸€è‡´çš„ã€æ­£ç¡®æŒ‡å®šçš„å¯åŠ¨æœåŠ¡ï¼Œè¢«çœ‹åšæ˜¯æœ‰è¿‘ 20 å¤šå¹´å†å²çš„ BIOS çš„ç»§ä»»è€…ã€‚UEFI æ˜¯ç”± EFI1.10 ä¸ºåŸºç¡€å‘å±•èµ·æ¥çš„ï¼Œå®ƒçš„æ‰€æœ‰è€…å·²ä¸å†æ˜¯ Intelï¼Œè€Œæ˜¯ä¸€ä¸ªç§°ä½œ Unified EFI Form çš„å›½é™…ç»„ç»‡ã€‚&lt;/p&gt;
&lt;h1 id=&#34;systemd&#34;&gt;Systemd&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;./Linux-CheatSheet.md&#34;&gt;init è¿›ç¨‹&lt;/a&gt;æ˜¯ Linux ç³»ç»Ÿ Booting ä¹‹åçš„é¦–ä¸ªè¿›ç¨‹ï¼Œå…¶ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œç›´è‡³ç³»ç»Ÿå…³é—­ï¼›ä¼ ç»Ÿçš„ Linux ä¸­çš„æœåŠ¡æ§åˆ¶æ–¹å¼ä¹Ÿä¸»è¦ä¾èµ–äº sysvinit æœºåˆ¶:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo /etc/init.d/apache2 start
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æˆ–è€…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ service apache2 start
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“ sysvinit ç³»ç»Ÿåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒæ˜¯ä¸²è¡Œå¯åŠ¨ï¼Œå¹¶ä¸”ä¼šå°†æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„åå°æœåŠ¡è¿›ç¨‹å…¨éƒ¨å¯åŠ¨è¿è¡Œï¼›ç³»ç»Ÿå¿…é¡»ç­‰å¾…æ‰€æœ‰çš„æœåŠ¡éƒ½å¯åŠ¨å°±ç»ªä¹‹åï¼Œæ‰å…è®¸ç”¨æˆ·ç™»å½•ï¼Œå¯¼è‡´å¯åŠ¨æ—¶é—´è¿‡é•¿ä¸ç³»ç»Ÿèµ„æºæµªè´¹ã€‚å¹¶ä¸” init è¿›ç¨‹åªæ˜¯æ‰§è¡Œå¯åŠ¨è„šæœ¬ï¼Œä¸ç®¡å…¶ä»–äº‹æƒ…ï¼Œè„šæœ¬éœ€è¦è‡ªå·±å¤„ç†å„ç§æƒ…å†µï¼Œä½¿å¾—è„šæœ¬å¤æ‚åº¦å¢åŠ å¾ˆå¤šã€‚Systemd å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼Œä¸ºç³»ç»Ÿçš„å¯åŠ¨å’Œç®¡ç†æä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/45408944-64fb1800-b6a0-11e8-97a3-83bb4c681aff.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&#34;ç”¨æˆ·è¿›ç¨‹&#34;&gt;ç”¨æˆ·è¿›ç¨‹&lt;/h1&gt;
&lt;p&gt;Linux åœ¨æ“ä½œè¿™äº›ç‰©ç†å†…å­˜æ—¶ï¼Œä¸ä¼šç›´æ¥æ“ä½œç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼ˆå¯ä»¥ç†è§£æˆè·Ÿç‰©ç†å†…å­˜ç›¸å¯¹åº”çš„æ˜ å°„ï¼‰ï¼Œå³åœ¨ç‰©ç†å†…å­˜è·Ÿè¿›ç¨‹ä¹‹é—´å¢åŠ ä¸€ä¸ªä¸­é—´å±‚ã€‚&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿå°†è™šæ‹Ÿåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†ä¸“é—¨ç»™ç³»ç»Ÿå†…æ ¸ä½¿ç”¨ï¼Œå¦ä¸€éƒ¨åˆ†ç»™ç”¨æˆ·è¿›ç¨‹ä½¿ç”¨ã€‚å¯¹äº 32 ä½çš„ç³»ç»Ÿï¼Œè™šæ‹Ÿåœ°å€èŒƒå›´æ˜¯ 0x00000000 ~ 0xFFFFFFFFï¼Œå³æœ€å¤§è™šæ‹Ÿå†…å­˜ä¸º 2^32 Bytes = 4GBï¼Œç³»ç»Ÿå°†æœ€é«˜çš„ 1G å­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€ 0xC0000000 åˆ° 0xFFFFFFFFï¼‰åˆ†é…å†…æ ¸ä½¿ç”¨ï¼Œæ­¤åŒºåŸŸç§°ä½œå†…æ ¸ç©ºé—´ï¼›å¦å¤–å°†è¾ƒä½çš„ 3G å­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€ 0x00000000 åˆ° 0xBFFFFFFFï¼‰ï¼Œä¾›å„ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ç©ºé—´ã€‚ç”±äºè™šæ‹Ÿåœ°å€æ˜¯ç‰©ç†å†…å­˜çš„æ˜ å°„ï¼Œç›¸å½“äºç³»ç»Ÿå°†ç‰©ç†å†…å­˜åˆ†æˆä¸¤éƒ¨åˆ†å•ç‹¬ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼š&lt;/p&gt;
&lt;p&gt;å†…æ ¸ç©ºé—´ï¼šç³»ç»Ÿå†…æ ¸ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼›å½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œè°ƒç”¨ç³»ç»Ÿå‘½ä»¤(ä¾‹å¦‚ read, write)æ—¶ï¼Œä¼šè¿›å…¥å†…æ ¸ä»£ç çš„æ‰§è¡Œï¼Œè¿›ç¨‹æ­¤æ—¶çš„çŠ¶æ€æˆ‘ä»¬ç§°ä¹‹ä¸ºå†…æ ¸æ€ã€‚
ç”¨æˆ·ç©ºé—´ï¼šç”¨æˆ·è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼›å½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œç”¨æˆ·è‡ªå·±çš„ä»£ç æ—¶ï¼Œè¯¥è¿›ç¨‹æ­¤æ—¶çš„çŠ¶æ€ä¸ºç”¨æˆ·æ€ã€‚&lt;/p&gt;
&lt;h1 id=&#34;links&#34;&gt;Links&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ibm.com/developerworks/cn/linux/1407_liuming_init3/index.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.ibm.com/developerworks/cn/linux/1407_liuming_init3/index.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Network-CheatSheet</title>
      <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/network-cheatsheet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/network-cheatsheet/</guid>
      <description>&lt;h1 id=&#34;http-cheatsheet--http-ç›¸å…³å¿…çŸ¥å¿…ä¼štcphttp2httpsdnsè¯·æ±‚å“åº”ç¼“å­˜&#34;&gt;HTTP CheatSheet | HTTP ç›¸å…³å¿…çŸ¥å¿…ä¼šï¼šTCP/HTTP2/HTTPS/DNSï¼Œè¯·æ±‚ï¼Œå“åº”ï¼Œç¼“å­˜&lt;/h1&gt;
&lt;p&gt;HTTP, ç­‰ç½‘ç»œåè®®æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ã€é¢è¯•ä¸­å¸¸è§çš„çŸ¥è¯†è¦ç‚¹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http://rob:abcd1234@www.example.co.uk/path/index.html?query1&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;test&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;silly&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;willy&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;field&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]=&lt;/span&gt;zero&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;field&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2&lt;span class=&#34;o&#34;&gt;]=&lt;/span&gt;two#test&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;hash&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;chucky&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cheese
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;åŸºç¡€&#34;&gt;åŸºç¡€&lt;/h1&gt;
&lt;h2 id=&#34;uri--url&#34;&gt;URI &amp;amp; URL&lt;/h2&gt;
&lt;p&gt;The difference between them is straightforward after knowing their definitions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Uniform Resource Identifier (URI)&lt;/strong&gt; âˆ’ a sequence of characters that allows the complete identification of any abstract or physical resource&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Uniform Resource Locator (URL)&lt;/strong&gt; âˆ’ a subset of URI that, in addition to identifying where a resource is available, describes the primary mechanism to access it&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Every URI, regardless if itâ€™s a URL or not, follows a particular form:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;scheme:[//authority][/path][?query][#fragment]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Where each part is described as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;*scheme*&lt;/strong&gt; âˆ’ for URLs, is the name of the protocol used to access the resource, for other URIs, is a name that refers to a specification for assigning identifiers within that scheme&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;authority&lt;/strong&gt; âˆ’ an optional part comprised of user authentication information, a host and an optional port&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;*path*&lt;/strong&gt; âˆ’ it serves to identify a resource within the scope of its &lt;em&gt;scheme&lt;/em&gt; and &lt;em&gt;authority&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;*query*&lt;/strong&gt; âˆ’ additional data that, along with the &lt;em&gt;path,&lt;/em&gt; serves to identify a resource. For URLs, this is the query string&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;*fragment*&lt;/strong&gt; âˆ’ an optional identifier to a specific part of the resource&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;To easily identify if a particular URI is also a URL, we can check its scheme&lt;/strong&gt;. Every URL has to start with any of these schemes: &lt;em&gt;ftp&lt;/em&gt;, &lt;em&gt;http&lt;/em&gt;, &lt;em&gt;https,&lt;/em&gt; &lt;em&gt;gopher&lt;/em&gt;, &lt;em&gt;mailto&lt;/em&gt;, &lt;em&gt;news&lt;/em&gt;, &lt;em&gt;nntp&lt;/em&gt;, &lt;em&gt;telnet&lt;/em&gt;, &lt;em&gt;wais&lt;/em&gt;, &lt;em&gt;file&lt;/em&gt;, or &lt;em&gt;prospero&lt;/em&gt;. If it doesnâ€™t start with it, then itâ€™s not a URL.&lt;/p&gt;
&lt;h1 id=&#34;è¯·æ±‚&#34;&gt;è¯·æ±‚&lt;/h1&gt;
&lt;h1 id=&#34;å“åº”&#34;&gt;å“åº”&lt;/h1&gt;
&lt;h2 id=&#34;å¸¸ç”¨å“åº”å¤´&#34;&gt;å¸¸ç”¨å“åº”å¤´&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Content-Disposition&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Content-Disposition å±æ€§æ˜¯ä½œä¸ºå¯¹ä¸‹è½½æ–‡ä»¶çš„ä¸€ä¸ªæ ‡è¯†å­—æ®µï¼Œå±æ€§æœ‰ä¸¤ç§ç±»å‹: inline å°†æ–‡ä»¶å†…å®¹ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢, attachment å¼¹å‡ºå¯¹è¯æ¡†è®©ç”¨æˆ·ä¸‹è½½:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Content-Type: image/jpeg
Content-Disposition: inline;filename=hello.jpg
Content-Description: just a small picture of me
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;ç¼“å­˜&#34;&gt;ç¼“å­˜&lt;/h1&gt;
&lt;h1 id=&#34;tcp&#34;&gt;TCP&lt;/h1&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/48391511-ea06ba00-e741-11e8-832f-ac9d994f0b21.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸º Linux ä¸åƒå…¶ä»–æ“ä½œç³»ç»Ÿåœ¨æ”¶åˆ° SYN ä¸ºè¯¥è¿æ¥ç«‹é©¬åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ç”¨äºå­˜å‚¨ç›¸å…³çš„æ•°æ®å’Œç»“æ„ï¼Œè€Œæ˜¯å»¶è¿Ÿåˆ°æ¥æ”¶åˆ° client çš„ ACKï¼Œå³ä¸‰æ¬¡æ¡æ‰‹ çœŸæ­£å®Œæˆåæ‰åˆ†é…ç©ºé—´ï¼Œè¿™æ˜¯ä¸ºäº†é˜²èŒƒ SYN flooding æ”»å‡»ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç° client ç«¯æœª ESTABLISHED çŠ¶æ€ï¼Œserver ä¸º SYN_RECV çŠ¶æ€ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CLOSED&lt;/th&gt;
&lt;th&gt;æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªå¥—æ¥å­—[netstat æ— æ³•æ˜¾ç¤º closed çŠ¶æ€]&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LISTEN&lt;/td&gt;
&lt;td&gt;å¥—æ¥å­—æ­£åœ¨ç›‘å¬è¿æ¥[è°ƒç”¨ listen å]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYN_SENT&lt;/td&gt;
&lt;td&gt;å¥—æ¥å­—æ­£åœ¨è¯•å›¾ä¸»åŠ¨å»ºç«‹è¿æ¥[å‘é€ SYN åè¿˜æ²¡æœ‰æ”¶åˆ° ACK]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYN_RECEIVED&lt;/td&gt;
&lt;td&gt;æ­£åœ¨å¤„äºè¿æ¥çš„åˆå§‹åŒæ­¥çŠ¶æ€[æ”¶åˆ°å¯¹æ–¹çš„ SYNï¼Œä½†è¿˜æ²¡æ”¶åˆ°è‡ªå·±å‘è¿‡å»çš„ SYN çš„ ACK]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ESTABLISHED&lt;/td&gt;
&lt;td&gt;è¿æ¥å·²å»ºç«‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CLOSE_WAIT&lt;/td&gt;
&lt;td&gt;è¿œç¨‹å¥—æ¥å­—å·²ç»å…³é—­ï¼šæ­£åœ¨ç­‰å¾…å…³é—­è¿™ä¸ªå¥—æ¥å­—[è¢«åŠ¨å…³é—­çš„ä¸€æ–¹æ”¶åˆ° FIN]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FIN_WAIT_1&lt;/td&gt;
&lt;td&gt;å¥—æ¥å­—å·²å…³é—­ï¼Œæ­£åœ¨å…³é—­è¿æ¥[å‘é€ FINï¼Œæ²¡æœ‰æ”¶åˆ° ACK ä¹Ÿæ²¡æœ‰æ”¶åˆ° FIN]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CLOSING&lt;/td&gt;
&lt;td&gt;å¥—æ¥å­—å·²å…³é—­ï¼Œè¿œç¨‹å¥—æ¥å­—æ­£åœ¨å…³é—­ï¼Œæš‚æ—¶æŒ‚èµ·å…³é—­ç¡®è®¤[åœ¨ FIN_WAIT_1 çŠ¶æ€ä¸‹æ”¶åˆ°è¢«åŠ¨æ–¹çš„ FIN]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LAST_ACK&lt;/td&gt;
&lt;td&gt;è¿œç¨‹å¥—æ¥å­—å·²å…³é—­ï¼Œæ­£åœ¨ç­‰å¾…æœ¬åœ°å¥—æ¥å­—çš„å…³é—­ç¡®è®¤[è¢«åŠ¨æ–¹åœ¨ CLOSE_WAIT çŠ¶æ€ä¸‹å‘é€ FIN]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FIN_WAIT_2&lt;/td&gt;
&lt;td&gt;å¥—æ¥å­—å·²å…³é—­ï¼Œæ­£åœ¨ç­‰å¾…è¿œç¨‹å¥—æ¥å­—å…³é—­[åœ¨ FIN_WAIT_1 çŠ¶æ€ä¸‹æ”¶åˆ°å‘è¿‡å» FIN å¯¹åº”çš„ ACK]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TIME_WAIT&lt;/td&gt;
&lt;td&gt;è¿™ä¸ªå¥—æ¥å­—å·²ç»å…³é—­ï¼Œæ­£åœ¨ç­‰å¾…è¿œç¨‹å¥—æ¥å­—çš„å…³é—­ä¼ é€[FINã€ACKã€FINã€ACK éƒ½å®Œæ¯•ï¼Œè¿™æ˜¯ä¸»åŠ¨æ–¹çš„æœ€åä¸€ä¸ªçŠ¶æ€ï¼Œåœ¨è¿‡äº† 2MSL æ—¶é—´åå˜ä¸º CLOSED çŠ¶æ€]&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TCP åè®®è§„å®šï¼Œå¯¹äºå·²ç»å»ºç«‹çš„è¿æ¥ï¼Œç½‘ç»œåŒæ–¹è¦è¿›è¡Œå››æ¬¡æ¡æ‰‹æ‰èƒ½æˆåŠŸæ–­å¼€è¿æ¥ï¼Œå¦‚æœç¼ºå°‘äº†å…¶ä¸­æŸä¸ªæ­¥éª¤ï¼Œå°†ä¼šä½¿è¿æ¥å¤„äºå‡æ­»çŠ¶æ€ï¼Œè¿æ¥æœ¬èº«å ç”¨çš„èµ„æºä¸ä¼šè¢«é‡Šæ”¾ã€‚ç½‘ç»œæœåŠ¡å™¨ç¨‹åºè¦åŒæ—¶ç®¡ç†å¤§é‡è¿æ¥ï¼Œæ‰€ä»¥å¾ˆæœ‰å¿…è¦ä¿è¯æ— ç”¨è¿æ¥å®Œå…¨æ–­å¼€ï¼Œå¦åˆ™å¤§é‡åƒµæ­»çš„è¿æ¥ä¼šæµªè´¹è®¸å¤šæœåŠ¡å™¨èµ„æºã€‚åœ¨ä¼—å¤š TCP çŠ¶æ€ä¸­ï¼Œæœ€å€¼å¾—æ³¨æ„çš„çŠ¶æ€æœ‰ä¸¤ä¸ªï¼šCLOSE_WAIT å’Œ TIME_WAITã€‚&lt;/p&gt;
&lt;p&gt;CLOSE_WAIT å¯¹æ–¹ä¸»åŠ¨å…³é—­è¿æ¥æˆ–è€…ç½‘ç»œå¼‚å¸¸å¯¼è‡´è¿æ¥ä¸­æ–­ï¼Œè¿™æ—¶æˆ‘æ–¹çš„çŠ¶æ€ä¼šå˜æˆ CLOSE_WAIT æ­¤æ—¶æˆ‘æ–¹è¦è°ƒç”¨ close()æ¥ä½¿å¾—è¿æ¥æ­£ç¡®å…³é—­ï¼›TIME_WAIT æ˜¯æˆ‘æ–¹ä¸»åŠ¨è°ƒç”¨ close()æ–­å¼€è¿æ¥ï¼Œæ”¶åˆ°å¯¹æ–¹ç¡®è®¤åçŠ¶æ€å˜ä¸º TIME_WAITã€‚TCP åè®®è§„å®š TIME_WAIT çŠ¶æ€ä¼šä¸€ç›´æŒç»­ 2MSL(å³ä¸¤å€çš„åˆ†æ®µæœ€å¤§ç”Ÿå­˜æœŸ)ï¼Œä»¥æ­¤æ¥ç¡®ä¿æ—§çš„è¿æ¥çŠ¶æ€ä¸ä¼šå¯¹æ–°è¿æ¥äº§ç”Ÿå½±å“ã€‚å¤„äº TIME_WAIT çŠ¶æ€çš„è¿æ¥å ç”¨çš„èµ„æºä¸ä¼šè¢«å†…æ ¸é‡Šæ”¾ï¼Œæ‰€ä»¥ä½œä¸ºæœåŠ¡å™¨ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä¸è¦ä¸»åŠ¨æ–­å¼€è¿æ¥ï¼Œä»¥å‡å°‘ TIME_WAIT çŠ¶æ€é€ æˆçš„èµ„æºæµªè´¹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;https&#34;&gt;HTTPS&lt;/h1&gt;
&lt;p&gt;HTTPS è¦ä½¿å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„é€šä¿¡è¿‡ç¨‹å¾—åˆ°å®‰å…¨ä¿è¯ï¼Œå¿…é¡»ä½¿ç”¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œä½†æ˜¯åå•†å¯¹ç§°åŠ å¯†ç®—æ³•çš„è¿‡ç¨‹ï¼Œéœ€è¦ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•æ¥ä¿è¯å®‰å…¨ï¼Œç„¶è€Œç›´æ¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„è¿‡ç¨‹æœ¬èº«ä¹Ÿä¸å®‰å…¨ï¼Œä¼šæœ‰ä¸­é—´äººç¯¡æ”¹å…¬é’¥çš„å¯èƒ½æ€§ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¸ç›´æ¥ä½¿ç”¨å…¬é’¥ï¼Œè€Œæ˜¯ä½¿ç”¨æ•°å­—è¯ä¹¦ç­¾å‘æœºæ„é¢å‘çš„è¯ä¹¦æ¥ä¿è¯éå¯¹ç§°åŠ å¯†è¿‡ç¨‹æœ¬èº«çš„å®‰å…¨ã€‚è¿™æ ·é€šè¿‡è¿™äº›æœºåˆ¶åå•†å‡ºä¸€ä¸ªå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå°±æ­¤åŒæ–¹ä½¿ç”¨è¯¥ç®—æ³•è¿›è¡ŒåŠ å¯†è§£å¯†ã€‚ä»è€Œè§£å†³äº†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡å®‰å…¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://pic.imgdb.cn/item/611143f05132923bf8cd4086.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://pic.imgdb.cn/item/6111440f5132923bf8cda2a9.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&#34;http2&#34;&gt;HTTP/2&lt;/h1&gt;
&lt;h1 id=&#34;websocket&#34;&gt;WebSocket&lt;/h1&gt;
&lt;h1 id=&#34;dns&#34;&gt;DNS&lt;/h1&gt;
&lt;p&gt;Dns ç³»ç»Ÿä¸»è¦æ˜¯ä¾é æƒå¨ dnsï¼Œå’Œé€’å½’ dns æ¥å·¥ä½œçš„ã€‚æƒå¨ dns åšçš„äº‹æƒ…ä¸»è¦æ˜¯ç®¡ç†æŸä¸ªæˆ–å¤šä¸ªç‰¹å®šåŸŸçš„ dns æœåŠ¡ã€‚ä¸€èˆ¬å¤§ä¸€ç‚¹çš„å…¬å¸ï¼Œéƒ½æœ‰è‡ªå·±çš„æƒå¨ dns&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æ‰€æœ‰â€.alipay.comâ€ç»“å°¾çš„åŸŸåéƒ½ç”± alipay æ¥ç®¡ç†&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰â€.alibaba.comâ€ç»“å°¾çš„åŸŸåéƒ½ç”± alibaba æ¥ç®¡ç†(alipay å’Œ alibaba å®é™…åˆæ˜¯åŒä¸€å®¶å…¬å¸æ¥ç®¡ç†)&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰â€œ.baidu.comâ€ç»“å°¾çš„åŸŸåéƒ½ç”± baidu æ¥ç®¡ç†&lt;/p&gt;
&lt;p&gt;Alibaba å’Œ baidu å„ç®¡å„çš„ï¼Œæ²¡æœ‰äº¤äº’ã€‚ä¸€çº§åŸŸè¦å»æ ¹ä¸Šæ³¨å†Œï¼Œåƒ com åŸŸï¼Œnet åŸŸå°±å±äºä¸€çº§åŸŸ&lt;/p&gt;
&lt;p&gt;Com åŸŸï¼ˆä¹Ÿå°±æ˜¯æ‰€æœ‰ä»¥â€œ.comâ€ç»“å°¾çš„è€ç¥– com åŸŸï¼‰è¦å»æ ¹ä¸Šæ³¨å†Œ com åŸŸçš„åŸŸåæœåŠ¡å™¨ï¼ˆnameserverï¼‰åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;Net åŸŸï¼ˆä¹Ÿå°±æ˜¯æ‰€æœ‰ä»¥â€.netâ€ç»“å°¾çš„è€ç¥– net åŸŸï¼‰è¦å»æ ¹ä¸Šæ³¨å†Œ net åŸŸçš„åŸŸåæœåŠ¡å™¨ï¼ˆnameserverï¼‰åˆ—è¡¨ã€‚äºŒçº§åŸŸä¸€èˆ¬è¦åˆ°ä¸€çº§åŸŸä¸Šå»æ³¨å†Œ&lt;/p&gt;
&lt;p&gt;alibaba.com è¦åˆ° com åŸŸå»æ³¨å†Œè‡ªå·±çš„åŸŸåæœåŠ¡å™¨ nameserver åˆ—è¡¨&lt;/p&gt;
&lt;p&gt;Baidu.com ä¹Ÿè¦åˆ° com åŸŸå»æ³¨å†Œè‡ªå·±çš„åŸŸåæœåŠ¡å™¨ nameserver åˆ—è¡¨&lt;/p&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/40573917-a5b3da1c-60fb-11e8-8be9-7ad479c05daa.jpg&#34; alt=&#34;i20180520_181112_186&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;é€’å½’ DNSï¼ˆRecursion DNSï¼‰&lt;/p&gt;
&lt;p&gt;é‚£ç”¨æˆ·è®¿é—® &lt;a href=&#34;https://www.alibaba.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.alibaba.com&lt;/a&gt;ï¼Œè¯·æ±‚åˆæ˜¯å¦‚ä½•åˆ° alibaba çš„æƒå¨ dns æœåŠ¡å™¨ä¸Šé¢æ‰¾åˆ° &lt;a href=&#34;https://www.alibaba.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.alibaba.com&lt;/a&gt; çš„ ip å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™é€’å½’ dnsï¼ˆæˆ‘ä»¬ä¸€èˆ¬å«åš local dnsï¼‰å°±ä»‹å…¥äº†ã€‚é€’å½’ dns ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç¼“å­˜ dnsï¼Œlocal dnsï¼Œå…¬å…± dnsï¼ˆæä¾›ä¸“é—¨é€’å½’æœåŠ¡çš„ dnsï¼‰ï¼Œè¿™æ ·ä¸€æ­¥æ­¥çš„ä»æ ¹â€œ.â€åˆ°&amp;quot;com&amp;quot;,å†åˆ°â€œalibaba.comâ€,æœ€ååˆ°â€œwww.alibaba.comâ€çš„è¿‡ç¨‹å«åšé€’å½’è¿‡ç¨‹
Dns è¯·æ±‚ä¸€èˆ¬æ˜¯ udp æŠ¥æ–‡ï¼ˆä¹Ÿå¯ä»¥æ˜¯ tcp çš„æŠ¥æ–‡ï¼‰ï¼Œæ‰€ä»¥åŒæ ·ä¹Ÿæ˜¯è¦æœ‰æº ipï¼Œç›®æ ‡ ipï¼Œç­‰ç­‰è¿™äº›ç½‘ç»œæ•°æ®åŒ…çš„åº•å±‚ä¿¡æ¯ï¼Œé€’å½’è¿‡ç¨‹çš„æ¯ä¸€æ­¥ï¼Œç›®æ ‡ ip éƒ½å¿…é¡»æ˜¯å¾ˆæ˜ç¡®çš„
å„ä¸ªåŸŸçš„ namserver å®é™…ä¸Šæ˜¯æœ‰å¤šå°çš„ï¼Œæ¯”å¦‚æ ¹çš„ namserver çš„ ip æœ‰ 13 ä¸ªï¼Œcom çš„ namserver çš„ ip ä¹Ÿæœ‰ 13 ä¸ªï¼Œé€’å½’ dns åœ¨è¿›è¡Œé€’å½’æ—¶éœ€è¦é€‰æ‹©å…¶ä¸­ä¸€ä¸ª ip ä½œä¸ºç›®æ ‡ ip è¿›è¡Œä¸‹ä¸€æ­¥è¯·æ±‚å³å¯ï¼ˆç›®å‰ä¸»æµ dns å®ç°è½¯ä»¶ï¼Œå¦‚ bind ä¼šé€‰æ‹©å»¶æ—¶æœ€å°çš„é‚£ä¸ª ip ä½œä¸ºä¸‹ä¸€æ­¥è¯·æ±‚çš„ç›®æ ‡ ipï¼‰dns ä¸­ç”¨çš„å¤šçš„æ˜¯ anycast æŠ€æœ¯ï¼Œä¸€ä¸ª ip å®é™…ä¸Šå¯¹äº†å¾ˆå¤šä¸ªç‰©ç†æœåŠ¡å™¨ï¼Œåˆ°å„ä¸ªæƒå¨ nameserver ä¸Šï¼Œä¹Ÿæœ‰ lvsï¼Œospf ç­‰ç­‰ä¸€äº›è´Ÿè½½å‡è¡¡æŠ€æœ¯æŠŠåŒä¸€ä¸ª ip å¯¹åº”åˆ°å¤šä¸ªç‰©ç†æœåŠ¡å™¨ä¸Šé¢ã€‚
é€’å½’ dns è¿˜ä¼šæŠŠå›¾ä¸­é€’å½’ç¬¬ä¸€æ­¥ï¼Œç¬¬äºŒæ­¥ï¼Œç¬¬ä¸‰æ­¥å‘å„çº§æƒå¨ dns å‘èµ·çš„è¯·æ±‚ç»“æœç»™ç¼“å­˜åˆ°è‡ªå·±çš„å†…å­˜ä¸­ï¼Œç›´åˆ°è¿™æ¡ç»“æœçš„ ttl è¶…æœŸå¤±æ•ˆï¼ˆè¶…æœŸæ—¶é—´ä¸€èˆ¬ä¸ºå‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶å‡ å¤©ç­‰ç­‰ï¼‰ï¼Œåœ¨è¿™ä¸ª ttl è¶…æœŸä¹‹å‰ï¼Œä»»ä½•å…¶ä»–ç”¨æˆ·å‘èµ·çš„ &lt;a href=&#34;https://www.alibaba.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.alibaba.com&lt;/a&gt; çš„ dns è¯·æ±‚ï¼Œé€’å½’ dns éƒ½ä¼šç›´æ¥ä»è‡ªå·±çš„å†…å­˜ä¸­æŠŠç¼“å­˜ç»“æœç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆä¸ä¼šå»é€’å½’äº†ï¼‰ã€‚å¦‚æœ ttl è¶…æœŸäº†ï¼Œæ‰ä¼šå»é‡æ–°é€’å½’ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰çš„ dns æ—¢æ˜¯æƒå¨ dnsï¼Œåˆæ˜¯é€’å½’ dnsï¼Œè¿™å¹¶ä¸å†²çªï¼Œè¿™ç§ dns åœ¨é‡åˆ°åŸŸåæ˜¯è‡ªå·±ç®¡ç†çš„åŸŸçš„åç¼€ç»“å°¾æ—¶ï¼Œä¼šç›´æ¥è¿›è¡Œåº”ç­”ï¼ˆæ— è®ºæ˜¯å¦å­˜åœ¨ç»“æœï¼‰ï¼Œå¦‚æœä¸æ˜¯è‡ªå·±ç®¡ç†çš„åŸŸçš„åç¼€åŸŸåï¼Œåˆ™è¿›è¡Œé€’å½’ï¼ŒåŒæ ·å§é€’å½’ç»“æœè¿›è¡Œç¼“å­˜ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Raspberry-CheatSheet</title>
      <link>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/raspberry-cheatsheet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://ng-tech.icu/books/awesome-cheatsheets/infrastructure/raspberry-cheatsheet/</guid>
      <description>&lt;h1 id=&#34;raspberry-cheatsheet--æ ‘è“æ´¾èµ„æ–™ç´¢å¼•&#34;&gt;Raspberry CheatSheet | æ ‘è“æ´¾èµ„æ–™ç´¢å¼•&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;åšé€š BCM2837B0 SoCï¼Œé›†æˆå››æ ¸ ARM Cortex-A53ï¼ˆARMv8ï¼‰64 ä½@ 1.4GHz CPUï¼Œé›†æˆåšé€š Videocore-IV GPU&lt;/li&gt;
&lt;li&gt;å†…å­˜ï¼š1GB LPDDR2 SDRAM&lt;/li&gt;
&lt;li&gt;æœ‰çº¿ç½‘ç»œï¼šåƒå…†ä»¥å¤ªç½‘ï¼ˆé€šè¿‡ USB2.0 é€šé“ï¼Œæœ€å¤§ååé‡ 300Mbpsï¼‰&lt;/li&gt;
&lt;li&gt;æ— çº¿ç½‘ç»œ:2.4GHz å’Œ 5GHz åŒé¢‘ Wi-Fiï¼Œæ”¯æŒ 802.11b/g/n/ac&lt;/li&gt;
&lt;li&gt;è“ç‰™ï¼šè“ç‰™ 4.2&amp;amp;ä½åŠŸè€—è“ç‰™ï¼ˆBLEï¼‰&lt;/li&gt;
&lt;li&gt;å­˜å‚¨ï¼šMicro-SD&lt;/li&gt;
&lt;li&gt;å…¶ä»–æ¥å£ï¼šHDMIï¼Œ3.5mm æ¨¡æ‹ŸéŸ³é¢‘è§†é¢‘æ’å­”ï¼Œ4x USB 2.0ï¼Œä»¥å¤ªç½‘ï¼Œæ‘„åƒæœºä¸²è¡Œæ¥å£ï¼ˆCSIï¼‰ï¼Œæ˜¾ç¤ºå™¨ä¸²è¡Œæ¥å£ï¼ˆDSIï¼‰ï¼ŒMicroSD å¡åº§ï¼Œ40pin æ‰©å±•åŒæ’æ’é’ˆ&lt;/li&gt;
&lt;li&gt;å°ºå¯¸ï¼š82mmx 56mmx 19.5mmï¼Œ50 å…‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;å®‰è£…ä¸é…ç½®&#34;&gt;å®‰è£…ä¸é…ç½®&lt;/h1&gt;
&lt;h2 id=&#34;ç³»ç»Ÿå®‰è£…&#34;&gt;ç³»ç»Ÿå®‰è£…&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆéœ€è¦å‡†å¤‡ SD å¡å¹¶ä¸”å°†ç³»ç»Ÿçƒ§å½•åˆ°å…¶ä¸­ï¼Œåœ¨ MAC ç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡ df å‘½ä»¤æŸ¥çœ‹åˆ†åŒºæƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ df -lh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Filesystem     Size   Used  Avail Capacity iused               ifree %iused  Mounted on
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dev/disk1s1  234Gi  170Gi   60Gi    75% &lt;span class=&#34;m&#34;&gt;5903759&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;9223372036848872048&lt;/span&gt;    0%   /
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dev/disk1s4  234Gi  3.0Gi   60Gi     5%       &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;9223372036854775804&lt;/span&gt;    0%   /private/var/vm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/dev/disk4s1   15Gi  2.4Mi   15Gi     1%       &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;                   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;  100%   /Volumes/NO NAME
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¯é€‰ï¼Œæ ¼å¼åŒ–ç£ç›˜&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo diskutil eraseDisk FAT32 CAM_STORE MBRFormat /dev/disk4s1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¦‚æœæç¤º Resource Busyï¼Œåˆ™å¯è¿›è¡Œå¸è½½&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ diskutil unmount /dev/disk4s1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# çƒ§å†™ç³»ç»Ÿ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo dd &lt;span class=&#34;nv&#34;&gt;bs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;4m &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;rpi_35_v6_1_2_3_jessie_kernel_4_4_50.img &lt;span class=&#34;nv&#34;&gt;of&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/dev/disk4s1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¸è½½ç³»ç»Ÿ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ diskutil unmountDisk /dev/disk4s1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç³»ç»Ÿé…ç½®&#34;&gt;ç³»ç»Ÿé…ç½®&lt;/h2&gt;
&lt;p&gt;å¦‚æœé€šè¿‡ ssh è¿æ¥æ ‘è“æ´¾å‡ºç° Access denied è¿™ä¸ªæç¤ºåˆ™è¯´æ˜ ssh æœåŠ¡æ²¡æœ‰å¼€å¯ã€‚è¦æ‰‹åŠ¨å¼€å¯çš„è¯ï¼Œå’Œ WiFi é…ç½®ç›¸ä¼¼ï¼ŒåŒæ ·åœ¨ boot åˆ†åŒºæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç©ºç™½çš„å³å¯ï¼Œæ–‡ä»¶å‘½åä¸º sshã€‚æ³¨æ„è¦å°å†™ä¸”ä¸è¦æœ‰ä»»ä½•æ‰©å±•åã€‚&lt;/p&gt;
&lt;p&gt;æ ‘è“æ´¾åœ¨å¯åŠ¨ä¹‹åä¼šåœ¨æ£€æµ‹åˆ°è¿™ä¸ªæ–‡ä»¶ä¹‹åè‡ªåŠ¨å¯ç”¨ ssh æœåŠ¡ã€‚éšåå³å¯é€šè¿‡ç™»å½•è·¯ç”±å™¨æ‰¾åˆ°æ ‘è“æ´¾çš„ IP åœ°å€ï¼Œé€šè¿‡ ssh è¿æ¥åˆ°æ ‘è“æ´¾äº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è®¾ç½® root è´¦æˆ·å¯†ç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo passwd root
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è§£é” root&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo passwd --unlock root
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ su
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get remove python3-pip&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; sudo apt-get install python3-pip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç½‘ç»œé…ç½®&#34;&gt;ç½‘ç»œé…ç½®&lt;/h2&gt;
&lt;p&gt;ç”¨æˆ·å¯ä»¥åœ¨æœªå¯åŠ¨æ ‘è“æ´¾çš„çŠ¶æ€ä¸‹å•ç‹¬ä¿®æ”¹ /boot/wpa_supplicant.conf æ–‡ä»¶é…ç½® WiFi çš„ SSID å’Œå¯†ç ï¼Œè¿™æ ·æ ‘è“æ´¾å¯åŠ¨åä¼šè‡ªè¡Œè¯»å– wpa_supplicant.conf é…ç½®æ–‡ä»¶è¿æ¥ WiFi è®¾å¤‡ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1

# WiFi ä½¿ç”¨WPA/WPA2åŠ å¯†
network={
    ssid=&amp;#34;WiFi-A&amp;#34;
    psk=&amp;#34;12345678&amp;#34;
    key_mgmt=WPA-PSK

    # è¿æ¥ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆä¸å¯ä»¥æ˜¯è´Ÿæ•°ï¼‰
    priority=1
}

network={
    ssid=&amp;#34;WiFi-B&amp;#34;
    psk=&amp;#34;12345678&amp;#34;
    key_mgmt=WPA-PSK
    priority=2

    # è¿æ¥éšè— WiFi æ—¶éœ€è¦æŒ‡å®šè¯¥å€¼ä¸º 1
    scan_ssid=1
}

#  WiFi æ²¡æœ‰å¯†ç 
network={
    ssid=&amp;#34;ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰&amp;#34;
    key_mgmt=NONE
}

# WiFi ä½¿ç”¨WEPåŠ å¯†
network={
    ssid=&amp;#34;ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰&amp;#34;
    key_mgmt=NONE
    wep_key0=&amp;#34;ä½ çš„wifiå¯†ç &amp;#34;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;gpio&#34;&gt;GPIO&lt;/h1&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://imgsa.baidu.com/exp/pic/item/9304c888d43f8794e438169fd51b0ef41ad53a78.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;è¾“å‡º&#34;&gt;è¾“å‡º&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-py&#34; data-lang=&#34;py&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;RPi.GPIO&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;GPIO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setmode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BOARD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;destroy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;openLed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HIGH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HIGH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOW&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#    destroy()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;openLed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è¾“å…¥&#34;&gt;è¾“å…¥&lt;/h2&gt;
&lt;p&gt;
















  &lt;figure  &gt;
    &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
      &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://user-images.githubusercontent.com/5803001/44529356-7d6db780-a71e-11e8-8e9f-ee98249adeee.png&#34; alt=&#34;image&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
    &lt;/div&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-py&#34; data-lang=&#34;py&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;ch&#34;&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# encoding: utf-8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;RPi.GPIO&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;18&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‰é’®è¾“å‡ºé’ˆè„šè¿æ¥çš„GPIOå£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;btnR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;btnG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;btnB&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setmode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BCM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŒ‰é’®è¿æ¥çš„GPIOé’ˆè„šçš„æ¨¡å¼è®¾ç½®ä¸ºä¿¡å·è¾“å…¥æ¨¡å¼ï¼ŒåŒæ—¶é»˜è®¤æ‹‰é«˜GPIOå£ç”µå¹³ï¼Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å½“GNDæ²¡æœ‰è¢«æ¥é€šæ—¶ï¼ŒGPIOå£å¤„äºé«˜ç”µå¹³çŠ¶æ€ï¼Œå–çš„çš„å€¼ä¸º1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ³¨æ„åˆ°è¿™æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ï¼Œå¦‚æœä¸åœ¨ç¨‹åºé‡Œé¢è®¾ç½®ï¼Œé€šå¸¸çš„åšæ³•æ˜¯é€šè¿‡ä¸€ä¸ªä¸Šæ‹‰ç”µé˜»è¿æ¥åˆ°VCCä¸Šä½¿ä¹‹é»˜è®¤ä¿æŒé«˜ç”µå¹³&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;btnR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pull_up_down&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PUD_UP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;btnG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pull_up_down&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PUD_UP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;btnB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pull_up_down&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PUD_UP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;# æ£€æµ‹æŒ‰é’®1æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œå¦‚æœè¢«æŒ‰ä¸‹(ä½ç”µå¹³)ï¼Œåˆ™äº®çº¢ç¯(è¾“å‡ºä½ç”µå¹³)ï¼Œå¦åˆ™å…³çº¢ç¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;btnR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;# æ£€æµ‹æŒ‰é’®2æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œå¦‚æœè¢«æŒ‰ä¸‹(ä½ç”µå¹³)ï¼Œåˆ™äº®ç»¿ç¯(è¾“å‡ºä½ç”µå¹³)ï¼Œå¦åˆ™å…³ç»¿ç¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;btnG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;# æ£€æµ‹æŒ‰é’®3æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œå¦‚æœè¢«æŒ‰ä¸‹(ä½ç”µå¹³)ï¼Œåˆ™äº®è“ç¯(è¾“å‡ºä½ç”µå¹³)ï¼Œå¦åˆ™å…³è“ç¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;btnB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;KeyboardInterrupt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;RPi&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPIO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;è“ç‰™&#34;&gt;è“ç‰™&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Mini Bluetooth Speaker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get upgrade
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt-get install pi-bluetooth &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;already the newest version&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt-get install blueman pulseaudio pavucontrol pulseaudio-module-bluetooth
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo reboot
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hcitool dev  &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;look &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; bluetooth address of the built-in adapter&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; don&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;t see it:   sudo hciconfig
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;bluetoothctl
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# devices&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# power on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# pairable on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# discoverable on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# scan on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# devices&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Device 30:22:12:01:0C:52 Y88
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# paired-devices&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# agent on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# default-agent&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# trust 30:22:12:01:0C:52&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# pair 30:22:12:01:0C:52&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Attempting to pair with 30:22:12:01:0C:52
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;CHG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Device 30:22:12:01:0C:52 Connected: yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;CHG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Device 30:22:12:01:0C:52 Modalias: usb:v05ACp022Cd0100
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;CHG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Device 30:22:12:01:0C:52 UUIDs:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    00001108-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    0000110b-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    0000110c-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    0000110e-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    0000111e-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    00001124-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    00001200-0000-1000-8000-00805f9b34fb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;CHG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Device 30:22:12:01:0C:52 Paired: yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Pairing successful
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# paired-devices&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Device 30:22:12:01:0C:52 Y88
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# connect 30:22:12:01:0C:52&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Attempting to connect to 30:22:12:01:0C:52
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;CHG&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Device 30:22:12:01:0C:52 Connected: yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# exit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ alsamixer  &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; volume to 85% - normal&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt-get install omxplayer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ omxplayer YouBetterRun.mp3
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-py&#34; data-lang=&#34;py&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;subprocess&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;blue_it&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Bluetooth UP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;mplayer http://addressToSomeStream.com&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;waiting&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;waiting&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;killall -9 pulseaudio&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;pulseaudio --start&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Bluetooth DOWN&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;~/scripts/autopair&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;subprocess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;call&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;shell&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;blue_it&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;blue_it&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
  </channel>
</rss>
