<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="FFmpeg CheatSheet 基础使用 FFmpeg 可以使用下面的参数进行基本信息查询。例如，想查询一下现在使用的 FFmpeg 都支持哪些 filter，就可以用 ffmpeg -filters 来查询。详细参数说明如下： 命令 作用 ffmpeg -version 显示版本 -formats 显示可用的格式（包括设备） -demuxers 显示可用的"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/awesome-cheatsheets/02.frontend/cg/ffmpeg-cheatsheet/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.fab3cd1900ae35687457073b2d518207.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/awesome-cheatsheets/02.frontend/cg/ffmpeg-cheatsheet/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/awesome-cheatsheets/02.frontend/cg/ffmpeg-cheatsheet/"><meta property="og:title" content="FFmpeg-CheatSheet | Next-gen Tech Edu"><meta property="og:description" content="FFmpeg CheatSheet 基础使用 FFmpeg 可以使用下面的参数进行基本信息查询。例如，想查询一下现在使用的 FFmpeg 都支持哪些 filter，就可以用 ffmpeg -filters 来查询。详细参数说明如下： 命令 作用 ffmpeg -version 显示版本 -formats 显示可用的格式（包括设备） -demuxers 显示可用的"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>FFmpeg-CheatSheet | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=8da59dffaee71b5a8a41b05c86eb39eb><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">CG</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-iddb95fb1a1b7dbfd4e56712a4ad26fa61")' href=#iddb95fb1a1b7dbfd4e56712a4ad26fa61 aria-expanded=false aria-controls=iddb95fb1a1b7dbfd4e56712a4ad26fa61 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/02.frontend/>02.Frontend</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#iddb95fb1a1b7dbfd4e56712a4ad26fa61 aria-expanded=false aria-controls=iddb95fb1a1b7dbfd4e56712a4ad26fa61><i class="fa-solid fa-angle-down" id=caret-iddb95fb1a1b7dbfd4e56712a4ad26fa61></i></a></div><ul class="nav docs-sidenav collapse show" id=iddb95fb1a1b7dbfd4e56712a4ad26fa61><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb41085252cf789f14876f3ee5f4e554a")' href=#idb41085252cf789f14876f3ee5f4e554a aria-expanded=false aria-controls=idb41085252cf789f14876f3ee5f4e554a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/02.frontend/cg/>CG</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb41085252cf789f14876f3ee5f4e554a aria-expanded=false aria-controls=idb41085252cf789f14876f3ee5f4e554a><i class="fa-solid fa-angle-down" id=caret-idb41085252cf789f14876f3ee5f4e554a></i></a></div><ul class="nav docs-sidenav collapse show" id=idb41085252cf789f14876f3ee5f4e554a><li class="child level active"><a href=/books/awesome-cheatsheets/02.frontend/cg/ffmpeg-cheatsheet/>FFmpeg-CheatSheet</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idfe710876abb605c3a6a7c33c2bfef272")' href=#idfe710876abb605c3a6a7c33c2bfef272 aria-expanded=false aria-controls=idfe710876abb605c3a6a7c33c2bfef272 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/02.frontend/cg/opengl/>OpenGL</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idfe710876abb605c3a6a7c33c2bfef272 aria-expanded=false aria-controls=idfe710876abb605c3a6a7c33c2bfef272><i class="fa-solid fa-angle-right" id=caret-idfe710876abb605c3a6a7c33c2bfef272></i></a></div><ul class="nav docs-sidenav collapse" id=idfe710876abb605c3a6a7c33c2bfef272><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/cg/opengl/learn-opengl-in-y-minutes/>Learn OpenGL in Y minutes</a></li></ul></div><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/cg/three.js-cheatsheet/>Three.js-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ided1d345b067064cd90f2ae7cc47db4f4")' href=#ided1d345b067064cd90f2ae7cc47db4f4 aria-expanded=false aria-controls=ided1d345b067064cd90f2ae7cc47db4f4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/02.frontend/mobile/>Mobile</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ided1d345b067064cd90f2ae7cc47db4f4 aria-expanded=false aria-controls=ided1d345b067064cd90f2ae7cc47db4f4><i class="fa-solid fa-angle-right" id=caret-ided1d345b067064cd90f2ae7cc47db4f4></i></a></div><ul class="nav docs-sidenav collapse" id=ided1d345b067064cd90f2ae7cc47db4f4><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/mobile/flutter-cheatsheet/>Flutter-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2e2050f6a1b9aab5144111e4737232bf")' href=#id2e2050f6a1b9aab5144111e4737232bf aria-expanded=false aria-controls=id2e2050f6a1b9aab5144111e4737232bf aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/02.frontend/web/>Web</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2e2050f6a1b9aab5144111e4737232bf aria-expanded=false aria-controls=id2e2050f6a1b9aab5144111e4737232bf><i class="fa-solid fa-angle-right" id=caret-id2e2050f6a1b9aab5144111e4737232bf></i></a></div><ul class="nav docs-sidenav collapse" id=id2e2050f6a1b9aab5144111e4737232bf><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/css-cheatsheet/>CSS-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/dom-cheatsheet/>DOM-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/node-cheatsheet/>Node-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/react-cheatsheet/>React-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/redux-cheatsheet/>Redux-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/vue-cheatsheet/>Vue-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/web-bundler-cheatsheet/>Web-Bundler-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/web-tuning-cheatsheet/>Web-Tuning-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/webassembly-cheatsheet/>WebAssembly-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/02.frontend/web/webpack-cheatsheet/>Webpack-CheatSheet</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#参数>参数</a></li></ul><ul><li><a href=#windows>Windows</a></li><li><a href=#mac>Mac</a></li><li><a href=#其他直播>其他直播</a></li></ul><ul><li><a href=#视频联接>视频联接</a></li><li><a href=#分解复用>分解/复用</a></li><li><a href=#格式转换与压缩>格式转换与压缩</a><ul><li><a href=#图视互转>图/视互转</a></li></ul></li><li><a href=#对称视频与画中画>对称视频与画中画</a></li><li><a href=#处理原始数据>处理原始数据</a></li></ul><ul><li><a href=#水印>水印</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>FFmpeg-CheatSheet</h1><div class=article-style><h1 id=ffmpeg-cheatsheet>FFmpeg CheatSheet</h1><h1 id=基础使用>基础使用</h1><p>FFmpeg 可以使用下面的参数进行基本信息查询。例如，想查询一下现在使用的 FFmpeg 都支持哪些 filter，就可以用 ffmpeg -filters 来查询。详细参数说明如下：</p><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>ffmpeg -version</td><td>显示版本</td></tr><tr><td>-formats</td><td>显示可用的格式（包括设备）</td></tr><tr><td>-demuxers</td><td>显示可用的 demuxers</td></tr><tr><td>-muxers</td><td>显示可用的 muxers</td></tr><tr><td>-devices</td><td>显示可用的设备</td></tr><tr><td>-codecs</td><td>显示已知的所有编解码器</td></tr><tr><td>-decoders</td><td>显示可用的解码器</td></tr><tr><td>-encoders</td><td>显示所有可用的编码器</td></tr><tr><td>-bsfs</td><td>显示可用的比特流 filter</td></tr><tr><td>-protocols</td><td>显示可用的协议</td></tr><tr><td>-filters</td><td>显示可用的过滤器</td></tr><tr><td>-pix_fmts</td><td>显示可用的像素格式</td></tr><tr><td>-sample_fmts</td><td>显示可用的采样格式</td></tr><tr><td>-layouts</td><td>显示 channel 名称和标准 channel 布局</td></tr><tr><td>-colors</td><td>显示识别的颜色名称</td></tr></tbody></table><h2 id=参数>参数</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Common switches</span>
</span></span><span class=line><span class=cl>-codecs          <span class=c1># list codecs</span>
</span></span><span class=line><span class=cl>-c:v             <span class=c1># video codec (-vcodec): &#39;copy&#39; to copy stream</span>
</span></span><span class=line><span class=cl>-c:a             <span class=c1># audio codec (-acodec)</span>
</span></span><span class=line><span class=cl>-fs SIZE         <span class=c1># limit file size (bytes)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Audio</span>
</span></span><span class=line><span class=cl>-aq QUALITY      <span class=c1># audio quality (codec-specific)</span>
</span></span><span class=line><span class=cl>-ar <span class=m>44100</span>        <span class=c1># audio sample rate (hz)</span>
</span></span><span class=line><span class=cl>-ac <span class=m>1</span>            <span class=c1># audio channels (1=mono, 2=stereo)</span>
</span></span><span class=line><span class=cl>-an              <span class=c1># no audio</span>
</span></span><span class=line><span class=cl>-vol N           <span class=c1># volume (256=normal)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Bitrate</span>
</span></span><span class=line><span class=cl>-b:v 1M          <span class=c1># video bitrate (1M = 1Mbit/s)</span>
</span></span><span class=line><span class=cl>-b:a 1M          <span class=c1># audio bitrate</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Video</span>
</span></span><span class=line><span class=cl>-aspect RATIO    <span class=c1># aspect ratio (4:3, 16:9, or 1.25)</span>
</span></span><span class=line><span class=cl>-r RATE          <span class=c1># frame rate per sec</span>
</span></span><span class=line><span class=cl>-s WIDTHxHEIGHT  <span class=c1># frame size</span>
</span></span><span class=line><span class=cl>-vn              <span class=c1># no video</span>
</span></span></code></pre></div><h1 id=录制>录制</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 查找设备名</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Windows</span>
</span></span><span class=line><span class=cl>$ ffmpeg -list_devices <span class=nb>true</span> -f dshow -i dummy
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## MAC</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f avfoundation -list_devices <span class=nb>true</span> -i <span class=s2>&#34;&#34;</span>
</span></span></code></pre></div><h2 id=windows>Windows</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>$</span> <span class=nx>ffmpeg</span> <span class=o>-</span><span class=nx>f</span> <span class=nx>dshow</span> <span class=o>-</span><span class=nx>i</span> <span class=nx>video</span><span class=p>=</span><span class=s>&#34;Virtual-Camera&#34;</span> <span class=o>-</span><span class=nx>preset</span> <span class=nx>ultrafast</span> <span class=o>-</span><span class=nx>vcodec</span> <span class=nx>libx264</span> <span class=o>-</span><span class=nx>tune</span> <span class=nx>zerolatency</span> <span class=o>-</span><span class=nx>b</span> <span class=mi>900</span><span class=nx>k</span> <span class=o>-</span><span class=nx>f</span> <span class=nx>mpegts</span> <span class=nx>udp</span><span class=p>:</span><span class=c1>//10.1.0.102:1234
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>$</span> <span class=nx>ffmpeg</span> <span class=o>-</span><span class=nx>f</span> <span class=nx>dshow</span> <span class=o>-</span><span class=nx>i</span> <span class=nx>video</span><span class=p>=</span><span class=s>&#34;screen-capture-recorder&#34;</span><span class=p>:</span><span class=nx>audio</span><span class=p>=</span><span class=s>&#34;Stereo Mix (IDT High Definition&#34;</span> \
</span></span><span class=line><span class=cl><span class=o>-</span><span class=nx>vcodec</span> <span class=nx>libx264</span> <span class=o>-</span><span class=nx>preset</span> <span class=nx>ultrafast</span> <span class=o>-</span><span class=nx>tune</span> <span class=nx>zerolatency</span> <span class=o>-</span><span class=nx>r</span> <span class=mi>10</span> <span class=o>-</span><span class=nx>async</span> <span class=mi>1</span> <span class=o>-</span><span class=nx>acodec</span> <span class=nx>libmp3lame</span> <span class=o>-</span><span class=nx>ab</span> <span class=mi>24</span><span class=nx>k</span> <span class=o>-</span><span class=nx>ar</span> <span class=mi>22050</span> <span class=o>-</span><span class=nx>bsf</span><span class=p>:</span><span class=nx>v</span> <span class=nx>h264_mp4toannexb</span> \
</span></span><span class=line><span class=cl><span class=o>-</span><span class=nx>maxrate</span> <span class=mi>750</span><span class=nx>k</span> <span class=o>-</span><span class=nx>bufsize</span> <span class=mi>3000</span><span class=nx>k</span> <span class=o>-</span><span class=nx>f</span> <span class=nx>mpegts</span> <span class=nx>udp</span><span class=p>:</span><span class=c1>//192.168.5.215:48550
</span></span></span></code></pre></div><ul><li><code>-f fshow</code>: windows system drivers for capturing video and audio</li><li><code>-f v4l2</code>: linux system drivers for capturing video</li><li><code>-f alsa</code>: linux system drivers for capturing audio</li><li><code>-i</code>: ffmpeg option that defines <strong>input</strong></li><li><code>-vcodec libx264</code>: raw video from camera will be encoded using H264 video codec</li><li><code>-r 10</code>: video FPS (frames per second)</li><li><code>-b:v 512k</code>: video bitrate Kb/s (kilo bits per second)</li><li><code>-s 640x360</code>: video width and height</li><li><code>-acodec aac</code>: raw audio from microphone will be encoded using AAC audio codec</li><li><code>-ac 2</code>: 2 audio channels (stereo)</li><li><code>-ab 32k</code>: audio bitrate in Kb/s</li><li><code>-ar 44100</code>: audio sampling rate 44.1 KHz</li><li><code>-f mpegts</code>: video and audio will be packed into <a href=https://en.wikipedia.org/wiki/MPEG_transport_stream target=_blank rel=noopener>MPEG transport stream (MPEG TS)</a></li><li><code>udp://192.168.1.4:5000</code>: MPEG transport stream is sent via UDP protocol to computer with IP address 192.168.1.4 on IP port 5000.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -y -loglevel warning -f dshow -i <span class=nv>video</span><span class=o>=</span><span class=s2>&#34;screen-capture-recorder&#34;</span> -vf <span class=nv>crop</span><span class=o>=</span>690:388:136:0 -r <span class=m>30</span> -s 962x388 -threads <span class=m>2</span> -vcodec libx264 -vpre baseline -vpre my_ffpreset -f flv rtmp:///live/myStream.sdp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输出为 MP4</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f dshow -rtbufsize 1000000k -s 640×480 -r <span class=m>30</span> -i <span class=nv>video</span><span class=o>=</span>”1714-INOGENI 4K2USB3″ -an -c:v libx264 -q <span class=m>0</span> -f h264 – <span class=p>|</span> ffmpeg -f h264 -i – -an -c:v copy -f mp4 file.mp4 -an -c:v copy -f h264 pipe:play <span class=p>|</span> ffplay -i pipe:play
</span></span></code></pre></div><p>屏幕录制：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 屏幕录制并保存成文件</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f gdigrab -i desktop eguid.mp4
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 屏幕录制并推流</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f gdigrab -i desktop -vcodec libx264 -preset:v ultrafast -tune:v zerolatency -f flv rtmp://eguid.cc:1935/rtmp/destop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 视频文件推流</span>
</span></span><span class=line><span class=cl>$ ffmpeg -re -i eguid.flv -vcodec copy -acodec copy -f flv -y rtmp://eguid.cc:1935/rtmp/eguid
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 转流（rtsp转rtmp为例）</span>
</span></span><span class=line><span class=cl>$ ffmpeg -i rtsp://184.72.239.149/vod/mp4://BigBuckBunny_175k.mov -rtsp_transport tcp -vcodec h264 -acodec aac -f flv rtmp://eguid.cc:1935/rtmp/eguid
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 拉流</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- ffmpeg -i rtmp://eguid.cc:1935/rtmp/eguid -vcodec h264 -f flv -acodec aac -ac <span class=m>2</span> eguid.flv
</span></span></code></pre></div><h2 id=mac>Mac</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 录屏+声音</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f avfoundation -i <span class=m>1</span> -r <span class=m>30</span> out.yuv
</span></span><span class=line><span class=cl>-f 指定使用 avfoundation 采集数据。
</span></span><span class=line><span class=cl>-i 指定从哪儿采集数据，它是一个文件索引号。在我的MAC上，1代表桌面（可以通过上面的命令查询设备索引号）。
</span></span><span class=line><span class=cl>-r 指定帧率。按ffmpeg官方文档说-r与-framerate作用相同，但实际测试时发现不同。-framerate 用于限制输入，而-r用于限制输出。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 录视频</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f avfoundation -i 1:0 -r 29.97 -c:v libx264 -crf <span class=m>0</span> -c:a libfdk_aac -profile:a aac_he_v2 -b:a 32k out.flv
</span></span><span class=line><span class=cl>-i 1:0 冒号前面的 “1” 代表的屏幕索引号。冒号后面的<span class=s2>&#34;0&#34;</span>代表的声音索相号。
</span></span><span class=line><span class=cl>-c:v 与参数 -vcodec 一样，表示视频编码器。c 是 codec 的缩写，v 是video的缩写。
</span></span><span class=line><span class=cl>-crf 是 x264 的参数。0 表式无损压缩。
</span></span><span class=line><span class=cl>-c:a 与参数 -acodec 一样，表示音频编码器。
</span></span><span class=line><span class=cl>-profile 是 fdk_aac 的参数。aac_he_v2 表式使用 AAC_HE v2 压缩数据。
</span></span><span class=line><span class=cl>-b:a 指定音频码率。b 是 bitrate的缩写, a是 audio的缩与。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 录音</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f avfoundation -i :0 out.wav
</span></span><span class=line><span class=cl><span class=c1># 录制音频裸数据</span>
</span></span><span class=line><span class=cl>$ ffmpeg -f avfoundation -i :0 -ar <span class=m>44100</span> -f s16le out.pcm
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#! /bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Diffusion bilibili live avec ffmpeg</span>
</span></span><span class=line><span class=cl><span class=c1># Make sure you have FFmpeg installed in your mac</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># list avfoundation devices</span>
</span></span><span class=line><span class=cl>ffmpeg -f avfoundation -list_devices <span class=nb>true</span> -i <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># change the param after `-i` and `-f flv`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># use 140m mermory</span>
</span></span><span class=line><span class=cl>ffmpeg <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f avfoundation <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -re -i <span class=s2>&#34;2&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -vcodec libx264 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -preset ultrafast <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -acodec aac <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -ar <span class=m>44100</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -ac <span class=m>1</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f flv <span class=s2>&#34;rtmp://example.com/path?key=xx&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 560m mermory 90% cpu</span>
</span></span><span class=line><span class=cl>ffmpeg <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f avfoundation <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -video_size 1920x1080 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -framerate <span class=m>30</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -i <span class=s2>&#34;2:0&#34;</span> -ac <span class=m>2</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -vcodec libx264 -maxrate 2000k <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -bufsize 2000k -acodec libmp3lame -ar <span class=m>44100</span> -b:a 128k <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -f flv <span class=s2>&#34;rtmp://example.com/path?key=xx&#34;</span>
</span></span></code></pre></div><h2 id=其他直播>其他直播</h2><ul><li><p>推流: <code>ffmpeg -re -i out.mp4 -c copy -f flv rtmp://server/live/streamName</code></p></li><li><p>拉流保存: <code>ffmpeg -i rtmp://server/live/streamName -c copy dump.flv</code></p></li><li><p>转流: <code>ffmpeg -i rtmp://server/live/originalStream -c:a copy -c:v copy -f flv rtmp://server/live/h264Stream</code></p></li><li><p>实时推流: <code>ffmpeg -framerate 15 -f avfoundation -i "1" -s 1280x720 -c:v libx264 -f flv rtmp://localhost:1935/live/room</code></p></li></ul><h1 id=视频处理>视频处理</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -framerate <span class=m>1</span> -pattern_type glob -i <span class=s1>&#39;*.bmp&#39;</span> -c:v libx264 -r <span class=m>30</span> -pix_fmt yuv420p out.mp4
</span></span></code></pre></div><h2 id=视频联接>视频联接</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>:: Create File List
</span></span><span class=line><span class=cl><span class=nb>echo</span> file file1.mp4 &gt;  mylist.txt
</span></span><span class=line><span class=cl><span class=nb>echo</span> file file2.mp4 &gt;&gt; mylist.txt
</span></span><span class=line><span class=cl><span class=nb>echo</span> file file3.mp4 &gt;&gt; mylist.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Windows 下视频连接</span>
</span></span><span class=line><span class=cl>:: Concatenate Files
</span></span><span class=line><span class=cl>$ ffmpeg -f concat -i mylist.txt -c copy output.mp4
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>:: Create File List
</span></span><span class=line><span class=cl><span class=k>for</span> %%i in <span class=o>(</span>*.mp4<span class=o>)</span> <span class=k>do</span> <span class=nb>echo</span> file <span class=s1>&#39;%%i&#39;</span>&gt;&gt; mylist.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>:: Concatenate Files
</span></span><span class=line><span class=cl>$ ffmpeg -f concat -safe <span class=m>0</span> -i mylist.txt -c copy output.mp4
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ ffmpeg -f avfoundation -i <span class=s2>&#34;1&#34;</span> -framerate <span class=m>30</span> -f avfoundation -i <span class=s2>&#34;0:0&#34;</span> -r <span class=m>30</span> -c:v libx264 -preset ultrafast -c:a libfdk_aac -profile:a aac_he_v2 -ar <span class=m>44100</span> -ac <span class=m>2</span> -filter_complex <span class=s2>&#34;[0:v]scale=320:240[a];[a]pad=640:240[b];[b][1:v]overlay=320:0[out]&#34;</span> -map <span class=s2>&#34;[out]&#34;</span> -movflags faststart -map 1:a c.mp4
</span></span></code></pre></div><h2 id=分解复用>分解/复用</h2><ul><li><strong>抽取音频流</strong></li></ul><p><code>ffmpeg -i input.mp4 -acodec copy -vn out.aac</code></p><p>acodec: 指定音频编码器，copy 指明只拷贝，不做编解码。
vn: v 代表视频，n 代表 no 也就是无视频的意思。</p><ul><li><strong>抽取视频流</strong></li></ul><p><code>ffmpeg -i input.mp4 -vcodec copy -an out.h264</code></p><p>vcodec: 指定视频编码器，copy 指明只拷贝，不做编解码。
an: a 代表视频，n 代表 no 也就是无音频的意思。</p><ul><li><strong>转格式</strong></li></ul><p><code>ffmpeg -i out.mp4 -vcodec copy -acodec copy out.flv</code></p><p>上面的命令表式的是音频、视频都直接 copy，只是将 mp4 的封装格式转成了 flv。</p><ul><li><strong>音视频合并</strong></li></ul><p><code>ffmpeg -i out.h264 -i out.aac -vcodec copy -acodec copy out.mp4</code></p><h2 id=格式转换与压缩>格式转换与压缩</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -i in.mp4 out.avi
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -i foo.mp3 -ac <span class=m>1</span> -ab <span class=m>128000</span> -f mp4 -acodec libfaac -y target.m4r
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># no audio</span>
</span></span><span class=line><span class=cl>ffmpeg -i input.mov -vcodec h264   -an -strict -2 output.mp4
</span></span><span class=line><span class=cl>ffmpeg -i input.mov -vcodec libvpx -an output.webm
</span></span><span class=line><span class=cl>ffmpeg -i input.mov -vcodec h264 -acodec aac -strict -2 output.mp4
</span></span><span class=line><span class=cl>ffmpeg -i input.mov -vcodec libvpx -acodec libvorbis output.webm
</span></span><span class=line><span class=cl>&lt;video <span class=nv>width</span><span class=o>=</span><span class=s2>&#34;320&#34;</span> <span class=nv>height</span><span class=o>=</span><span class=s2>&#34;240&#34;</span> controls&gt;
</span></span><span class=line><span class=cl>  &lt;<span class=nb>source</span> <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;movie.mp4&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s1>&#39;video/mp4&#39;</span>&gt;&lt;/source&gt;
</span></span><span class=line><span class=cl>  &lt;<span class=nb>source</span> <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;movie.webm&#34;</span> <span class=nv>type</span><span class=o>=</span><span class=s1>&#39;video/ogg&#39;</span>&gt;&lt;/source&gt;
</span></span><span class=line><span class=cl>&lt;/video&gt;
</span></span></code></pre></div><ul><li>视频缩小一倍</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -i out.mp4 -vf <span class=nv>scale</span><span class=o>=</span>iw/2:-1 scale.mp4
</span></span></code></pre></div><p><code>-vf scale</code> 指定使用简单过滤器 scale，iw/2:-1 中的 iw 指定按整型取视频的宽度。-1 表示高度随宽度一起变化。</p><ul><li>视频裁剪</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -i VR.mov -vf <span class=nv>crop</span><span class=o>=</span>in_w-200:in_h-200 -c:v libx264 -c:a copy -video_size 1280x720 vr_new.mp4
</span></span></code></pre></div><p>crop 格式：crop=out_w:out_h: x :y</p><ul><li><p>out_w: 输出的宽度。可以使用 in_w 表式输入视频的宽度。</p></li><li><p>out_h: 输出的高度。可以使用 in_h 表式输入视频的高度。</p></li><li><p>x : X 坐标</p></li><li><p>y : Y 坐标</p></li><li><p>倍速播放</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -i out.mp4 -filter_complex <span class=s2>&#34;[0:v]setpts=0.5*PTS[v];[0:a]atempo=2.0[a]&#34;</span> -map <span class=s2>&#34;[v]&#34;</span> -map <span class=s2>&#34;[a]&#34;</span> speed2.0.mp4
</span></span></code></pre></div><ul><li>-filter_complex 复杂滤镜，[0:v]表示第一个（文件索引号是 0）文件的视频作为输入。<code>setpts=0.5*PTS</code> 表示每帧视频的 pts 时间戳都乘 0.5，也就是差少一半。[v]表示输出的别名。音频同理就不详述了。</li><li>map 可用于处理复杂输出，如可以将指定的多路流输出到一个输出文件，也可以指定输出到多个文件。"[v]" 复杂滤镜输出的别名作为输出文件的一路流。上面 map 的用法是将复杂滤镜输出的视频和音频输出到指定文件中。</li></ul><h3 id=图视互转>图/视互转</h3><ul><li><p><strong>视频转 JPEG</strong>：<code>ffmpeg -i test.flv -r 1 -f image2 image-%3d.jpeg</code></p></li><li><p><strong>视频转 gif</strong>：<code>ffmpeg -i out.mp4 -ss 00:00:00 -t 10 out.gif</code></p></li><li><p><strong>图片转视频</strong>：<code>ffmpeg -f image2 -i image-%3d.jpeg images.mp4</code></p></li></ul><h2 id=对称视频与画中画>对称视频与画中画</h2><ul><li><p>对称视频：<code>$ ffmpeg -i out.mp4 -filter_complex "[0:v]pad=w=2*iw[a];[0:v]hflip[b];[a][b]overlay=x=w" duicheng.mp4</code></p></li><li><p>画中画：<code>ffmpeg -i out.mp4 -i out1.mp4 -filter_complex "[1:v]scale=w=176:h=144:force_original_aspect_ratio=decrease[ckout];[0:v][ckout]overlay=x=W-w-10:y=0[out]" -map "[out]" -movflags faststart new.mp4</code></p></li><li><p>录制画中画：<code>ffmpeg -f avfoundation -i "1" -framerate 30 -f avfoundation -i "0:0" -r 30 -c:v libx264 -preset ultrafast -c:a libfdk_aac -profile:a aac_he_v2 -ar 44100 -ac 2 -filter_complex "[1:v]scale=w=176:h=144:force_original_aspect_ratio=decrease[a];[0:v][a]overlay=x=W-w-10:y=0[out]" -map "[out]" -movflags faststart -map 1:a b.mp4</code></p></li></ul><h2 id=处理原始数据>处理原始数据</h2><ul><li><strong>提取 YUV 数据</strong></li></ul><p><code>ffmpeg -i input.mp4 -an -c:v rawvideo -pixel_format yuv420p out.yuv ffplay -s wxh out.yuv</code></p><p>-c:v rawvideo 指定将视频转成原始数据
-pixel_format yuv420p 指定转换格式为 yuv420p</p><ul><li><strong>YUV 转 H264</strong></li></ul><p><code>ffmpeg -f rawvideo -pix_fmt yuv420p -s 320x240 -r 30 -i out.yuv -c:v libx264 -f rawvideo out.h264</code></p><ul><li><strong>提取 PCM 数据</strong></li></ul><p><code>ffmpeg -i out.mp4 -vn -ar 44100 -ac 2 -f s16le out.pcm ffplay -ar 44100 -ac 2 -f s16le -i out.pcm</code></p><h1 id=滤镜>滤镜</h1><p>在编码之前，ffmpeg 可以使用 libavfilter 库中的过滤器处理原始音频和视频帧。几个链式过滤器形成一个过滤器图形。ffmpeg 区分两种类型的过滤器图形：简单和复杂。</p><h2 id=水印>水印</h2><ul><li>添加水印</li></ul><p><code>ffmpeg -i out.mp4 -vf "movie=logo.png,scale=64:48[watermask];[in][watermask] overlay=30:10 [out]" water.mp4</code></p><p><code>-vf</code> 中的 movie 指定 logo 位置。scale 指定 logo 大小。overlay 指定 logo 摆放的位置。</p><ul><li>滤镜加水印</li></ul><p><code>ffmpeg -i killer.mp4 -filter_complex "movie=./logo/daka.png,scale=64:48[w];[0:v]curves=vintage[o];[o][w]overlay=30:10[out]" -map "[out]" -map 0:a test1.mp4</code></p><ul><li>删除水印</li></ul><p>先通过 ffplay 找到要删除 LOGO 的位置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffplay -i test.flv -vf <span class=nv>delogo</span><span class=o>=</span><span class=nv>x</span><span class=o>=</span>806:y<span class=o>=</span>20:w<span class=o>=</span>70:h<span class=o>=</span>80:show<span class=o>=</span><span class=m>1</span>
</span></span></code></pre></div><p>使用 delogo 滤镜删除 LOGO。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ffmpeg -i test.flv -vf <span class=nv>delogo</span><span class=o>=</span><span class=nv>x</span><span class=o>=</span>806:y<span class=o>=</span>20:w<span class=o>=</span>70:h<span class=o>=</span><span class=m>80</span> output.flv
</span></span></code></pre></div></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/awesome-cheatsheets/02.frontend/cg/three.js-cheatsheet/ rel=prev>Three.js-CheatSheet</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>