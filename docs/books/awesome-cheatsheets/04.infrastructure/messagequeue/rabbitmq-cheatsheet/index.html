<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="RabbitMQ CheatSheet 一、消息队列 消息队列中间件 (Message Queue Middleware，简称 MQ) 是指利用高效可靠的消息传递机制进行与平台无关的数据交流，它可以在分布式环境下扩展进程间的数据通信，并基于数据通信来进行分布式系统的集成。它"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/awesome-cheatsheets/04.infrastructure/messagequeue/rabbitmq-cheatsheet/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/awesome-cheatsheets/04.infrastructure/messagequeue/rabbitmq-cheatsheet/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/awesome-cheatsheets/04.infrastructure/messagequeue/rabbitmq-cheatsheet/"><meta property="og:title" content="RabbitMQ-CheatSheet | Next-gen Tech Edu"><meta property="og:description" content="RabbitMQ CheatSheet 一、消息队列 消息队列中间件 (Message Queue Middleware，简称 MQ) 是指利用高效可靠的消息传递机制进行与平台无关的数据交流，它可以在分布式环境下扩展进程间的数据通信，并基于数据通信来进行分布式系统的集成。它"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>RabbitMQ-CheatSheet | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=277288f30e19c7426069e90b6383a63b><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">MessageQueue</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idae32799036ae16d670481f8d711ff1ee")' href=#idae32799036ae16d670481f8d711ff1ee aria-expanded=false aria-controls=idae32799036ae16d670481f8d711ff1ee aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/>04.Infrastructure</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idae32799036ae16d670481f8d711ff1ee aria-expanded=false aria-controls=idae32799036ae16d670481f8d711ff1ee><i class="fa-solid fa-angle-down" id=caret-idae32799036ae16d670481f8d711ff1ee></i></a></div><ul class="nav docs-sidenav collapse show" id=idae32799036ae16d670481f8d711ff1ee><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8d32b5a35ba665e19503c23660930476")' href=#id8d32b5a35ba665e19503c23660930476 aria-expanded=false aria-controls=id8d32b5a35ba665e19503c23660930476 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/cloud/>Cloud</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8d32b5a35ba665e19503c23660930476 aria-expanded=false aria-controls=id8d32b5a35ba665e19503c23660930476><i class="fa-solid fa-angle-right" id=caret-id8d32b5a35ba665e19503c23660930476></i></a></div><ul class="nav docs-sidenav collapse" id=id8d32b5a35ba665e19503c23660930476><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/cloud/docker-cheatsheet/>Docker-Cheatsheet</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc845841830694938d0ca2c54e7d7ba1b")' href=#idc845841830694938d0ca2c54e7d7ba1b aria-expanded=false aria-controls=idc845841830694938d0ca2c54e7d7ba1b aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/cloud/k8s/>K8s</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc845841830694938d0ca2c54e7d7ba1b aria-expanded=false aria-controls=idc845841830694938d0ca2c54e7d7ba1b><i class="fa-solid fa-angle-right" id=caret-idc845841830694938d0ca2c54e7d7ba1b></i></a></div><ul class="nav docs-sidenav collapse" id=idc845841830694938d0ca2c54e7d7ba1b><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/cloud/k8s/kubectl-cheatsheet/>Kubectl-CheatSheet</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id1b47f534a60493401717c8117cb47c63")' href=#id1b47f534a60493401717c8117cb47c63 aria-expanded=false aria-controls=id1b47f534a60493401717c8117cb47c63 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/dataengineering/>DataEngineering</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id1b47f534a60493401717c8117cb47c63 aria-expanded=false aria-controls=id1b47f534a60493401717c8117cb47c63><i class="fa-solid fa-angle-right" id=caret-id1b47f534a60493401717c8117cb47c63></i></a></div><ul class="nav docs-sidenav collapse" id=id1b47f534a60493401717c8117cb47c63><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/dataengineering/datavis-cheatsheet/>DataVis-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9843044d86efdc47b1954e660f0b4e01")' href=#id9843044d86efdc47b1954e660f0b4e01 aria-expanded=false aria-controls=id9843044d86efdc47b1954e660f0b4e01 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/distributed/>Distributed</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9843044d86efdc47b1954e660f0b4e01 aria-expanded=false aria-controls=id9843044d86efdc47b1954e660f0b4e01><i class="fa-solid fa-angle-right" id=caret-id9843044d86efdc47b1954e660f0b4e01></i></a></div><ul class="nav docs-sidenav collapse" id=id9843044d86efdc47b1954e660f0b4e01><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/distributed/blockchain-cheatsheet/>Blockchain-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/distributed/concurrentprogramming-cheatsheet/>ConcurrentProgramming-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/distributed/distributedsystem-cheatsheet/>DistributedSystem-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id579f5970b7f0c7f9e4c748920a2ab9ad")' href=#id579f5970b7f0c7f9e4c748920a2ab9ad aria-expanded=false aria-controls=id579f5970b7f0c7f9e4c748920a2ab9ad aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/infosecurity/>InfoSecurity</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id579f5970b7f0c7f9e4c748920a2ab9ad aria-expanded=false aria-controls=id579f5970b7f0c7f9e4c748920a2ab9ad><i class="fa-solid fa-angle-right" id=caret-id579f5970b7f0c7f9e4c748920a2ab9ad></i></a></div><ul class="nav docs-sidenav collapse" id=id579f5970b7f0c7f9e4c748920a2ab9ad><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/infosecurity/codec-cheatsheet/>Codec-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/infosecurity/websecurity-cheatsheet/>WebSecurity-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf910ea24e55aa5d41f8e514f503ae01d")' href=#idf910ea24e55aa5d41f8e514f503ae01d aria-expanded=false aria-controls=idf910ea24e55aa5d41f8e514f503ae01d aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/>MessageQueue</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf910ea24e55aa5d41f8e514f503ae01d aria-expanded=false aria-controls=idf910ea24e55aa5d41f8e514f503ae01d><i class="fa-solid fa-angle-down" id=caret-idf910ea24e55aa5d41f8e514f503ae01d></i></a></div><ul class="nav docs-sidenav collapse show" id=idf910ea24e55aa5d41f8e514f503ae01d><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida13c7bf5533977d458e4532d1466ded5")' href=#ida13c7bf5533977d458e4532d1466ded5 aria-expanded=false aria-controls=ida13c7bf5533977d458e4532d1466ded5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/kafka/>Kafka</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida13c7bf5533977d458e4532d1466ded5 aria-expanded=false aria-controls=ida13c7bf5533977d458e4532d1466ded5><i class="fa-solid fa-angle-right" id=caret-ida13c7bf5533977d458e4532d1466ded5></i></a></div><ul class="nav docs-sidenav collapse" id=ida13c7bf5533977d458e4532d1466ded5><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/kafka/kafka-cheatsheet/>Kafka-CheatSheet</a></li></ul></div><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/pulsar-cheatsheet/>Pulsar-CheatSheet</a></li><li class="child level active"><a href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/rabbitmq-cheatsheet/>RabbitMQ-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/rocketmq-cheatsheet/>RocketMQ-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id45094feb29147e934ae87bec4680c43a")' href=#id45094feb29147e934ae87bec4680c43a aria-expanded=false aria-controls=id45094feb29147e934ae87bec4680c43a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/network/>Network</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id45094feb29147e934ae87bec4680c43a aria-expanded=false aria-controls=id45094feb29147e934ae87bec4680c43a><i class="fa-solid fa-angle-right" id=caret-id45094feb29147e934ae87bec4680c43a></i></a></div><ul class="nav docs-sidenav collapse" id=id45094feb29147e934ae87bec4680c43a><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/network/network-cheatsheet/>Network-CheatSheet</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd789fb19074af12fc8fadfbc1e715354")' href=#idd789fb19074af12fc8fadfbc1e715354 aria-expanded=false aria-controls=idd789fb19074af12fc8fadfbc1e715354 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/os/>OS</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd789fb19074af12fc8fadfbc1e715354 aria-expanded=false aria-controls=idd789fb19074af12fc8fadfbc1e715354><i class="fa-solid fa-angle-right" id=caret-idd789fb19074af12fc8fadfbc1e715354></i></a></div><ul class="nav docs-sidenav collapse" id=idd789fb19074af12fc8fadfbc1e715354><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id7468b7e117d7ce935db5ba40b4929324")' href=#id7468b7e117d7ce935db5ba40b4929324 aria-expanded=false aria-controls=id7468b7e117d7ce935db5ba40b4929324 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/os/linux/>Linux</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id7468b7e117d7ce935db5ba40b4929324 aria-expanded=false aria-controls=id7468b7e117d7ce935db5ba40b4929324><i class="fa-solid fa-angle-right" id=caret-id7468b7e117d7ce935db5ba40b4929324></i></a></div><ul class="nav docs-sidenav collapse" id=id7468b7e117d7ce935db5ba40b4929324><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id73a7075ad6deee8dd28b403bd7dcca49")' href=#id73a7075ad6deee8dd28b403bd7dcca49 aria-expanded=false aria-controls=id73a7075ad6deee8dd28b403bd7dcca49 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/os/linux/commands/>Commands</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id73a7075ad6deee8dd28b403bd7dcca49 aria-expanded=false aria-controls=id73a7075ad6deee8dd28b403bd7dcca49><i class="fa-solid fa-angle-right" id=caret-id73a7075ad6deee8dd28b403bd7dcca49></i></a></div><ul class="nav docs-sidenav collapse" id=id73a7075ad6deee8dd28b403bd7dcca49><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/os/linux/commands/bash-pitfalls/>Bash Pitfalls</a></li><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/os/linux/commands/heibaiying-linux-commands-cheatsheet/>Heibaiying-Linux-Commands-CheatSheet</a></li><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/os/linux/commands/trinib-linux-commands-cheatsheet/>Trinib-Linux-Commands-CheatSheet</a></li></ul></div><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/os/linux/linux-cheatsheet/>Linux-CheatSheet</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2efc8d3974a647ca499ab8d2eac73186")' href=#id2efc8d3974a647ca499ab8d2eac73186 aria-expanded=false aria-controls=id2efc8d3974a647ca499ab8d2eac73186 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/awesome-cheatsheets/04.infrastructure/os/linux/shell/>Shell</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2efc8d3974a647ca499ab8d2eac73186 aria-expanded=false aria-controls=id2efc8d3974a647ca499ab8d2eac73186><i class="fa-solid fa-angle-right" id=caret-id2efc8d3974a647ca499ab8d2eac73186></i></a></div><ul class="nav docs-sidenav collapse" id=id2efc8d3974a647ca499ab8d2eac73186><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/os/linux/shell/linux-shell-cheatsheet/>Linux-Shell-CheatSheet</a></li></ul></div></ul></div><li class="child level"><a href=/books/awesome-cheatsheets/04.infrastructure/os/raspberry-cheatsheet/>Raspberry-CheatSheet</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#一消息队列>一、消息队列</a></li><li><a href=#二amqp-协议>二、AMQP 协议</a></li><li><a href=#三rabbitmq-简介>三、RabbitMQ 简介</a></li><li><a href=#四模型架构>四、模型架构</a><ul><li><a href=#1-publisher发布者>1. Publisher（发布者）</a></li><li><a href=#2-message消息>2. Message（消息）</a></li><li><a href=#3-exchange交换器>3. Exchange（交换器）</a></li><li><a href=#4-bindingkey-绑定键>4. BindingKey (绑定键）</a></li><li><a href=#5-routingkey路由键>5. Routingkey（路由键）</a></li><li><a href=#6-queue消息队列>6. Queue（消息队列）</a></li><li><a href=#7-consumer消费者>7. Consumer（消费者）</a></li><li><a href=#8-connection连接>8. Connection（连接）</a></li><li><a href=#9-channel信道>9. Channel（信道）</a></li><li><a href=#10-virtual-host虚拟主机>10. Virtual Host（虚拟主机）</a></li><li><a href=#11-broker>11. Broker</a></li></ul></li><li><a href=#五交换器类型>五、交换器类型</a><ul><li><a href=#51-fanout>5.1 fanout</a></li><li><a href=#52-direct>5.2 direct</a></li><li><a href=#53-topic>5.3 topic</a></li><li><a href=#54-headers>5.4 headers</a></li></ul></li><li><a href=#六死信队列>六、死信队列</a></li><li><a href=#参考资料>参考资料</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>RabbitMQ-CheatSheet</h1><div class=article-style><h1 id=rabbitmq-cheatsheet>RabbitMQ CheatSheet</h1><h2 id=一消息队列>一、消息队列</h2><p>消息队列中间件 (Message Queue Middleware，简称 MQ) 是指利用高效可靠的消息传递机制进行与平台无关的数据交流，它可以在分布式环境下扩展进程间的数据通信，并基于数据通信来进行分布式系统的集成。它主要适用于以下场景：</p><ul><li><strong>项目解耦</strong>：不同的项目或模块可以使用消息中间件进行数据的传递，从而可以保证模块的相对独立，实现解耦。</li><li><strong>流量削峰</strong>：可以将突发的流量 (如秒杀数据) 写入消息中间件，然后由多个消费者进行异步处理。</li><li><strong>弹性伸缩</strong>：可以通过对消息中间件进行横向扩展来提高系统的处理能力和吞吐量。</li><li><strong>发布订阅</strong>：可以用于任意的发布订阅模式中。</li><li><strong>异步处理</strong>：当我们不需要对数据进行立即处理，或者不关心数据的处理结果时，可以使用中间件进行异步处理。</li><li><strong>冗余存储</strong>：消息中间件可以对数据进行持久化存储，直到你消费完成后再进行删除。</li></ul><h2 id=二amqp-协议>二、AMQP 协议</h2><p>AMQP (Advanced Message Queuing Protocol) 是一个提供统一消息服务的应用层通讯协议，为消息中间件提供统一的开发规范。不同客户端可以将消息投递到中间件上，或从上面获取消息；发送消息和接收消息的客户端可以采用不同的语言开发、不同的技术实现，但必须遵循相同的 AMQP 协议。AMQP 协议本身包括以下三层：</p><ul><li><strong>Module Layer</strong>：位于协议最高层，主要定义了一些供客户端调用的命令，客户端可以利用这些命令实现自己的业务逻辑。例如：可以使用 Queue.Declare 命令声明一个队列或者使用 Basic.Consume 订阅消费一个队列中的消息。</li><li><strong>Session Layer</strong>：位于中间层，主要负责将客户端的命令发送给服务器，再将服务端的应答返回给客户端，主要为客户端与服务器之间的通信提供可靠性同步机制和错误处理。</li><li><strong>Transport Layer</strong>：位于最底层，主要传输二进制数据流 ，提供帧的处理、信道复用、错误检测和数据表示等。</li></ul><h2 id=三rabbitmq-简介>三、RabbitMQ 简介</h2><p>RabbitMQ 完全实现了 AMQP 协议，并基于相同的模型架构。RabbitMQ 在实现 <code>AMQP 0-9-1</code> 的基础上还进行了额外拓展，并可以通过插件来支持 <code>AMQP 1.0</code>。所以在某种程度上而言， RabbitMQ 就是 AMQP 在 Erlang 语言上的实现。RabbitMQ 基于众多优秀的特性成为了目前最为广泛使用的消息中间件，它的主要特性如下：</p><ul><li>支持多种消息传递协议，除了 AMQP 外，还可以通过插件支持所有版本的 STOMP 协议和 MQTT 3.1 协议；</li><li>拥有丰富的交换器类型，可以满足绝大部分的使用需求；</li><li>支持多种部署方式，易于部署；</li><li>支持跨语言开发，如：Java，.NET，PHP，Python，JavaScript，Ruby，Go；</li><li>可以通过集群来实现高可用性和高吞吐，还可以通过 Federation 插件来连接跨机房跨区域的不同版本的服务节点；</li><li>插拔式的身份验证和授权，支持 TLS 和 LDAP；</li><li>支持持续集成，能够使用各种插件进行灵活地扩展；</li><li>能够使用多种方式进行监控和管理，如 HTTP API，命令行工具和 UI 界面。</li></ul><h2 id=四模型架构>四、模型架构</h2><p>RabbitMQ 与 AMQP 遵循相同的模型架构，其架构示例图如下：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/rabbitmq-模型架构.png></div><h3 id=1-publisher发布者>1. Publisher（发布者）</h3><p>发布者 (或称为生产者) 负责生产消息并将其投递到指定的交换器上。</p><h3 id=2-message消息>2. Message（消息）</h3><p>消息由消息头和消息体组成。消息头用于存储与消息相关的元数据：如目标交换器的名字 (exchange_name) 、路由键 (RountingKey) 和其他可选配置 (properties) 信息。消息体为实际需要传递的数据。</p><h3 id=3-exchange交换器>3. Exchange（交换器）</h3><p>交换器负责接收来自生产者的消息，并将将消息路由到一个或者多个队列中，如果路由不到，则返回给生产者或者直接丢弃，这取决于交换器的 mandatory 属性：</p><ul><li>当 mandatory 为 true 时：如果交换器无法根据自身类型和路由键找到一个符合条件的队列，则会将该消息返回给生产者；</li><li>当 mandatory 为 false 时：如果交换器无法根据自身类型和路由键找到一个符合条件的队列，则会直接丢弃该消息。</li></ul><h3 id=4-bindingkey-绑定键>4. BindingKey (绑定键）</h3><p>交换器与队列通过 BindingKey 建立绑定关系。</p><h3 id=5-routingkey路由键>5. Routingkey（路由键）</h3><p>生产者将消息发给交换器的时候，一般会指定一个 RountingKey，用来指定这个消息的路由规则。当 RountingKey 与 BindingKey 基于交换器类型的规则相匹配时，消息被路由到对应的队列中。</p><h3 id=6-queue消息队列>6. Queue（消息队列）</h3><p>用于存储路由过来的消息。多个消费者可以订阅同一个消息队列，此时队列会将收到的消息将以轮询 (round-robin) 的方式分发给所有消费者。即每条消息只会发送给一个消费者，不会出现一条消息被多个消费者重复消费的情况。</p><h3 id=7-consumer消费者>7. Consumer（消费者）</h3><p>消费者订阅感兴趣的队列，并负责消费存储在队列中的消息。为了保证消息能够从队列可靠地到达消费者，RabbitMQ 提供了消息确认机制 (message acknowledgement)，并通过 autoAck 参数来进行控制：</p><ul><li>当 autoAck 为 true 时：此时消息发送出去 (写入 TCP 套接字) 后就认为消费成功，而不管消费者是否真正消费到这些消息。当 TCP 连接或 channel 因意外而关闭，或者消费者在消费过程之中意外宕机时，对应的消息就丢失。因此这种模式可以提高吞吐量，但会存在数据丢失的风险。</li><li>当 autoAck 为 false 时：需要用户在数据处理完成后进行手动确认，只有用户手动确认完成后，RabbitMQ 才认为这条消息已经被成功处理。这可以保证数据的可靠性投递，但会降低系统的吞吐量。</li></ul><h3 id=8-connection连接>8. Connection（连接）</h3><p>用于传递消息的 TCP 连接。</p><h3 id=9-channel信道>9. Channel（信道）</h3><p>RabbitMQ 采用类似 NIO (非阻塞式 IO ) 的设计，通过 Channel 来复用 TCP 连接，并确保每个 Channel 的隔离性，就像是拥有独立的 Connection 连接。当数据流量不是很大时，采用连接复用技术可以避免创建过多的 TCP 连接而导致昂贵的性能开销。</p><h3 id=10-virtual-host虚拟主机>10. Virtual Host（虚拟主机）</h3><p>RabbitMQ 通过虚拟主机来实现逻辑分组和资源隔离，一个虚拟主机就是一个小型的 RabbitMQ 服务器，拥有独立的队列、交换器和绑定关系。用户可以按照不同业务场景建立不同的虚拟主机，虚拟主机之间是完全独立的，你无法将 vhost1 上的交换器与 vhost2 上的队列进行绑定，这可以极大的保证业务之间的隔离性和数据安全。默认的虚拟主机名为 <code>/</code> 。</p><h3 id=11-broker>11. Broker</h3><p>一个真实部署运行的 RabbitMQ 服务。</p><h2 id=五交换器类型>五、交换器类型</h2><p>RabbitMQ 支持多种交换器类型，常用的有以下四种：</p><h3 id=51-fanout>5.1 fanout</h3><p>这是最简单的一种交换器模型，此时会把消息路由到与该交换器绑定的所有队列中。如下图，任何发送到 X 交换器上的消息，都会被路由到 Q1 和 Q2 两个队列上。</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/rabbitmq-fanout-exchange.png></div><h3 id=52-direct>5.2 direct</h3><p>把消息路由到 BindingKey 和 RountingKey 完全一样的队列中。如下图，当消息的 RountingKey 为 orange 时，消息会被路由到 Q1 队列；当消息的 RountingKey 为 black 或 green 时，消息会被路由到 Q2 队列。</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/rabbitmq-direct-exchange.png></div><p>需要特别说明的是一个交换器绑定多个队列时，它们的 BindingKey 是可以相同的，如下图。此时当消息的 RountingKey 为 black 时，消息会同时被路由到 Q1 和 Q2 队列。</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/rabbitmq-direct-exchange-2.png></div><h3 id=53-topic>5.3 topic</h3><p>将消息路由到 BindingKey 和 RountingKey 相匹配的队列中，匹配规则如下：</p><ul><li>RountingKey 和 BindingKey 由多个单词使用逗号 <code>.</code> 进行连接；</li><li>BindingKey 支持两个特殊符号：<code>#</code> 和 <code>*</code> 。其中 <code>*</code> 用于匹配一个单词， <code>#</code> 用于匹配零个或者多个单词。</li></ul><p>以下是官方文档中的示例，交换器与队列的绑定情况如图所示，此时的路由情况如下：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/rabbitmq-topic-exchange.png></div><ul><li>路由键为 <code>lazy.orange.elephant</code> 的消息会发送给所有队列；</li><li>路由键为 <code>quick.orange.fox</code> 的消息只会发送给 Q1 队列；</li><li>路由键为 <code>lazy.brown.fox</code> 的消息只会发送给 Q2 队列；</li><li>路由键为 <code>lazy.pink.rabbit</code> 的消息只会发送给 Q2 队列；</li><li>路由键为 <code>quick.brown.fox</code> 的消息与任何绑定都不匹配；</li><li>路由键为 <code>orange</code> 或 <code>quick.orange.male.rabbit</code> 的消息也与任何绑定都不匹配。</li></ul><h3 id=54-headers>5.4 headers</h3><p>在交换器与队列进行绑定时可以指定一组键值对作为 BindingKey；在发送消息的 headers 中的可以指定一组键值对属性，当这些属性与 BindingKey 相匹配时，则将消息路由到该队列。同时还可以使用 <code>x-match</code> 参数指定匹配模式：</p><ul><li><strong>x-match = all</strong> ：所有的键值对都相同才算匹配成功；</li><li><strong>x-match = any</strong>：只要有一个键值对相同就算匹配成功。</li></ul><p>headers 类型的交换器性能比较差，因此其在实际开发中使用得比较少。</p><h2 id=六死信队列>六、死信队列</h2><p>RabbitMQ 中另外一个比较常见的概念是死信队列。当消息在一个队列中变成死信 (dead message) 之后，它可以被重新被发送到死信交换器上 (英文为 Dead-Letter-Exchange，简称 DLX )，任何绑定死信交换器的队列都称之为死信队列。需要特别说明的是死信交换器和死信队列与正常的交换器和队列完全一样，采用同样的方式进行创建，它们的名称表达的是其功能，而不是其类型。一个正常的消息变成死信一般是由于以下三个原因：</p><ul><li>消息被拒绝 (Basic.Reject/Basic.Nack) ，井且设置重回队列的参数 requeue 为 false；</li><li>消息过期；</li><li>队列达到最大长度。</li></ul><p>我们可以在队列创建的 channel.queueDeclare 方法中设置 x-dead-letter-exchange 参数来为正常队列添加死信交换器，当该队列中存在死信时，死信就会被发送到死信交换器上，进而路由到死信队列上。示例如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 创建死信交换器
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>channel</span><span class=o>.</span><span class=na>exchangeDeclare</span><span class=o>(</span><span class=s>&#34;exchange.dlx&#34;</span><span class=o>,</span> <span class=s>&#34;direct&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 声明死信队列
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>channel</span><span class=o>.</span><span class=na>queueDeclare</span><span class=o>(</span><span class=s>&#34; queue.d1x &#34;</span><span class=o>,</span> <span class=kc>true</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 绑定死信交换器和死信队列
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>channel</span><span class=o>.</span><span class=na>queueBind</span><span class=o>(</span><span class=s>&#34;queue.dlx &#34;</span><span class=o>,</span> <span class=s>&#34;exchange.dlx &#34;</span><span class=o>,</span> <span class=s>&#34;routingkey&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Object</span><span class=o>&gt;</span> <span class=n>args</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>args</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;x-dead-letter-exchange&#34;</span><span class=o>,</span> <span class=s>&#34;exchange.dlx&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>// 为名为 myqueue 的正常队列指定死信交换器
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>channel</span><span class=o>.</span><span class=na>queueDeclare</span><span class=o>(</span><span class=s>&#34;queue.normal&#34;</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=n>args</span><span class=o>);</span>
</span></span></code></pre></div><p>除此之外，您还可以重新指定死信的路由键，如果没有指定，则默认使用原有的路由键，重新设置的方法如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>args.put<span class=o>(</span><span class=s2>&#34;x-dead-letter-routing-key&#34;</span>, <span class=s2>&#34;some-routing-key&#34;</span><span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=参考资料>参考资料</h2><ol><li>朱忠华 . RabbitMQ 实战指南 . 电子工业出版社 . 2017-11-1</li><li>官方文档：<a href=https://www.rabbitmq.com/getstarted.html target=_blank rel=noopener>RabbitMQ Tutorials</a> 、<a href=https://www.rabbitmq.com/documentation.html target=_blank rel=noopener>Documentation: Table of Contents</a></li></ol></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/pulsar-cheatsheet/ rel=next>Pulsar-CheatSheet</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/awesome-cheatsheets/04.infrastructure/messagequeue/rocketmq-cheatsheet/ rel=prev>RocketMQ-CheatSheet</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>