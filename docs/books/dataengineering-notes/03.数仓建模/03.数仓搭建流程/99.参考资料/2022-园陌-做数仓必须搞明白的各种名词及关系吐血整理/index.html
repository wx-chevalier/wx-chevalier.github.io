<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="原文地址 做数仓必须搞明白的各种名词及关系，吐血整理 作为一个数据人，是不是经常被各种名词围绕，是不是对其中很多概念认知模糊。有些词虽然只有一字之差，但是它们意思完全不同，今天我们就来了解下数仓建设及数据" />

  
  <link rel="alternate" hreflang="zh" href="https://ng-tech.icu/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2022-%E5%9B%AD%E9%99%8C-%E5%81%9A%E6%95%B0%E4%BB%93%E5%BF%85%E9%A1%BB%E6%90%9E%E6%98%8E%E7%99%BD%E7%9A%84%E5%90%84%E7%A7%8D%E5%90%8D%E8%AF%8D%E5%8F%8A%E5%85%B3%E7%B3%BB%E5%90%90%E8%A1%80%E6%95%B4%E7%90%86/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.0d97305106da5efa530e28b021b4c580.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-40NYXJ8823");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://ng-tech.icu/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2022-%E5%9B%AD%E9%99%8C-%E5%81%9A%E6%95%B0%E4%BB%93%E5%BF%85%E9%A1%BB%E6%90%9E%E6%98%8E%E7%99%BD%E7%9A%84%E5%90%84%E7%A7%8D%E5%90%8D%E8%AF%8D%E5%8F%8A%E5%85%B3%E7%B3%BB%E5%90%90%E8%A1%80%E6%95%B4%E7%90%86/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@wx-chevalier" />
    <meta property="twitter:creator" content="@wx-chevalier" />
  
  <meta property="og:site_name" content="Next-gen Tech Edu" />
  <meta property="og:url" content="https://ng-tech.icu/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2022-%E5%9B%AD%E9%99%8C-%E5%81%9A%E6%95%B0%E4%BB%93%E5%BF%85%E9%A1%BB%E6%90%9E%E6%98%8E%E7%99%BD%E7%9A%84%E5%90%84%E7%A7%8D%E5%90%8D%E8%AF%8D%E5%8F%8A%E5%85%B3%E7%B3%BB%E5%90%90%E8%A1%80%E6%95%B4%E7%90%86/" />
  <meta property="og:title" content="2022-园陌-做数仓必须搞明白的各种名词及关系，吐血整理 | Next-gen Tech Edu" />
  <meta property="og:description" content="原文地址 做数仓必须搞明白的各种名词及关系，吐血整理 作为一个数据人，是不是经常被各种名词围绕，是不是对其中很多概念认知模糊。有些词虽然只有一字之差，但是它们意思完全不同，今天我们就来了解下数仓建设及数据" /><meta property="og:image" content="https://ng-tech.icu/media/sharing.png" />
    <meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
    
  

  



  

  

  





  <title>2022-园陌-做数仓必须搞明白的各种名词及关系，吐血整理 | Next-gen Tech Edu</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="5689e9aa382a934a4c396c218bd275ca" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/books-gallery"><span>笔记（万篇）</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#knowledge-map"><span>知识图谱</span></a>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>实验室</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/galaxy-home/gh-craft"><span>Craft 方块世界</span></a>
              
                <a class="dropdown-item" href="/galaxy-home/glossary-cards"><span>3D 知识卡牌</span></a>
              
            </div>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>其他阅读渠道</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png"></img><span>知乎</span></a>
              
                <a class="dropdown-item" href="https://segmentfault.com/blog/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png"></img><span>SegmentFault</span></a>
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png"></img><span>掘金</span></a>
              
            </div>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/wx-chevalier" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        
        
        <div></div>
        
        <style>
        @media only screen and (max-width: 600px) {
          .jimmysong-template {
            display: none!important;
          }
        }
        </style>
        
        <li class="jimmysong-template" style="color: white;font-size: 12px;">
          <a href="https://jimmysong.io" style="color: white">By Jimmy Song's Template</a>
        </li>
      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">
<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          99.参考资料
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li style="display: inline-flex">
          <a style="cursor: pointer;" onclick="window.history.back()">
            <i class="fas fa-arrow-left pr-1"></i>
            Back
          </a>
          <span>|</span>
          <a href="/books/">
            <i class="fa-solid fa-house" style="margin-right: 4px"></i>
            Books
          </a>
        </li>
      </ul>

      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide4694501b03fdf70b7723d0f36692d71&#34;)" href="#ide4694501b03fdf70b7723d0f36692d71" aria-expanded="false" aria-controls="ide4694501b03fdf70b7723d0f36692d71" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/">03.数仓搭建流程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide4694501b03fdf70b7723d0f36692d71" aria-expanded="false" aria-controls="ide4694501b03fdf70b7723d0f36692d71">
    
    <i class="fa-solid fa-angle-down" id="caret-ide4694501b03fdf70b7723d0f36692d71"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="ide4694501b03fdf70b7723d0f36692d71">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idf73119d15927dab00efc67e3828a1fe3&#34;)" href="#idf73119d15927dab00efc67e3828a1fe3" aria-expanded="false" aria-controls="idf73119d15927dab00efc67e3828a1fe3" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/01.%E6%95%B0%E4%BB%93%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84/">01.数仓分层架构</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idf73119d15927dab00efc67e3828a1fe3" aria-expanded="false" aria-controls="idf73119d15927dab00efc67e3828a1fe3">
    
        <i class="fa-solid fa-angle-right" id="caret-idf73119d15927dab00efc67e3828a1fe3"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idf73119d15927dab00efc67e3828a1fe3">
      



  <li class="child level "><a href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/01.%E6%95%B0%E4%BB%93%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84/%E6%95%B0%E4%BB%93%E5%88%86%E5%B1%82/">数仓分层</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1ebedada011c535bd3650dd205e46569&#34;)" href="#id1ebedada011c535bd3650dd205e46569" aria-expanded="false" aria-controls="id1ebedada011c535bd3650dd205e46569" aria-hidden="false" data-toggle="collapse">
    
    </div>
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id09f92eea16b80ae8eaf9ba27f3c8edfa&#34;)" href="#id09f92eea16b80ae8eaf9ba27f3c8edfa" aria-expanded="false" aria-controls="id09f92eea16b80ae8eaf9ba27f3c8edfa" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/03.%E7%BB%B4%E5%BA%A6%E8%A1%A8%E8%AE%BE%E8%AE%A1/">03.维度表设计</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id09f92eea16b80ae8eaf9ba27f3c8edfa" aria-expanded="false" aria-controls="id09f92eea16b80ae8eaf9ba27f3c8edfa">
    
        <i class="fa-solid fa-angle-right" id="caret-id09f92eea16b80ae8eaf9ba27f3c8edfa"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id09f92eea16b80ae8eaf9ba27f3c8edfa">
      



  <li class="child level "><a href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/03.%E7%BB%B4%E5%BA%A6%E8%A1%A8%E8%AE%BE%E8%AE%A1/%E7%BC%93%E6%85%A2%E5%8F%98%E5%8C%96%E7%BB%B4/">缓慢变化维</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id032538d0f1c8838aad6a421e115451c1&#34;)" href="#id032538d0f1c8838aad6a421e115451c1" aria-expanded="false" aria-controls="id032538d0f1c8838aad6a421e115451c1" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/">99.参考资料</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id032538d0f1c8838aad6a421e115451c1" aria-expanded="false" aria-controls="id032538d0f1c8838aad6a421e115451c1">
    
    <i class="fa-solid fa-angle-down" id="caret-id032538d0f1c8838aad6a421e115451c1"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id032538d0f1c8838aad6a421e115451c1">
      



  <li class="child level "><a href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2021-%E6%95%B0%E6%8D%AE%E4%BA%A7%E5%93%81%E5%B0%8F-lee-%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%9F%BA%E7%A1%80/">2021-数据产品小 Lee-数据仓库基础</a></li>




  <li class="child level "><a href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2022-%E5%9B%9B%E6%9C%88%E5%A4%A9-03-%E4%B8%87%E5%AD%97%E8%AF%A6%E8%A7%A3%E6%95%B0%E4%BB%93%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84-ods-dwd-dws-ads/">2022-四月天 03-万字详解数仓分层设计架构 ODS-DWD-DWS-ADS</a></li>




  <li class="child level active"><a href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2022-%E5%9B%AD%E9%99%8C-%E5%81%9A%E6%95%B0%E4%BB%93%E5%BF%85%E9%A1%BB%E6%90%9E%E6%98%8E%E7%99%BD%E7%9A%84%E5%90%84%E7%A7%8D%E5%90%8D%E8%AF%8D%E5%8F%8A%E5%85%B3%E7%B3%BB%E5%90%90%E8%A1%80%E6%95%B4%E7%90%86/">2022-园陌-做数仓必须搞明白的各种名词及关系，吐血整理</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#1实体">1.实体</a></li>
    <li><a href="#2-维度">2. 维度</a></li>
    <li><a href="#3-度量">3. 度量</a></li>
    <li><a href="#4-粒度">4. 粒度</a></li>
    <li><a href="#5-口径">5. 口径</a></li>
    <li><a href="#6-指标">6. 指标</a></li>
    <li><a href="#7-标签">7. 标签</a></li>
    <li><a href="#8-自然键">8. 自然键</a></li>
    <li><a href="#9-持久键">9. 持久键</a></li>
    <li><a href="#10-代理键">10. 代理键</a></li>
    <li><a href="#11-退化维度">11. 退化维度</a></li>
    <li><a href="#12-缓慢变化维">12. 缓慢变化维</a></li>
    <li><a href="#13-微型维度">13. 微型维度</a></li>
    <li><a href="#14-下钻">14. 下钻</a></li>
    <li><a href="#15-上卷">15. 上卷</a></li>
    <li><a href="#16-数据集市">16. 数据集市</a></li>
  </ul>

  <ul>
    <li><a href="#实体表事实表维度表之间的关系">实体表，事实表，维度表之间的关系</a></li>
    <li><a href="#指标与标签的区别">指标与标签的区别</a></li>
    <li><a href="#维度和指标区别与联系">维度和指标区别与联系</a></li>
    <li><a href="#自然键与代理键在数仓的使用区别">自然键与代理键在数仓的使用区别</a></li>
    <li><a href="#数据集市与数据仓库的区别与联系">数据集市与数据仓库的区别与联系</a></li>
  </ul>
</nav>

      
<div class="subscribe-module col-24 mt-1">
    <img src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png" alt="image" title="王下邀月熊的微信公众号"/>
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>2022-园陌-做数仓必须搞明白的各种名词及关系，吐血整理</h1>

          <div class="article-style">
            <blockquote>
<p><a href="https://www.51cto.com/article/715015.html" target="_blank" rel="noopener">原文地址</a></p>
</blockquote>
<h1 id="做数仓必须搞明白的各种名词及关系吐血整理">做数仓必须搞明白的各种名词及关系，吐血整理</h1>
<p>作为一个数据人，是不是经常被各种名词围绕，是不是对其中很多概念认知模糊。有些词虽然只有一字之差，但是它们意思完全不同，今天我们就来了解下数仓建设及数据分析时常见的一些概念含义及它们之间的关系。</p>
<p>本文结构如下图所示：</p>
<p>
















  <figure  >
    <div class="d-flex justify-content-center">
      <div class="w-100" ><img src="https://assets.ng-tech.icu/item/20230325000306.png" alt="数仓中概念术语解析" loading="lazy" data-zoomable /></div>
    </div></figure></p>
<h1 id="数仓中常见概念解析">数仓中常见概念解析</h1>
<h2 id="1实体">1.实体</h2>
<p>实体是指依附的主体，就是我们分析的一个对象，比如我们分析商品的销售情况，如华为手机近半年的销售量是多少，那华为手机就是一个实体；我们分析用户的活跃度，用户就是一个实体。当然实体也可以现实中不存在的，比如虚拟的业务对象，活动，会员等都可看做一个实体。</p>
<p>实体的存在是为了业务分析，作为分析的一个筛选的维度，拥有描述自己的属性，本身具有可分析的价值。</p>
<h2 id="2-维度">2. 维度</h2>
<p>维度就是看待问题的角度，分析业务数据，从什么角度分析，就建立什么样的维度。所以维度就是要对数据进行分析时所用的一个量，比如你要分析产品销售情况，你可以选择按商品类别来进行分析，这就构成一个维度，把所有商品类别集合在一起，就构成了维度表。</p>
<h2 id="3-度量">3. 度量</h2>
<p>度量是业务流程节点上的一个数值。比如销量，价格，成本等等。事实表中的度量可分为三类：完全可加，半可加，不可加。</p>
<ul>
<li>完全可加的度量是最灵活，最有用的，比如说销量，销售额等，可进行任意维度汇总；</li>
<li>半可加的度量可以对某些维度汇总，但不能对所有维度汇总，差额是常见的半可加度量，它除了时间维度外，可以跨所有维度进行加法操作；</li>
<li>还有一种是完全不可加的，例如：比率。对于这类非可加度量，一种好的方法是，尽可能存储非可加度量的完全可加分量，并在计算出最终的非可加事实前，将这些分量汇总到最终的结果集中。</li>
</ul>
<h2 id="4-粒度">4. 粒度</h2>
<p>粒度就是业务流程中对度量的单位，比如商品是按件记录度量，还是按批记录度量。在数仓建设中，我们说这是用户粒度的事实表，那么表中每行数据都是一个用户，无重复用户；例如还有销售粒度的表，那么表中每行都是一条销售记录。</p>
<p>选择合适的粒度级别是数据仓库建设好坏的重要关键内容，在设计数据粒度时，通常需重点考虑以下因素：</p>
<ol>
<li>要接受的分析类型、可接受的数据最低粒度和能存储的数据量；</li>
<li>粒度的层次定义越高，就越不能在该仓库中进行更细致的分析；</li>
<li>如果存储资源有一定的限制，就只能采用较高的数据粒度划分；</li>
<li>数据粒度划分策略一定要保证：数据的粒度确实能够满足用户的决策分析需要，这是数据粒度划分策略中最重要的一个准则。</li>
</ol>
<h2 id="5-口径">5. 口径</h2>
<p>口径就是取数逻辑（如何取数的），比如要取的数是 10 岁以下儿童中男孩的平均身高，这就是统计的口径。</p>
<h2 id="6-指标">6. 指标</h2>
<p>指标是口径的衡量值，也就是最后的结果。比如最近七天的订单量，一个促销活动的购买转化率等。一个指标具体到计算实施，主要有以下几部分组成：</p>
<ul>
<li>指标加工逻辑，比如 count, sum, avg</li>
<li>维度，比如按部门、地域进行指标统计，对应 sql 中的 group by</li>
<li>业务限定/修饰词，比如以不同的支付渠道来算对应的指标，微信支付的订单退款率，支付宝支付的订单退款率 。对应 sql 中的 where。</li>
</ul>
<p>除此之外，指标本身还可以衍生、派生出更多的指标，基于这些特点，可以将指标进行分类：</p>
<ul>
<li>
<p>原子指标：基本业务事实，没有业务限定、没有维度。比如订单表中的订单量、订单总金额都算原子指标；业务方更关心的指标，是有实际业务含义，可以直接取数据的指标。比如店铺近 1 天订单支付金额就是一个派生指标，会被直接在产品上展示给商家看。但是这个指标却不能直接从数仓的统一中间层里取数（因为没有现成的事实字段，数仓提供的一般都是大宽表）。需要有一个桥梁连接数仓中间层和业务方的指标需求，于是便有了派生指标</p>
</li>
<li>
<p>派生指标：维度+修饰词+原子指标。店铺近 1 天订单支付金额中店铺是维度，近 1 天是一个时间类型的修饰词，支付金额是一个原子指标；维度：观察各项指标的角度；修饰词：维度的一个或某些值，比如维度性别下，男和女就是 2 种修饰词。</p>
</li>
<li>
<p>衍生指标：比如某一个促销活动的转化率就是衍生指标，因为需要促销投放人数指标和促销订单数指标进行计算得出。</p>
</li>
</ul>
<h2 id="7-标签">7. 标签</h2>
<p>标签是人为设定的、根据业务场景需求，对目标对象运用一定的算法得到的高度精炼的特征标识。可见标签是经过人为再加工后的结果，如网红、白富美、萝莉。对于有歧义的标签，我们内部可进行标签区分，比如：苹果，我们可以定义苹果指的是水果，苹果手机才指的是手机。</p>
<h2 id="8-自然键">8. 自然键</h2>
<p>由现实中已经存在的属性组成的键，它在业务概念中是唯一的，并具有一定的业务含义，比如商品 ID，员工 ID。以数仓角度看，来自于业务系统的标识符就是自然键，比如业务库中员工的编号。</p>
<h2 id="9-持久键">9. 持久键</h2>
<p>保持永久性不会发生变化。有时也被叫做超自然持久键。比如身份证号属于持久键。自然键和持久键区别：举个例子就明白了，比如说公司员工离职之后又重新入职，他的自然键也就是员工编号发生了变化，但是他的持久键身份证号是不变的。</p>
<h2 id="10-代理键">10. 代理键</h2>
<p>就是不具有业务含义的键。代理键有许多其他的称呼：无意义键、整数键、非自然键、人工键、合成键等。代理键就是简单的以按照顺序序列生产的整数表示。产品行的第 1 行代理键为 1，则下一行的代理键为 2，如此进行。代理键的作用仅仅是连接维度表和事实表。</p>
<h2 id="11-退化维度">11. 退化维度</h2>
<p>退化维度，就是那些看起来像是事实表的一个维度关键字，但实际上并没有对应的维度表，就是维度属性存储到事实表中，这种存储到事实表中的维度列被称为退化维度。与其他存储在维表中的维度一样，退化维度也可以用来进行事实表的过滤查询、实现聚合操作等。</p>
<p>那么究竟怎么定义退化维度呢？比如说订单 id，这种量级很大的维度，没必要用一张维度表来进行存储，而我们进行数据查询或者数据过滤的时候又非常需要，所以这种就冗余在事实表里面，这种就叫退化维度，citycode 这种我们也会冗余在事实表里面，但是它有对应的维度表，所以它不是退化维度。</p>
<h2 id="12-缓慢变化维">12. 缓慢变化维</h2>
<p>维度建模的数据仓库中，有一个概念叫 Slowly Changing Dimensions，中文一般翻译成“缓慢变化维”，经常被简写为 SCD。缓慢变化维的提出是因为在现实世界中，维度的属性并不是静态的，它会随着时间的流逝发生缓慢的变化。这种随时间发生变化的维度我们一般称之为缓慢变化维，并且把处理维度表的历史变化信息的问题称为处理缓慢变化维的问题，有时也简称为处理 SCD 的问题。</p>
<ul>
<li>第一种方式是直接覆盖原值。这样处理，最容易实现，但是没有保留历史数据，无法分析历史变化信息。第一种方式通常简称为“TYPE 1”。</li>
<li>第二种方式是添加维度行。这样处理，需要代理键的支持。实现方式是当有维度属性发生变化时，生成一条新的维度记录，主键是新分配的代理键，通过自然键可以和原维度记录保持关联。第二种方式通常简称为“TYPE 2”。</li>
<li>第三种方式是添加属性列。这种处理的实现方式是对于需要分析历史信息的属性添加一列，来记录该属性变化前的值，而本属性字段使用 TYPE 1 来直接覆盖。这种方式的优点是可以同时分析当前及前一次变化的属性值，缺点是只保留了最后一次变化信息。第三种方式通常简称为“TYPE 3”。</li>
</ul>
<p>在实际建模中，我们可以联合使用三种方式，也可以对一个维度表中的不同属性使用不同的方式，这些，都需要根据实际情况来决定，但目的都是一样的，就是能够支持方便的分析历史变化情况。</p>
<h2 id="13-微型维度">13. 微型维度</h2>
<p>维度建模中，有一种维度叫 minidimension，中文一般翻译成“微型维度”。微型维度的提出主要是为了解决快变超大维度。以客户维度举例来说，如果维度表中有数百万行记录或者还要多，而且这些记录中的字段又经常变化，这样的维度表一般称之为快变超大维度。对于快变超大维度，设计人员一般不会使用 TYPE 2 的缓慢变化维处理方法，因为大家都不愿意向本来就有几百万行的维度表中添加更多的行。</p>
<p>这时，有一项技术可以解决这个问题。解决的方法是，将分析频率比较高或者变化频率比较大的字段提取出来，建立一个单独的维度表。这个单独的维度表就是微型维度表。微型维度表有自己的关键字，这个关键字和原客户维度表的关键字一起进入事实表。有时为了分析的方便，可以把微型维度的关键字的最新值作为外关键字进入客户维度表。这时一定要注意，这个外关键字必须做 TYPE 1 型处理。</p>
<h2 id="14-下钻">14. 下钻</h2>
<p>这是在数据分析中常见的概念，下钻可以理解成增加维的层次，从而可以由粗粒度到细粒度来观察数据，比如对产品销售情况分析时，可以沿着时间维从年到月到日更细粒度的观察数据。从年的维度可以下钻到月的维度、日的维度等。</p>
<h2 id="15-上卷">15. 上卷</h2>
<p>知道了下钻，上卷就容易理解了，它俩是相逆的操作，所以上卷可以理解为删掉维的某些层，由细粒度到粗粒度观察数据的操作或沿着维的层次向上聚合汇总数据。</p>
<h2 id="16-数据集市">16. 数据集市</h2>
<p>数据集市可以理解为是一种&quot;小型数据仓库&quot;，它只包含单个主题，且关注范围也非全局。数据集市可以分为两种:</p>
<ul>
<li>一种是独立数据集市，这类数据集市有自己的源数据库和 ETL 架构；</li>
<li>另一种是非独立数据集市，这种数据集市没有自己的源系统，它的数据来自数据仓库。当用户或者应用程序不需要/不必要/不允许用到整个数据仓库的数据时，非独立数据集市就可以简单为用户提供一个数据仓库的子集。</li>
</ul>
<h1 id="数仓概念之间的关系">数仓概念之间的关系</h1>
<h2 id="实体表事实表维度表之间的关系">实体表，事实表，维度表之间的关系</h2>
<p>在 Kimball 维度建模中有维度与事实，在 Inmon 范式建模中有实体与关系，如果我们分开两种建模方式看这些概念比较容易理解。但是目前也出现了不少混合建模方式，两种建模方式结合起来看，这些概念是不是容易记忆混乱，尤其事实表和实体表，它们之间到底有怎样区别与联系，先看下它们各自概念：</p>
<ul>
<li>维度表：维度表可以看成是用户用来分析一个事实的窗口，它里面的数据应该是对事实的各个方面描述，比如时间维度表，地域维度表，维度表是事实表的一个分析角度。</li>
<li>事实表：事实表其实就是通过各种维度和一些指标值的组合来确定一个事实的，比如通过时间维度，地域组织维度，指标值可以去确定在某时某地的一些指标值怎么样的事实。事实表的每一条数据都是几条维度表的数据和指标值交汇而得到的。</li>
<li>实体表：实体表就是一个实际对象的表，实体表放的数据一定是一条条客观存在的事物数据，比如说各种商品，它就是客观存在的，所以可以将其设计一个实体表。实时表只描述各个事物，并不存在具体的事实，所以也有人称实体表是无事实的事实表。</li>
</ul>
<p>举个例子：比如说手机商场中有苹果手机，华为手机等各品牌各型号的手机，这些数据可以组成一个手机实体表，但是表中没有可度量的数据。某天苹果手机卖了 15 台，华为手机卖了 20 台，这些手机销售数据属于事实，组成一个事实表。这样就可以使用日期维度表和地域维度表对这个事实表进行各种维度分析。</p>
<h2 id="指标与标签的区别">指标与标签的区别</h2>
<ul>
<li>
<p>概念不同</p>
<ul>
<li>指标是用来定义、评价和描述特定事物的一种标准或方式。比如：新增用户数、累计用户数、用户活跃率等是衡量用户发展情况的指标；</li>
<li>标签是人为设定的、根据业务场景需求，对目标对象运用一定的算法得到的高度精炼的特征标识。可见标签是经过人为再加工后的结果，如网红、白富美、萝莉。</li>
</ul>
</li>
<li>
<p>构成不同</p>
<ul>
<li>指标名称是对事物质与量两方面特点的命名；指标取值是指标在具体时间、地域、条件下的数量表现，如人的体重，指标名称是体重，指标的取值就是 120 斤；</li>
<li>标签名称通常都是形容词或形容词+名词的结构，标签一般是不可量化的，通常是孤立的，除了基础类标签，通过一定算法加工出来的标签一般都没有单位和量纲。如将超过 200 斤的称为大胖子。</li>
</ul>
</li>
<li>
<p>分类不同</p>
<ul>
<li>
<p>对指标的分类：</p>
<ul>
<li>按照指标计算逻辑，可以将指标分为原子指标、派生指标、衍生指标三种类型；</li>
<li>按照对事件描述内容的不同，分为过程性指标和结果性指标；</li>
</ul>
</li>
<li>
<p>对标签的分类：</p>
<ul>
<li>按照标签的变化性分为静态标签和动态标签；</li>
<li>按照标签的指代和评估指标的不同，可分为定性标签和定量标签；</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>指标最擅长的应用是监测、分析、评价和建模。标签最擅长的应用是标注、刻画、分类和特征提取。特别需要指出的是，由于对结果的标注也是一种标签，所以在自然语言处理和机器学习相关的算法应用场景下，标签对于监督式学习有重要价值，只是单纯的指标难以做到的。而指标在任务分配、绩效管理等领域的作用，也是标签无法做到的。</p>
<h2 id="维度和指标区别与联系">维度和指标区别与联系</h2>
<p>维度就是数据的观察角度，即从哪个角度去分析问题，看待问题。指标就是从维度的基础上去衡算这个结果的值。</p>
<p>维度一般是一个离散的值，比如时间维度上每一个独立的日期或地域，因此统计时，可以把维度相同记录的聚合在一起，应用聚合函数做累加、均值、最大值、最小值等聚合计算。指标就是被聚合的通计算，即聚合运算的结果，一般是一个连续的值。</p>
<h2 id="自然键与代理键在数仓的使用区别">自然键与代理键在数仓的使用区别</h2>
<p>数仓工具箱中说维度表的唯一主键应该是代理键而不应该是自然键。有时建模人员不愿意放弃使用自然键，因为他们希望与操作型代码查询事实表，而不希望与维度表做连接操作。然而，应该避免使用包含业务含义的多维键，因为不管我们做出任何假设最终都可能变得无效，因为我们控制不了业务库的变动。</p>
<p>所以数据仓库中维度表与事实表的每个连接应该基于无实际含义的整数代理键。避免使用自然键作为维度表的主键。</p>
<h2 id="数据集市与数据仓库的区别与联系">数据集市与数据仓库的区别与联系</h2>
<p>数据集市就是企业级数据仓库的一个子集，它主要面向部门级业务，并且只面向某个特定的主题。为了解决灵活性与性能之间的矛盾，数据集市就是数据仓库体系结构中增加的一种小型的部门或工作组级别的数据仓库。数据集市存储为特定用户预先计算好的数据，从而满足用户对性能的需求。数据集市可以在一定程度上缓解访问数据仓库的瓶颈。</p>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">上一页</div>
    <a href="/books/dataengineering-notes/03.%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/03.%E6%95%B0%E4%BB%93%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2022-%E5%9B%9B%E6%9C%88%E5%A4%A9-03-%E4%B8%87%E5%AD%97%E8%AF%A6%E8%A7%A3%E6%95%B0%E4%BB%93%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84-ods-dwd-dws-ads/" rel="next">2022-四月天 03-万字详解数仓分层设计架构 ODS-DWD-DWS-ADS</a>
  </div>
  
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 0001-01-01</p>

          



          


  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); 
    s.async = true;
    s.src = 'https://' + "ngte" + '.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2022 NGTE all rights reserved</p>
        </div>
    </div>
  </div>

  <script type="text/javascript" id="clstr_globe" async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script>
  
</footer>


    </main>
  </div>
</div>
<script src="//unpkg.com/heti/umd/heti-addon.min.js"></script>
<script>
  const heti = new Heti('.article');
  heti.autoSpacing();
</script>
<script type="text/javascript">
  window.$crisp = [];
  window.CRISP_WEBSITE_ID = "12adcc35-9621-4313-8262-62dc654b29d8";
  (function () {
    setTimeout(function() {
      d = document;
      s = d.createElement("script");
      s.src = "https://client.crisp.chat/l.js";
      s.async = 1;
      d.getElementsByTagName("head")[0].appendChild(s);
    }, 2500);
  })();
</script>
  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
      

    

    
    
    

    
    
    
      
      <script id="search-hit-algolia-template" type="text/html">
        <div class="search-hit">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a>
            </div>
            <div class="article-metadata search-hit-type">{{type}}</div>
            <p class="search-hit-description">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js" crossorigin="anonymous"></script>
      
      
    

    
    

    
    
    
    
      <script id="dsq-count-scr" src="https://ngte.disqus.com/count.js" async></script>
      
    

    
    
      
      
      
      
      
      
      
    

    
    <script src="/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js" type="module"></script>
    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
    
    <script src="/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js"></script>

    
    
    
    
    
    
    <script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>


    

    
    
    <script src="https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    <script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>

    


</body>
</html>
