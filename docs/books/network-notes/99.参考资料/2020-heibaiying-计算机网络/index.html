<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="计算机网络 一、体系结构 计算机网络的各层及其协议的集合被称为网络的体系结构，按照不同的维度，其常被分为七层、五层、四层网络结构： 1.1 七层网络模型 开放式系统互联模型（Open System Interconnection Model，简称为 OSI 模型）是"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/network-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-heibaiying-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.fab3cd1900ae35687457073b2d518207.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/network-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-heibaiying-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/network-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-heibaiying-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><meta property="og:title" content="2020-heibaiying-计算机网络 | Next-gen Tech Edu"><meta property="og:description" content="计算机网络 一、体系结构 计算机网络的各层及其协议的集合被称为网络的体系结构，按照不同的维度，其常被分为七层、五层、四层网络结构： 1.1 七层网络模型 开放式系统互联模型（Open System Interconnection Model，简称为 OSI 模型）是"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>2020-heibaiying-计算机网络 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=332978469c636c19fedf7882a40e5c68><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">99.参考资料</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id0e9dab2f93a377cfe74edab40f982349")' href=#id0e9dab2f93a377cfe74edab40f982349 aria-expanded=false aria-controls=id0e9dab2f93a377cfe74edab40f982349 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/>Network-Notes</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id0e9dab2f93a377cfe74edab40f982349 aria-expanded=false aria-controls=id0e9dab2f93a377cfe74edab40f982349><i class="fa-solid fa-angle-down" id=caret-id0e9dab2f93a377cfe74edab40f982349></i></a></div><ul class="nav docs-sidenav collapse show" id=id0e9dab2f93a377cfe74edab40f982349><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id1f19a312640308617ecb033dfddb0cf5")' href=#id1f19a312640308617ecb033dfddb0cf5 aria-expanded=false aria-controls=id1f19a312640308617ecb033dfddb0cf5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/>99.参考资料</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id1f19a312640308617ecb033dfddb0cf5 aria-expanded=false aria-controls=id1f19a312640308617ecb033dfddb0cf5><i class="fa-solid fa-angle-down" id=caret-id1f19a312640308617ecb033dfddb0cf5></i></a></div><ul class="nav docs-sidenav collapse show" id=id1f19a312640308617ecb033dfddb0cf5><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8d227d45f8be7362367f8470222f854c")' href=#id8d227d45f8be7362367f8470222f854c aria-expanded=false aria-controls=id8d227d45f8be7362367f8470222f854c aria-hidden=false data-toggle=collapse></div></div><li class="child level active"><a href=/books/network-notes/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-heibaiying-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>2020-heibaiying-计算机网络</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ide3645c99d2246a8b7730b268edf42046")' href=#ide3645c99d2246a8b7730b268edf42046 aria-expanded=false aria-controls=ide3645c99d2246a8b7730b268edf42046 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/dns/>DNS</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ide3645c99d2246a8b7730b268edf42046 aria-expanded=false aria-controls=ide3645c99d2246a8b7730b268edf42046><i class="fa-solid fa-angle-right" id=caret-ide3645c99d2246a8b7730b268edf42046></i></a></div><ul class="nav docs-sidenav collapse" id=ide3645c99d2246a8b7730b268edf42046><li class="child level"><a href=/books/network-notes/dns/dns-%E8%A7%A3%E6%9E%90%E5%88%86%E7%B1%BB/>DNS 解析分类</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id8cc924eaf620ea77162200efc1c25c33")' href=#id8cc924eaf620ea77162200efc1c25c33 aria-expanded=false aria-controls=id8cc924eaf620ea77162200efc1c25c33 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/>HTTP</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id8cc924eaf620ea77162200efc1c25c33 aria-expanded=false aria-controls=id8cc924eaf620ea77162200efc1c25c33><i class="fa-solid fa-angle-right" id=caret-id8cc924eaf620ea77162200efc1c25c33></i></a></div><ul class="nav docs-sidenav collapse" id=id8cc924eaf620ea77162200efc1c25c33><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id58da91f265d068536ad0b3e7d0e1c117")' href=#id58da91f265d068536ad0b3e7d0e1c117 aria-expanded=false aria-controls=id58da91f265d068536ad0b3e7d0e1c117 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/http1/>HTTP1</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id58da91f265d068536ad0b3e7d0e1c117 aria-expanded=false aria-controls=id58da91f265d068536ad0b3e7d0e1c117><i class="fa-solid fa-angle-right" id=caret-id58da91f265d068536ad0b3e7d0e1c117></i></a></div><ul class="nav docs-sidenav collapse" id=id58da91f265d068536ad0b3e7d0e1c117><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id273bc86c28e3efebe6a1d4f5f8d92de6")' href=#id273bc86c28e3efebe6a1d4f5f8d92de6 aria-expanded=false aria-controls=id273bc86c28e3efebe6a1d4f5f8d92de6 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc84b764bf6d6e7029cb7dc72fcc10886")' href=#idc84b764bf6d6e7029cb7dc72fcc10886 aria-expanded=false aria-controls=idc84b764bf6d6e7029cb7dc72fcc10886 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/http1/%E8%AF%B7%E6%B1%82/>请求</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc84b764bf6d6e7029cb7dc72fcc10886 aria-expanded=false aria-controls=idc84b764bf6d6e7029cb7dc72fcc10886><i class="fa-solid fa-angle-right" id=caret-idc84b764bf6d6e7029cb7dc72fcc10886></i></a></div><ul class="nav docs-sidenav collapse" id=idc84b764bf6d6e7029cb7dc72fcc10886><li class="child level"><a href=/books/network-notes/http/http1/%E8%AF%B7%E6%B1%82/url/>URL</a></li><li class="child level"><a href=/books/network-notes/http/http1/%E8%AF%B7%E6%B1%82/%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95/>请求方法</a></li><li class="child level"><a href=/books/network-notes/http/http1/%E8%AF%B7%E6%B1%82/%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7/>请求工具</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd6bef7f35329175fbeef27d2ecde01b1")' href=#idd6bef7f35329175fbeef27d2ecde01b1 aria-expanded=false aria-controls=idd6bef7f35329175fbeef27d2ecde01b1 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/http1/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/>文件上传</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd6bef7f35329175fbeef27d2ecde01b1 aria-expanded=false aria-controls=idd6bef7f35329175fbeef27d2ecde01b1><i class="fa-solid fa-angle-right" id=caret-idd6bef7f35329175fbeef27d2ecde01b1></i></a></div><ul class="nav docs-sidenav collapse" id=idd6bef7f35329175fbeef27d2ecde01b1><li class="child level"><a href=/books/network-notes/http/http1/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/range/>Range</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id2768c63f56cc7131bc1f881a93a8f6c5")' href=#id2768c63f56cc7131bc1f881a93a8f6c5 aria-expanded=false aria-controls=id2768c63f56cc7131bc1f881a93a8f6c5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/http1/%E5%93%8D%E5%BA%94/>响应</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id2768c63f56cc7131bc1f881a93a8f6c5 aria-expanded=false aria-controls=id2768c63f56cc7131bc1f881a93a8f6c5><i class="fa-solid fa-angle-right" id=caret-id2768c63f56cc7131bc1f881a93a8f6c5></i></a></div><ul class="nav docs-sidenav collapse" id=id2768c63f56cc7131bc1f881a93a8f6c5><li class="child level"><a href=/books/network-notes/http/http1/%E5%93%8D%E5%BA%94/%E7%8A%B6%E6%80%81%E7%A0%81/>状态码</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id83f40ba9a3f1c382cd1b21cc72513552")' href=#id83f40ba9a3f1c382cd1b21cc72513552 aria-expanded=false aria-controls=id83f40ba9a3f1c382cd1b21cc72513552 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/http2/>HTTP2</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id83f40ba9a3f1c382cd1b21cc72513552 aria-expanded=false aria-controls=id83f40ba9a3f1c382cd1b21cc72513552><i class="fa-solid fa-angle-right" id=caret-id83f40ba9a3f1c382cd1b21cc72513552></i></a></div><ul class="nav docs-sidenav collapse" id=id83f40ba9a3f1c382cd1b21cc72513552><li class="child level"><a href=/books/network-notes/http/http2/%E5%AE%9E%E6%88%98/>实战</a></li><li class="child level"><a href=/books/network-notes/http/http2/%E5%8D%8F%E8%AE%AE/>协议</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id061aefd7ce1ae69eb18e0816e20a6173")' href=#id061aefd7ce1ae69eb18e0816e20a6173 aria-expanded=false aria-controls=id061aefd7ce1ae69eb18e0816e20a6173 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id4dfffdd9f834332b1b30b852efb5c89f")' href=#id4dfffdd9f834332b1b30b852efb5c89f aria-expanded=false aria-controls=id4dfffdd9f834332b1b30b852efb5c89f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/https/>HTTPS</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id4dfffdd9f834332b1b30b852efb5c89f aria-expanded=false aria-controls=id4dfffdd9f834332b1b30b852efb5c89f><i class="fa-solid fa-angle-right" id=caret-id4dfffdd9f834332b1b30b852efb5c89f></i></a></div><ul class="nav docs-sidenav collapse" id=id4dfffdd9f834332b1b30b852efb5c89f><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ide52f339df785eb20ab5d850f0d9b63a5")' href=#ide52f339df785eb20ab5d850f0d9b63a5 aria-expanded=false aria-controls=ide52f339df785eb20ab5d850f0d9b63a5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/https/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/>99.参考资料</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ide52f339df785eb20ab5d850f0d9b63a5 aria-expanded=false aria-controls=ide52f339df785eb20ab5d850f0d9b63a5><i class="fa-solid fa-angle-right" id=caret-ide52f339df785eb20ab5d850f0d9b63a5></i></a></div><ul class="nav docs-sidenav collapse" id=ide52f339df785eb20ab5d850f0d9b63a5><li class="child level"><a href=/books/network-notes/http/https/99.%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/2020-heibaiying-https/>2020-heibaiying-HTTPS</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc6cd53c2865ef6265bdabbc10793f7be")' href=#idc6cd53c2865ef6265bdabbc10793f7be aria-expanded=false aria-controls=idc6cd53c2865ef6265bdabbc10793f7be aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/http/https/%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/>辅助工具</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc6cd53c2865ef6265bdabbc10793f7be aria-expanded=false aria-controls=idc6cd53c2865ef6265bdabbc10793f7be><i class="fa-solid fa-angle-right" id=caret-idc6cd53c2865ef6265bdabbc10793f7be></i></a></div><ul class="nav docs-sidenav collapse" id=idc6cd53c2865ef6265bdabbc10793f7be><li class="child level"><a href=/books/network-notes/http/https/%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/mkcert/>mkcert</a></li></ul></div><li class="child level"><a href=/books/network-notes/http/https/%E5%B7%A5%E5%85%B7%E4%B8%8E%E9%85%8D%E7%BD%AE/>工具与配置</a></li><li class="child level"><a href=/books/network-notes/http/https/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/>加密算法</a></li><li class="child level"><a href=/books/network-notes/http/https/%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B/>握手过程</a></li><li class="child level"><a href=/books/network-notes/http/https/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>性能优化</a></li></ul></div><li class="child level"><a href=/books/network-notes/http/%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2/>发展历史</a></li></ul></div><li class="child level"><a href=/books/network-notes/introduction/>INTRODUCTION</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id5d854363f1fd66fa5fb1f82370c48c1f")' href=#id5d854363f1fd66fa5fb1f82370c48c1f aria-expanded=false aria-controls=id5d854363f1fd66fa5fb1f82370c48c1f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/>IoT</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id5d854363f1fd66fa5fb1f82370c48c1f aria-expanded=false aria-controls=id5d854363f1fd66fa5fb1f82370c48c1f><i class="fa-solid fa-angle-right" id=caret-id5d854363f1fd66fa5fb1f82370c48c1f></i></a></div><ul class="nav docs-sidenav collapse" id=id5d854363f1fd66fa5fb1f82370c48c1f><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id03aa56b71e0dbbef4b9b62ac9bc94d1b")' href=#id03aa56b71e0dbbef4b9b62ac9bc94d1b aria-expanded=false aria-controls=id03aa56b71e0dbbef4b9b62ac9bc94d1b aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id9abc321e826b6b74f268be16f8ea5908")' href=#id9abc321e826b6b74f268be16f8ea5908 aria-expanded=false aria-controls=id9abc321e826b6b74f268be16f8ea5908 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/>协议</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id9abc321e826b6b74f268be16f8ea5908 aria-expanded=false aria-controls=id9abc321e826b6b74f268be16f8ea5908><i class="fa-solid fa-angle-right" id=caret-id9abc321e826b6b74f268be16f8ea5908></i></a></div><ul class="nav docs-sidenav collapse" id=id9abc321e826b6b74f268be16f8ea5908><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida89c4be60b947f8885b72e3ded122922")' href=#ida89c4be60b947f8885b72e3ded122922 aria-expanded=false aria-controls=ida89c4be60b947f8885b72e3ded122922 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6b34fda82c2080f5ba681bc92b6963fe")' href=#id6b34fda82c2080f5ba681bc92b6963fe aria-expanded=false aria-controls=id6b34fda82c2080f5ba681bc92b6963fe aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/>MQTT</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id6b34fda82c2080f5ba681bc92b6963fe aria-expanded=false aria-controls=id6b34fda82c2080f5ba681bc92b6963fe><i class="fa-solid fa-angle-right" id=caret-id6b34fda82c2080f5ba681bc92b6963fe></i></a></div><ul class="nav docs-sidenav collapse" id=id6b34fda82c2080f5ba681bc92b6963fe><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id26b0ea3119397a1c07721a9d3458f378")' href=#id26b0ea3119397a1c07721a9d3458f378 aria-expanded=false aria-controls=id26b0ea3119397a1c07721a9d3458f378 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/>版本特性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id26b0ea3119397a1c07721a9d3458f378 aria-expanded=false aria-controls=id26b0ea3119397a1c07721a9d3458f378><i class="fa-solid fa-angle-right" id=caret-id26b0ea3119397a1c07721a9d3458f378></i></a></div><ul class="nav docs-sidenav collapse" id=id26b0ea3119397a1c07721a9d3458f378><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/mqtt-5.0-%E6%96%B0%E7%89%B9%E6%80%A7/>MQTT 5.0 新特性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id071bf0062c7dd8168d9678e311871e64")' href=#id071bf0062c7dd8168d9678e311871e64 aria-expanded=false aria-controls=id071bf0062c7dd8168d9678e311871e64 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/>框架与库</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id071bf0062c7dd8168d9678e311871e64 aria-expanded=false aria-controls=id071bf0062c7dd8168d9678e311871e64><i class="fa-solid fa-angle-right" id=caret-id071bf0062c7dd8168d9678e311871e64></i></a></div><ul class="nav docs-sidenav collapse" id=id071bf0062c7dd8168d9678e311871e64><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E6%A1%86%E6%9E%B6%E4%B8%8E%E5%BA%93/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/>快速开始</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idbc06984312b1790d93e8ae7d45e502dd")' href=#idbc06984312b1790d93e8ae7d45e502dd aria-expanded=false aria-controls=idbc06984312b1790d93e8ae7d45e502dd aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/>协议规范</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idbc06984312b1790d93e8ae7d45e502dd aria-expanded=false aria-controls=idbc06984312b1790d93e8ae7d45e502dd><i class="fa-solid fa-angle-right" id=caret-idbc06984312b1790d93e8ae7d45e502dd></i></a></div><ul class="nav docs-sidenav collapse" id=idbc06984312b1790d93e8ae7d45e502dd><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/01.%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/>01.基本概念</a></li><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/02.%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE/>02.报文协议</a></li><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/03.%E8%BF%9E%E6%8E%A5%E4%B8%8E%E6%96%AD%E5%BC%80/>03.连接与断开</a></li><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/qos/>QoS</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd879977450949e495a7ca905822ef37c")' href=#idd879977450949e495a7ca905822ef37c aria-expanded=false aria-controls=idd879977450949e495a7ca905822ef37c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/retained-%E6%B6%88%E6%81%AF/>Retained 消息</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd879977450949e495a7ca905822ef37c aria-expanded=false aria-controls=idd879977450949e495a7ca905822ef37c><i class="fa-solid fa-angle-right" id=caret-idd879977450949e495a7ca905822ef37c></i></a></div><ul class="nav docs-sidenav collapse" id=idd879977450949e495a7ca905822ef37c><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/retained-%E6%B6%88%E6%81%AF/%E4%BB%A3%E7%A0%81paho-retained-%E6%B6%88%E6%81%AF%E4%BB%A3%E7%A0%81/>代码：paho Retained 消息代码</a></li></ul></div><li class="child level"><a href=/books/network-notes/iot/%E5%8D%8F%E8%AE%AE/mqtt/%E5%8D%8F%E8%AE%AE%E8%A7%84%E8%8C%83/%E6%B6%88%E6%81%AF%E7%9A%84%E5%8F%91%E5%B8%83%E5%92%8C%E8%AE%A2%E9%98%85/>消息的发布和订阅</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6620f7c8f755d5f697a690c3ffc22b9f")' href=#id6620f7c8f755d5f697a690c3ffc22b9f aria-expanded=false aria-controls=id6620f7c8f755d5f697a690c3ffc22b9f aria-hidden=false data-toggle=collapse></div></div></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb349c1786662b53661951620e1b2331a")' href=#idb349c1786662b53661951620e1b2331a aria-expanded=false aria-controls=idb349c1786662b53661951620e1b2331a aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id15c957933f28c0b862d867f8fb5fd13b")' href=#id15c957933f28c0b862d867f8fb5fd13b aria-expanded=false aria-controls=id15c957933f28c0b862d867f8fb5fd13b aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/samba/>Samba</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id15c957933f28c0b862d867f8fb5fd13b aria-expanded=false aria-controls=id15c957933f28c0b862d867f8fb5fd13b><i class="fa-solid fa-angle-right" id=caret-id15c957933f28c0b862d867f8fb5fd13b></i></a></div><ul class="nav docs-sidenav collapse" id=id15c957933f28c0b862d867f8fb5fd13b><li class="child level"><a href=/books/network-notes/samba/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/>环境配置</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id7b70d435878252bdec4497a17daac927")' href=#id7b70d435878252bdec4497a17daac927 aria-expanded=false aria-controls=id7b70d435878252bdec4497a17daac927 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/socket/>Socket</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id7b70d435878252bdec4497a17daac927 aria-expanded=false aria-controls=id7b70d435878252bdec4497a17daac927><i class="fa-solid fa-angle-right" id=caret-id7b70d435878252bdec4497a17daac927></i></a></div><ul class="nav docs-sidenav collapse" id=id7b70d435878252bdec4497a17daac927><li class="child level"><a href=/books/network-notes/socket/socket/>Socket</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf11ecba632870b60bcb03e14ed068afc")' href=#idf11ecba632870b60bcb03e14ed068afc aria-expanded=false aria-controls=idf11ecba632870b60bcb03e14ed068afc aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/tcpip/>TCPIP</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf11ecba632870b60bcb03e14ed068afc aria-expanded=false aria-controls=idf11ecba632870b60bcb03e14ed068afc><i class="fa-solid fa-angle-right" id=caret-idf11ecba632870b60bcb03e14ed068afc></i></a></div><ul class="nav docs-sidenav collapse" id=idf11ecba632870b60bcb03e14ed068afc><li class="child level"><a href=/books/network-notes/tcpip/osi-%E6%A8%A1%E5%9E%8B/>OSI 模型</a></li><li class="child level"><a href=/books/network-notes/tcpip/socks/>Socks</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id1dedb51e4030ee023dd6b323b5cb77fc")' href=#id1dedb51e4030ee023dd6b323b5cb77fc aria-expanded=false aria-controls=id1dedb51e4030ee023dd6b323b5cb77fc aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/tcpip/tcp/>TCP</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id1dedb51e4030ee023dd6b323b5cb77fc aria-expanded=false aria-controls=id1dedb51e4030ee023dd6b323b5cb77fc><i class="fa-solid fa-angle-right" id=caret-id1dedb51e4030ee023dd6b323b5cb77fc></i></a></div><ul class="nav docs-sidenav collapse" id=id1dedb51e4030ee023dd6b323b5cb77fc><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id91f6518aa0916b598bc890e1cd94064e")' href=#id91f6518aa0916b598bc890e1cd94064e aria-expanded=false aria-controls=id91f6518aa0916b598bc890e1cd94064e aria-hidden=false data-toggle=collapse></div></div><li class="child level"><a href=/books/network-notes/tcpip/tcp/%E5%9C%B0%E5%9D%80%E4%B8%8E%E5%8D%8F%E8%AE%AE/>地址与协议</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb0b5aa421a06859cc208836a8ac63fc4")' href=#idb0b5aa421a06859cc208836a8ac63fc4 aria-expanded=false aria-controls=idb0b5aa421a06859cc208836a8ac63fc4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/network-notes/tcpip/tcp/%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E4%B8%8E%E5%85%B3%E9%97%AD/>连接建立与关闭</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb0b5aa421a06859cc208836a8ac63fc4 aria-expanded=false aria-controls=idb0b5aa421a06859cc208836a8ac63fc4><i class="fa-solid fa-angle-right" id=caret-idb0b5aa421a06859cc208836a8ac63fc4></i></a></div><ul class="nav docs-sidenav collapse" id=idb0b5aa421a06859cc208836a8ac63fc4><li class="child level"><a href=/books/network-notes/tcpip/tcp/%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E4%B8%8E%E5%85%B3%E9%97%AD/%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B/>通信过程</a></li></ul></div><li class="child level"><a href=/books/network-notes/tcpip/tcp/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/>优化算法</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd6544db256b4d52592face7f96e6cff7")' href=#idd6544db256b4d52592face7f96e6cff7 aria-expanded=false aria-controls=idd6544db256b4d52592face7f96e6cff7 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6b3a4d6702129ab195ec44a90af2d1ad")' href=#id6b3a4d6702129ab195ec44a90af2d1ad aria-expanded=false aria-controls=id6b3a4d6702129ab195ec44a90af2d1ad aria-hidden=false data-toggle=collapse></div></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#一体系结构>一、体系结构</a><ul><li><a href=#11-七层网络模型>1.1 七层网络模型</a></li><li><a href=#12-四层网络模型>1.2 四层网络模型</a></li><li><a href=#13-五层网络模型>1.3 五层网络模型</a></li></ul></li><li><a href=#二物理层>二、物理层</a><ul><li><a href=#21-传输媒介>2.1 传输媒介</a></li><li><a href=#22-信道分类>2.2 信道分类</a></li><li><a href=#23-信道复用>2.3 信道复用</a></li></ul></li><li><a href=#三数据链路层>三、数据链路层</a><ul><li><a href=#31-基本功能>3.1 基本功能</a></li><li><a href=#32-ppp-协议>3.2 PPP 协议</a></li><li><a href=#33-mac-地址>3.3 Mac 地址</a></li><li><a href=#34-局域网>3.4 局域网</a></li><li><a href=#35-以太网>3.5 以太网</a></li></ul></li><li><a href=#四网络层>四、网络层</a><ul><li><a href=#41-网际协议-ip>4.1 网际协议 IP</a></li><li><a href=#42-arp-协议>4.2 ARP 协议</a></li><li><a href=#43-ip-地址分类>4.3 IP 地址分类</a></li><li><a href=#44-划分子网>4.4 划分子网</a></li><li><a href=#45-构成超网>4.5 构成超网</a></li><li><a href=#46-icmp-和-igmp>4.6 ICMP 和 IGMP</a></li><li><a href=#47-专用地址>4.7 专用地址</a></li><li><a href=#48-vpn>4.8 VPN</a></li><li><a href=#48-nat>4.8 NAT</a></li><li><a href=#49-ipv6>4.9 IPv6</a></li></ul></li><li><a href=#五传输层>五、传输层</a><ul><li><a href=#51-udp>5.1 UDP</a></li><li><a href=#52-tcp-简介>5.2 TCP 简介</a></li><li><a href=#53-tcp-报文首部>5.3 TCP 报文首部</a></li><li><a href=#54-三次握手>5.4 三次握手</a></li><li><a href=#55-四次挥手>5.5 四次挥手</a></li><li><a href=#56-可靠传输的原理>5.6 可靠传输的原理</a></li><li><a href=#57-tcp-的可靠传输>5.7 TCP 的可靠传输</a></li><li><a href=#58-流量控制>5.8 流量控制</a></li><li><a href=#59-拥塞控制>5.9 拥塞控制</a></li></ul></li><li><a href=#六应用层>六、应用层</a><ul><li><a href=#61-域名系统-dns>6.1 域名系统 DNS</a></li><li><a href=#62-文件传输协议-ftp>6.2 文件传输协议 FTP</a></li><li><a href=#63-远程终端协议-telnet>6.3 远程终端协议 TELNET</a></li><li><a href=#64-万维网-www>6.4 万维网 WWW</a></li><li><a href=#65-动态主机配置协议-dhcp>6.5 动态主机配置协议 DHCP</a></li></ul></li><li><a href=#参考资料>参考资料</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>2020-heibaiying-计算机网络</h1><div class=article-style><h1 id=计算机网络>计算机网络</h1><h2 id=一体系结构>一、体系结构</h2><p>计算机网络的各层及其协议的集合被称为网络的体系结构，按照不同的维度，其常被分为七层、五层、四层网络结构：</p><h3 id=11-七层网络模型>1.1 七层网络模型</h3><p>开放式系统互联模型（Open System Interconnection Model，简称为 OSI 模型）是一种概念模型，由国际标准化组织提出，并试图成为计算机在世界范围内互连为网络的标准框架，它具有七层网络结构。</p><h3 id=12-四层网络模型>1.2 四层网络模型</h3><p>互联网协议套件（Internet Protocol Suite，IPS）是多个网络传输协议的集合，它为网际网络的基础通信提供架构支撑。由于该协议族中最核心的两个协议分别为 TCP（传输控制协议）和 IP（网际协议），因此它也被称为 TCP/IP 协议族（TCP/IP Protocol Suite 或 TCP/IP Protocols），简称 TCP/IP，它具有四层网络结构 。</p><h3 id=13-五层网络模型>1.3 五层网络模型</h3><p>OSI 七层网络模型由国际标准化组织进行制定，它是正统意义上的国际标准。但其实现过于复杂，且制定周期过长，在其整套标准推出之前，TCP/IP 模型已经在全球范围内被广泛使用，所以 TCP/IP 模型才是事实上的国际标准。TCP/IP 模型定义了应用层、传输层、网际层、网络接口层这四层网络结构，但并没有给出网络接口层的具体内容，因此在学习和开发中，通常将网络接口层替换为 OSI 七层模型中的数据链路层和物理层来进行理解，这就是五层网络模型：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/计算机网络体系结构.png></div><ol><li><strong>应用层 (application layer)</strong>：直接为应用进程提供服务。应用层协议定义的是应用进程间通讯和交互的规则，不同的应用有着不同的应用层协议，如 HTTP 协议（万维网服务）、FTP 协议（文件传输）、SMTP 协议（电子邮件）、DNS（域名查询）等。</li><li><strong>传输层 (transport layer)</strong>：有时也译为运输层，它负责为两台主机中的进程提供通信服务。该层主要有以下两种协议：<ul><li>传输控制协议 (Transmission Control Protocol，TCP)：提供面向连接的、可靠的数据传输服务，数据传输的基本单位是报文段（segment）；</li><li>用户数据报协议 (User Datagram Protocol，UDP)：提供无连接的、尽最大努力的数据传输服务，但不保证数据传输的可靠性，数据传输的基本单位是用户数据报。</li></ul></li><li><strong>网络层 (internet layer)</strong>：有时也译为网际层，它负责为两台主机提供通信服务，并通过选择合适的路由将数据传递到目标主机。</li><li><strong>数据链路层 (data link layer)</strong>：负责将网络层交下来的 IP 数据报封装成帧，并在链路的两个相邻节点间传送帧，每一帧都包含数据和必要的控制信息（如同步信息、地址信息、差错控制等）。</li><li><strong>物理层 (physical Layer)</strong>：确保数据可以在各种物理媒介上进行传输，为数据的传输提供可靠的环境。</li></ol><h2 id=二物理层>二、物理层</h2><p>物理层考虑的是如何在各种媒介上传输数据，它定义了与传输媒介相关的接口特性，如：</p><ul><li><strong>机械特性</strong>：指明接口所用的接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。</li><li><strong>电气特性</strong>：指明在接口电缆的各条线上出现的电压的范围。</li><li><strong>功能特性</strong>：指明某条线上出现的某一电平的电压的意义。</li><li><strong>规程特性</strong>：指明对于不同功能的各种可能事件的出现顺序。</li></ul><h3 id=21-传输媒介>2.1 传输媒介</h3><p>物理层并不指具体的传输媒介，相反物理层希望能够尽量屏蔽不同媒介间的差异。这些传输媒介可以分为以下两类：</p><ul><li><strong>导引型传输媒介</strong>：信号被导引沿着固体媒介进行传播，如双绞线、同轴电缆、光缆。</li><li><strong>非导引型传输媒介</strong>：信号在自由空间内进行传播，如短波通信、微波通信。</li></ul><h3 id=22-信道分类>2.2 信道分类</h3><p>信道是指信息传输的基本通道，它可以分为以下三类：</p><ul><li><strong>单工信道</strong>：只能有一个方向的通信而没有反方向的通信；</li><li><strong>半双工信道</strong>：通信的双方都能发送信息，但双方不能同时发送或接收信息。</li><li><strong>全双工信道</strong>：通信的双方可以同时发送和接收信息。</li></ul><h3 id=23-信道复用>2.3 信道复用</h3><p>信道复用是信息传输当中最常使用的技术，用于提高信息传输的效率，根据采用技术的不同，可以分为以下几类：</p><p><strong>1. 频分复用</strong></p><p>频分复用（FDM，Frequency Division Multiplexing）是将用于传输信道的总带宽划分成若干个子频带（或称子信道），每个子信道传输一路信号：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/频分复用.png></div><p><strong>2. 时分复用</strong></p><p>时分复用（TDM，Time Division Multiplexing) 是指采用同一物理连接的不同时段来传输不同的信号：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/时分复用.png></div><p>如上图所示，在一个时分复用帧中，不同用户的信号周期性出现，如果某个用户处于闲置状态，则其对应的帧上也会出现空闲：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/时分复用的缺陷.png></div><p>为了解决时分复用的这个缺点就产生了统计时分复用。</p><p><strong>3. 统计时分复用</strong></p><p>在统计时分复用（Statistic TDM）模式下，各用户将数据发送到集中器的输入缓存中，然后由集中器进行顺序扫描并放入到 STDM 帧中：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/统计时分复用.png></div><p><strong>4. 波分复用</strong></p><p>波分复用（WDM，Wavelength Division Multiplexing）是将两种或多种不同波长的光载波信号在发送端经复用器汇合在一起，并耦合到光线路的同一根光纤中进行传输；在接收端，经分用器将各种波长的光载波分离，然后由光解调器作进一步处理以恢复原信号：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/波分复用.png></div><p><strong>5.码分复用</strong></p><p>码分复用（CDM，Code Division Multiplexing）是靠不同的编码来区分各路原始信号的一种复用方式。</p><h2 id=三数据链路层>三、数据链路层</h2><h3 id=31-基本功能>3.1 基本功能</h3><p><strong>1. 封装成帧</strong></p><p>数据链路层会将网络层传递下来的数据拆分为多段，并在每段数据前后分别添加首部和尾部，以构成一个完成的帧，帧是链路层传输的基本数据单元。帧首部用控制字符 <code>SOH</code> 表示，帧尾部用控制字符 <code>EOT</code> 表示：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/封装成帧.png></div><p><strong>2. 透明传输</strong></p><p>透明传输是指不论何种数据都应当能够在链路上进行安全地传输。由于我们采用控制字符来封装帧，当传输数据中出现了控制字符时，就会导致无法正确区分出帧头帧尾，此时需要使用转移字符 <code>ESC</code> 来进行转义：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/透明传输.png></div><p><strong>3. 差错检测</strong></p><p>由于现实环境中的通信链路都是不理想的，因此比特在传输过程中可能会产生差错：1 可能会变成 0，而 0 也可能变成 1，这称为比特差错。在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率。为了解决这个问题，数据链路层将待发送的数据分为多组，并采用循环冗余校验（CRC，Cyclic Redundancy Check）技术为每组数据生成冗余校验码，之后将每组数据和其校验码共同构成一帧后再发送出去。</p><h3 id=32-ppp-协议>3.2 PPP 协议</h3><p>点到点协议（PPP，Point to Point Protocol）是目前使用最为广泛的数据链路层协议，主要用于建立点对点的连接来传输数据单元。它由以下三部分组成：</p><ul><li>一个将 IP 数据报封装到串行链路的方法；</li><li><strong>链路控制协议 (LCP)</strong> ：一种扩展链路控制协议，用于建立、配置、测试和管理数据链路连接。</li><li><strong>网络控制协议 (NCP)</strong> ：协商该链路上所传输的数据包格式与类型，建立、配置不同的网络层协议。</li></ul><h3 id=33-mac-地址>3.3 Mac 地址</h3><p>MAC 地址（Media Access Control Address），直译为媒体存取控制地址，也称为局域网地址（LAN Address）或物理地址（Physical Address）。MAC 地址用于在网络中唯一标识一个网卡，一台设备若有多个网卡，则每个网卡都会有一个唯一的 MAC 地址。链路层通过 Mac 地址来识别需要发送数据的目标节点。</p><p>MAC 地址为 48 位的（6 个字节），通常表示为 12 个 16 进制数，每两个 16 进制数之间用冒号隔开，如 <code>08：00：20：0A：8C：6D</code>，前 3 字节为组织机构唯一标识（OUI，Organizationally Unique Identifier），由 IEEE 的注册管理机构统一分配给硬件生产厂家，以确保在全球范围内的唯一；后 3 字节由厂家自行分配。</p><h3 id=34-局域网>3.4 局域网</h3><p>局域网（LAN，Local Area Network）是连接住宅、学校、实验室、大学校园或办公大楼等有限区域内计算机的网络。 按照 IEEE802 标准，局域网体系结构分为三层，即物理层，媒体链路控制层（MAC），逻辑链路控制层（LLC）。实际上是两层，该标准将数据链路层拆分为更具体的媒体链路控制层和逻辑链路控制层。</p><h3 id=35-以太网>3.5 以太网</h3><p>以太网（Ethernet）是目前使用范围最广的局域网，以常用的以太网 v2 标准为例，其帧格式如下：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/Ethernet_Type_II_Frame_format.png></div><p>其中 Mac Header 分别记录了目的地的 Mac 地址和来源地的 Mac 地址。</p><h2 id=四网络层>四、网络层</h2><h3 id=41-网际协议-ip>4.1 网际协议 IP</h3><p>网际协议（Internet Protocol）是网络层中最重要的协议，也是 TCP\IP 两大核心协议之一，所有需要互联的计算机网络都需要遵循该协议，以便能够将不同网络在全世界范围内连接起来。该层传输的基本数据单元是 IP 数据报，其格式如下：</p><div align=center><img width=600px src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/IP数据报格式.png></div><p>各字段的含义如下：</p><ul><li><strong>版本</strong>：占 4 位，指 IP 协议的版本（IPv4 或 IPv6）。</li><li><strong>首部长度</strong>：占 4 位，可表示的最大十进制数是 15 。</li><li><strong>区分服务</strong>：只有在使用区分服务时，该字段才有用，一般情况下不会用到。</li><li><strong>总长度</strong>：指首部长度和数据长度之和，单位为字节。该字段为 16 位，因此数据报最大长度为 65535 个字节，由于数据链路层规定了一个帧中数据字段的最大长度 MTU（Maximum Transfer Unit，最大传送单元），以以太网为例，该值为 1500，所以当数据报长度超过 MTU 时，需要对数据进行分片。</li><li><strong>标识</strong>：占 16 位，由 IP 软件内部的计数器维护，每产生一个数据报，计数器就加 1，用于发生分片时，将相同数据报标识的分片重组为原数据报。</li><li><strong>标志</strong>：占 3 位，目前只有两位有意义：<ul><li>最低位 MF（More Fragment）：为 1 时表示后面还有分片，为 0 时表示该数据报分片已经是最后一个；</li><li>中间位 DF（Don&rsquo;t Fragment）：代表不能分片，只有将其设为 1 时，才允许分片。</li></ul></li><li><strong>片偏移</strong>：占 13 位，标识该片在原数据报中的偏移位置。</li><li><strong>生存时间</strong>：TTL，每经过一个路由器，其值就会减 1，当值为 0 时，就将该数据报丢弃。这样做是为了避免数据报目的地址不存在时，数据报一直在网络中无限制转发。</li><li><strong>协议</strong>：占 8 位，指明数据报携带的数据所使用的协议。</li><li><strong>首部校验和</strong>：占 16 位，其只校验数据报的首部，不包括数据部分。</li><li><strong>源地址</strong>：占 32 位，数据来源的 IP 地址；</li><li><strong>目的地址</strong>：占 32 位，目的地的 IP 地址。</li></ul><h3 id=42-arp-协议>4.2 ARP 协议</h3><p>IP 数据报中的源地址和目标地址均是 IP 地址，而数据链路层的帧中的源地址和目标地址均是 Mac 地址，那么怎样根据 IP 地址获得 Mac 地址？这就需要使用到 ARP 协议。互联网络中的每台主机都有一个 ARP 缓存表，存储了本局域网内各主机和路由器的 IP 地址与 Mac 地址的映射关系，示例如下：</p><table><thead><tr><th style=text-align:center>主机名称</th><th style=text-align:center>IP 地址</th><th style=text-align:center>MAC 地址</th></tr></thead><tbody><tr><td style=text-align:center>A</td><td style=text-align:center>192.168.38.10</td><td style=text-align:center>00-AA-00-62-D2-02</td></tr><tr><td style=text-align:center>B</td><td style=text-align:center>192.168.38.11</td><td style=text-align:center>00-BB-00-62-C2-02</td></tr><tr><td style=text-align:center>C</td><td style=text-align:center>192.168.38.12</td><td style=text-align:center>00-CC-00-62-C2-02</td></tr><tr><td style=text-align:center>D</td><td style=text-align:center>192.168.38.13</td><td style=text-align:center>00-DD-00-62-C2-02</td></tr><tr><td style=text-align:center>E</td><td style=text-align:center>192.168.38.14</td><td style=text-align:center>00-EE-00-62-C2-02</td></tr></tbody></table><blockquote><p>你也可以使用 <code>arp -a</code> 来查看你本机的 ARP 缓存表 。</p></blockquote><p>拥有 ARP 表后，数据链路层中帧的发送过程如下：</p><ul><li>主机 A 发送数据前， 会先查看自己的 ARP 表中是否有目标 IP 对应的 Mac 地址，如果有则将其封装到帧里，然后发送；</li><li>如果没有找到，主机 A 则会以广播的方式向同一网段内的所有主机发出对该 IP 地址的询问；</li><li>对应 IP 地址的主机接收到这个消息后以单播的方式将对应的 Mac 地址回复给主机 A 。</li></ul><h3 id=43-ip-地址分类>4.3 IP 地址分类</h3><p>IP 地址由 ICANN（The Internet Corporation for Assigned Names and Numbers，互联网名称与数字地址分配机构）进行分配，它是一个在全世界范围内唯一的 32 位标识符，最早的 IP 地址采用两级分类，只由 <code>网络号 + 主机号</code> 组成，分为以下五类：</p><div align=center><img width=600px src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/IP地址分类.png></div><p>A，B，C 三类是最常使用的类型，其类别位分别为 0，10，110 。需要注意的是另外并非所有 IP 地址都可用来分配，限制如下：</p><p><strong>网络号限制</strong>：</p><ul><li>网络号全为 0 的 IP 地址是保留地址，代表 “本网络”（B，C 两类地址的网络号开头都是 1，所以不存在全 0 的情况）；</li><li>网络号为 127（即 01111111）也是保留地址，作为回环测试使用（同上，B 和 C 两类地址也不存在该情况）；</li><li>B 类地址 128.0.0.0 （网络号为 10000000 00000000）不能用于分配；</li><li>C 类地址 192.0.0.0 （网络号为 11000000 00000000）不能用于分配；</li></ul><p><strong>主机号限制</strong>：</p><ul><li>全 0 主机号表示该 IP 地址是本主机所连接到的单个网络地址，如 IP 地址为 5.6.7.8 的主机所在的网络地址就是 5.0.0.0，该地址不能用于分配；</li><li>全 1 主机号表示该网络上的所有主机，因此也不能被分配。</li></ul><p>综上所述，每种网络类型所能分配到 IP 地址的情况如下：</p><table><thead><tr><th>网络类别</th><th>最大可分配的网络数</th><th>第一个可分配的网络号</th><th>最后一个可分配的网络号</th><th>每个网络的最大主机数</th></tr></thead><tbody><tr><td>A</td><td>126（2<sup>7</sup>-2）</td><td>1</td><td>126</td><td>16 777 215（2<sup>24</sup>-2）</td></tr><tr><td>B</td><td>16 383（2<sup>14</sup>-1）</td><td>128.1</td><td>191.255</td><td>65 534（2<sup>16</sup>-2）</td></tr><tr><td>C</td><td>2 097 151（2<sup>21</sup>-1）</td><td>192.0.1</td><td>223.255.255</td><td>254（2<sup>8</sup>-2）</td></tr></tbody></table><p>从该表我们可以看出来，两级 IP 地址灵活性不足，且利用率较低，假设你现在的公司有 4 个机房（每个机房 20 台主机），出于信息安全的考虑，每个机房的网络需要彼此隔离，在两级 IP 的架构下你就只能申请 4 个 C 类地址，此时你浪费的 IP 数量为 <code>(254-20)*4</code> ，为解决两级 IP 地址灵活性不足问题，就产生了三级 IP 地址，即划分子网。此时你只需要申请一个 C 类地址，然后将其划分为 4 个子网。</p><h3 id=44-划分子网>4.4 划分子网</h3><p>划分子网方案诞生与 1985 年，它从主机号借用若干位作为子网号，从而将 IP 地址划分为三级：网络号 + 子网号 + 主机号。假设网络地址为 192.168.10.0，利用子网掩码 255.255.255.224 对其进行划分子网，此时可以划分为四个子网：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/划分子网.png></div><p>由于子网对外是不可见的，所以需要使用子网掩码来辅助路由，假设目标 IP 地址为 192.168.10.198，想要正确到达该地址，必须先正确到达网络地址 192.168.10.192 。网络地址，子网掩码和主机 IP 之间的关系如下：</p><pre tabindex=0><code>IP 地址：192.168.10.198             二进制IP地址：11000000.10101000.00001010.11000110
子网掩码：255.255.255.224           二进制掩码：11111111.11111111.11111111.11100000
网络地址：192.168.10.192            按位逻辑与运算结果为：11000000.10101000.00001010.11000000
</code></pre><p>现代互联网标准规定：所有网络都必须使用子网掩码，同时路由器的路由表中也必须包含子网掩码这一项。因为路由表包含了 IP 地址和子网掩码，所以通过位运算就能很快计算出网络地址。</p><p>最后，如果一个网络不划分子网掩码，则其子网掩码取默认值，各类 IP 地址默认的掩码如下：</p><table><thead><tr><th>类别</th><th>子网掩码的二进制数值</th><th>子网掩码的十进制数值</th></tr></thead><tbody><tr><td>A</td><td>11111111 00000000 00000000 00000000</td><td>255.0.0.0</td></tr><tr><td>B</td><td>11111111 11111111 00000000 00000000</td><td>255.255.0.0</td></tr><tr><td>C</td><td>11111111 11111111 11111111 00000000</td><td>255.255.255.0</td></tr></tbody></table><h3 id=45-构成超网>4.5 构成超网</h3><p>无类别域间路由（CIDR，Classless Inter-Domain Routing）是一个给用户分配 IP 地址以及在互联网上有效地路由 IP 数据报的地址归类方法。它消除了传统的 A 类，B 类 和 C 类地址以及划分子网的概念，采用无分类的两级编址：</p><pre tabindex=0><code>IP地址 ::= {&lt;网络前缀&gt;,&lt;主机号&gt;}
</code></pre><p>并使用斜线记法进行表示：</p><center>128.14.35.7 / 20 = <u>10000000 00001110 0010</u>0011 00000111</center>
此时表示前 20 位都是网络前缀，该地址所处的地址块中的最小地址和最大地址则分别为：<table><thead><tr><th></th><th>十进制</th><th>二进制</th></tr></thead><tbody><tr><td>最小地址</td><td>128.14.32.0</td><td><u>10000000 00001110 0010</u>0000 00000000</td></tr><tr><td>最大地址</td><td>128.14.47.255</td><td><u>10000000 00001110 0010</u>1111 11111111</td></tr></tbody></table><p>每个地址块可以使用地址块中的最小地址和网络前缀的位数进行指定，例如上面的地址块可以记为 128.14.32.0 / 20 ，也可以简称为 <code>/20地址块</code> 。为更方便的进行路由选择，CIDR 使用 32 位的地址掩码，斜线后面的数字同时表示地址掩码中 1 的个数，例如 <code>/20地址块</code> 的地址掩码为 11111111 11111111 11110000 00000000 。</p><p>由于一个 CIDR 地址块可以包含多个地址，所以路由表就利用 CIDR 地址块来查找目标网络，这种地址聚合常称为路由聚合，也称为<strong>构成超网</strong>。通过路由聚合，可以极大减少路由表中项目的数量，从而提高网络的整体性能。</p><h3 id=46-icmp-和-igmp>4.6 ICMP 和 IGMP</h3><p>在网络层，除了上面介绍的 IP 协议和 ARP 协议外，最常使用的还有以下两个协议：</p><ul><li><strong>互联网控制消息协议 (ICMP，Internet Control Message Protocol)</strong>：为了提高 IP 数据报的交付率，ICMP 允许主机或路由器报告差错情况和提供异常报告给发送者，以便发送者进行补偿行为。</li><li><strong>网路群组管理协议 (IGMP，Internet Group Management Protocol)</strong> ：是用于管理网路协议多播组成员的一种通信协议。IP 主机和相邻的路由器可以利用 IGMP 来建立多播组的组成员。</li></ul><h3 id=47-专用地址>4.7 专用地址</h3><p>RFC 1918 中指明了一些专用地址（Private Address），这些地址只能用于一个机构的内部通信，但不能用于和互联网上的主机进行通信。在互联网中的所有路由器，对目的地址是专用地址的数据报一律不进行转发。下面是三个专用的地址块：</p><ul><li>10.0.0.0 &ndash; 10.255.255.255（或记为 10.0.0.0/8 ，又称为 24 位块）；</li><li>172.16.0.0 &ndash; 172.31.255.255（或记为 172.16.0.0/12 ，又称为 20 位块）；</li><li>192.168.0.0 &ndash; 192.168.255.255（或记为 192.168.0.0/16 ，又称为 16 位块）。</li></ul><p>因为不同机构可以采用相同的专用地址，因此其也被称为可重用地址。</p><h3 id=48-vpn>4.8 VPN</h3><p>如果一个机构内使用的是由专用地址构成的专用网，但该机构的部门却分布在不同的、远距离的地理位置上，此时可以利用公共的互联网作为本机构内各专用网之间的通信载体，这样的专用网称为虚拟专用网（Virtual Private Network）。此时通过公共互联网的数据可以使用 IPSec（IP Security）协议加密来保证安全性。</p><h3 id=48-nat>4.8 NAT</h3><p>当某台主机获取到的地址是专用地址时，其是无法和外部互联网进行通讯的，如果想要和外部互联网进行通讯，可以采用 NAT（Network Address Translation，网络地址转换）技术来实现。该方法需要在专用网连接到互联网的路由器上安装 NAT 软件，NAT 路由器需要至少一个有效的全球 IP 地址，当使用专用地址的主机在和外界进行通信时，NAT 路由器会将其转换为全球 IP 地址。</p><p>由上面的原理也可以看出，具有 n 个全球 IP 地址的路由器最多只允许 n 台主机同时接入到互联网。 为了解决这个问题，现在常用的 NAT 转换表会把传输层的端口号也利用上。</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/NAT路由器的工作原理.png></div><h3 id=49-ipv6>4.9 IPv6</h3><p>上面我们介绍过 IPv4 的长度为 32 位，因此所有可分配的 IP 地址大约为 42 亿个，到 2011 年 2 月，所有可分配地址均已耗尽，因此产生了 IPv6，IPv6 的地址长度为 128 位，采用十六进制表示。</p><h2 id=五传输层>五、传输层</h2><p>传输层负责为两台主机中的进程提供通信服务，它使用 16 位的端口号来标识端口，当两个计算机中的进程要进行通讯时，除了要知道对方的 IP 地址外，还需要知道对方的端口。该层主要有以下两个协议：用户数据报协议（UDP，User Datagram Protocol）和传输控制协议（TCP，Transmission Control Protocol）：</p><h3 id=51-udp>5.1 UDP</h3><p>用户数据报协议 UDP 具有以下特点：</p><ul><li><p>UDP 是无连接的；</p></li><li><p>UDP 提供尽最大努力的交付服务，但不保证交付的可靠性；</p></li><li><p>UDP 是面向报文的；</p></li><li><p>UDP 没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低；</p></li><li><p>UDP 支持一对一、一对多、多对一和多对多的交互通信；</p></li><li><p>UDP 的首部开销较小，只有 8 个字节，远小于 TCP 的 20 个字节。首部共由四个字段组成，每个字段两个字节：</p><ul><li>源端口号：在需要对方回信时选用，不需要时可用全 0 表示；</li><li>目标端口号；</li><li>长度：UDP 用户数报的总长度；</li><li>校验和：检测 UDP 用户数据报在传输中是否有错，如果有错则丢弃。</li></ul><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/UDP用户数据报.jpg></div></li></ul><h3 id=52-tcp-简介>5.2 TCP 简介</h3><p>传输控制协议 TCP 具有以下特点：</p><ul><li><p>TCP 是面向连接的；</p></li><li><p>TCP 提供可靠的交付服务；</p></li><li><p>TCP 提供全双工的通信，两端都设有缓存，用来临时存放通信数据；</p></li><li><p>面向字节流，这里的流指的是流入或流出进程的字节序列；</p></li><li><p>每一条 TCP 连接唯一地被通信两端的两个端点所确定，即：</p><pre tabindex=0><code>TCP 连接 ::= {socket1,socket2} = {(IP1,port1),(IP2,port2)}
</code></pre></li></ul><h3 id=53-tcp-报文首部>5.3 TCP 报文首部</h3><p>TCP 虽然是面向字节流的，但其传输的基本数据单元则是报文段。一个 TCP 报文段分为首部和数据两部分，TCP 首部的前 20 个字节是固定的，后面有 4n 字节是根据需要而增加的选项（n 为整数），具体格式如下：</p><div align=center><img width=600px src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/TCP报文首部.jpg></div><p>各字段的含义如下：</p><ol><li><p><strong>源端口和目的端口</strong>：各占 2 个字节。</p></li><li><p><strong>序号</strong>：占 4 字节，序号范围为 [ 0 , 2<sup>32</sup> - 1 ] ，序号增加到 2<sup>32</sup> - 1 后又会回到 0 。在一个 TCP 连接中，传送的字节流中的每一个字节都要按顺序进行编号。</p></li><li><p><strong>确认号</strong>：占 4 字节，表示期望收到对方下一个报文段的第一个数据字节的序号。例如 B 收到 A 的报文，序号值为 501 ，数据长度为 200 字节（序号 501 ~ 700），此时表明 B 正确收到了序号 700 及其之前的所有数据，因此 B 在发送给 A 的确认报文段中确认号的值为 701。</p></li><li><p><strong>数据偏移</strong>：占 4 位，其所能表达的最大数字是 15 。数据偏移表示该数据报中数据的起始位置，由于数据报是由 首部+数据 组成，所以实际上就是指报文段的首部长度。数据偏移的单位是 32 位字（即以 4 字节长为单位），所以数据偏移的最大长度是 60 （15*4）字节，即 TCP 报文段的首部长度不能超过 60 字节，对应的选项长度不能超过 40 字节。</p></li><li><p><strong>保留</strong>：占 6 位，保留为今后使用，目前应置为 0 。</p></li><li><p><strong>六个控制位</strong>：其作用分别如下：</p><ul><li><strong>紧急 URG (URGent)</strong>：当值为 1 时，表明紧急指针字段有效，代表此报文中有紧急数据，应尽快传送，而无需按原来的排队顺序传送。</li><li><strong>确认 ACK (ACKnowledgment)</strong>：当值为 1 时，确认号有效；值为 0 时，确认号无效。TCP 规定，在连接建立后所有传送的报文段都必须把 ACK 置为 1。</li><li><strong>推送 PSH (Push)</strong>：当值为 1 时，表示接受方应该将数据立即交付给应用进程，而不是等待缓存填满后再向上交付。</li><li><strong>复位 RST (Reset)</strong>：当值为 1 时，表明 TCP 连接出现严重差错，必须立即释放，然后再重新建立连接；也可以用来拒绝一个非法的报文段或拒绝打开一个连接。</li><li><strong>同步 SYN (SYNchronization)</strong>：在连接建立时用来同步序号。当 SYN = 1 而 ACK = 0 时，表明这是一个连接请求报文段；对方若同意建立连接，则应在响应的报文段中使 SYN = 1 和 ACK = 1 。</li><li><strong>终止 FIN (FINis)</strong>：当值为 1 时，表明此报文段发送方的数据已发送完毕，并要求释放连接。</li></ul></li><li><p><strong>窗口</strong>：占 2 字节，取值范围为 [ 0 , 2<sup>16</sup> - 1 ] 之间的整数。窗口字段保持动态变化，用于指明接收方允许发送方发送的数据量。</p></li><li><p><strong>校验和</strong>：占 2 字节，校验的字段范围包括首部和数据。</p></li><li><p><strong>紧急指针</strong>：占 2 字节，仅在 URG = 1 时才有意义，用于指明紧急数据的结束位置，位于结束位置之后的就是普通数据。</p></li><li><p><strong>选项</strong>：长度可变，最长可达 40 字节。可用的选项有：最大报文段长度 ，窗口扩大选项、时间戳选项等。</p></li></ol><h3 id=54-三次握手>5.4 三次握手</h3><p>TCP 建立连接的过程叫做握手，握手需要在客户和服务器之间交换三个 TCP 报文段，具体如下：</p><div align=center><img width=600px src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/三次握手.png></div><ol><li><p>服务器进程 B 首先创建传输控制模块 TCB，然后进入 LISTEN（收听）状态，准备接受客户端的连接请求；</p></li><li><p>客户端进程 A 首先创建传输控制模块 TCB，然后发出连接请求报文段，此时同步位 <code>SYN = 1</code> ，同时选择一个初始序号 <code>seq = x</code> ，之后进入 SYN-SENT（同步已发送）状态；</p></li><li><p>B 收到连接请求报文段后，如果同意建立连接，则发送确认报文段，此时 SYN 和 ACK 都置为 1，确认号 <code>ack = x + 1</code> ，并为自己选择一个初始序号 <code>seq =y</code> ，之后进入 SYN-RCVD（同步收到）状态；</p></li><li><p>A 收到来自 B 的确认后，发出最后的确认，确认报文段的 ACK 为 1，确认号 <code>ack = y + 1</code>，序号 <code>seq = x + 1</code>。TCP 标准规定，ACK 报文段可以携带数据也可以不携带，如果不携带则该序号不被消耗，下一个数据报文段的序号仍然是 <code>seq = x + 1</code>。之后 A 进入 ESTABLISHED（已连接）状态；</p></li><li><p>当 B 收到 A 的确认后，也进入 ESTABLISHED 状态。</p></li></ol><h3 id=55-四次挥手>5.5 四次挥手</h3><p>数据传输结束后，通信的双方都可以释放连接，具体过程如下：</p><div align=center><img width=600px src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/四次挥手.png></div><ol><li><p>假设应用进程 A 先主动关闭连接，此时需要发送连接释放报文段：首部终止控制位 FIN 为 1，序号 <code>seq = u</code>，其中 u 等于前面传送过的数据的最后一个字节的序号加 1 。之后 A 进入 FIN-WAIT-1（终止等待 1）状态；</p></li><li><p>应用进程 B 收到连接释放报文段后立即发出确认，确认号 <code>ack = u + 1</code>，序号 <code>seq = v</code> ，其中 v 等于前面传送过的数据的最后一个字节的序号加 1 。之后 B 进入 CLOSE-WAIT（关闭等待）状态，并通知高层应用进程。此时 TCP 连接处于半关闭状态，即 A 已经没有数据需要发送，但如果 B 发送数据，A 仍要接收；</p></li><li><p>A 收到来自 B 的确认后就进入 FIN-WAIT-2（终止等待 2）状态，等待 B 发出连接释放报文段；</p></li><li><p>若高层应用进程已经没有数据要发送，则通知 B 释放 TCP 连接。此时 B 发出释放连接报文段：首部终止控制位 FIN 为 1，序号 <code>seq = w</code>（在半关闭状态下 B 可能又发送了一些数据），另外还需要重复上次已经发送过的确认号 <code>ack = u + 1</code>。之后 B 进入 LAST-ACK（最后确认）状态；</p></li><li><p>A 收到 B 的连接释放报文段后，发出最后确认：ACK 为 1，确认号 <code>ack = w + 1</code>，序号 <code>seq = u + 1</code>，然后进入 TIME-WAIT（有时间限制的等待）状态；</p></li><li><p>B 收到来自 A 的最后确认后进入 CLOSED（关闭）状态；</p></li><li><p>A 经过 2 倍的 MSL（Maximum Segment Lifetime，最长报文段寿命）后，才进入 CLOSED 状态。</p></li></ol><p>RFC 793 建议 MSL 设置为 2 分钟，现在的网络环境已经有了质的提升，该值可以按需缩短。A 之所以要等待两倍的 MSL 时间后才进入 CLOSED 状态，主要基于以下两个原因：</p><ul><li>为了保证 A 发送的最后一个 ACK 报文段能够到达 B。如果 B 没有收到该最后确认，则会进行超时重发 FIN+ACK 报文段，A 在 2MSL 等待时间内会响应该报文段并重发最后确认；</li><li>确保本次连接内产生的所有报文段都从网络消失，进而确保下一个新的连接中不会出现旧的连接请求报文段。</li></ul><h3 id=56-可靠传输的原理>5.6 可靠传输的原理</h3><p><strong>1. 停止等待协议</strong></p><p>想要实现可靠性传输，最基本的可以使用停止等待协议：每发送完一个数据单元就停止发送，并等待对方的确认。</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/停止等待协议1.png></div><p>此时面临两个问题：</p><ul><li>如果 A 给 B 发送数据的过程中出现了丢失，此时 B 无法收到数据，自然也不会返回确认，那么程序就会一直等待；</li><li>如果 B 给 A 发送确认的过程中出现了丢失或经过很长时间才到达 A，那么程序也会持续等待。</li></ul><p>针对第一个问题，解决方案是如果在给定的时间内没有收到确认，则进行超时重传：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/停止等待协议2.png></div><p>针对第二个问题，其解决方案依然是超时重传，具体细分为以下两种情况：</p><ul><li><p>如果 B 收到了 M1，只是返回的确认丢失了，当超时重传后，B 需要丢弃重复收到的 M1；</p></li><li><p>如果 B 的返回确认没有丢失，只是超过了重传时间后才到达 A，此时 A 可能会收到两次确认，一次是补传得到确认，一次是原有的延迟到达的确认，A 需要丢弃延时到达的确认，不做任何处理：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/停止等待协议3.png></div></li></ul><p>在基本的停止等待协议中，一次只发送一个数据单元，此时信道利用率非常低，为了解决这个问题，可以采用流水线传输，一次发送多个数据单元：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/流水线传输.png></div><p>当使用流水线传输时，为保证可靠性，需要配合使用连续 ARQ 协议和滑动窗口协议。</p><p><strong>2. 连续 ARQ 协议</strong></p><p>连续 ARQ（Automatic Repeat reQuest）协议指发送方维持着一个一定大小的发送窗口，位于发送窗口内的所有分组都可连续发送出去，中途不需要等待对方的确认，发送方在每收到一个确认时就把发送窗口向前滑动一个分组的位置：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/连续ARQ工作原理.png></div><p>通常接收方一般都是采用累积确认的方式。此时接收方不必对收到的分组逐个发送确认，而是在收到几个分组后，对按序到达的最后一个分组发送确认，它表示：这个分组及其之前的所有分组都已正确到达。</p><h3 id=57-tcp-的可靠传输>5.7 TCP 的可靠传输</h3><p>TCP 的滑动窗口以字节为单位，并采用以下方法来计算超时重传时间 RTO（Retransmission Time Out）：</p><pre tabindex=0><code>RTO = RTT_S + 4 × RTT_D
</code></pre><p>其中 RTT<sub>S</sub> 表示加权平均往返时间，计算方式如下：</p><pre tabindex=0><code>新的 RTT_S = (1-α) × 旧的 RTT_S +  α × 新的 RTT 值
</code></pre><ul><li>RTT （Round Trip Time）代表报文段的往返时间，它记录一个报文段从发出去到收到确认的时间长度；</li><li>第一次测量时， RTT<sub>S</sub> 的值就等于 RTT 的值，之后的 RTT<sub>S</sub> 则采用上面的公式进行计算；</li><li>其中 0 ≤ α ＜ 1 ，RFC 6298 推荐其值取 0.125 。</li></ul><p>RTT<sub>D</sub> 是 RTT 偏差的加权平均值，计算方式如下：</p><pre tabindex=0><code>新的 RTT_D = (1-β) × 旧的 RTT_D +  β × |RTT_S - 新的 RTT 值|
</code></pre><ul><li>第一次测量时，RTT<sub>D</sub> 的值就等于 RTT 值的一半，之后的 RTT<sub>D</sub> 则采用上面的公式进行计算；</li><li>β 值是一个小于 1 的系数，RFC 6298 推荐其值取 0.25 。</li></ul><h3 id=58-流量控制>5.8 流量控制</h3><p>流量控制（flow control）是指控制发送方的发送速率，以便接收方来得及接收。假设 A 向 B 发送数据，在连接建立时，B 会将自己接收窗口（rwnd，receiver window）的大小告诉 A ，而 A 需要保证发送窗口的大小不能超过 B 接收窗口的大小，通过该机制就可以实现对发送方的流量控制。</p><h3 id=59-拥塞控制>5.9 拥塞控制</h3><p>网络拥塞（congestion）是指传输的数据量超过节点承受能力而导致传输能力下降的情况。而拥塞控制就是防止过多的数据注入到网络中而造成路由器和链路过载。TCP 采用四种算法来进行拥塞控制，分别是：慢启动（slow start）、拥塞避免（congestion avoidance）、快重传（fast retransmit）和快恢复（fast recovery）：</p><p><strong>1. 慢启动</strong></p><p>慢开始和拥塞避免都是基于窗口的拥塞控制：发送方会维持一个名为拥塞窗口 cwnd（congestion window）的状态变量，其值取决于网络的拥塞程度，并会动态变化，同时发送方会让自己的发送窗口等于拥塞窗口。</p><p>慢启动的思路如下：由于不知道网络的负载能力，所以最好的选择就是逐步探测，即由小到大成倍地增大发送窗口，也就是说，由小到大成倍地增大拥塞窗口的值。</p><p><strong>2. 拥塞避免</strong></p><p>拥塞避免算法的思路是让拥塞窗口 cwnd 缓慢地增大：每经过一个往返时间 RTT 就把发送方的拥塞窗口 cwnd 加 1，而不是像慢启动阶段那样加倍地增长。慢启动和拥塞避免通常是配合使用，以保证启动速度，一开始使用慢启动进行成倍增长，当达到某一个阈值 ssthresh 后采用拥塞避免进行稳步尝试：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/拥塞窗口变化情况.png></div><p><strong>3. 快重传和快恢复</strong></p><p>快重传算法要求接收方不要等待自己发送数据时才进捎带确认，而是要立即发送确认，即使收到了失序报文段也要立即发出对已收到的报文段的重复确认。示例如下：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/快重传.png></div><p>如上图所示，当 M<sub>3</sub> 丢失时，之后发送 M<sub>4</sub> ， M<sub>5</sub> ， M<sub>6</sub> 时收到的都是对于 M<sub>2</sub> 的重复确认，此时发送方就可以知道 M<sub>3</sub> 已经丢失，需要立即进行重传。由于此时只是个别报文出现了丢失，而不是网络拥塞，所以执行<strong>快恢复</strong>：发送方调整 ssthresh = cwnd / 2，并设置 cwnd = ssthresh = 8 （图中点 5），并开始执行拥塞避免算法。</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/拥塞窗口变化情况.png></div><h2 id=六应用层>六、应用层</h2><h3 id=61-域名系统-dns>6.1 域名系统 DNS</h3><p>目前我们都是使用易于理解的域名来访问互联网应用，但传输层需要的则是 IP 地址，因此需要使用域名系统（DNS，Domain Name System）来进行域名与 IP 地址之间的转换 。</p><p>域名是一个逻辑上的概念，分为多级域名，其中最基础的是根域名，其次是顶级域名，顶级域名共分为四类：</p><ul><li><strong>国家顶级域名 nTLD</strong>：如 cn 表示中国，us 表示美国；</li><li><strong>通用顶级域名 gTLD</strong>：如 com 表示公司企业，org 表示非盈利性组织，net 表示网络服务机构；</li><li><strong>基础结构域名</strong>：又称为反向域名，用于反向域名解析，该顶级域名只有一个 arpa；</li><li><strong>新顶级域名 New gTLD</strong>：ICANN 机构在 2011 年 6 月 20 日批准新顶级域名，允许任何满足条件的公司或机构进行申请。</li></ul><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/互联网的域名空间.png></div><h3 id=62-文件传输协议-ftp>6.2 文件传输协议 FTP</h3><p>文件传输协议（FTP，File Transfer Protocol）是用于在网络上进行文件传输的一套标准协议，允许客户指明文件的类型和格式，并获得文件的存储权限。FTP 的服务器进程由两大部分组成：</p><ul><li><strong>一个主进程</strong>：负责接收新的请求；</li><li><strong>若干个从属进程</strong>：负责处理单个请求。</li></ul><p>因此一个 FTP 服务器进程可以同时为多个客户端进程提供服务。</p><h3 id=63-远程终端协议-telnet>6.3 远程终端协议 TELNET</h3><p>Telnet 协议是 Internet 远程登录服务的标准协议和主要方式，它为用户提供了在本地计算机上访问远程主机的能力。Telnet 能将用户的击键传到远程主机，同时也能将远程主机的输出通过 TCP 连接返回到用户屏幕，这种服务是透明的，用户感觉键盘和显示器好像都是直接连在远程主机上，因此 Telnet 又称为终端仿真协议。</p><h3 id=64-万维网-www>6.4 万维网 WWW</h3><p>万维网是一个分布式的超媒体系统，它是超文本系统的扩展。它包含以下重要概念：</p><p><strong>1. 统一资源定位符 URL</strong></p><p>用于定位互联网上资源的位置和访问这些资源的方法，其格式如下：</p><pre tabindex=0><code>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;
</code></pre><p><strong>2. 超文本传送协议 HTTP</strong></p><p>HTTP 协议定义了浏览器如何向万维网请求文档，以及服务器如何把文档传送给浏览器。</p><p><strong>3. 超文本标记语言 HTML</strong></p><p>超文本标记语言 HTML 是一种标识性的语言，包括一系列标签，这些标签可以用于说明文字、图形、动画、声音、表格、链接等各种类型的资源，并能将网络文档格式进行统一。</p><h3 id=65-动态主机配置协议-dhcp>6.5 动态主机配置协议 DHCP</h3><p>通常连接到互联网的计算机的协议软件都需要配置多个项目，如 IP 地址，子网掩码，默认路由器的 IP 地址以及域名服务器的 IP 地址等等，为了省去配置的麻烦，现在互联网普遍采用动态主机配置协议 DHCP（Dynamic Host Configuration Protocol），它提供了一种即插即用联网的机制。此时你只需要采用默认的配置即可，如下所示：</p><div align=center><img src=https://gitee.com/heibaiying/Full-Stack-Notes/raw/master/pictures/动态主机配置.png></div><p>此时需要进行联网的主机在启动时候会广播发现报文（DHCP DISCOVER），其目的地址为 255.255.255.255（即受限广播地址），此时本地网络上的所有主机都能接收到这个广播报文，但只有 DHCP 服务器才会通过提供报文（DHCP OFFER）对此广播进行响应。DHCP 服务器先在其数据库中查找该计算机的配置信息，若找到，则直接返回；若找不到，则从服务器的 IP 地址池取一个地址分配给该计算机。</p><p>通常不是每个网络都有 DHCP 服务器，但每个网络都至少有一个 DHCP 中继代理（通常是路由器），它配置了 DHCP 服务器的 IP 地址信息。当 DHCP 中继代理收到主机 A 的发现报文后，就以单播的方式向 DHCP 服务器进行转发；并等待其回复后，再转发回主机 A 。</p><p>DHCP 服务器分配给 DHCP 客户的 IP 地址是临时性的，只能在一段时间内使用，该时间称为租用期，由 DHCP 服务器进行设置。</p><h2 id=参考资料>参考资料</h2><ol><li>谢希仁 . 计算机网络（第七版）. 电子工业出版社 . 2017-01</li><li>James F. Kurose / Keith W. Ross . 计算机网络 —— 自顶向下方法（第七版）. 机械工业出版社 . 2018-06</li><li><a href=https://blog.csdn.net/gui951753/article/details/79412524 target=_blank rel=noopener>子网划分详解与子网划分实例精析</a></li><li><a href=https://blog.51cto.com/11418774/1834234 target=_blank rel=noopener>网络基础之 &ndash; IP 数据报、分片策略、路由表</a></li><li><a href=https://www.cnblogs.com/iiiiher/p/8513748.html target=_blank rel=noopener>完全理解 ICMP 协议</a></li></ol></div><div class=article-widget><div class="container-xl row post-nav"></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div><script type=text/javascript id=clstr_globe async src="//clustrmaps.com/globe.js?d=kgpJG5sWZQpKujBmD-uW1B54-WBPol-DuDtrB2KFjKs"></script></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>