<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cloud | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/</link><atom:link href="https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/index.xml" rel="self" type="application/rss+xml"/><description>Cloud</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>Cloud</title><link>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/</link></image><item><title>2011-《云计算与分布式系统， 从并行处理到物联网》</title><link>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/2011-%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-%E4%BB%8E%E5%B9%B6%E8%A1%8C%E5%A4%84%E7%90%86%E5%88%B0%E7%89%A9%E8%81%94%E7%BD%91/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/2011-%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F-%E4%BB%8E%E5%B9%B6%E8%A1%8C%E5%A4%84%E7%90%86%E5%88%B0%E7%89%A9%E8%81%94%E7%BD%91/</guid><description>&lt;blockquote>
&lt;p>下载地址：https://ngte.cowtransfer.com/s/71d920606e0a4f&lt;/p>
&lt;/blockquote></description></item><item><title>2019-《Cloud Native Data Center Networking》</title><link>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/2019-cloud-native-data-center-networking/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/2019-cloud-native-data-center-networking/</guid><description>&lt;h1 id="cloud-native-data-center-networking">Cloud Native Data Center Networking&lt;/h1>
&lt;p>作者 Dinesh G. Dutt 是一家网络公司的首席科学家，在网络行业有 20 多年工作经验，曾 是 Cisco Fellow，是 TRILL、VxLAN 等协议的合作者（co-author）之一。&lt;/p>
&lt;h1 id="传统网络架构面临瓶颈">传统网络架构面临瓶颈&lt;/h1>
&lt;p>分布式应用（distributed application）正在与网络（network）共舞，而且前者是主角。分布式应用突然变换了舞步，现代数据中心的故事也由此开始。理解这种转变对网络从业人员至关重要，否则只会不断被一些新名词带着走。&lt;/p>
&lt;h2 id="应用-网络架构演进">应用-网络架构演进&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s3.ax1x.com/2021/01/25/sL9d2T.png" alt="The evolution of application architecture" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>应用架构演进：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>单体应用&lt;/p>
&lt;ul>
&lt;li>通常部署在 mainframe 上。&lt;/li>
&lt;li>特定的厂商提供网络方案，&lt;strong>协议是私有的&lt;/strong>（不是 TCP/IP 协议）。&lt;/li>
&lt;li>以今天的眼光看，应用所需的带宽极小。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>客户端-服务器应用&lt;/p>
&lt;ul>
&lt;li>工作站和 PC 时代。&lt;/li>
&lt;li>LAN 开始兴起，充斥着各种 L2、L3 和更上层协议。
&lt;ul>
&lt;li>以太网、Token Ring、FDDI 等是比较流行的互连方式。带宽上限 100Mbps。&lt;/li>
&lt;li>&lt;strong>TCP/IP 体系开始发展&lt;/strong>，但还没用成为主流。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Web 应用&lt;/p>
&lt;ul>
&lt;li>以太网和 TCP/IP 一统互联网，其他绝大部分协议成为历史。&lt;/li>
&lt;li>计算和网络虚拟化：&lt;strong>虚拟机时代&lt;/strong>。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>微服务（分布式应用）&lt;/p>
&lt;ul>
&lt;li>大规模的数据处理（例如 MapReduce），使数据中心网络的带宽瓶颈&lt;strong>从南北向变成东西向&lt;/strong>，这是一个历史性的转变。&lt;/li>
&lt;li>&lt;strong>容器时代&lt;/strong>。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="21-世纪以来的网络设计">21 世纪以来的网络设计&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s3.ax1x.com/2021/01/25/sL9TZd.png" alt="Access-aggregation-core network architecture" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>上图是在上世纪末开始占据统治地位的网络架构：接入-汇聚-核心三级网络架构。&lt;/p>
&lt;h3 id="桥接bridging的魅力">桥接（Bridging）的魅力&lt;/h3>
&lt;p>这种网络架构重度依赖交换（或称桥接，bridging），而在同时期，互联网（the internet）真正快速发展成型。既然支撑互联网的是 IP 路由（IP routing）技术，为什么数据中心网络没有选择路由（routing），而是选择的交换（bridging）呢？三方面原因：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>交换芯片&lt;/strong>的出现（silicon switched packet forwarding）&lt;/p>
&lt;ul>
&lt;li>做数据转发的芯片原先主要用在&lt;strong>网卡&lt;/strong>，现在用于功能更强大的&lt;strong>交换设备&lt;/strong>。&lt;/li>
&lt;li>这种设备显然要求芯片具备&lt;strong>更高密度的接口&lt;/strong>，而这样的芯片在当时&lt;strong>只支持交换&lt;/strong>（bridging），不支持路由（routing）。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>厂商特定的软件栈&lt;/strong>（proprietary network software stacks）在企业中占据主导地位&lt;/p>
&lt;ul>
&lt;li>
&lt;p>“客户端-服务器”模型所处的时代，TCP/IP 只是众多协议种的一种，并没有今天所处的统治地位。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>但各家的协议有一个共同点：&lt;strong>二层协议是一样的，都是走交换&lt;/strong>（bridging）。因 此&lt;strong>汇聚层以下走交换&lt;/strong>就是顺理成章也是唯一的选择。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>接入-汇聚-核心成为了一种通用的网络架构：&lt;/p>
&lt;ul>
&lt;li>汇聚以下走交换（bridging），不区分厂商&lt;/li>
&lt;li>汇聚以上走各家的三层协议&lt;/li>
&lt;li>这样就避免了为每家厂商的设备单独搭建一张网络。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>交换网络&lt;/strong>所宣称的&lt;strong>零配置&lt;/strong>（zero configuration of bridging）&lt;/p>
&lt;ul>
&lt;li>路由网络很难配置，甚至对某些厂商的设备来说，直到今天仍然如此。需要很多显式 配置。&lt;/li>
&lt;li>相比交换，路由的延迟更大，更消耗 CPU 资源。&lt;/li>
&lt;li>交换网络是自学习的（self-learning），也是所谓的“零配置”（zero configurations）。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="构建和扩展的桥接网络">构建和扩展的桥接网络&lt;/h3>
&lt;p>厂商设备无关、高性能芯片加上零配置，使得桥接网络在那个年代取得很大成功。但这种网 络也存在一些&lt;strong>限制&lt;/strong>：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>广播风暴和 STP：这是自学习的机制决定的，&lt;/p>
&lt;ul>
&lt;li>MAC 头中没有 TTL 字段，因此一旦形成环路就无法停下来。&lt;/li>
&lt;li>STP（生成树协议）：避免交换网络出现环路，非常复杂，因此很难做到没有 bug。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>泛洪成本&lt;/p>
&lt;ul>
&lt;li>大的交换网络的泛洪&lt;/li>
&lt;li>缓解：划分 VLAN，使得泛洪域限制到 VLAN 内。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>网关高可用&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>网关&lt;/strong>配置在&lt;strong>汇聚交换机&lt;/strong>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>为保证高可用，一组汇聚配置同一个网关；一台挂掉后自动切换到另一台。需要协议 支持，这种协议称为&lt;strong>第一跳路由协议&lt;/strong>（First Hop Routing Protocol, &lt;strong>FHRP&lt;/strong>）。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>FHRP 原理&lt;/strong>：几台路由器之间互相检测状态，确保永远有且只有一台在应答对网关的 ARP 请求。FHRP 协议举例：&lt;/p>
&lt;ul>
&lt;li>HSRP（Hot Standby Routing Protocol）：思科的私有协议。&lt;/li>
&lt;li>&lt;strong>VRRP&lt;/strong>（Virtual Router Rundundency Protocol）：目前用的最多的协议。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="接入-汇聚-核心网络架构存在的问题">接入-汇聚-核心网络架构存在的问题&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>广播风暴&lt;/strong>是所有在那个年代运维过这种网络的网工们的噩梦 —— 即便已经开启了 STP。&lt;/li>
&lt;li>&lt;strong>应用（applications）变了&lt;/strong> —— 服务器之间的东西向流量开始成为瓶颈，而这种网络架构主要面向的是“客 户端-服务器”模式的南北向流量时代。&lt;/li>
&lt;li>&lt;strong>应用的规模&lt;/strong>显著变大，在故障、复杂性和敏捷度方面对网络提出了完全不同于以往的新需求。&lt;/li>
&lt;/ul>
&lt;p>现有网络架构无法解决以上问题。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>不可扩展性（Unscalability）&lt;/p>
&lt;ul>
&lt;li>泛洪：自学习机制是 “flood-and-learn”，因此泛洪是不可避免的。当网络规模非常大时（例如大规模虚拟机场景），定期地会有上百万的泛洪包，终端计算节点不堪重负。&lt;/li>
&lt;li>VLAN 限制：VLAN 总共 4096 个，无法满足云计算时代的多租户需求。&lt;/li>
&lt;li>汇聚应答 ARP 的负担：汇聚负责应答 ARP。ARP 数量可能非常多，导致汇聚交换机 CPU 飙升。&lt;/li>
&lt;li>交换机水平扩展性和 STP 限制：理论上，增加汇聚交换机数量似乎就能增加东西向带宽。但是，&lt;strong>STP 不支持两个以上 的交换机&lt;/strong>场景，否则后果无法预测。因此汇聚交换机就固定在了两个，无法扩展。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>复杂性（Complexity）&lt;/p>
&lt;ul>
&lt;li>交换网络需要运行大量不同类型的协议，例如：STP、FHRP、链路检测协议；厂商特定的协议，例如 VLAN Trunking Protocol（VTP），显著增加了网络的复杂性，STP 使得网络只能用到一半的链路带宽。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="the-stories-not-told">The Stories Not Told&lt;/h2>
&lt;p>一些对这种网络方案的改进尝试：TRILL 和 MLAG。经过时间沉淀，其他各种上层协议（L3+）已经退潮，IP 协议成为唯一主流。是时候从网络需求出发，设计一种新的架构了。&lt;/p>
&lt;h1 id="links">Links&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="http://arthurchiao.art/blog/cloud-native-data-center-networking-notes-zh/" target="_blank" rel="noopener">http://arthurchiao.art/blog/cloud-native-data-center-networking-notes-zh/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>2020-《Learning Dapr》</title><link>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/2020-learning-dapr/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/awesome-cs-books/infrastructure/cloud/2020-learning-dapr/</guid><description>&lt;blockquote>
&lt;p>下载地址：https://ngte.cowtransfer.com/s/a5e6da779e7b4b&lt;/p>
&lt;/blockquote></description></item></channel></rss>