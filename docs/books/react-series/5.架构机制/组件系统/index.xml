<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>组件系统 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/</link><atom:link href="https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/index.xml" rel="self" type="application/rss+xml"/><description>组件系统</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>组件系统</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/</link></image><item><title>setState</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/setstate/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/setstate/</guid><description>&lt;h1 id="react-setstate">React setState&lt;/h1>
&lt;p>在代码中调用 &lt;code>setState&lt;/code> 函数之后，React 会将传入的参数对象与组件当前的状态合并，然后触发所谓的调和过程(Reconciliation)。经过调和过程，React 会以相对高效的方式根据新的状态构建 React 元素树并且着手重新渲染整个 UI 界面。在 React 得到元素树之后，React 会自动计算出新的树与老树的节点差异，然后根据差异对界面进行最小化重渲染。在差异计算算法中，React 能够相对精确地知道哪些位置发生了改变以及应该如何改变，这就保证了按需更新，而不是全部重新渲染。&lt;/p>
&lt;h1 id="setstate-调用流程">setState 调用流程&lt;/h1>
&lt;h1 id="事务">事务&lt;/h1>
&lt;p>事务(Transaction)源于数据库理论，是数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成。React 中将多个操作封装到某个事务中，将操作与执行相剥离，下面的伪代码简述事务的基本流程：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 代码只是为了理解 transaction 和 react 无关
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">transactionManager&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">TransactionManager&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">transactionManager&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nx">Transaction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 修改数据的操作1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">transactionManager&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nx">Transaction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 修改数据的操作2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">transactionManager&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">perform&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>React 和许多现代前端框架都借鉴了这一设计模式，将操作和执行分离。这样的好处是可以做到极大的性能优化，举个例子，我们知道 DOM 操作是极其耗时的，为了优化性能，我们可以将 DOM 操作合并一起执行。React 的 DOM 更新也是合并执行的，这得益于事务设计。&lt;/p>
&lt;h1 id="批次更新">批次更新&lt;/h1></description></item><item><title>VDOM</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/vdom/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/vdom/</guid><description>&lt;h1 id="vdom">VDOM&lt;/h1>
&lt;h1 id="links">Links&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/lWyqHfHFAstS6AhfaHe7Iw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/lWyqHfHFAstS6AhfaHe7Iw&lt;/a> 详解 React 16 的 Diff 策略&lt;/li>
&lt;/ul></description></item><item><title>事务机制</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6/</guid><description>&lt;h1 id="react-中事务机制">React 中事务机制&lt;/h1></description></item><item><title>源码概览</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%BA%90%E7%A0%81%E6%A6%82%E8%A7%88/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E6%BA%90%E7%A0%81%E6%A6%82%E8%A7%88/</guid><description>&lt;h1 id="react-源码概览">React 源码概览&lt;/h1>
&lt;h1 id="断点调试-react-应用">断点调试 React 应用&lt;/h1>
&lt;h1 id="目录总览">目录总览&lt;/h1>
&lt;h1 id="组件声明">组件声明&lt;/h1>
&lt;h1 id="dom-渲染">DOM 渲染&lt;/h1></description></item><item><title>组件系统</title><link>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/react-series/5.%E6%9E%B6%E6%9E%84%E6%9C%BA%E5%88%B6/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F/</guid><description>&lt;h1 id="react-中的组件体系">React 中的组件体系&lt;/h1>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://i.postimg.cc/Qx8DFmSs/image.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p></description></item></channel></rss>