<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>界面开发 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/</link><atom:link href="https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/index.xml" rel="self" type="application/rss+xml"/><description>界面开发</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>界面开发</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/</link></image><item><title>ActionBar</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/actionbar/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/actionbar/</guid><description>&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;p>&lt;a href="https://developer.android.com/reference/android/support/v7/widget/Toolbar.html" target="_blank" rel="noopener">Toolbar&lt;/a>是某个应用程序中 Action Bar 的泛华。Action Bar 指 Activity 中承载了导航按钮、Brand、标题和副标题这些部分。&lt;/p>
&lt;h1 id="toolbar--actionbar">Toolbar &amp;amp; ActionBar&lt;/h1>
&lt;h2 id="actionbar">ActionBar&lt;/h2>
&lt;h2 id="toolbar">ToolBar&lt;/h2>
&lt;p>在开发一个 Android 应用中另一个比较重要的组件就是 Toolbar，它的作用很类似于早年的 Android 中的 Action Bar，它主要担负着如下几个功能：&lt;/p>
&lt;ul>
&lt;li>导航按钮&lt;/li>
&lt;li>应用标题与副标题&lt;/li>
&lt;li>活动菜单&lt;/li>
&lt;li>图标&lt;/li>
&lt;/ul>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="http://material-design.storage.googleapis.com/publish/material_v_4/material_ext_publish/0Bx4BSt6jniD7RTFrbmpoWjRrY00/layout_structure_appbar_structure1.png" alt="enter description here" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>如果需要在应用中引入 Toolbar 的支持，首先需要设置下 style 主题，来去除原本的默认的 ActionBar。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;style&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;AppBaseTheme&amp;#34;&lt;/span> &lt;span class="na">parent=&lt;/span>&lt;span class="s">&amp;#34;Theme.AppCompat.Light.NoActionBar&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>&lt;span class="c">&amp;lt;!--Light.DarkActionBar表示默认的黑色主体的Actionbar--&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- Customize your theme here. --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;colorPrimary&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@color/sky_blue&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;colorPrimaryDark&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@color/deep_blue&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;colorAccent&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@color/material_deep_teal_200&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:textColorPrimary&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@color/white&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/style&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>colorPrimary 表示标题栏 ActionBar 的颜色；colorPrimaryDark 表示状态栏的颜色；colorAccent 表示输入框，按钮等被选中时的颜色；textColorPrimary 表示标题栏(ActionBar 或者 ToolBar)中字体的颜色。接下来，在你需要引入 ToolBar 的布局文件中引入 ToolBar：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;android.support.v7.widget.Toolbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/main_toolbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:theme=&lt;/span>&lt;span class="s">&amp;#34;@style/ThemeOverlay.AppCompat.Dark&amp;#34;&lt;/span>&lt;span class="err">//这里的主题可以用来反衬toolBar的overFlow颜色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:background=&lt;/span>&lt;span class="s">&amp;#34;@color/sky_blue&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/android.support.v7.widget.Toolbar&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后，在代码中获取 ToolBar 控件以及实例化：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Toolbar&lt;/span> &lt;span class="n">toolbar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Toolbar&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">findViewById&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">main_toolbar&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">toolbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setNavigationIcon&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">mipmap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ic_toc_white_24dp&lt;/span>&lt;span class="o">);&lt;/span>&lt;span class="c1">//设置ToolBar头部图标
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">toolbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setTitle&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;ToolBar&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>&lt;span class="c1">//设置标题，也可以在xml中静态实现
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">setSupportActionBar&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">toolbar&lt;/span>&lt;span class="o">);&lt;/span>&lt;span class="c1">//使活动支持ToolBar
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="action-menu-活动菜单-">Action Menu( 活动菜单 )&lt;/h3>
&lt;h3 id="search-view-搜索菜单-">Search View( 搜索菜单 )&lt;/h3>
&lt;p>如果需要在 Toolbar 中引入 SearchView，首先需要在菜单配置中加入 SearchView 的控件：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">//menu.xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;menu&lt;/span> &lt;span class="na">xmlns:android=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:shivamgps=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res-auto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:tools=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/tools&amp;#34;&lt;/span> &lt;span class="na">tools:context=&lt;/span>&lt;span class="s">&amp;#34;.HomeActivity&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/action_search&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:icon=&lt;/span>&lt;span class="s">&amp;#34;@drawable/ic_search&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">shivamgps:showAsAction=&lt;/span>&lt;span class="s">&amp;#34;always&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">shivamgps:actionViewClass=&lt;/span>&lt;span class="s">&amp;#34;android.support.v7.widget.SearchView&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:title=&lt;/span>&lt;span class="s">&amp;#34;Search&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/action_refresh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:icon=&lt;/span>&lt;span class="s">&amp;#34;@drawable/ic_refresh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">shivamgps:showAsAction=&lt;/span>&lt;span class="s">&amp;#34;always&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:title=&lt;/span>&lt;span class="s">&amp;#34;@string/refresh&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/menu&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后在构造选项菜单时候：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">onCreateOptionsMenu&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Menu&lt;/span> &lt;span class="n">menu&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">MenuInflater&lt;/span> &lt;span class="n">inflater&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">inflater&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">inflate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">menu&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">home&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">menu&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">MenuItem&lt;/span> &lt;span class="n">searchItem&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">menu&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">findItem&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">action_search&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SearchManager&lt;/span> &lt;span class="n">searchManager&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SearchManager&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">getActivity&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getSystemService&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">SEARCH_SERVICE&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SearchView&lt;/span> &lt;span class="n">searchView&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">searchItem&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">searchView&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SearchView&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">searchItem&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getActionView&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">searchView&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">searchView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setSearchableInfo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">searchManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getSearchableInfo&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">getActivity&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getComponentName&lt;/span>&lt;span class="o">()));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SearchView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">OnQueryTextListener&lt;/span> &lt;span class="n">queryTextListener&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SearchView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">OnQueryTextListener&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="nf">onQueryTextChange&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">newText&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">i&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;onQueryTextChange&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">newText&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="nf">onQueryTextSubmit&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">query&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">i&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;onQueryTextSubmit&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">query&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">searchView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setOnQueryTextListener&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">queryTextListener&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onCreateOptionsMenu&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">menu&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">inflater&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="nf">onOptionsItemSelected&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MenuItem&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getItemId&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">action_search&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Not implemented here
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">action_refresh&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">getVehicleOverViewList&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">searchView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setOnQueryTextListener&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">queryTextListener&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onCreateOptionsMenu&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">menu&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">inflater&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="floatingsearchviewhttpsgithubcomarimortyfloatingsearchview">&lt;a href="https://github.com/arimorty/floatingsearchview" target="_blank" rel="noopener">floatingsearchview&lt;/a>&lt;/h4>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/arimorty/floatingsearchview/raw/master/images/inaction.gif" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h2 id="collapsingtoolbarlayout">CollapsingToolbarLayout&lt;/h2>
&lt;p>提供了对于 Toolbar 的又一层包裹，可以用作视差滚动等效果。&lt;/p>
&lt;p>当向下滚动时 ,Banner 大图会跟随滚动手势而 Collapse. 最后收折成一个普通的 ActionBar( 实际是个 Toolbar,Android 官方在最新的 Support Library 都推荐把 ActionBar 替换成 Toolbar).&lt;/p>
&lt;p>通过属性 Flag 的组合, 也能实现把 ActionBar 直接推出屏幕, 让其消失 .&lt;/p>
&lt;p>&lt;a href="http://android-developers.blogspot.sg/2015/05/android-design-support-library.html" target="_blank" rel="noopener">Android Support Library&lt;/a> 中提供的 CollapseToolbar 实现这效果 .&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;android.support.design.widget.CoordinatorLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:android=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:app=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res-auto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.design.widget.AppBarLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.design.widget.CollapsingToolbarLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/collapsing_toolbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:contentScrim=&lt;/span>&lt;span class="s">&amp;#34;?attr/colorPrimary&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:expandedTitleMarginEnd=&lt;/span>&lt;span class="s">&amp;#34;64dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:expandedTitleMarginStart=&lt;/span>&lt;span class="s">&amp;#34;48dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_scrollFlags=&lt;/span>&lt;span class="s">&amp;#34;scroll|exitUntilCollapsed&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;ImageView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/backdrop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_collapseMode=&lt;/span>&lt;span class="s">&amp;#34;parallax&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:scaleType=&lt;/span>&lt;span class="s">&amp;#34;centerCrop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:src=&lt;/span>&lt;span class="s">&amp;#34;@drawable/mu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:transitionName=&lt;/span>&lt;span class="s">&amp;#34;mu&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.Toolbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/toolbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;?attr/actionBarSize&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_collapseMode=&lt;/span>&lt;span class="s">&amp;#34;pin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:popupTheme=&lt;/span>&lt;span class="s">&amp;#34;@style/ThemeOverlay.AppCompat.Light&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:theme=&lt;/span>&lt;span class="s">&amp;#34;@style/MyToolbarTheme&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.design.widget.CollapsingToolbarLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.design.widget.AppBarLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.RecyclerView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/recycler_view&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_behavior=&lt;/span>&lt;span class="s">&amp;#34;@string/appbar_scrolling_view_behavior&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/android.support.design.widget.CoordinatorLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这是 Layout 布局 .CoordinatorLayout 和 AppBarLayout 的组合在 &lt;a href="http://www.cnblogs.com/wingyip/p/4604472.html" target="_blank" rel="noopener">这篇随笔&lt;/a> 中有介绍, 实现了滚动隐藏 Toolbar 的效果, 这里就不在重复了 .&lt;/p>
&lt;p>CollapsingToolbarLayout 是实现 GIF 效果的关键 .&lt;/p>
&lt;p>CollapsingToolbarLayout 有两个 Children.ImageView 用来显示 Banner 大图, 即 Gif 中曼联队徽的大图 . 而 Toolbar 就是折叠后看到的顶栏 Toolbar.&lt;/p>
&lt;p>app:contentScrim=&amp;quot;?attr/colorPrimary&amp;quot; ,CollapsingToolbarLayout 这个属性是设置折叠后 Toolbar 的颜色 .&lt;/p>
&lt;p>app:layout_scrollFlags=&amp;ldquo;scroll|exitUntilCollapsed&amp;rdquo;, 这是两个 Flag 控制滚动时候 CollapsingToolbarLayout 的表现 .&lt;/p>
&lt;ol>
&lt;li>
&lt;p>**Scroll, ** 表示向下滚动列表时候 ,CollapsingToolbarLayout 会滚出屏幕并且消失 ( 原文解释 :this flag should be set for all views that want to scroll off the screen - for views that do not use this flag, they’ll remain pinned to the top of the screen)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>**exitUntilCollapsed, ** 表示这个 layout 会一直滚动离开屏幕范围, 直到它收折成它的最小高度 .( 原文解释 :this flag causes the view to scroll off until it is ‘collapsed’ (its minHeight) before exiting)&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>app:layout_collapseMode=&amp;ldquo;parallax&amp;rdquo;,&lt;/strong> 这是控制滚出屏幕范围的效果的&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>parallax,&lt;/strong> 表示滚动过程中, 会一直保持可见区域在正中间 .&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>pin,&lt;/strong> 表示不会被滚出屏幕范围 .&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">protected&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">onCreate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Bundle&lt;/span> &lt;span class="n">savedInstanceState&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onCreate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">savedInstanceState&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setContentView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">layout&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">fourth_activity&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">Toolbar&lt;/span> &lt;span class="n">toolbar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Toolbar&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">findViewById&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">toolbar&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setSupportActionBar&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">toolbar&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ActionBar&lt;/span> &lt;span class="n">actionBar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getSupportActionBar&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">actionBar&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">actionBar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setDisplayHomeAsUpEnabled&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">CollapsingToolbarLayout&lt;/span> &lt;span class="n">collapsingToolbar&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">CollapsingToolbarLayout&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">findViewById&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">collapsing_toolbar&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">collapsingToolbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setTitle&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">getString&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">string&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">fourth_activity&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">RecyclerView&lt;/span> &lt;span class="n">recyclerView&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">RecyclerView&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="n">findViewById&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">recycler_view&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LinearLayoutManager&lt;/span> &lt;span class="n">linearLayoutManager&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">LinearLayoutManager&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">linearLayoutManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setOrientation&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">LinearLayoutManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">VERTICAL&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recyclerView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setLayoutManager&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">linearLayoutManager&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recyclerView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setAdapter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">MyAdapter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Bitmap&lt;/span> &lt;span class="n">bitmap&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">BitmapFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">decodeResource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">getResources&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">drawable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">mu&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Palette&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">from&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">bitmap&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="na">generate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Palette&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">PaletteAsyncListener&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">onGenerated&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kd">final&lt;/span> &lt;span class="n">Palette&lt;/span> &lt;span class="n">palette&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">defaultColor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getResources&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">color&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">medium_blue&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">defaultTitleColor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getResources&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">color&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">white&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">bgColor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">palette&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getDarkVibrantColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">defaultColor&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">titleColor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">palette&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getLightVibrantColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">defaultTitleColor&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">collapsingToolbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setContentScrimColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">bgColor&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">collapsingToolbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setCollapsedTitleTextColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">titleColor&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">collapsingToolbar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setExpandedTitleColor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">titleColor&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这是 Activity 的 onCreate 方法, 有两处地方需要关注的&lt;/p>
&lt;p>\1. &lt;strong>setSupportActionBar()&lt;/strong> 方法, 告诉 AppCompatActivity 哪一个是 ActionBar( 实际是 Toolbar). 不然的话, 做透明 Status Bar( 电池, 手机信号那一区域 ) 效果时候 ,ActionBar 会位置不正确 .&lt;/p>
&lt;p>\2. &lt;strong>Palette,&lt;/strong> 调色板的意思, 也是 Android Support Library 提供的 . 用来抓取 Bitmap 的颜色 . 在此处的用处是, 当 ActionBar 被收折后, 背景颜色能保持和 Banner 大图的色调一致, 而 Title 文字的颜色保证和 Banner 大图的色调形成强对比 .&lt;/p>
&lt;h1 id="appbar-layout">AppBar Layout&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="http://blog.csdn.net/jdsjlzx/article/details/41441083" target="_blank" rel="noopener">Android Material Design 之 Toolbar 与 Palette 实践 &lt;/a>&lt;/li>
&lt;/ul>
&lt;p>AppBarLayout 是继承 LinerLayout 实现的一个 ViewGroup 容器组件，它是为了 Material Design 设计的 App Bar，支持手势滑动操作。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="http://img.blog.csdn.net/20150616103050252" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>默认的 AppBarLayout 是垂直方向的，它的作用是把 AppBarLayout 包裹的内容都作为 AppBar。类似上面图片贴出来的效果，代码布局如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;android.support.design.widget.AppBarLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/appbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.Toolbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/toolbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;?attr/actionBarSize&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:background=&lt;/span>&lt;span class="s">&amp;#34;?attr/colorPrimary&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:minHeight=&lt;/span>&lt;span class="s">&amp;#34;?attr/actionBarSize&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&amp;lt;/android.support.v7.widget.Toolbar&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.design.widget.TabLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/tabs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_scrollFlags=&lt;/span>&lt;span class="s">&amp;#34;scroll&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:tabIndicatorColor=&lt;/span>&lt;span class="s">&amp;#34;@android:color/holo_red_dark&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:tabSelectedTextColor=&lt;/span>&lt;span class="s">&amp;#34;@android:color/holo_red_dark&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:tabTextColor=&lt;/span>&lt;span class="s">&amp;#34;@android:color/black&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.design.widget.AppBarLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此处将 Toolbar 和 Tablayout 的组合部分共同构成 AppBar 的效果。&lt;strong>注意：&lt;/strong> AppBarLayout 必须作为 Toolbar 的父布局容器，AppBarLayout 是支持手势滑动效果的。&lt;/p>
&lt;h2 id="parallax-header">Parallax Header&lt;/h2>
&lt;p>AppBarLayout 往往跟 CoordinatorLayout 合作，可以实现视差滚动的效果。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="http://img.blog.csdn.net/20150617093244517" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>从开发文档中可以了解到，CoordinatorLayout 是一个增强型的 FrameLayout。它的作用有两个&lt;/p>
&lt;p>例如一下布局代码：&lt;/p>
&lt;pre tabindex="0">&lt;code> &amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;
&amp;lt;android.support.design.widget.CoordinatorLayout xmlns:android=&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;
xmlns:app=&amp;#34;http://schemas.android.com/apk/res-auto&amp;#34;
android:id=&amp;#34;@+id/main_content&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;match_parent&amp;#34;&amp;gt;
&amp;lt;android.support.design.widget.AppBarLayout
android:id=&amp;#34;@+id/appbar&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;wrap_content&amp;#34;&amp;gt;
&amp;lt;android.support.v7.widget.Toolbar
android:id=&amp;#34;@+id/toolbar&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;?attr/actionBarSize&amp;#34;
android:background=&amp;#34;?attr/colorPrimary&amp;#34;
app:layout_scrollFlags=&amp;#34;scroll|enterAlways&amp;#34; /&amp;gt;
&amp;lt;android.support.design.widget.TabLayout
android:id=&amp;#34;@+id/tabs&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;wrap_content&amp;#34;
app:tabGravity=&amp;#34;fill&amp;#34; /&amp;gt;
&amp;lt;/android.support.design.widget.AppBarLayout&amp;gt;
&amp;lt;!--可滑动的布局内容--&amp;gt;
&amp;lt;android.support.v7.widget.RecyclerView
android:id=&amp;#34;@+id/recyclerView&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;wrap_content&amp;#34;
app:layout_behavior=&amp;#34;@string/appbar_scrolling_view_behavior&amp;#34; /&amp;gt;
&amp;lt;android.support.design.widget.FloatingActionButton
android:layout_width=&amp;#34;wrap_content&amp;#34;
android:layout_height=&amp;#34;wrap_content&amp;#34;
android:src=&amp;#34;@drawable/ic_discuss&amp;#34;
android:layout_gravity=&amp;#34;bottom|end&amp;#34;/&amp;gt;
&amp;lt;/android.support.design.widget.CoordinatorLayout&amp;gt;
&lt;/code>&lt;/pre>&lt;p>从上面布局看到，CoordinatorLayout 协调布局中包裹了两个布局，一个是 NestedScrollView，一个是 AppBarLayout，以及 FAB 按钮。&lt;/p>
&lt;p>我们来看看 CoordinatorLayout 是怎么来协调这两个子视图手势操作的。&lt;/p>
&lt;ol>
&lt;li>由于 CoordinatorLayout 是 FrameLayout 布局，我们可以通过&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>android:layout_gravity=&amp;#34;bottom|end&amp;#34;
&lt;/code>&lt;/pre>&lt;p>属性来控制组件在整个布局中的位置，比如上面效果中的 FAB 就是通过 android:layout_gravity=”bottom|end” 来确定 FAB 的位置在底端的最右边的位置。&lt;/p>
&lt;ol start="2">
&lt;li>为了达到上面效果图的手势动画效果，我们必须做如下设置，通过 app:layout_scrollFlags=”scroll|enterAlways” 属性来确定哪个组件是可滑动的&lt;/li>
&lt;/ol>
&lt;p>设置的 layout_scrollFlags 有如下几种选项：&lt;/p>
&lt;ul>
&lt;li>scroll: 所有想滚动出屏幕的 view 都需要设置这个 flag- 没有设置这个 flag 的 view 将被固定在屏幕顶部。&lt;/li>
&lt;li>enterAlways: 这个 flag 让任意向下的滚动都会导致该 view 变为可见，启用快速 “ 返回模式 ”。&lt;/li>
&lt;li>enterAlwaysCollapsed: 当你的视图已经设置 minHeight 属性又使用此标志时，你的视图只能已最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。&lt;/li>
&lt;li>exitUntilCollapsed: 滚动退出屏幕，最后折叠在顶端。&lt;/li>
&lt;/ul>
&lt;p>我们上面的布局中 给 Toolbar 设置了 app:layout_scrollFlags 属性，因此，Toolbar 是可以滚动出屏幕，且向下滚动有可以出现。&lt;/p>
&lt;ol start="3">
&lt;li>为了使得 Toolbar 可以滑动，我们必须还得有个条件，就是 CoordinatorLayout 布局下包裹一个可以滑动的布局，比如 RecyclerView，NestedScrollView( 经过测试，ListView，ScrollView 不支持 ) 具有滑动效果的组件。并且给这些组件设置如下属性来告诉 CoordinatorLayout，该组件是带有滑动行为的组件，然后 CoordinatorLayout 在接受到滑动时会通知 AppBarLayout 中可滑动的 Toolbar 可以滑出屏幕了。&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>app:layout_behavior=&amp;#34;@string/appbar_scrolling_view_behavior&amp;#34;
&lt;/code>&lt;/pre>&lt;p>&lt;strong>总结：&lt;/strong> 为了使得 Toolbar 有滑动效果，必须做到如下三点：&lt;/p>
&lt;pre tabindex="0">&lt;code> app:layout_behavior=&amp;#34;@string/appbar_scrolling_view_behavior&amp;#34;
&lt;/code>&lt;/pre>&lt;p>##CollapsingToolbarLayout&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="http://img.blog.csdn.net/20150617115211729" alt="这里写图片描述" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>CollapsingToolbarLayout 包裹 Toolbar 的时候提供一个可折叠的 Toolbar，一般作为 AppbarLayout 的子视图使用。&lt;/p>
&lt;p>CollapsingToolbarLayout 提供以下属性和方法是用：&lt;/p>
&lt;ol>
&lt;li>Collapsing title : ToolBar 的标题，当 CollapsingToolbarLayout 全屏没有折叠时，title 显示的是大字体，在折叠的过程中，title 不断变小到一定大小的效果。你可以调用 setTitle(CharSequence) 方法设置 title。&lt;/li>
&lt;li>Content scrim : ToolBar 被折叠到顶部固定时候的背景，你可以调用 setContentScrim(Drawable) 方法改变背景或者 在属性中使用 app:contentScrim=&amp;quot;?attr/colorPrimary&amp;quot; 来改变背景。&lt;/li>
&lt;li>Status bar scrim：状态栏的背景，调用方法 setStatusBarScrim(Drawable)。还没研究明白，不过这个只能在 Android5.0 以上系统有效果。&lt;/li>
&lt;li>Parallax scrolling children : CollapsingToolbarLayout 滑动时，子视图的视觉差，可以通过属性 app:layout_collapseParallaxMultiplier=&amp;ldquo;0.6&amp;rdquo; 改变。&lt;/li>
&lt;li>CollapseMode：子视图的折叠模式，有两种 “pin”：固定模式，在折叠的时候最后固定在顶端；“parallax”：视差模式，在折叠的时候会有个视差折叠的效果。我们可以在布局中使用属性 app:layout_collapseMode=&amp;ldquo;parallax&amp;rdquo; 来改变。&lt;/li>
&lt;/ol>
&lt;p>布局代码如下：&lt;/p>
&lt;pre tabindex="0">&lt;code>&lt;/code>&lt;/pre>&lt;p>&lt;strong>&lt;em>总结：&lt;/em>&lt;/strong> CollapsingToolbarLayout 主要是提供一个可折叠的 Toolbar 容器，对容器中的不同视图设置 layout_collapseMode 折叠模式，来达到不同的折叠效果。&lt;/p>
&lt;p>1.Toolbar 的高度 layout_height 必须固定，不能 “wrap_content”，否则 Toolbar 不会滑动，也没有折叠效果。2. 为了能让 FloatingActionButton 也能折叠且消失出现，我们必须给 FAB 设置锚点属性 app:layout_anchor=&amp;quot;@id/appbar&amp;quot;&lt;/p>
&lt;pre tabindex="0">&lt;code>意思是FAB浮动按钮显示在哪个布局区域。
且设置当前锚点的位置
app:layout_anchorGravity=”bottom|end|right”
意思FAB浮动按钮在这个布局区域的具体位置。
两个属性共同作用才是的FAB 浮动按钮也能折叠消失，出现。
3.给需要有折叠效果的组件设置 layout_collapseMode属性。
### OverscrollScaling(滚动缩放)
效果如下所示：
![](https://cdn-images-1.medium.com/max/1200/1*lEMS5RiBLGk3Q72FhXBwxA.gif)
参考博客地址，[这里](https://medium.com/@nullthemall/overscroll-appbarlayout-behavior-e58f1ee2807#.nua34q5uh)，[代码地址](https://gist.github.com/NikolaDespotoski/7d6a019e5aafe60ebade)
# Navigation Drawer
在Android提出Material Design设计方案之后，对于菜单栏，Android也是提供了一种所谓的[Navigation Drawer][1]的侧边菜单栏设计方案。Navigation Drawer与Toolbar相比更多的是一种全局的设计配置方式，往往会在Activity的最外层包裹一个DrawerLayout，具体的主页面的几个Tab可以用Fragment的方式插入到Activity种。
DrawerLayout提供了整个抽屉的容器，而NavigationView是后期推出的专门针对Draw中头部与菜单的继承自ListView的布局。
![](http://img.blog.csdn.net/20150617143302413)
用于侧滑菜单中的menu布局。之前Google在V4包中推出自己的 DrawerLayout作为抽屉侧滑菜单，标准使用方法可以参考 google 原生态 抽屉式侧滑菜单 Android DrawerLayout 布局的使用介绍。
当时的官方布局是这样的：
&lt;/code>&lt;/pre>&lt;p>&amp;lt;android.support.v4.widget.DrawerLayout xmlns:android=&amp;ldquo;&lt;a href="http://schemas.android.com/apk/res/android%22" target="_blank" rel="noopener">http://schemas.android.com/apk/res/android"&lt;/a>\ android:id=&amp;rdquo;@+id/drawer_layout&amp;quot;&lt;br>
android:layout_width=&amp;ldquo;match_parent&amp;rdquo;&lt;br>
android:layout_height=&amp;ldquo;match_parent&amp;rdquo; &amp;gt;&lt;/p>
&lt;pre>&lt;code>&amp;lt;!-- the main content view --&amp;gt;
&amp;lt;FrameLayout
android:id=&amp;quot;@+id/frame_content&amp;quot;
android:layout_width=&amp;quot;match_parent&amp;quot;
android:layout_height=&amp;quot;match_parent&amp;quot; &amp;gt;
&amp;lt;/FrameLayout&amp;gt;
&amp;lt;!-- the navigetion view --&amp;gt;
&amp;lt;ListView
android:id=&amp;quot;@+id/drawer_list&amp;quot;
android:layout_width=&amp;quot;240dp&amp;quot;
android:layout_height=&amp;quot;match_parent&amp;quot;
android:layout_gravity=&amp;quot;start&amp;quot;
android:background=&amp;quot;#9999cc&amp;quot;
android:choiceMode=&amp;quot;singleChoice&amp;quot;
android:divider=&amp;quot;@android:color/transparent&amp;quot;
android:dividerHeight=&amp;quot;0dp&amp;quot; &amp;gt;
&amp;lt;/ListView&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>&amp;lt;/android.support.v4.widget.DrawerLayout&amp;gt;&lt;/p>
&lt;pre tabindex="0">&lt;code>其实这次谷歌只是将上面的ListView布局替换成NavigationView了。简化了之前ListView写适配器的繁琐。
先如今布局改成如下：
&lt;/code>&lt;/pre>&lt;p>&amp;lt;android.support.v4.widget.DrawerLayout xmlns:android=&amp;ldquo;&lt;a href="http://schemas.android.com/apk/res/android%22" target="_blank" rel="noopener">http://schemas.android.com/apk/res/android"&lt;/a> xmlns:app=&amp;ldquo;&lt;a href="http://schemas.android.com/apk/res-auto%22" target="_blank" rel="noopener">http://schemas.android.com/apk/res-auto"&lt;/a> android:id=&amp;rdquo;@+id/drawer_layout&amp;rdquo; android:layout_width=&amp;ldquo;match_parent&amp;rdquo; android:layout_height=&amp;ldquo;match_parent&amp;rdquo;&amp;gt;&lt;/p>
&lt;pre>&lt;code>&amp;lt;!-- the main content view --&amp;gt;
&amp;lt;include layout=&amp;quot;@layout/layout_content&amp;quot; /&amp;gt;
&amp;lt;!-- the navigetion view --&amp;gt;
&amp;lt;android.support.design.widget.NavigationView
android:id=&amp;quot;@+id/navigationView&amp;quot;
android:layout_width=&amp;quot;wrap_content&amp;quot;
android:layout_height=&amp;quot;match_parent&amp;quot;
android:layout_gravity=&amp;quot;left&amp;quot;
android:fitsSystemWindows=&amp;quot;true&amp;quot;
app:headerLayout=&amp;quot;@layout/layout_header&amp;quot;
app:menu=&amp;quot;@layout/layout_menu&amp;quot;&amp;gt;
&amp;lt;/android.support.design.widget.NavigationView&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>&amp;lt;/android.support.v4.widget.DrawerLayout&amp;gt;&lt;/p>
&lt;pre tabindex="0">&lt;code>中NavigationView 中的 android:layout_gravity=”start” 属性来控制抽屉菜单从哪边滑出，一般“start ”从左边滑出，“end”从右边滑出。
这里最主要的两个属性分别是：
1.app:headerLayout: 给NavigationView添加头部布局
2.app：menu：给NavigationView添加menu菜单布局
app:headerLayout布局如下：
&lt;/code>&lt;/pre>&lt;?xml version="1.0" encoding="utf-8"?>
&lt;p>&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="200dp"
android:background="@drawable/img1"
android:gravity="center"
android:orientation="vertical">&lt;/p>
&lt;pre>&lt;code>&amp;lt;ImageView
android:layout_width=&amp;quot;125dp&amp;quot;
android:layout_height=&amp;quot;125dp&amp;quot;
android:scaleType=&amp;quot;centerCrop&amp;quot;
android:src=&amp;quot;@drawable/image&amp;quot; /&amp;gt;
&amp;lt;TextView
android:layout_marginTop=&amp;quot;15dp&amp;quot;
android:layout_width=&amp;quot;wrap_content&amp;quot;
android:layout_height=&amp;quot;wrap_content&amp;quot;
android:text=&amp;quot;CSDN废墟的树博客&amp;quot;
android:textColor=&amp;quot;@android:color/white&amp;quot; /&amp;gt;
&lt;/code>&lt;/pre>
&lt;/LinearLayout>
```
&lt;p>app：menu 布局如下：&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;
&amp;lt;menu xmlns:android=&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;match_parent&amp;#34;&amp;gt;
&amp;lt;group
android:checkableBehavior=&amp;#34;single&amp;#34;
android:title=&amp;#34;Home items&amp;#34;&amp;gt;
&amp;lt;item
android:id=&amp;#34;@+id/nav_blog&amp;#34;
android:icon=&amp;#34;@drawable/ic_account_balance_black_24dp&amp;#34;
android:title=&amp;#34;博客地址&amp;#34; /&amp;gt;
&amp;lt;item
android:id=&amp;#34;@+id/nav_ver&amp;#34;
android:icon=&amp;#34;@drawable/ic_error_outline_black_36dp&amp;#34;
android:title=&amp;#34;版本信息&amp;#34; /&amp;gt;
&amp;lt;item
android:id=&amp;#34;@+id/nav_about&amp;#34;
android:icon=&amp;#34;@drawable/ic_error_outline_black_36dp&amp;#34;
android:title=&amp;#34;关于我&amp;#34; /&amp;gt;
&amp;lt;/group&amp;gt;
&amp;lt;item android:title=&amp;#34;Sub items&amp;#34;&amp;gt;
&amp;lt;menu&amp;gt;
&amp;lt;item
android:id=&amp;#34;@+id/sub_exit&amp;#34;
android:icon=&amp;#34;@drawable/ic_power_settings_new_black_36dp&amp;#34;
android:title=&amp;#34;退出应用&amp;#34; /&amp;gt;
&amp;lt;item
android:id=&amp;#34;@+id/sub_switch&amp;#34;
android:icon=&amp;#34;@drawable/ic_settings_applications_black_36dp&amp;#34;
android:title=&amp;#34;切换主题&amp;#34; /&amp;gt;
&amp;lt;/menu&amp;gt;
&amp;lt;/item&amp;gt;
&amp;lt;/menu&amp;gt;
&lt;/code>&lt;/pre>&lt;p>代码中控制 NavigationView&lt;/p>
&lt;pre tabindex="0">&lt;code>private void initNavigationView(){
navigationView = (NavigationView) findViewById(R.id.navigationView);
drawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);
//设置侧滑菜单选择监听事件
navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {
@Override
public boolean onNavigationItemSelected(MenuItem menuItem) {
menuItem.setChecked(true);
//关闭抽屉侧滑菜单
drawerLayout.closeDrawers();
return true;
}
});
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
if (item.getItemId() == android.R.id.home){
//打开抽屉侧滑菜单
drawerLayout.openDrawer(GravityCompat.START);
}
return super.onOptionsItemSelected(item);
}
&lt;/code>&lt;/pre>&lt;p>关于 NavigationView 中 item 的字体颜色和 icon 选中状态颜色是去当前主题 theme 中的&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;--正常状态下字体颜色和icon颜色--&amp;gt;
&amp;lt;item name=&amp;#34;android:textColorPrimary&amp;#34;&amp;gt;@android:color/darker_gray&amp;lt;/item&amp;gt;
&amp;lt;--选中状态icon的颜色和字体颜色--&amp;gt;
&amp;lt;item name=&amp;#34;colorPrimary&amp;#34;&amp;gt;@color/accent_material_light&amp;lt;/item&amp;gt;
&lt;/code>&lt;/pre>&lt;h2 id="github-material-drawerhttpsgithubcommikepenzmaterialdrawer">&lt;a href="https://github.com/mikepenz/MaterialDrawer" target="_blank" rel="noopener">Github-Material Drawer&lt;/a>&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://raw.githubusercontent.com/mikepenz/MaterialDrawer/feature/refactoring/DEV/github/screenshots1.jpg" alt="enter description here" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;pre tabindex="0">&lt;code>Material Drawer是对于Android原生的Navigation Drawer的一种封装，它可以让开发人员快速地在应用中集成Drawer。可以在Gradle中添加如下参数来添加该插件：
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>compile(&amp;#39;com.mikepenz:materialdrawer:3.0.9@aar&amp;#39;) {
transitive = true
}
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>
&lt;p>简单引入&lt;/p>
&lt;pre tabindex="0">&lt;code>new DrawerBuilder().withActivity(this).build()
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>&lt;span class="c">&amp;lt;!--
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ Copyright (C) 2015 The Android Open Source Project
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ you may not use this file except in compliance with the License.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ You may obtain a copy of the License at
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ http://www.apache.org/licenses/LICENSE-2.0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ Unless required by applicable law or agreed to in writing, software
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ See the License for the specific language governing permissions and
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> ~ limitations under the License.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">--&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;android.support.design.widget.CoordinatorLayout&lt;/span> &lt;span class="na">xmlns:android=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:app=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res-auto&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/main_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.design.widget.AppBarLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/appbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;200dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:theme=&lt;/span>&lt;span class="s">&amp;#34;@style/ThemeOverlay.AppCompat.Dark.ActionBar&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.design.widget.CollapsingToolbarLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/collapsing_toolbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:contentScrim=&lt;/span>&lt;span class="s">&amp;#34;?attr/colorPrimary&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:expandedTitleMarginEnd=&lt;/span>&lt;span class="s">&amp;#34;64dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:expandedTitleMarginStart=&lt;/span>&lt;span class="s">&amp;#34;48dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_scrollFlags=&lt;/span>&lt;span class="s">&amp;#34;scroll|exitUntilCollapsed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:titleEnabled=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;ImageView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/backdrop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:fitsSystemWindows=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:scaleType=&lt;/span>&lt;span class="s">&amp;#34;centerCrop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_collapseMode=&lt;/span>&lt;span class="s">&amp;#34;parallax&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- As our statusBar is transparent below and content is moved behind our toolbar has to include the padding on top so we use this area --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.Toolbar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/toolbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;?attr/actionBarSize&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingTop=&lt;/span>&lt;span class="s">&amp;#34;@dimen/tool_bar_top_padding&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_collapseMode=&lt;/span>&lt;span class="s">&amp;#34;pin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:popupTheme=&lt;/span>&lt;span class="s">&amp;#34;@style/ThemeOverlay.AppCompat.Light&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.design.widget.CollapsingToolbarLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.design.widget.AppBarLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v4.widget.NestedScrollView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_behavior=&lt;/span>&lt;span class="s">&amp;#34;@string/appbar_scrolling_view_behavior&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LinearLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:orientation=&lt;/span>&lt;span class="s">&amp;#34;vertical&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingTop=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.CardView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_margin=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LinearLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:orientation=&lt;/span>&lt;span class="s">&amp;#34;vertical&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingBottom=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingLeft=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingRight=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingTop=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;TextView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;Info&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:textAppearance=&lt;/span>&lt;span class="s">&amp;#34;@style/TextAppearance.AppCompat.Title&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;TextView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;@string/lorem_ipsum&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LinearLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.v7.widget.CardView&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.CardView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_marginBottom=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_marginLeft=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_marginRight=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LinearLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:orientation=&lt;/span>&lt;span class="s">&amp;#34;vertical&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingBottom=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingLeft=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingRight=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingTop=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;TextView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;Friends&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:textAppearance=&lt;/span>&lt;span class="s">&amp;#34;@style/TextAppearance.AppCompat.Title&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;TextView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;@string/lorem_ipsum&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LinearLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.v7.widget.CardView&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.v7.widget.CardView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_marginBottom=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_marginLeft=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_marginRight=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;LinearLayout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:orientation=&lt;/span>&lt;span class="s">&amp;#34;vertical&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingBottom=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingLeft=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingRight=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:paddingTop=&lt;/span>&lt;span class="s">&amp;#34;24dp&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;TextView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;Related&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:textAppearance=&lt;/span>&lt;span class="s">&amp;#34;@style/TextAppearance.AppCompat.Title&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;TextView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;@string/lorem_ipsum&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LinearLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.v7.widget.CardView&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/LinearLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/android.support.v4.widget.NestedScrollView&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;android.support.design.widget.FloatingActionButton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/floating_action_button&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;wrap_content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_margin=&lt;/span>&lt;span class="s">&amp;#34;16dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:clickable=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_anchor=&lt;/span>&lt;span class="s">&amp;#34;@id/appbar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">app:layout_anchorGravity=&lt;/span>&lt;span class="s">&amp;#34;bottom|right|end&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/android.support.design.widget.CoordinatorLayout&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="actionbar-1">ActionBar&lt;/h1>
&lt;h2 id="styles">Styles&lt;/h2>
&lt;h3 id="translucent-bar-透明状态栏---immersive-mode-沉浸式状态栏-">Translucent Bar( 透明状态栏 ) &amp;amp; Immersive Mode( 沉浸式状态栏 )&lt;/h3>
&lt;blockquote>
&lt;ul>
&lt;li>&lt;a href="http://www.zhihu.com/question/27024901" target="_blank" rel="noopener">什么叫沉浸式状态栏 ?&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>透明状态栏与沉浸式状态栏不是同一种东西，透明状态栏源自 ActionBar，只是其颜色和设计状态发生了变化，一般呈现的是状态栏和 / 或导航栏透明或半透明 . 最极端的例子是在 Muzei 这样的应用上&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://pic3.zhimg.com/be0409dddd05f0d2f7ee9852074d4dd2_b.jpg" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>关于透明栏的更多描述参见 : &lt;a href="http://www.google.com/design/spec/layout/structure.html#structure-system-bars" target="_blank" rel="noopener">System Bars&lt;/a> (Material Design)。沉浸式对应的是 Immersive Mode, 呈现的形式是全屏状态, 隐藏状态栏与导航栏。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://pic2.zhimg.com/2f0e0c9c4b5c42157a17ae514c5902ad_r.jpg" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h2 id="search-view">Search View&lt;/h2>
&lt;h3 id="materialsearchviewhttpsgithubcommiguelcatalanmaterialsearchview">&lt;a href="https://github.com/MiguelCatalan/MaterialSearchView" target="_blank" rel="noopener">&lt;strong>MaterialSearchView&lt;/strong>&lt;/a>&lt;/h3>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://raw.githubusercontent.com/MiguelCatalan/MaterialSearchView/master/art/default.gif" alt="sample" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://raw.githubusercontent.com/MiguelCatalan/MaterialSearchView/master/art/voice.gif" alt="sample" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>MaterialSearchView 的作用即是为 Android 的 ToolBar&lt;/p>
&lt;h1 id="utils">Utils&lt;/h1>
&lt;h2 id="statusbarutilhttpsgithubcomlaobiestatusbarutil">&lt;a href="https://github.com/laobie/StatusBarUtil" target="_blank" rel="noopener">StatusBarUtil&lt;/a>&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/laobie/StatusBarUtil/raw/master/img/set_color.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/laobie/StatusBarUtil/raw/master/img/set_color.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h1 id="popup-menu-弹出式菜单-">Popup Menu( 弹出式菜单 )&lt;/h1>
&lt;h2 id="pinterestviewhttpsgithubcombrucetoopinterestview">&lt;a href="https://github.com/brucetoo/PinterestView" target="_blank" rel="noopener">PinterestView&lt;/a>&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/brucetoo/PinterestView/raw/master/mine1.gif" alt="MINE" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h2 id="boommenuhttpsgithubcomnightonkeboommenu">&lt;a href="https://github.com/Nightonke/BoomMenu" target="_blank" rel="noopener">BoomMenu&lt;/a>&lt;/h2>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/Nightonke/BoomMenu/raw/master/Pictures/show_circle.gif?raw=true" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/Nightonke/BoomMenu/raw/master/Pictures/show_ham.gif?raw=true" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h1 id="links">Links&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://dzone.com/articles/getting-started-with-android-app-and-material-desi" target="_blank" rel="noopener">Getting Started with Material Design on Android: Toolbar and Navigation Drawer&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Activity</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/activity/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/activity/</guid><description>&lt;h1 id="support-library-activity">Support Library Activity&lt;/h1>
&lt;p>为了使在旧版手机上依然可以使用譬如 Holo、Material 这样的设计风格，Google 在 Support Library 中推出了多种兼容性的 Activity。&lt;/p>
&lt;h2 id="appcompatactivity">AppCompatActivity&lt;/h2>
&lt;p>在 Android Support Library 22.1 之后，就将旧有的 ActionBarActivity 替换为了 AppCompatActivity，提供了最低到 API Level 7 的 ActionBar 的兼容。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://androidresearch.files.wordpress.com/2015/04/android-support-22.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>&lt;strong>1.&lt;/strong> In order to benefit from all these things, the first thing you should do is to update the support library to 22.1.0.&lt;/p>
&lt;pre tabindex="0">&lt;code>`dependencies {``   ``// … ``   ``compile &amp;#39;com.android.support:appcompat-v7:22.1.0&amp;#39;``}`
&lt;/code>&lt;/pre>&lt;p>&lt;strong>2.&lt;/strong> Then let your activity extend &lt;code>AppCompatActivity&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">MainActivity&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">AppCompatActivity&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>3.&lt;/strong> And finally, change the application theme to &lt;code>AppCompat&lt;/code> or any descendants of it.&lt;/p>
&lt;pre tabindex="0">&lt;code>`&amp;lt;``application` `android:theme``=``&amp;#34;@style/Theme.AppCompat&amp;#34;``&amp;gt;`
&lt;/code>&lt;/pre>&lt;h2 id="actionbaractivitydeprecated">ActionBarActivity!deprecated&lt;/h2>
&lt;p>ActionBarActivity 是在 Material Design 推出之前的主流的 V7 兼容包中的基类型，目前已经被 AppCompatActivity 替代。&lt;/p>
&lt;h1 id="activity-theme">Activity Theme&lt;/h1>
&lt;h2 id="dialog">Dialog&lt;/h2>
&lt;p>    要把某个 Activity 窗口化，即直接定义其主题为 Dialog 样式即可：&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;activity android:name=&amp;#34;.activity02&amp;#34;
android:theme=&amp;#34;@android:style/Theme.Dialog&amp;#34;&amp;gt;&amp;lt;/activity&amp;gt;
&lt;/code>&lt;/pre>&lt;p>其效果如下图&lt;/p>
&lt;p>![Activity 窗口示意图][1]&lt;/p>
&lt;h3 id="transparent">Transparent&lt;/h3>
&lt;p>    有时候需要把窗体透明化，只要为窗口定义如下的 Style 即可：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;style&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;MyDialogStyle&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowBackground&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@android:color/transparent&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowFrame&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@null&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowNoTitle&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowIsFloating&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowIsTranslucent&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowContentOverlay&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@null&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:windowAnimationStyle&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>@android:style/Animation.Dialog&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;android:backgroundDimEnabled&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/style&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后在 AndroidManifest.xml 中添加如下配置：&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;activity
android:name=&amp;#34;LoadingActivity&amp;#34;
android:theme=&amp;#34;@style/MyDialogStyle&amp;#34; /&amp;gt;
&amp;lt;activity
&lt;/code>&lt;/pre></description></item><item><title>AdapterView</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/adapterview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/adapterview/</guid><description>&lt;h1 id="custom-adapterview">Custom AdapterView&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">MyAdapterView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">extends&lt;/span> &lt;span class="n">AdapterView&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">ImageAdapter&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">implements&lt;/span> &lt;span class="n">AdapterView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">OnItemClickListener&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="n">ImageAdapter&lt;/span> &lt;span class="n">mAdapter&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="nf">MyAdapterView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Context&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">AttributeSet&lt;/span> &lt;span class="n">attrs&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">defStyle&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">attrs&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">defStyle&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">initThings&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">ImageAdapter&lt;/span> &lt;span class="nf">getAdapter&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// TODO Auto-generated method stub
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">mAdapter&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">setAdapter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ImageAdapter&lt;/span> &lt;span class="n">adapter&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// TODO Auto-generated method stub
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">requestLayout&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">View&lt;/span> &lt;span class="nf">obtainView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">position&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">View&lt;/span> &lt;span class="n">child&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mAdapter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">position&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">child&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">protected&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">onLayout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kt">boolean&lt;/span> &lt;span class="n">changed&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onLayout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">changed&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">mAdapter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getCount&lt;/span>&lt;span class="o">();&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">View&lt;/span> &lt;span class="n">child&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">obtainView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">child&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">layout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">70&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">addViewInLayout&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">child&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">invalidate&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">onItemClick&lt;/span>&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">AdapterView&lt;/span>&lt;span class="o">&amp;lt;?&amp;gt;&lt;/span> &lt;span class="n">parent&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">View&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">position&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">long&lt;/span> &lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">d&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;MYEXAMPLES&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;Clicked an item!&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="event">Event&lt;/h2>
&lt;h3 id="click">Click&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="nf">performItemClick&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">View&lt;/span> &lt;span class="n">view&lt;/span>&lt;span class="o">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">position&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">mOnItemClickListener&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">mOnItemClickListener&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onItemClick&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">view&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">position&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Gallery</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/gallery/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/gallery/</guid><description>&lt;h1 id="imageview">ImageView&lt;/h1>
&lt;h2 id="hoverview图片浮层">HoverView：图片浮层&lt;/h2>
&lt;h3 id="androidviewhoverhttpsgithubcomdaimajiaandroidviewhover">&lt;a href="https://github.com/daimajia/AndroidViewHover" target="_blank" rel="noopener">&lt;strong>AndroidViewHover&lt;/strong>&lt;/a>&lt;/h3>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://camo.githubusercontent.com/44affb72f0688c213500917009a1680b41492413/687474703a2f2f7777322e73696e61696d672e636e2f6d773639302f36313064633033346a7731656a356969686a746c35673230387a3066326e70642e676966" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h1 id="imageview-loader">ImageView-Loader&lt;/h1>
&lt;p>Picasso 是一个专门的面向图片任务的 HTTP 库。譬如，可以用一行代码就把网络图片加载到 ImageView 中：&lt;/p>
&lt;pre tabindex="0">&lt;code>Picasso.with(context).load(&amp;#34;http://i.imgur.com/DvpvklR.png&amp;#34;).into(imageView);
&lt;/code>&lt;/pre>&lt;p>Picasso 与 Retrofit 都是默认的使用 OkHttpClient 作为底层的 HTTP 客户端，然而，你也可以配置自己的基于 HttpUrlConnection 的客户端。&lt;/p>
&lt;p>&lt;a href="https://github.com/bumptech/glide/wiki" target="_blank" rel="noopener">Glide&lt;/a>是一个非常类似于 Picasso 的库，不过它提供了一些额外的功能，譬如 GIF 动画、简略图生成以及视频。&lt;/p>
&lt;p>Facebook 开源的它们自己的图片加载库&lt;a href="https://code.facebook.com/posts/366199913563917/introducing-fresco-a-new-image-library-for-android/" target="_blank" rel="noopener">Fresco&lt;/a>使用了它们自定义的 Android 客户端。其中它的一个非常优秀的特性在于 Fresco 的面向 Bitmaps 的自定义才存储策略能够避免 JVM 堆顶的垃圾回收的限制。Fresco 是分配了 Android 中被称为 ashmem 部分的内存，同时，它用了一些方法允许同时从 Java 以及 C++代码访问 ashmem 部分，来进行 NDK 级别的 CPU 处理。为了节省数据存储空间以及 CPU 的消耗，Fresco 有三层不同的缓存：两层在内存中，以及一层在内部存储中。&lt;/p>
&lt;h1 id="imageprocess图片处理">ImageProcess：图片处理&lt;/h1>
&lt;h2 id="label标签">Label(标签)&lt;/h2>
&lt;h2 id="sticker贴纸">Sticker(贴纸)&lt;/h2>
&lt;h3 id="stickerviewhttpsgithubcomnimengbostickerview">&lt;a href="https://github.com/nimengbo/StickerView" target="_blank" rel="noopener">StickerView&lt;/a>&lt;/h3>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/nimengbo/StickerView/raw/master/stickerGIF.gif" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h2 id="crop裁剪">Crop(裁剪)&lt;/h2>
&lt;h3 id="simplecropviewhttpsgithubcomisseiaokisimplecropview">&lt;a href="https://github.com/IsseiAoki/SimpleCropView" target="_blank" rel="noopener">SimpleCropView&lt;/a>&lt;/h3>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://camo.githubusercontent.com/7ef872746a0181356ea0b44d94b7bd939f28c5ae/68747470733a2f2f7261772e6769746875622e636f6d2f77696b692f4973736569416f6b692f53696d706c6543726f70566965772f696d616765732f6769662f64656d6f5f62617369635f75736167652e676966" alt="demo" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h1 id="focus图片缩放浏览">Focus(图片缩放浏览)&lt;/h1>
&lt;h3 id="pull-back-layouthttpsgithubcomoxoooopull-back-layout">&lt;a href="https://github.com/oxoooo/pull-back-layout" target="_blank" rel="noopener">Pull Back Layout&lt;/a>&lt;/h3>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/oxoooo/pull-back-layout/raw/master/screenshot.gif" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>Pull-Back-Layout 本质上提供了一层对于 ImageView 或者 ViewPager 的封装，允许以下拉方式关闭某个放大的 ImageView 或者 ViewPager。&lt;/p>
&lt;ul>
&lt;li>&lt;em>Installation&lt;/em>&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>repositories {
// ...
maven { url &amp;#34;https://jitpack.io&amp;#34; }
}
dependencies {
// ... support library ...
// ...
compile &amp;#39;com.github.oxoooo:pull-back-layout:1.0.0&amp;#39;
}
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>&lt;em>Usage&lt;/em>&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>Make your Activity translucent by adding these two lines to your theme:&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;style name=&amp;#34;AppTheme&amp;#34; ...&amp;gt;
&amp;lt;!-- ... --&amp;gt;
&amp;lt;item name=&amp;#34;android:windowBackground&amp;#34;&amp;gt;@android:color/transparent&amp;lt;/item&amp;gt;
&amp;lt;item name=&amp;#34;android:windowIsTranslucent&amp;#34;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;!-- also translucent system ui -- suggested but not required --&amp;gt;
&amp;lt;item name=&amp;#34;android:windowTranslucentStatus&amp;#34;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;item name=&amp;#34;android:windowTranslucentNavigation&amp;#34;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Wraps &lt;code>ooo.oxo.library.widget.PullBackLayout&lt;/code> around your &lt;code>ImageView&lt;/code> or &lt;code>ViewPager&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;ooo.oxo.library.widget.PullBackLayout
android:id=&amp;#34;@+id/puller&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;match_parent&amp;#34;&amp;gt;
&amp;lt;android.support.v4.view.ViewPager
android:id=&amp;#34;@+id/pager&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;match_parent&amp;#34; /&amp;gt;
&amp;lt;/ooo.oxo.library.widget.PullBackLayout&amp;gt;
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Set a callback:&lt;/p>
&lt;pre tabindex="0">&lt;code>public class ViewerActivity extends AppCompatActivity implements PullBackLayout.Callback {
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
/* ... */
puller.setCallback(this);
}
@Override
public void onPullStart() {
// fade out Action Bar ...
// show Status Bar ...
}
@Override
public void onPull(float progress) {
// set the opacity of the window&amp;#39;s background
}
@Override
public void onPullCancel() {
// fade in Action Bar
}
@Override
public void onPullComplete() {
supportFinishAfterTransition();
}
}
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol></description></item><item><title>RecycleView</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/recycleview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/recycleview/</guid><description>&lt;h1 id="纵向单列表">纵向单列表&lt;/h1>
&lt;h2 id="下拉刷新">下拉刷新&lt;/h2>
&lt;h2 id="上拉刷新">上拉刷新&lt;/h2>
&lt;h1 id="extension">Extension&lt;/h1>
&lt;h2 id="separator">Separator&lt;/h2>
&lt;h3 id="dividershttpsgithubcomkarumidividers">&lt;a href="https://github.com/Karumi/Dividers" target="_blank" rel="noopener">&lt;strong>Dividers&lt;/strong>&lt;/a>&lt;/h3>
&lt;p>&lt;a href="https://github.com/Karumi/Dividers/raw/master/art/example.gif" target="_blank" rel="noopener">Demo screenshot&lt;/a>&lt;/p>
&lt;h2 id="pagination">Pagination&lt;/h2>
&lt;h3 id="paginatehttpsgithubcommarkomilospaginate">&lt;a href="https://github.com/MarkoMilos/Paginate" target="_blank" rel="noopener">Paginate&lt;/a>&lt;/h3>
&lt;p>&lt;a href="https://github.com/MarkoMilos/Paginate/raw/master/art/demo.gif" target="_blank" rel="noopener">Demo Screen&lt;/a>&lt;/p>
&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;p>   RecyclerView 是谷歌 V7 包下新增的控件,用来替代 ListView 的使用,在 RecyclerView 标准化了 ViewHolder 类似于 ListView 中 convertView 用来做视图缓存.先来说说 RecyclerView 的有点就是,他可以通过设置 LayoutManager 来快速实现 listview、gridview、瀑布流的效果，而且还可以设置横向和纵向显示，添加动画效果也非常简单(自带了 ItemAnimation，可以设置加载和移除时的动画，方便做出各种动态浏览的效果),也是官方推荐使用的.以下是官方的说明:&lt;/p>
&lt;blockquote>
&lt;p>RecyclerView is a more advanced and flexible version of ListView. This widget is a container for large sets of views that can be recycled and scrolled very efficiently. Use the RecyclerView widget when you have lists with elements that change dynamically. 简单说就是当你需要动态展示一组数据的时候就会需要用到它。&lt;/p>
&lt;/blockquote>
&lt;h1 id="list">List&lt;/h1>
&lt;p>首先要用这个控件，你需要在 gradle 文件中添加包的引用(配合官方 CardView 使用)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gradle" data-lang="gradle">&lt;span class="line">&lt;span class="cl">&lt;span class="n">compile&lt;/span> &lt;span class="s1">&amp;#39;com.android.support:cardview-v7:21.0.3&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">compile&lt;/span> &lt;span class="s1">&amp;#39;com.android.support:recyclerview-v7:21.0.3&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后是在 XML 文件用使用它&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;android.support.v7.widget.RecyclerView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:android=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;match_parent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:id=&lt;/span>&lt;span class="s">&amp;#34;@+id/recycler_view&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_centerVertical=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_centerHorizontal=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接着在 Activity 中设置它&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">class&lt;/span> &lt;span class="nc">MainActivity&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">ActionBarActivity&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@InjectView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">recycler_view&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RecyclerView&lt;/span> &lt;span class="n">mRecyclerView&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">protected&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">onCreate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Bundle&lt;/span> &lt;span class="n">savedInstanceState&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">super&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onCreate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">savedInstanceState&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setContentView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">layout&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">activity_main&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ButterKnife&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">inject&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mRecyclerView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setLayoutManager&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">LinearLayoutManager&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">));&lt;/span> &lt;span class="c1">//这里用线性显示 类似于listview
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// mRecyclerView.setLayoutManager(new GridLayoutManager(this, 2));//这里用线性宫格显示 类似于grid view
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// mRecyclerView.setLayoutManager(new StaggeredGridLayoutManager(2, OrientationHelper.VERTICAL));//这里用线性宫格显示 类似于瀑布流
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">mRecyclerView&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setAdapter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">NormalRecyclerViewAdapter&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="nf">onCreateOptionsMenu&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Menu&lt;/span> &lt;span class="n">menu&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">getMenuInflater&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">inflate&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">menu&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">menu_main&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">menu&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="nf">onOptionsItemSelected&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MenuItem&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getItemId&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">action_settings&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">super&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">onOptionsItemSelected&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后是适配器代码&lt;/p>
&lt;pre tabindex="0">&lt;code>public class NormalRecyclerViewAdapter extends RecyclerView.Adapter&amp;lt;NormalRecyclerViewAdapter.NormalTextViewHolder&amp;gt; {
private final LayoutInflater mLayoutInflater;
private final Context mContext;
private String[] mTitles;
public NormalRecyclerViewAdapter(Context context) {
mTitles = context.getResources().getStringArray(R.array.titles);
mContext = context;
mLayoutInflater = LayoutInflater.from(context);
}
@Override
public NormalTextViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
return new NormalTextViewHolder(mLayoutInflater.inflate(R.layout.item_text, parent, false));
}
@Override
public void onBindViewHolder(NormalTextViewHolder holder, int position) {
holder.mTextView.setText(mTitles[position]);
}
@Override
public int getItemCount() {
return mTitles == null ? 0 : mTitles.length;
}
public static class NormalTextViewHolder extends RecyclerView.ViewHolder {
@InjectView(R.id.text_view)
TextView mTextView;
NormalTextViewHolder(View view) {
super(view);
ButterKnife.inject(this, view);
view.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {
Log.d(&amp;#34;NormalTextViewHolder&amp;#34;, &amp;#34;onClick--&amp;gt; position = &amp;#34; + getPosition());
}
});
}
}
}
&lt;/code>&lt;/pre>&lt;p>![enter description here][1]&lt;/p>
&lt;h1 id="grid">Grid&lt;/h1>
&lt;h2 id="aspect-ratio">Aspect Ratio&lt;/h2>
&lt;h3 id="greedo-layout-for-androidhttpsgithubcom500pxgreedo-layout-for-android支持百分比分割">&lt;a href="https://github.com/500px/greedo-layout-for-android" target="_blank" rel="noopener">greedo-layout-for-android&lt;/a>:支持百分比分割&lt;/h3>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/500px/greedo-layout-for-android/raw/master/screenshot.png" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p></description></item><item><title>界面开发基础</title><link>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/android/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/</guid><description>&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;h2 id="material-design">Material Design&lt;/h2>
&lt;p>Material Design 是由 Google 提出的关于如何构建一个 Android 应用的完整的指导方案，该方案不仅仅可以被用于 Android 应用的设计，同样可以被用于 Web 端的设计。目前在 Web 端上已经出现了大量践行 Material Design 的开源的组件库。在开发个 APP 的过程种，Android 提供了多个辅助库来帮助开发者实践这些设计指南。其中最重要的几个库就是：&lt;/p>
&lt;ul>
&lt;li>com.android.support:appcompat-v7:23.1.0&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>com.android.support:design :23.1.0&lt;/li>
&lt;/ul>
&lt;p>总而言之，如果使用 Android Studio 来开发应用的话，这两个库会被自动作为依赖引入项目中。在开发应用时，一个重要的方面就是应用的颜色模式的选择，而 Material Design 的原则中也阐述了如何来选择颜色。&lt;/p>
&lt;h3 id="showcase">ShowCase&lt;/h3>
&lt;h4 id="plaidhttpsgithubcomnickbutcherplaid">&lt;a href="https://github.com/nickbutcher/plaid" target="_blank" rel="noopener">plaid&lt;/a>&lt;/h4>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://github.com/nickbutcher/plaid/raw/master/screenshots/plaid_demo.giff" alt="" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;h1 id="screen--size">Screen &amp;amp; Size&lt;/h1>
&lt;blockquote>
&lt;p>参考资料&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.jianshu.com/p/913943d25829" target="_blank" rel="noopener">详解 Android 开发中常用的 DPI / DP / SP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="dipdevice-independent-pixelsdp">DIP(Device Independent Pixels,dp)&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>概念&lt;/th>
&lt;th>解释&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>屏幕尺寸 Screen Size&lt;/td>
&lt;td>即显示屏幕的实际大小，按照屏幕的对角线进行测量。为简单起见，Android 把所有的屏幕大小分为四种尺寸：小，普通，大，超大(分别对应：small, normal, large, and extra large)。应用程序可以为这四种尺寸分别提供不同的自定义屏幕布局-平台将根据屏幕实际尺寸选择对应布局进行渲染，这种选择对于程序侧是透明的&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>屏幕长宽比 sAspect ratio&lt;/td>
&lt;td>长宽比是屏幕的物理宽度与物理高度的比例关系。应用程序可以通过使用限定的资源来为指定的长宽比提供屏幕布局资源，&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>屏幕分辨率 Resolution&lt;/td>
&lt;td>在屏幕上显示的物理像素总和。需要注意的是：尽管分辨率通常用宽 x 高表示，但分辨率并不意味着具体的屏幕长宽比。在 Andorid 系统中，应用程序不直接使用分辨率，&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>密度 Density&lt;/td>
&lt;td>根据像素分辨率，在屏幕指定物理宽高范围内能显示的像素数量。在同样的宽高区域，低密度的显示屏能显示的像素较少，而高密度的显示屏则能显示更多的像素。屏幕密度非常重要，因为其它条件不变的情况下，一共宽高固定的 UI 组件(比如一个按钮)在在低密度的显示屏上显得很大，而在高密度显示屏上看起来就很小，&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>密度无关的像素( DIP )&lt;/td>
&lt;td>指一个抽象意义上的像素，程序用它来定义界面元素。它作为一个与实际密度无关的单位，帮助程序员构建一个布局方案(界面元素的宽度，高度，位置)。一个与密度无关的像素，在逻辑尺寸上，与一个位于像素密度为 160DPI 的屏幕上的像素是一致的，这也是 Android 平台所假定的默认显示设备。在运行的时候，平台会以目标屏幕的密度作为基准，“透明地”处理所 有需要的 DIP 缩放操作。要把密度无关像素转换为屏幕像素，可以用这样一个简单的公式: pixels = dips * (density / 160)。举个例子，在 DPI 为 240 的屏幕上，1 个 DIP 等于 1.5 个物理像素。我们强烈推荐你用 DIP 来定义你程序的界面布局，因为这样可以保证你的 UI 在各种分辨率的屏幕上都可以正常显示&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>尺寸获取&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl"> &lt;span class="err">#获取基本属性信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DisplayMetrics&lt;/span> &lt;span class="n">metric&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DisplayMetrics&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">getWindowManager&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getDefaultDisplay&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getMetrics&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">metric&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">metric&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">widthPixels&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕宽度(像素)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">height&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">metric&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">heightPixels&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕高度(像素)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">float&lt;/span> &lt;span class="n">density&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">metric&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">density&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕密度(0.75 / 1.0 / 1.5)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">densityDpi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">metric&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">densityDpi&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕密度DPI(120 / 160 / 240)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// 获取屏幕密度(方法1)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">screenWidth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getWindowManager&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getDefaultDisplay&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getWidth&lt;/span>&lt;span class="o">();&lt;/span> &lt;span class="c1">// 屏幕宽(像素，如：480px)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">screenHeight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getWindowManager&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getDefaultDisplay&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getHeight&lt;/span>&lt;span class="o">();&lt;/span> &lt;span class="c1">// 屏幕高(像素，如：800p)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; getDefaultDisplay&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;screenWidth=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenWidth&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; screenHeight=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenHeight&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取屏幕密度(方法2)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">DisplayMetrics&lt;/span> &lt;span class="n">dm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DisplayMetrics&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getResources&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getDisplayMetrics&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">density&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">density&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕密度(像素比例：0.75/1.0/1.5/2.0)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">densityDPI&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">densityDpi&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕密度(每寸像素：120/160/240/320)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">float&lt;/span> &lt;span class="n">xdpi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">xdpi&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">ydpi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ydpi&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;xdpi=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">xdpi&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; ydpi=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">ydpi&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;density=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">density&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; densityDPI=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">densityDPI&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screenWidth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">widthPixels&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕宽(像素，如：480px)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">screenHeight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">heightPixels&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕高(像素，如：800px)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics(111)&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;screenWidth=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenWidth&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; screenHeight=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenHeight&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取屏幕密度(方法3)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">dm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DisplayMetrics&lt;/span>&lt;span class="o">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">getWindowManager&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getDefaultDisplay&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getMetrics&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">dm&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">density&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">density&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕密度(像素比例：0.75/1.0/1.5/2.0)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">densityDPI&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">densityDpi&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕密度(每寸像素：120/160/240/320)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">xdpi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">xdpi&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ydpi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ydpi&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;xdpi=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">xdpi&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; ydpi=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">ydpi&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;density=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">density&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; densityDPI=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">densityDPI&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">screenWidthDip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">widthPixels&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕宽(dip，如：320dip)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">screenHeightDip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">heightPixels&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 屏幕宽(dip，如：533dip)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics(222)&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;screenWidthDip=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenWidthDip&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; screenHeightDip=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenHeightDip&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">screenWidth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">)(&lt;/span>&lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">widthPixels&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">density&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mf">0.5f&lt;/span>&lt;span class="o">);&lt;/span> &lt;span class="c1">// 屏幕宽(px，如：480px)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">screenHeight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">)(&lt;/span>&lt;span class="n">dm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">heightPixels&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">density&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mf">0.5f&lt;/span>&lt;span class="o">);&lt;/span> &lt;span class="c1">// 屏幕高(px，如：800px)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">e&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">TAG&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; DisplayMetrics(222)&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;screenWidth=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenWidth&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;; screenHeight=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">screenHeight&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="components-size组件尺寸">Components Size(组件尺寸)&lt;/h2>
&lt;h3 id="statusbar">StatusBar&lt;/h3>
&lt;p>Android 中经常需要获取到状态栏的高度来判断屏幕的尺寸，常用的获取 StatusBar 的代码为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Rect&lt;/span> &lt;span class="nx">rectgle&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Rect&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Window&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nx">getWindow&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getDecorView&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">getWindowVisibleDisplayFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rectgle&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">int&lt;/span> &lt;span class="nx">StatusBarHeight&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nx">rectgle&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">top&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">int&lt;/span> &lt;span class="nx">contentViewTop&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">findViewById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID_ANDROID_CONTENT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getTop&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">int&lt;/span> &lt;span class="nx">TitleBarHeight&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nx">contentViewTop&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">StatusBarHeight&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;*** Jorgesys::&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;StatusBar Height= &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">StatusBarHeight&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;, TitleBar Height = &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">TitleBarHeight&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>而如果在Activity的onCreate函数中需要获取Status的高度，则为如下方法：
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">public&lt;/span> &lt;span class="kr">int&lt;/span> &lt;span class="nx">getStatusBarHeight&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">int&lt;/span> &lt;span class="nx">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">int&lt;/span> &lt;span class="nx">resourceId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">getResources&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">getIdentifier&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;status_bar_height&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;dimen&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;android&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resourceId&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">getResources&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">getDimensionPixelSize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resourceId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="style--themes">Style &amp;amp; Themes&lt;/h1>
&lt;h2 id="theme">Theme&lt;/h2>
&lt;ul>
&lt;li>Hoho Theme&lt;/li>
&lt;/ul>
&lt;p>在 4.0 之前 Android 可以说是没有设计可言的，在 4.0 之后推出了 Android Design，从此 Android 在设计上有了很大的改善，而在程序实现上相应的就是 Holo 风格，所以你看到有类似 Theme.Holo.Light、Theme.Holo.Light.DarkActionBar 就是 4.0 的设计风格，但是为了让 4.0 之前的版本也能有这种风格怎么办呢？这个时候就不得不引用 v7 包了，所以对应的就有 Theme.AppCompat.Light、Theme.AppCompat.Light.DarkActionBar，如果你的程序最小支持的版本是 4.0，那么可以不用考虑 v7 的兼容，所以在目前来看，我个人建议不用考虑兼容。&lt;/p>
&lt;ul>
&lt;li>Material Design Theme&lt;/li>
&lt;/ul>
&lt;p>今年的 5.0 版本，Android 推出了 Material Design 的概念，这是在设计上 Android 的又一大突破。对应的程序实现上就有 Theme.Material.Light、Theme.Material.Light.DarkActionBar 等，但是这种风格只能应用在在 5.0 版本的手机，如果在 5.0 之前应用 Material Design 该怎么办呢？同样的引用 appcompat-v7 包，这个时候的 Theme.AppCompat.Light、Theme.AppCompat.Light.DarkActionBar 就是想对应兼容的 Material Design 的 Theme。&lt;/p>
&lt;p>compile ‘com.android.support:appcompat-v7:21.0.3’ 中的 21 代表 API level 21 推出的兼容包，所以如果你引用的是 21 之前的版本，则默认这些 Theme.AppCompat.Light 是 Holo 风格的，从 21 开始的版本默认是 Material 风格&lt;/p>
&lt;h1 id="view-mechanism">View Mechanism&lt;/h1>
&lt;blockquote>
&lt;p>参考资料&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://blog.csdn.net/yanbober/article/details/46128379?utm_source=www.race604.com" target="_blank" rel="noopener">Android 应用层 View 回执流程与源码分析&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h1 id="layout">Layout&lt;/h1>
&lt;h2 id="layoutinflater">LayoutInflater&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>参考文章&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.jianshu.com/p/913943d25829" target="_blank" rel="noopener">Android LayoutInflater 原理分析，带你一步步深入了解 View 系列&lt;/a> &amp;gt; &lt;a href="http://blog.chengdazhi.com/index.php/110" target="_blank" rel="noopener">深入理解 LayoutInflater.inflate()&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h3 id="inflate">inflate&lt;/h3>
&lt;p>如果 attachToRoot 是 true 的话，那第一个参数的 layout 文件就会被填充并附加在第二个参数所指定的 ViewGroup 内。方法返回结合后的 View，根元素是第二个参数 ViewGroup。如果是 false 的话，第一个参数所指定的 layout 文件会被填充并作为 View 返回。这个 View 的根元素就是 layout 文件的根元素。不管是 true 还是 false，都需要 ViewGroup 的 LayoutParams 来正确的测量与放置 layout 文件所产生的 View 对象。&lt;/p>
&lt;h4 id="attachtoroot-为-true">attachToRoot 为 True&lt;/h4>
&lt;p>(1)子元素尺寸依赖于 ViewGroup
假设我们在 XML layout 文件中写了一个 Button 并指定了宽高为 match_parent。&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;Button xmlns:android=&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;
android:layout_width=&amp;#34;match_parent&amp;#34;
android:layout_height=&amp;#34;match_parent&amp;#34;
android:id=&amp;#34;@+id/custom_button&amp;#34;&amp;gt;
&amp;lt;/Button&amp;gt;
&lt;/code>&lt;/pre>&lt;p>现在我们想动态地把这个按钮添加进 Fragment 或 Activity 的 LinearLayout 中。如果这里 LinearLayout 已经是一个成员变量 mLinearLayout 了，我们只需要通过如下代码达成目标：&lt;/p>
&lt;pre tabindex="0">&lt;code>inflater.inflate(R.layout.custom_button, mLinearLayout, true);
&lt;/code>&lt;/pre>&lt;p>我们指定了用于填充 button 的 layout 资源文件，然后我们告诉 LayoutInflater 我们想把 button 添加到 mLinearLayout 中。这里 Button 的 LayoutParams 种类为 LinearLayout.LayoutParams。&lt;/p>
&lt;p>下面的代码也有同样的效果。LayoutInflater 的两个参数的 inflate()方法自动将 attachToRoot 设置为 true。&lt;/p>
&lt;pre tabindex="0">&lt;code>inflater.inflate(R.layout.custom_button, mLinearLayout);
&lt;/code>&lt;/pre>&lt;p>(2)自定义 View
我们看一个 layout 文件中根元素有标签的例子。标签标识着这个 layout 文件的根 ViewGroup 可以有多种类型。&lt;/p>
&lt;pre tabindex="0">&lt;code>public class MyCustomView extends LinearLayout {
...
private void init() {
LayoutInflater inflater = LayoutInflater.from(getContext());
inflater.inflate(R.layout.view_with_merge_tag, this);
}
}
&lt;/code>&lt;/pre>&lt;p>这就是一个很好的使用 attachToRoot 的例子。这个例子中 layout 文件没有 ViewGroup 作为根元素，所以我们指定我们自定义的 LinearLayout 作为根元素。如果 layout 文件有一个 FrameLayout 作为根元素而不是，那么 FrameLayout 和它的子元素都可以正常填充，而后都会被添加到 LinearLayout 中，LinearLayout 是根 ViewGroup，包含着 FrameLayout 和其子元素。&lt;/p>
&lt;h4 id="attachtoroot-为-false">attachToRoot 为 False&lt;/h4>
&lt;p>(1)使用 addView 手动添加&lt;/p>
&lt;pre tabindex="0">&lt;code>Button button = (Button) inflater.inflate(R.layout.custom_button, mLinearLayout, false);
mLinearLayout.addView(button);
&lt;/code>&lt;/pre>&lt;p>这两行代码与刚才 attachToRoot 为 true 时的一行代码等效。通过传入 false，我们告诉 LayoutInflater 我们不暂时还想将 View 添加到根元素 ViewGroup 中，意思是我们一会儿再添加。在这个例子中，一会儿再添加就是在 inflate()后调用 addView()方 法。
(2)RecyclerView 子元素
每一个 RecyclerView 的子元素都要在 attachToRoot 设置为 false 的情况下填充。这里子 View 在 onCreateViewHolder()中填充。&lt;/p>
&lt;pre tabindex="0">&lt;code>public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
LayoutInflater inflater = LayoutInflater.from(getActivity());
View view = inflater.inflate(android.R.layout.list_item_recyclerView, parent, false);
return new ViewHolder(view);
}
&lt;/code>&lt;/pre>&lt;p>RecyclerView 负责决定什么时候展示它的子 View，这个不由我们决定。在任何我们不负责将 View 添加进 ViewGroup 的情况下都应该将 attachToRoot 设置为 false。
(3)Fragment
当在 Fragment 的 onCreateView()方法中填充并返回 View 时，要将 attachToRoot 设为 false。如果传入 true，会抛出 IllegalStateException，因为指定的子 View 已经有父 View 了。你需要指定在哪里将 Fragment 的 View 放进 Activity 里，而添加、移除或替换 Fragment 则是 FragmentManager 的事情。&lt;/p>
&lt;pre tabindex="0">&lt;code>FragmentManager fragmentManager = getSupportFragmentManager();
Fragment fragment = fragmentManager.findFragmentById(R.id.root_viewGroup);
if (fragment == null) {
fragment = new MainFragment();
fragmentManager.beginTransaction().add(R.id.root_viewGroup, fragment).commit();
}
&lt;/code>&lt;/pre>&lt;p>上面代码中 root_viewGroup 就是 Activity 中用于放置 Fragment 的容器，它会作为 inflate()方法中的第二个参数被传入 onCreateView()中。它也是你在 inflate()方法中传入的 ViewGroup。FragmentManager 会将 Fragment 的 View 添加到 ViewGroup 中，你可不想添加两次。&lt;/p>
&lt;pre tabindex="0">&lt;code>public View onCreateView(LayoutInflater inflater, ViewGroup parentViewGroup, Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.fragment_layout, parentViewGroup, false);
…
return view;
}
&lt;/code>&lt;/pre>&lt;p>具体使用时候要注意：&lt;/p>
&lt;ul>
&lt;li>如果可以传入 ViewGroup 作为根元素，那就传入它。但是避免将 null 作为根 ViewGroup 传入。&lt;/li>
&lt;li>自定义 View 时很适合将 attachToRoot 设置为 true，但是不要在 View 已经被添加进 ViewGroup 时传入 true。&lt;/li>
&lt;/ul>
&lt;h1 id="widgets">Widgets&lt;/h1>
&lt;h2 id="attribute">Attribute&lt;/h2>
&lt;h3 id="id">ID&lt;/h3>
&lt;p>有时候在 Android Studio 里面设置动态的 ID 会报错，可以通过创建资源的方式:&lt;/p>
&lt;p>create folder res/values/ids.xmland&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;resources&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;refresh&amp;#34;&lt;/span> &lt;span class="na">type=&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;settings&amp;#34;&lt;/span> &lt;span class="na">type=&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/resources&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>in Activity class call like this&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ImageView&lt;/span> &lt;span class="n">refreshImg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ImageView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">activity&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ImageView&lt;/span> &lt;span class="n">settingsImg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ImageView&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">activity&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">refreshImg&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">refresh&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">settingsImg&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="na">setId&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">settings&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="size">Size&lt;/h3>
&lt;pre>&lt;code>常用的控件layout_width、layout_height、width、height这几种。而layout_*这一系列的布局只有用于被layout包裹起来的情况下才会起作用。譬如：
&lt;/code>&lt;/pre>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;Button&lt;/span> &lt;span class="na">xmlns:android=&lt;/span>&lt;span class="s">&amp;#34;http://schemas.android.com/apk/res/android&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_width=&lt;/span>&lt;span class="s">&amp;#34;300dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:layout_height=&lt;/span>&lt;span class="s">&amp;#34;80dp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:text=&lt;/span>&lt;span class="s">&amp;#34;Button&amp;#34;&lt;/span> &lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/Button&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>    这个控件如果直接使用 inflate 方法转化成 View 的话它其中设置的 layout_width 与 layout_height 是不会起作用的。而在 Activity 中，有时候直接在 activity_main 中设置单一控件即可，这是因为 Activity 会自动在最外层包裹一个 FrameLayout：&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="http://blog.csdn.net/yanbober/article/details/46128379?utm_source=www.race604.com" alt="Activity Framework包裹图" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p></description></item></channel></rss>