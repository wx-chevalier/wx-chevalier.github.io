<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="Introduction 在 iOS 的 UI 框架中，主要由 Scree、Window、UIView 以及 UIViewController 组成。 ViewController 是用来组织和控制视图的，与上图不同的是这里使用了视图控制器 ViewController，不需要直接将 view 指定给 window，相"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E7%95%8C%E9%9D%A2%E5%9F%BA%E7%A1%80/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E7%95%8C%E9%9D%A2%E5%9F%BA%E7%A1%80/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E7%95%8C%E9%9D%A2%E5%9F%BA%E7%A1%80/"><meta property="og:title" content="界面基础 | Next-gen Tech Edu"><meta property="og:description" content="Introduction 在 iOS 的 UI 框架中，主要由 Scree、Window、UIView 以及 UIViewController 组成。 ViewController 是用来组织和控制视图的，与上图不同的是这里使用了视图控制器 ViewController，不需要直接将 view 指定给 window，相"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>界面基础 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=c7b538793cd3d266c8f98c1241a777dd><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">界面开发</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id08ff3a1003860a76dad891a069e2e18c")' href=#id08ff3a1003860a76dad891a069e2e18c aria-expanded=false aria-controls=id08ff3a1003860a76dad891a069e2e18c aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/>iOS</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id08ff3a1003860a76dad891a069e2e18c aria-expanded=false aria-controls=id08ff3a1003860a76dad891a069e2e18c><i class="fa-solid fa-angle-down" id=caret-id08ff3a1003860a76dad891a069e2e18c></i></a></div><ul class="nav docs-sidenav collapse show" id=id08ff3a1003860a76dad891a069e2e18c><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idce70344135e0c2923d7bae1625392710")' href=#idce70344135e0c2923d7bae1625392710 aria-expanded=false aria-controls=idce70344135e0c2923d7bae1625392710 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id41d5b9b05f809f8561ba609835b7d8f1")' href=#id41d5b9b05f809f8561ba609835b7d8f1 aria-expanded=false aria-controls=id41d5b9b05f809f8561ba609835b7d8f1 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/objective-c/>Objective-C</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id41d5b9b05f809f8561ba609835b7d8f1 aria-expanded=false aria-controls=id41d5b9b05f809f8561ba609835b7d8f1><i class="fa-solid fa-angle-right" id=caret-id41d5b9b05f809f8561ba609835b7d8f1></i></a></div><ul class="nav docs-sidenav collapse" id=id41d5b9b05f809f8561ba609835b7d8f1><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/objective-c/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/>语法基础</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idca9cc6d1ea5526b8cbf688b0d1cb025f")' href=#idca9cc6d1ea5526b8cbf688b0d1cb025f aria-expanded=false aria-controls=idca9cc6d1ea5526b8cbf688b0d1cb025f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/swift/>Swift</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idca9cc6d1ea5526b8cbf688b0d1cb025f aria-expanded=false aria-controls=idca9cc6d1ea5526b8cbf688b0d1cb025f><i class="fa-solid fa-angle-right" id=caret-idca9cc6d1ea5526b8cbf688b0d1cb025f></i></a></div><ul class="nav docs-sidenav collapse" id=idca9cc6d1ea5526b8cbf688b0d1cb025f><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/swift/linkedin-%E6%A0%B7%E5%BC%8F%E6%8C%87%E5%8D%97/>Linkedin 样式指南</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf7435928910def0b5d8a6438ed9b4e03")' href=#idf7435928910def0b5d8a6438ed9b4e03 aria-expanded=false aria-controls=idf7435928910def0b5d8a6438ed9b4e03 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/>界面开发</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf7435928910def0b5d8a6438ed9b4e03 aria-expanded=false aria-controls=idf7435928910def0b5d8a6438ed9b4e03><i class="fa-solid fa-angle-down" id=caret-idf7435928910def0b5d8a6438ed9b4e03></i></a></div><ul class="nav docs-sidenav collapse show" id=idf7435928910def0b5d8a6438ed9b4e03><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/tablegrid/>TableGrid</a></li><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/uitableview/>UITableView</a></li><li class="child level active"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E7%95%8C%E9%9D%A2%E5%9F%BA%E7%A1%80/>界面基础</a></li><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E4%BA%8B%E4%BB%B6%E4%B8%8E%E6%89%8B%E5%8A%BF/>事件与手势</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-iddfed7b538b1247908cc5987412983f46")' href=#iddfed7b538b1247908cc5987412983f46 aria-expanded=false aria-controls=iddfed7b538b1247908cc5987412983f46 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD/>系统功能</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#iddfed7b538b1247908cc5987412983f46 aria-expanded=false aria-controls=iddfed7b538b1247908cc5987412983f46><i class="fa-solid fa-angle-right" id=caret-iddfed7b538b1247908cc5987412983f46></i></a></div><ul class="nav docs-sidenav collapse" id=iddfed7b538b1247908cc5987412983f46><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD/healthcheck/>HealthCheck</a></li><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/>数据存储</a></li><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/>网络请求</a></li><li class="child level"><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD/%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B/>系统进程</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#size>Size</a><ul><li><a href=#cggeometry>CGGeometry</a></li></ul></li><li><a href=#uiscreen>UIScreen</a></li><li><a href=#uiwindow>UIWindow</a><ul><li><a href=#mainstoryboard>Main.StoryBoard</a></li></ul></li></ul><ul><li><a href=#xib>Xib</a><ul><li><a href=#元素关联动作与输出口>元素关联：动作与输出口</a></li></ul></li><li><a href=#storyboard>StoryBoard</a><ul><li><a href=#scene--segue>Scene & Segue</a></li><li><a href=#auto-resize>Auto Resize</a></li></ul></li></ul><ul><li><a href=#lifecycle>LifeCycle</a><ul><li><a href=#初始化>初始化</a></li><li><a href=#视图加载>视图加载</a></li></ul></li><li><a href=#properties>Properties</a><ul><li><a href=#size--position>Size & Position</a></li></ul></li><li><a href=#subviewtree子视图与视图树>SubViewTree：子视图与视图树</a><ul><li><a href=#子视图索引>子视图索引</a></li><li><a href=#visiblerect可见区域>VisibleRect：可见区域</a></li></ul></li></ul><ul><li><a href=#lifecycle-1>LifeCycle</a><ul><li><a href=#初始化-1>初始化</a></li><li><a href=#视图加载-1>视图加载</a></li></ul></li><li><a href=#视图切换>视图切换</a><ul><li><a href=#模态视图>模态视图</a></li><li><a href=#childviewcontroller子视图控制器>childViewController：子视图控制器</a></li></ul></li></ul><ul><li><a href=#autolayout--size-classes>AutoLayout & Size Classes</a></li><li><a href=#customcontrol>CustomControl</a></li></ul><ul><li><a href=#navigation-controller>Navigation Controller</a><ul><li><a href=#uibarbuttonitem>UIBarButtonItem</a></li></ul></li><li><a href=#tab-bar-controller>Tab Bar Controller</a></li><li><a href=#custom-controller>Custom Controller</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>界面基础</h1><div class=article-style><h1 id=introduction>Introduction</h1><p>在 iOS 的 UI 框架中，主要由 Scree、Window、UIView 以及 UIViewController 组成。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src="http://img.blog.csdn.net/20150701233641345?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2F1Y2h5d2VpZXJzdHJhc3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=UIView loading=lazy data-zoomable></div></div></figure></p><p>ViewController 是用来组织和控制视图的，与上图不同的是这里使用了视图控制器 ViewController，不需要直接将 view 指定给 window，相反，只需要给 window 制定一个视图控制器，视图控制器会自动的将他的 view 添加给 window。如下图所示：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src="http://img.blog.csdn.net/20150701234834234?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2F1Y2h5d2VpZXJzdHJhc3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=UIViewController loading=lazy data-zoomable></div></div></figure></p><p>引入控制器有点像 Android 里面的 Activity。</p><h2 id=size>Size</h2><h3 id=cggeometry>CGGeometry</h3><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td>CGFloat</td><td>浮点值的基本类型</td></tr><tr><td>CGPoint</td><td>表示一个二维坐标系中的点</td></tr><tr><td>CGSize</td><td>表示一个矩形的宽度和高度</td></tr><tr><td>CGRect</td><td>表示一个矩形的位置和大小</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>float</span> <span class=n>CGFloat</span><span class=p>;</span><span class=c1>// 32-bit
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>typedef</span> <span class=kt>double</span> <span class=n>CGFloat</span><span class=p>;</span><span class=c1>// 64-bit
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>CGPoint</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>CGFloat</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>CGFloat</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=n>CGPoint</span> <span class=n>CGPoint</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>CGSize</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>CGFloat</span> <span class=n>width</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>CGFloat</span> <span class=n>height</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=n>CGSize</span> <span class=n>CGSize</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>CGRect</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>CGPoint</span> <span class=n>origin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>CGSize</span> <span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=n>CGRect</span> <span class=n>CGRect</span><span class=p>;</span>
</span></span></code></pre></div><p>注意：CGRect 数据结构的高度和宽度可以是负数。例如，一个矩形的原点是[0.0，0.0]和大小是[10.0,10.0]。这个矩形完全等同原点是[10.0，10.0]和大小是[-10.0，-10.0]的矩形。</p><p>使用值来创建几何元素的方法：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=n>CGPoint</span> <span class=nf>CGPointMake</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>x</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>y</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>CGSize</span> <span class=nf>CGSizeMake</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>width</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>height</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>CGRect</span> <span class=nf>CGRectMake</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>x</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>y</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>width</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=n>CGFloat</span> <span class=n>height</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>CGFloat</span> <span class=n>ten</span><span class=o>=</span><span class=mf>10.0f</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>CGPoint</span> <span class=n>point</span> <span class=o>=</span> <span class=n>CGPointMake</span><span class=p>(</span><span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>CGSize</span> <span class=n>size</span> <span class=o>=</span> <span class=n>CGSizeMake</span><span class=p>(</span><span class=mf>10.0f</span><span class=p>,</span> <span class=mf>10.0f</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>CGRect</span> <span class=n>rect</span> <span class=o>=</span> <span class=n>CGRectMake</span><span class=p>(</span><span class=n>point</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>point</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>size</span><span class=p>.</span><span class=n>width</span><span class=p>,</span> <span class=n>size</span><span class=p>.</span><span class=n>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>NSLog</span><span class=p>(</span><span class=s>@&#34;ten: %f&#34;</span><span class=p>,</span> <span class=n>ten</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>NSLog</span><span class=p>(</span><span class=s>@&#34;point: %@&#34;</span><span class=p>,</span> <span class=n>NSStringFromCGPoint</span><span class=p>(</span><span class=n>point</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>NSLog</span><span class=p>(</span><span class=s>@&#34;size: %@&#34;</span><span class=p>,</span> <span class=n>NSStringFromCGSize</span><span class=p>(</span><span class=n>size</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>NSLog</span><span class=p>(</span><span class=s>@&#34;rect: %@&#34;</span><span class=p>,</span> <span class=n>NSStringFromCGRect</span><span class=p>(</span><span class=n>rect</span><span class=p>));</span>
</span></span></code></pre></div><h2 id=uiscreen>UIScreen</h2><p>UIScreen 是与设备有关的物理屏幕。</p><h2 id=uiwindow>UIWindow</h2><p>一般来说，在 AppDelegate.m 文件中的 didFinishLaunchingWithOptions 方法中，会为当前窗口声明一个 UIWindow 对象，具体如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl>    <span class=n>UIWindow</span> <span class=o>*</span><span class=n>window</span> <span class=o>=</span> <span class=p>[[</span><span class=n>UIWindow</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithFrame</span><span class=p>:[[</span><span class=n>UIScreen</span> <span class=n>mainScreen</span><span class=p>]</span> <span class=n>bounds</span><span class=p>]];</span>
</span></span><span class=line><span class=cl>    <span class=n>levelViewController</span> <span class=o>=</span> <span class=p>[[</span><span class=n>LevelViewController</span> <span class=n>alloc</span><span class=p>]</span> <span class=n>init</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>window</span><span class=p>.</span><span class=n>rootViewController</span> <span class=o>=</span> <span class=n>levelViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 类似于下面这句
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//[window addSubView: levelViewController.view];
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>[</span><span class=n>window</span> <span class=n>makeKeyAndVisible</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=c1>//将生成的窗口对象赋值给当前应用
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>self</span><span class=p>.</span><span class=n>window</span> <span class=o>=</span> <span class=n>window</span><span class=p>;</span>
</span></span></code></pre></div><ul><li>Swift</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=c1>//App第一次运行的时候被执行过一次，每次App从后台激活时都不执行该方法：</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>application</span><span class=p>(</span><span class=n>application</span><span class=p>:</span> <span class=n>UIApplication</span><span class=p>,</span> <span class=n>didFinishLaunchingWithOptions</span> <span class=n>launchOptions</span><span class=p>:</span> <span class=p>[</span><span class=n>NSObject</span><span class=p>:</span> <span class=nb>AnyObject</span><span class=p>]?)</span> <span class=p>-&gt;</span> <span class=nb>Bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nv>viewCtl</span><span class=p>:</span><span class=n>ViewController</span><span class=p>!</span>
</span></span><span class=line><span class=cl>  <span class=kc>self</span><span class=p>.</span><span class=n>window</span> <span class=p>=</span> <span class=n>UIWindow</span><span class=p>(</span><span class=n>frame</span><span class=p>:</span> <span class=n>UIScreen</span><span class=p>.</span><span class=n>mainScreen</span><span class=p>().</span><span class=n>bounds</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kc>self</span><span class=p>.</span><span class=n>window</span><span class=p>!.</span><span class=n>backgroundColor</span> <span class=p>=</span> <span class=n>UIColor</span><span class=p>.</span><span class=n>whiteColor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>viewCtl</span> <span class=p>=</span> <span class=n>ViewController</span><span class=p>(</span><span class=n>nibName</span><span class=p>:</span> <span class=s>&#34;ViewController&#34;</span><span class=p>,</span> <span class=n>bundle</span><span class=p>:</span> <span class=n>NSBundle</span><span class=p>.</span><span class=n>mainBundle</span><span class=p>())</span>
</span></span><span class=line><span class=cl>  <span class=kc>self</span><span class=p>.</span><span class=n>window</span><span class=p>!.</span><span class=n>rootViewController</span> <span class=p>=</span> <span class=n>viewCtl</span><span class=c1>//UIWindow有一个根视图控制器—负责显示的视图</span>
</span></span><span class=line><span class=cl>  <span class=kc>self</span><span class=p>.</span><span class=n>window</span><span class=p>!.</span><span class=n>makeKeyAndVisible</span><span class=p>()</span><span class=c1>//让包含视图控制器视图的Window窗口显示在屏幕上</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nv>isKeyWindow</span> <span class=p>=</span> <span class=kc>self</span><span class=p>.</span><span class=n>window</span><span class=p>!.</span><span class=n>keyWindow</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nv>keyWinD</span><span class=p>:</span><span class=n>UIWindow</span> <span class=p>=</span> <span class=n>UIApplication</span><span class=p>.</span><span class=n>sharedApplication</span><span class=p>().</span><span class=n>keyWindow</span><span class=p>!</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=mainstoryboard>Main.StoryBoard</h3><p>在创建一个新的 iOS Application 之后，会发现这个新项目包含 2 个类：AppDelegate 和 ViewController，此外还有 Main.storyboard 文件。</p><p>你定义的这个视图控制器被设定为初始视图控制器，但 App 是如何加载的呢？答案就在应用代理(application delegate )当中，打开 <em>AppDelegate.swift</em>，你会看到如下代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=line><span class=cl><span class=p>`</span><span class=kd>import</span> <span class=nc>UIKit</span><span class=p>``</span> <span class=p>`</span> <span class=p>`</span><span class=kr>@UIApplicationMain</span><span class=p>``</span><span class=nc>class</span> <span class=nc>AppDelegate</span><span class=p>:</span> <span class=nc>UIResponder</span><span class=p>,</span> <span class=nc>UIApplicationDelegate</span> <span class=p>{``</span>  <span class=p>``</span><span class=nc>var</span><span class=p>`</span> <span class=p>`</span><span class=nc>window</span><span class=p>:</span> <span class=nc>UIWindow</span><span class=p>?``</span> <span class=p>`</span> <span class=p>`</span>  <span class=p>``</span><span class=nc>func</span> <span class=nc>application</span><span class=p>(</span><span class=nc>application</span><span class=p>:</span> <span class=nc>UIApplication</span><span class=p>!,</span> <span class=nc>didFinishLaunchingWithOptions</span> <span class=nc>launchOptions</span><span class=p>:</span> <span class=nc>NSDictionary</span><span class=p>!)</span> <span class=p>-&gt;</span> <span class=nc>Bool</span> <span class=p>{``</span>    <span class=p>``</span><span class=c1>// Override point for customization after application launch.``    ``return` `true``  ``}`</span>
</span></span></code></pre></div><p>上面的 <code>@UIApplicationMain</code> 标记指定这个 AppDelegate 类为该模块的入口。使用 Storyboard 时，应用代理必须继承 <code>UIResponder</code>，必须含有 <code>UIWindow</code> 属性，几乎所有的方法都是空的，甚至 <code>application(_:didFinishLaunchingWithOptions:)</code> 也只是返回 true 而已。</p><p>秘密藏在 Info.plist 文件里，在 Supporting Files Group 里找到并点击 <em>Info.plist</em>，你会看到这一条：</p><p><a href=http://cdn3.raywenderlich.com/wp-content/uploads/2014/09/09_sb_infoplist.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026991448598.png alt=Info.plis loading=lazy data-zoomable></div></div></figure></a></p><p>Storyboard 用 <code>UIMainStoryboardFile</code>(即 Main storyboard file base name 键) 来指明 App 启动时必须加载的 Storyboard 的名称。当设置生效，<code>UIApplication</code>会加载对应名称的 Storyboard 文件，自动将该 Storyboard 中的初始视图控制器实例化，并将其纳入一个新的 <code>UIWindow</code> 对象中。</p><p>在 General 分页的 Project Settings 和 Deployment Info 中也可以看到：</p><p><a href=http://cdn3.raywenderlich.com/wp-content/uploads/2014/09/10_sb_targetsummary.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026991373391.png alt="Project Setting" loading=lazy data-zoomable></div></div></figure></a></p><p>如果我们希望入口界面不是默认的 Main.StoryBoard，就按照上文所述的<code>didFinishLaunchingWithOptions</code>方法中设置自定义的 ViewController。</p><h1 id=interface-builder>Interface Builder</h1><p>xib 和 storyboard 的比较，一个轻量级一个重量级。他们的共同点是都用来描述软件界面，都用 Interface Builder 工具来编辑。他们的不同点是 Xib 是轻量级的，用来描述局部的 UI 界面；Storyboard 是重量级的，用来描述整个软件的多个界面，并且能展示多个界面之间的跳转关系。</p><p>xib 文件可以被 Xcode 编译成 nib 文件，xib 文件本质上是一个 xml 文件，而 nib 文件就是编译后的二进制文件，该文件将视图等控件对象封装了起来，而在程序运行起来后，这些对象会被激活。xib 文件本质上是一个 xml 文件，可以用 vim 或 cat 命令查看。</p><h2 id=xib>Xib</h2><p>Project Builder 在 Mac OS X 10.3 时被重命名为现在大家所熟知的 Xcode。Xcode 3 以前，Interface Builder 使用一种名为 nib 格式的二进制文件格式。不过由于 nib 不能用肉眼读，也不方便使用版本管理工具来管理，所以 Xcode 3 开始新加入一种名为 xib 的文本文件格式，最后再在项目编译阶段输出为 nib 格式。和产生静态界面布局代码的工具很不同，nib 是不被转译成相应 Objective-C 代码的。用户程序执行时，nib 文件被读入，解包，所以 nib 文件是在运行时动态加载的。</p><h3 id=元素关联动作与输出口>元素关联：动作与输出口</h3><ul><li>自动关联：依赖注入</li></ul><blockquote><p>参考文章</p></blockquote><ul><li>[iOS 操作(action )和输出口(Outlet )][3]</li></ul><p>iOS 以 IBOutlet 与 IBAction 来代表页面元素在代码类中的映射。步骤简单来说，就是：</p><p>( 1)在 Xib 文件对应的 File&rsquo;s Owner 中选择该 Xib 文件对应的 ViewController。</p><p>( 2)选择界面上的某个控件，按下 control+ 鼠标左键拖拽箭头至对应的 ViewController 中。</p><p>( 3)在弹出框内可以选择是需要插入 IBOutlet 还是 IBAction。</p><p>注意，对于 File Owner 为空或者不是 self 的 Xib 界面，是无法与类直接连线产生关联的。</p><p>在使用 IBOutlet 进行关联时，有时候系统默认的会是 weak，但是 Apple 官方推荐的是 strong：</p><blockquote><p>&ldquo;And the last option I want to point out is the storage type, which can either be strong or weak. In general you should make your outlet strong, especially if you are connecting an outlet to a subview or to a constraint that&rsquo;s not always going to be retained by the view hierarchy. The only time you really need to make an outlet weak is if you have a custom view that references something back up the view hierarchy and in general that&rsquo;s not recommended.&rdquo;</p></blockquote><ul><li>手动关联</li></ul><h2 id=storyboard>StoryBoard</h2><ul><li><p><a href=http://www.raywenderlich.com/50308/storyboards-tutorial-in-ios-7-part-1 target=_blank rel=noopener>storyboards-tutorial-in-ios-7</a></p><blockquote></blockquote><blockquote></blockquote></li><li><p><a href=http://www.cocoachina.com/ios/20150112/10892.html target=_blank rel=noopener>Swift 语言 Storyboard 教程：第一部分</a>、<a href=http://www.cocoachina.com/swift/20150114/10924.html target=_blank rel=noopener>Swift 语言 Storyboard 教程：第二部分</a></p></li></ul><p>苹果官方是推荐我们将所有的 UI 都使用 Storyboard 去搭建，Storyboard 也是一个很成熟的工具了。使用 Storyboard 去搭建所有界面，我们可以很迅捷地搭建出复杂的界面，也就是说能为我们节省大量的时间。我们还可以很直观地看出各个界面之间的关系，修改起来也很方便。将来如果遇到需要作修改的地方，我们只需要找到相对应的 Storyboard 就可以了，比起以前来说，快捷了不少。如果 App 中包括很多不同的页面，使用 Storyboard 可以帮你<strong>减少实现页面间跳转的胶合代码</strong>。过去的开发者对应每个视图控制器分别创建界面设计文件(即 “nib”或“xib” 文件)，现在，只要一个 Storyboard 就可以包揽所有视图控制器的界面设计和他们之间的关联。</p><p>Storyboard 有很多优点：</p><ul><li>使用 Storyboard 可以更好地了解 App 中所有的视图以及它们之间的关联的概况。掌控全局更加容易，因为所有的设计都包含在一个文件中，而不是分散在很多单独的 nib 文件中。</li><li>Storyboard 可以描述不同视图之间的过渡，这种过渡叫做 “segue”(译注：意为 “ 转场 ”，而 “Storyboard” 原意为 “ 分镜 ”，均源自电影术语)，你可以直接在 Storyboard 中通过连接不同的视图控制器来创建转场。多亏有了转场，打理界面的代码比以前要少了。</li><li>Storyboard 通过新的原型表项(prototype cell )和静态表项(static cell )特性，让处理表视图(table view )的工作更加轻松。几乎完全可以在 Storyboard 编辑器里搞定表视图的设计，同样也减少了代码量。</li><li>Storyboard 使自动布局(Auto Layout )更易用。自动布局功能可以让你通过界面元素之间的数学关系定义来确定元素的位置和尺寸，极大简化了不同尺寸屏幕的适配工作。自动布局不在本教程范围之内，若想了解更多，请参阅<a href="http://www.raywenderlich.com/?p=50317" target=_blank rel=noopener>自动布局入门</a>。</li></ul><h3 id=scene--segue>Scene & Segue</h3><p>一个视图控制器在 Storyboard 中的官方术语是 “ 场景(scene ) ”，但这两种叫法是相通的。一个视图控制器在 Storyboard 中可以叫做场景。</p><p>这里可以看到一个包含空视图的视图控制器。在这个视图控制器左边指向它的箭头表明它是这个 Storyboard 中要显示的第一个视图控制器。</p><p>在 Storyboard 编辑器中设计布局的方法是从右下角的 Object Library(对象库)中把控件拖入视图控制器，非常容易。</p><p>注：你会注意到默认场景是一个正方形。Xcode 6 默认为 Storyboard 和 nib 文件开启自动布局(Auto Layout )和尺寸归类(Size Classes )。自动布局和尺寸归类这两项新技术可以构建易于调整大小的用户界面，这对支持不同尺寸的 iPhone 和 iPad 非常有用。</p><p>自动布局由 iOS 6 引入，尺寸归类由 iOS 8 引入。两者都需要一定的学习曲线，所以本教程中暂不使用，但为了支持不同的设备尺寸，以后还是要接触到的。要了解更多，请参阅我们的书籍 <a href=http://www.raywenderlich.com/store/ios-8-by-tutorials target=_blank rel=noopener>iOS 8 教程</a>。</p><p>在继续探索之前，先在当前 Storyboard 的 <em>File inspector(文件检查器)</em> 中禁用 Auto Layout 和 Size Classes，如图：</p><p><a href=http://cdn2.raywenderlich.com/wp-content/uploads/2014/09/Disable-auto-layout.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026987473646.png alt="Disabling auto layou" loading=lazy data-zoomable></div></div></figure></a></p><p>Xcode 询问操作时，选择保留 <em>iPhone</em> 的尺寸归类数据，然后点击 <em>Disable Size Classes</em>：</p><p><a href=http://cdn4.raywenderlich.com/wp-content/uploads/2014/09/DisableSizeClasses.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026988849003.png alt="Disabling size classe" loading=lazy data-zoomable></div></div></figure></a></p><p>现在，场景变成了 4 英寸 iPhone 尺寸的样子。</p><p>从右下方的对象库里把一些控件拖到空的视图控制器上，感受一下 Storyboard 编辑器的工作方式：</p><p><a href=http://cdn5.raywenderlich.com/wp-content/uploads/2014/09/Drag-controls.gif target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026988970351.gif alt="Dragging controls into storyboar" loading=lazy data-zoomable></div></div></figure></a></p><p>控件拖进来之后应该会在左边的文档大纲(Document Outline )中显示：</p><p><a href=http://cdn2.raywenderlich.com/wp-content/uploads/2014/09/Document-outline.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026989383347.png alt="Document outlin" loading=lazy data-zoomable></div></div></figure></a></p><p>如果没看到文档大纲，请点击 Storyboard 面板左下角的这个按钮：</p><p><a href=http://cdn1.raywenderlich.com/wp-content/uploads/2014/09/Doc-outline-button.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026989731981.png alt="The document outline butto" loading=lazy data-zoomable></div></div></figure></a></p><p>Storyboard 显示所有视图控制器的内容，当前的 Storyboard 中仅有一个视图控制器(场景)，在本教程后面我们会添加其他场景。</p><p>在场景上面还有一个缩小的文档大纲，称作 Dock：</p><p><a href=http://cdn4.raywenderlich.com/wp-content/uploads/2014/09/Dock.png target=_blank rel=noopener><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://api.cocoachina.com/uploads/image/20150112/1421026990437127.png alt=Doc loading=lazy data-zoomable></div></div></figure></a></p><p>Dock 显示场景中最上层的对象，每个视图都至少有一个 视图控制器(View Controller ) 对象，一个 第一响应者(First Responder ) 对象，一个 出口(Exit ) 项。除此之外也可以有其他的最上层对象。Dock 方便连接 outlet 和 action，当你想把某个对象连接到视图控制器时，只需把它拖到 Dock 的图标上。</p><h3 id=auto-resize>Auto Resize</h3><ul><li><a href=http://stackoverflow.com/questions/25455945/resize-uiview-with-auto-layout target=_blank rel=noopener>resize-uiview-with-auto-layout</a></li></ul><h1 id=uiview>UIView</h1><h2 id=lifecycle>LifeCycle</h2><table><thead><tr><th>函数名</th><th>生命周期</th></tr></thead><tbody><tr><td>init</td><td>NSObject 的类实现一个名为 init 方法。这是你需要发送到 NSObject 的实例初始化初始化消息。因为 init 是主要的(或在这种情况下，只有)NSObject 的初始化方法，我们称之为 the designated 初始化。类可以有多个初始化，但每类中，有一个指定的初始化。指定初始化必须确保每个实例变量有一个有效的价值。只有这样，新创建的实例是有效的。( “ 有效 ” 有不同的含义，但在这方面的含义是，“ 当您发送的消息后，对其进行初始化这个对象，你可以预测的结果会发生什么不好。” )通常情况下，指定的初始化是初始化方法与大多数参数</td></tr><tr><td>viewWillAppear</td><td>视图即将可见时调用。默认情况下不执行任何操作</td></tr><tr><td>viewWillDisappear</td><td>视图被驳回时调用，覆盖或以其他方式隐藏。默认情况下不执行任何操作</td></tr><tr><td>viewDidDisappear</td><td>视图被驳回后调用，覆盖或以其他方式隐藏。默认情况下不执行任何操作</td></tr><tr><td>viewDidAppear</td><td>视图已完全过渡到屏幕上时调用</td></tr><tr><td>viewDidLoad</td><td>在视图加载后被调用，如果是在代码中创建的视图加载器，他将会在 loadView 方法后被调用，如果是从 nib 视图页面输出，他将会在视图设置好后后被调用。<strong>只会被调用一次</strong></td></tr><tr><td>viewDidUnload</td><td>当系统内存吃紧的时候调用</td></tr></tbody></table><h3 id=初始化>初始化</h3><h3 id=视图加载>视图加载</h3><h4 id=initwithframe>initWithFrame:</h4><p>initWithFrame: 是 UIView 提供的一个内建的初始化方法，可以创建一个指定 Frame 大小的空白的 UIView。</p><pre tabindex=0><code>var rightView:UIView = UIView(frame:CGRectMake(260,0,40,40))
</code></pre><h4 id=从-xib-文件加载>从 Xib 文件加载</h4><pre tabindex=0><code>NSArray* nibView =  [[NSBundle mainBundle]
       loadNibNamed:@&#34;CenterView&#34; owner:self options:nil];
self =[nibView objectAtIndex:0];
</code></pre><h2 id=properties>Properties</h2><h3 id=size--position>Size & Position</h3><pre tabindex=0><code>在一个UIView中，最常见的用来描述其坐标的属性有Frame、Bounds以及Center。
</code></pre><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>Frame(CGRect)</td><td>UIview 的 Frame 属性用于描述其在父坐标系中的矩形，默认的它是从左上角开始计算</td></tr><tr><td>Bounds(CGRect)</td><td>Bounds 用于描述该 View 在自身坐标系内的矩形</td></tr><tr><td>Center(CGPoint)</td><td>用于描述 UIView 在其父 View 的坐标系中的中心点位置</td></tr></tbody></table><pre tabindex=0><code>基本的计算方式如下：
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=n>frame</span><span class=p>.</span><span class=n>origin</span> <span class=o>=</span> <span class=n>center</span> <span class=o>-</span> <span class=p>(</span><span class=n>bounds</span><span class=p>.</span><span class=n>size</span> <span class=o>/</span> <span class=mf>2.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>center</span> <span class=o>=</span> <span class=n>frame</span><span class=p>.</span><span class=n>origin</span> <span class=o>+</span> <span class=p>(</span><span class=n>bounds</span><span class=p>.</span><span class=n>size</span> <span class=o>/</span> <span class=mf>2.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>frame</span><span class=p>.</span><span class=n>size</span> <span class=o>=</span> <span class=n>bounds</span><span class=p>.</span><span class=n>size</span>
</span></span></code></pre></div><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://i.stack.imgur.com/3jcne.jpg alt loading=lazy data-zoomable></div></div></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=c1>// view1 will be positioned at x = 30, y = 20 starting the top left corner of [self view]
</span></span></span><span class=line><span class=cl><span class=c1>// [self view] could be the view managed by a UIViewController
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>UIView</span><span class=o>*</span> <span class=n>view1</span> <span class=o>=</span> <span class=p>[[</span><span class=n>UIView</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithFrame</span><span class=p>:</span><span class=n>CGRectMake</span><span class=p>(</span><span class=mf>30.0f</span><span class=p>,</span> <span class=mf>20.0f</span><span class=p>,</span> <span class=mf>400.0f</span><span class=p>,</span> <span class=mf>400.0f</span><span class=p>)];</span>
</span></span><span class=line><span class=cl><span class=n>view1</span><span class=p>.</span><span class=n>backgroundColor</span> <span class=o>=</span> <span class=p>[</span><span class=n>UIColor</span> <span class=n>redColor</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[[</span><span class=nb>self</span> <span class=n>view</span><span class=p>]</span> <span class=nl>addSubview</span><span class=p>:</span><span class=n>view1</span><span class=p>];</span>
</span></span></code></pre></div><h4 id=coordinate-transform-坐标系转换>Coordinate Transform: 坐标系转换</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=c1>// 将像素point由point所在视图转换到目标视图view中，返回在目标视图view中的像素值
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>-</span> <span class=p>(</span><span class=n>CGPoint</span><span class=p>)</span><span class=nf>convertPoint:</span><span class=p>(</span><span class=n>CGPoint</span><span class=p>)</span><span class=nv>point</span> <span class=nf>toView:</span><span class=p>(</span><span class=n>UIView</span> <span class=o>*</span><span class=p>)</span><span class=nv>view</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 将像素point从view中转换到当前视图中，返回在当前视图中的像素值
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>-</span> <span class=p>(</span><span class=n>CGPoint</span><span class=p>)</span><span class=nf>convertPoint:</span><span class=p>(</span><span class=n>CGPoint</span><span class=p>)</span><span class=nv>point</span> <span class=nf>fromView:</span><span class=p>(</span><span class=n>UIView</span> <span class=o>*</span><span class=p>)</span><span class=nv>view</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 将rect由rect所在视图转换到目标视图view中，返回在目标视图view中的rect
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>-</span> <span class=p>(</span><span class=n>CGRect</span><span class=p>)</span><span class=nf>convertRect:</span><span class=p>(</span><span class=n>CGRect</span><span class=p>)</span><span class=nv>rect</span> <span class=nf>toView:</span><span class=p>(</span><span class=n>UIView</span> <span class=o>*</span><span class=p>)</span><span class=nv>view</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 将rect从view中转换到当前视图中，返回在当前视图中的rect
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>-</span> <span class=p>(</span><span class=n>CGRect</span><span class=p>)</span><span class=nf>convertRect:</span><span class=p>(</span><span class=n>CGRect</span><span class=p>)</span><span class=nv>rect</span> <span class=nf>fromView:</span><span class=p>(</span><span class=n>UIView</span> <span class=o>*</span><span class=p>)</span><span class=nv>view</span><span class=p>;</span>
</span></span></code></pre></div><pre tabindex=0><code>例把UITableViewCell中的subview(btn)的frame转换到 controllerA中
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=c1>// controllerA 中有一个UITableView, UITableView里有多行UITableVieCell，cell上放有一个button
</span></span></span><span class=line><span class=cl><span class=c1>// 在controllerA中实现:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>CGRect</span> <span class=n>rc</span> <span class=o>=</span> <span class=p>[</span><span class=n>cell</span> <span class=nl>convertRect</span><span class=p>:</span><span class=n>cell</span><span class=p>.</span><span class=n>btn</span><span class=p>.</span><span class=n>frame</span> <span class=nl>toView</span><span class=p>:</span><span class=nb>self</span><span class=p>.</span><span class=n>view</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=err>或</span>
</span></span><span class=line><span class=cl><span class=n>CGRect</span> <span class=n>rc</span> <span class=o>=</span> <span class=p>[</span><span class=nb>self</span><span class=p>.</span><span class=n>view</span> <span class=nl>convertRect</span><span class=p>:</span><span class=n>cell</span><span class=p>.</span><span class=n>btn</span><span class=p>.</span><span class=n>frame</span> <span class=nl>fromView</span><span class=p>:</span><span class=n>cell</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=c1>// 此rc为btn在controllerA中的rect
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>或当已知</span><span class=n>btn</span><span class=err>时：</span>
</span></span><span class=line><span class=cl><span class=n>CGRect</span> <span class=n>rc</span> <span class=o>=</span> <span class=p>[</span><span class=n>btn</span><span class=p>.</span><span class=n>superview</span> <span class=nl>convertRect</span><span class=p>:</span><span class=n>btn</span><span class=p>.</span><span class=n>frame</span> <span class=nl>toView</span><span class=p>:</span><span class=nb>self</span><span class=p>.</span><span class=n>view</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=err>或</span>
</span></span><span class=line><span class=cl><span class=n>CGRect</span> <span class=n>rc</span> <span class=o>=</span> <span class=p>[</span><span class=nb>self</span><span class=p>.</span><span class=n>view</span> <span class=nl>convertRect</span><span class=p>:</span><span class=n>btn</span><span class=p>.</span><span class=n>frame</span> <span class=nl>fromView</span><span class=p>:</span><span class=n>btn</span><span class=p>.</span><span class=n>superview</span><span class=p>];</span>
</span></span></code></pre></div><h2 id=subviewtree子视图与视图树>SubViewTree：子视图与视图树</h2><h3 id=子视图索引>子视图索引</h3><h4 id=index>Index</h4><h4 id=tag>Tag</h4><pre tabindex=0><code>var nameLabel:UILabel;
nameLabel.tag = 59;
self.view.addSubview(nameLabel);
nameLabel = self.view.viewWithTag(68) as UILabel;
</code></pre><h3 id=visiblerect可见区域>VisibleRect：可见区域</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=n>CGRect</span> <span class=n>visibleRect</span> <span class=o>=</span> <span class=n>CGRectIntersection</span><span class=p>(</span><span class=nb>self</span><span class=p>.</span><span class=n>frame</span><span class=p>,</span> <span class=n>superview</span><span class=p>.</span><span class=n>bounds</span><span class=p>);</span>
</span></span></code></pre></div><h1 id=uiviewcontroller>UIViewController</h1><p>在 iOS 中，具体的对 View 的控制还是基于 UIViewController。UIViewController 是 UIView 的子类。</p><h2 id=lifecycle-1>LifeCycle</h2><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src="http://img.blog.csdn.net/20150701234853010?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2F1Y2h5d2VpZXJzdHJhc3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="enter description here" loading=lazy data-zoomable></div></div></figure></p><h3 id=初始化-1>初始化</h3><pre tabindex=0><code>使用如下方法加载一个
</code></pre><pre tabindex=0><code>levelViewController = [[LevelViewController alloc] init];
</code></pre><p>上面这句 levelViewController = [[LevelViewController alloc] init]; 在创建自己的控制器的时候会自动调用 loadView 方法。</p><h3 id=视图加载-1>视图加载</h3><pre tabindex=0><code>UIViewController更多的是负责iOS中的视图逻辑控制，
</code></pre><h4 id=xib-1>Xib</h4><p>从 Xib 文件中加载视图时，即自动完成了实例化该 Xib 对应的 UIView、将其赋值给该 UIViewController 的 view 属性以及自动将该 UIViewController 的控件变量与实例进行关联。</p><pre tabindex=0><code>self = [[HSFriendListViewControllerTableViewController alloc] initWithNibName:@&#34;HSFriendListView&#34; bundle:nil];
</code></pre><blockquote><p>常见错误</p><p>1.Loaded nib but the view outlet was not set</p><p>这种错误是因为在一个 Xib 文件中可能存在多个 UIView，在指定了 FileOwner 之后，需要指定此状态下的根 UIView，如下图所示：</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://i.stack.imgur.com/fzu7d.jpg alt=screenshot loading=lazy data-zoomable></div></div></figure></p></blockquote><h4 id=storyboard-1>StoryBoard</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=n>UIStoryboard</span> <span class=o>*</span><span class=n>storyboard</span> <span class=o>=</span> <span class=nb>self</span><span class=p>.</span><span class=n>storyboard</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>SpecialViewController</span> <span class=o>*</span><span class=n>svc</span> <span class=o>=</span> <span class=p>[</span><span class=n>storyboard</span> <span class=nl>instantiateViewControllerWithIdentifier</span><span class=p>:</span><span class=s>@&#34;SpecialViewController&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=c1>// Configure the new view controller here.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=nb>self</span> <span class=nl>presentViewController</span><span class=p>:</span><span class=n>svc</span> <span class=nl>animated</span><span class=p>:</span><span class=nb>YES</span> <span class=nl>completion</span><span class=p>:</span><span class=nb>nil</span><span class=p>];</span>
</span></span></code></pre></div><h4 id=loadview-中自定义视图>loadView 中自定义视图</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=p>-</span> <span class=p>(</span> <span class=kt>void</span> <span class=p>)</span> <span class=nf>loadView</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>UIView</span> <span class=o>*</span><span class=n>view</span> <span class=o>=</span> <span class=p>[</span> <span class=p>[</span> <span class=n>UIView</span> <span class=n>alloc</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nl>initWithFrame</span><span class=p>:[</span><span class=n>UIScreen</span> <span class=n>mainScreen</span><span class=p>].</span><span class=n>applicationFrame</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span> <span class=n>view</span> <span class=nl>setBackgroundColor</span><span class=p>:</span><span class=n>_color</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nb>self</span><span class=p>.</span><span class=n>view</span> <span class=o>=</span> <span class=n>view</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span> <span class=n>view</span> <span class=k>release</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>loadView 方法执行如下操作：</p><ol><li><p>如果你重载了这个方法，则必须创建必要的 view 并且将一个非 nil 值传给 UIViewController 的 view 属性。</p></li><li><p>如果你没有重载这个函数，UIViewController 会默认使用 UIViewController 的 nibName 和 nibBundle 属性尝试从 xib 文件加载 view。如果没有找到 nib 文件，则 ViewController 会通过以下两个步骤找到与其关联的 nib。</p></li></ol><p>(a) 如果类名包含 Controller，例如 ViewController 的类名是 MyViewController，则查找是否存在 MyView.xib；</p><p>(b) 找跟 ViewController 类名一样的文件，例如 MyViewController，则查找是否存在 MyViewController.xib。</p><p>(c) 如果没有可用的 nib 文件，那么它创建一个空的 UIView 作为它的 view。</p><h2 id=视图切换>视图切换</h2><h3 id=模态视图>模态视图</h3><p>模态视图即类似于 Android 中的 Activity，是一个单一的 UIViewController。利用 UIViewController 自身的 presentModalViewController，进行跳转；调用 dismissModalViewControllerAnimated 方法可以返回。</p><p>简而言之，模态视图的跳转方式为：</p><pre tabindex=0><code>PickImageViewController *ickImageViewController = [[PickImageViewController alloc] init];
[self presentModalViewController:ickImageViewController animated:YES];
//返回
[self dismissModalViewController Animated:YES];
</code></pre><p>( 1)指定跳转动画。</p><p>在模态视图跳转时，可以通过 modalTransitionStyle 来指定跳转的动画。</p><pre tabindex=0><code>registerViewController.modalTransitionStyle =
UIModalTransitionStyleCoverVertical;
</code></pre><p>常见的常量值有：</p><table><thead><tr><th>常量值</th><th>描述</th></tr></thead><tbody><tr><td>UIModalTransitionStyleCoverVertical</td><td>呈现时沿垂直方向由底向上退出，覆盖原来视图，关闭时从上往底部退回</td></tr><tr><td>UIModalTransitionStyleFlipHorizontal</td><td>水平翻转，呈现的时候从右往左翻转，关闭的时候从左往右翻转回来，</td></tr><tr><td>UIModalTransitionStyleCrossDissolve</td><td>两个视图交叉淡入淡出，</td></tr><tr><td>UIModalTransitionStylePartialCurl</td><td>呈现时模态视图卷起一个边角翻页，关闭时模态视图翻回来，</td></tr></tbody></table><p>( 2)信息传递</p><p>在页面进行跳转时，或者某个页面结束需要回传信息时，可以利用通知机制进行消息传递：</p><pre tabindex=0><code>- (void)viewDidLoad
{
   [super viewDidLoad];
   [[NSNotificationCenter defaultCenter]
            addObserver:self
            selector:@selector(registerCompletion:)
            name:@&#34;RegisterCompletionNotification&#34;
            object:nil
            ];
}
-(void)registerCompletion:(NSNotification*)notification {
   NSDictionary *theData = [notification userInfo];
   NSString *username = [theData objectForKey:@&#34;username&#34;];
   NSLog(@&#34;username = %@&#34;,username);
}
</code></pre><p>修改 RegisterViewController.m 代码，在 done 方法中的关闭完成 completion 代码块中添加代码投送通知</p><p>RegisterCompletionNotification，其中通知的参数放在字典 dataDict 中：</p><pre tabindex=0><code>- (IBAction)done:(id)sender {
[self dismissViewControllerAnimated:YES completion:^{
   NSLog(@&#34;Modal View done&#34;);
   NSDictionary *dataDict = [NSDictionary
      dictionaryWithObject:self.txtUsername.text
      forKey:@&#34;username&#34;];
   [[NSNotificationCenter defaultCenter]
      postNotificationName:@&#34;RegisterCompletionNotification&#34;
      object:nil
      userInfo:dataDict];
}];
}
</code></pre><h3 id=childviewcontroller子视图控制器>childViewController：子视图控制器</h3><pre tabindex=0><code>View Controller中可以添加多个sub view，在需要的时候显示出来；可以通过viewController(parent)中可以添加多个child viewController;来控制页面中的sub view，降低代码耦合度；通过切换，可以显示不同的view；替代之前addSubView的管理。在转移到子ViewController之后，有几个方法被子ViewController托管了：
</code></pre><p>1- Appearance Methods:</p><pre tabindex=0><code>- viewWillAppear:
- viewDidAppear:
- viewWillDisappear:
- viewDidDisappear:
</code></pre><p>2- Rotation Methods:</p><pre tabindex=0><code>- willRotateToInterfaceOrientation:duration:
- willAnimateRotationToInterfaceOrientation:duration:
- didRotateFromInterfaceOrientation:
</code></pre><p>苹果 API 中所带方法：</p><pre tabindex=0><code>addChildViewController:
removeFromParentViewController
transitionFromViewController:toViewController:duration:options:animations:completion:
willMoveToParentViewController:
didMoveToParentViewController:
</code></pre><ol><li><p>创建项目，changeViewController。</p></li><li><p>添加相应的 viewController，MainViewController、FirstViewController、SecondViewController、ThirdViewController。</p></li><li><p>把 MainViewController 添加到 window 中。</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=p>-</span> <span class=p>(</span><span class=kt>BOOL</span><span class=p>)</span><span class=nf>application:</span><span class=p>(</span><span class=n>UIApplication</span> <span class=o>*</span><span class=p>)</span><span class=nv>application</span> <span class=nf>didFinishLaunchingWithOptions:</span><span class=p>(</span><span class=n>NSDictionary</span> <span class=o>*</span><span class=p>)</span><span class=nv>launchOptions</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>self</span><span class=p>.</span><span class=n>window</span> <span class=o>=</span> <span class=p>[[</span><span class=n>UIWindow</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithFrame</span><span class=p>:[[</span><span class=n>UIScreen</span> <span class=n>mainScreen</span><span class=p>]</span> <span class=n>bounds</span><span class=p>]];</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Override point for customization after application launch.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>MainViewController</span> <span class=o>*</span><span class=n>mainViewController</span><span class=o>=</span><span class=p>[[</span><span class=n>MainViewController</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithNibName</span><span class=p>:</span><span class=s>@&#34;MainViewController&#34;</span> <span class=nl>bundle</span><span class=p>:</span><span class=nb>nil</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=nb>self</span><span class=p>.</span><span class=n>window</span><span class=p>.</span><span class=n>rootViewController</span><span class=o>=</span><span class=n>mainViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nb>self</span><span class=p>.</span><span class=n>window</span> <span class=n>makeKeyAndVisible</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>YES</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=4><li><p>在 MainViewController 中添加三个按钮，并且连接 onClickbutton 方法。</p></li><li><p>在 MainViewController 中添加三个子 controller</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=cp>#pragma mark – View lifecycle       - (void)viewDidLoad
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nb>super</span> <span class=n>viewDidLoad</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Do any additional setup after loading the view from its nib.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>FirstViewController</span> <span class=o>*</span><span class=n>firstViewController</span><span class=o>=</span><span class=p>[[</span><span class=n>FirstViewController</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithNibName</span><span class=p>:</span><span class=s>@&#34;FirstViewController&#34;</span> <span class=nl>bundle</span><span class=p>:</span><span class=nb>nil</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nb>self</span> <span class=nl>addChildViewController</span><span class=p>:</span><span class=n>firstViewController</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>SecondViewController</span> <span class=o>*</span><span class=n>secondViewController</span><span class=o>=</span><span class=p>[[</span><span class=n>SecondViewController</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithNibName</span><span class=p>:</span><span class=s>@&#34;SecondViewController&#34;</span> <span class=nl>bundle</span><span class=p>:</span><span class=nb>nil</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nb>self</span> <span class=nl>addChildViewController</span><span class=p>:</span><span class=n>secondViewController</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ThirdViewController</span> <span class=o>*</span><span class=n>thirdViewController</span><span class=o>=</span><span class=p>[[</span><span class=n>ThirdViewController</span> <span class=n>alloc</span><span class=p>]</span> <span class=nl>initWithNibName</span><span class=p>:</span><span class=s>@&#34;ThirdViewController&#34;</span> <span class=nl>bundle</span><span class=p>:</span><span class=nb>nil</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=nb>self</span> <span class=nl>addChildViewController</span><span class=p>:</span><span class=n>thirdViewController</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=n>contentView</span> <span class=nl>addSubview</span><span class=p>:</span><span class=n>thirdViewController</span><span class=p>.</span><span class=n>view</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>currentViewController</span><span class=o>=</span><span class=n>thirdViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><pre tabindex=0><code>其中要把其中的一个子controller的view添加到根视图中，这样才能显示出相应的视图。
</code></pre><ol start=6><li>点击按钮，切换视图。</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-objective-c data-lang=objective-c><span class=line><span class=cl><span class=p>-(</span><span class=kt>IBAction</span><span class=p>)</span><span class=nf>onClickbutton:</span><span class=p>(</span><span class=kt>id</span><span class=p>)</span><span class=nv>sender</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>FirstViewController</span> <span class=o>*</span><span class=n>firstViewController</span><span class=o>=</span><span class=p>[</span><span class=nb>self</span><span class=p>.</span><span class=n>childViewControllers</span> <span class=nl>objectAtIndex</span><span class=p>:</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>ThirdViewController</span> <span class=o>*</span><span class=n>thirdViewController</span><span class=o>=</span><span class=p>[</span><span class=nb>self</span><span class=p>.</span><span class=n>childViewControllers</span> <span class=nl>objectAtIndex</span><span class=p>:</span><span class=mi>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>SecondViewController</span> <span class=o>*</span><span class=n>secondViewController</span><span class=o>=</span><span class=p>[</span><span class=nb>self</span><span class=p>.</span><span class=n>childViewControllers</span> <span class=nl>objectAtIndex</span><span class=p>:</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>((</span><span class=n>currentViewController</span><span class=o>==</span><span class=n>firstViewController</span><span class=o>&amp;&amp;</span><span class=p>[</span><span class=n>sender</span> <span class=n>tag</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>)</span><span class=o>||</span><span class=p>(</span><span class=n>currentViewController</span><span class=o>==</span><span class=n>secondViewController</span><span class=o>&amp;&amp;</span><span class=p>[</span><span class=n>sender</span> <span class=n>tag</span><span class=p>]</span><span class=o>==</span><span class=mi>2</span><span class=p>)</span> <span class=o>||</span><span class=p>(</span><span class=n>currentViewController</span><span class=o>==</span><span class=n>thirdViewController</span><span class=o>&amp;&amp;</span><span class=p>[</span><span class=n>sender</span> <span class=n>tag</span><span class=p>]</span><span class=o>==</span><span class=mi>3</span><span class=p>)</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>UIViewController</span> <span class=o>*</span><span class=n>oldViewController</span><span class=o>=</span><span class=n>currentViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>([</span><span class=n>sender</span> <span class=n>tag</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=mi>1</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nb>self</span> <span class=nl>transitionFromViewController</span><span class=p>:</span><span class=n>currentViewController</span> <span class=nl>toViewController</span><span class=p>:</span><span class=n>firstViewController</span> <span class=nl>duration</span><span class=p>:</span><span class=mi>4</span> <span class=nl>options</span><span class=p>:</span><span class=n>UIViewAnimationOptionTransitionFlipFromLeft</span> <span class=nl>animations</span><span class=p>:</span><span class=o>^</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>  <span class=nl>completion</span><span class=p>:</span><span class=o>^</span><span class=p>(</span><span class=kt>BOOL</span> <span class=n>finished</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>finished</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>currentViewController</span><span class=o>=</span><span class=n>firstViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span><span class=k>else</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>currentViewController</span><span class=o>=</span><span class=n>oldViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=mi>2</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nb>self</span> <span class=nl>transitionFromViewController</span><span class=p>:</span><span class=n>currentViewController</span> <span class=nl>toViewController</span><span class=p>:</span><span class=n>secondViewController</span> <span class=nl>duration</span><span class=p>:</span><span class=mi>1</span> <span class=nl>options</span><span class=p>:</span><span class=n>UIViewAnimationOptionTransitionFlipFromTop</span> <span class=nl>animations</span><span class=p>:</span><span class=o>^</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>}</span>  <span class=nl>completion</span><span class=p>:</span><span class=o>^</span><span class=p>(</span><span class=kt>BOOL</span> <span class=n>finished</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>finished</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                  <span class=n>currentViewController</span><span class=o>=</span><span class=n>secondViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span><span class=k>else</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>currentViewController</span><span class=o>=</span><span class=n>oldViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=mi>3</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>NSLog</span><span class=p>(</span><span class=s>@&#34;好友申请&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nb>self</span> <span class=nl>transitionFromViewController</span><span class=p>:</span><span class=n>currentViewController</span> <span class=nl>toViewController</span><span class=p>:</span><span class=n>thirdViewController</span> <span class=nl>duration</span><span class=p>:</span><span class=mi>1</span> <span class=nl>options</span><span class=p>:</span><span class=n>UIViewAnimationOptionTransitionFlipFromBottom</span> <span class=nl>animations</span><span class=p>:</span><span class=o>^</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>}</span>  <span class=nl>completion</span><span class=p>:</span><span class=o>^</span><span class=p>(</span><span class=kt>BOOL</span> <span class=n>finished</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>finished</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                     <span class=n>currentViewController</span><span class=o>=</span><span class=n>thirdViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span><span class=k>else</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>currentViewController</span><span class=o>=</span><span class=n>oldViewController</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h1 id=layout>Layout</h1><h2 id=autolayout--size-classes>AutoLayout & Size Classes</h2><blockquote><p>参考资料</p></blockquote><ul><li>[初探 iOS8 中的 Size Class][6]</li></ul><p>AutoLayout 代表的是在某种尺寸下的 Constraints, 而 Size Class 代表了可以在同一个 xib 文件中支持多个尺寸下的 AutoLayout 约束。</p><ol><li>update constraints</li><li>update layout</li><li>update display</li></ol><h2 id=customcontrol>CustomControl</h2><p>关于 UIView 的 Layer，IOS 提供了三个方法：</p><p>1、<strong>layoutSubviews</strong></p><p><strong>在 iOS5.1 和之前的版本，此方法的缺省实现不会做任何事情 ( 实现为空 )，iOS5.1 之后 (iOS6 开始 ) 的版本，此方法的缺省实现是使用你设置在此 view 上面的 constraints(Autolayout) 去决定 subviews 的 position 和 size。UIView 的子类如果需要对其 subviews 进行更精确的布局，则可以重写此方法。只有在 autoresizing 和 constraint-based behaviors of subviews 不能提供我们想要的布局结果的时候，我们才应该重写此方法。可以在此方法中直接设置 subviews 的 frame。我们不应该直接调用此方法，而应当用下面两个方法。</strong></p><p>layoutSubviews 在以下几种情况下会被调用：</p><p>1、init 初始化不会触发 layoutSubviews</p><p>但是是用 initWithFrame 进行初始化时，当 rect 的值不为 CGRectZero 时, 也会触发</p><p>2、addSubview 会触发 layoutSubviews</p><p>3、设置 view 的 Frame 会触发 layoutSubviews，当然前提是 frame 的值设置前后发生了变化</p><p>4、滚动一个 UIScrollView 会触发 layoutSubviews</p><p>5、旋转 Screen 会触发父 UIView 上的 layoutSubviews 事件</p><p>6、改变一个 UIView 大小的时候也会触发父 UIView 上的 layoutSubviews 事件</p><p>2、setNeedsLayout</p><p>此方法会将 view 当前的 layout 设置为无效的，并在下一个 upadte cycle 里去触发 layout 更新。</p><p>3、layoutIfNeeded</p><p>使用此方法强制立即进行 layout, 从当前 view 开始，此方法会遍历整个 view 层次 ( 包括 superviews) 请求 layout。因此，调用此方法会强制整个 view 层次布局。</p><p>基于约束的 AutoLayer 的方法：</p><p>1、<strong>setNeedsUpdateConstraints</strong></p><p>当一个自定义 view 的某个属性发生改变，并且可能影响到 constraint 时，需要调用此方法去标记 constraints 需要在未来的某个点更新，系统然后调用<code>updateConstraints</code>.</p><p>2、<strong>needsUpdateConstraints</strong></p><p>constraint-based layout system 使用此返回值去决定是否需要调用<code>updateConstraints</code>作为正常布局过程的一部分。</p><p>3、<strong>updateConstraintsIfNeeded</strong></p><p>立即触发约束更新，自动更新布局。</p><p>4、<strong>updateConstraints</strong></p><p>自定义 view 应该重写此方法在其中建立 constraints. 注意：要在实现在最后调用<code>[super updateConstraints]</code></p><h1 id=container-view-controller>Container View Controller</h1><h2 id=navigation-controller>Navigation Controller</h2><p>![Navigation Controller][7]</p><blockquote><p>参考资料</p></blockquote><ul><li>[ iOS 学习之 UINavigationController 详解与使用][8]</li></ul><p>最左侧是根视图，当用户点击其中的 General 项时，General 视图会滑入屏幕；当用户继续点击 Auto-Lock 项时，Auto-Lock 视图将滑入屏幕。相应地，在对象管理上，导航控制器使用了导航堆栈。根视图控制器在堆栈最底层，接下来入栈的是 General 视图控制器和 Auto-Lock 视图控制器。可以调用 pushViewControllerAnimated: 方法将视图控制器推入栈顶，也可以调用 popViewControllerAnimated: 方法将视图控制器弹出堆。</p><p>![Navigation Controller][9]</p><p>![enter description here][10]</p><h3 id=uibarbuttonitem>UIBarButtonItem</h3><p>( 1)添加 UIBarButtonItem</p><pre tabindex=0><code>UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(selectLeftAction:)];
self.navigationItem.leftBarButtonItem = leftButton;

UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd  target:self action:@selector(selectRightAction:)];
self.navigationItem.rightBarButtonItem = rightButton;
</code></pre><p>![常用的UIBarButton][11]</p><p>(2 )添加响应事件</p><p>在添加 UIBarButtonItem 的时候，可以利用 @select 指定对应的方法。</p><pre tabindex=0><code>-(void)selectLeftAction:(id)sender
{
    UIAlertView *alter = [[UIAlertView alloc] initWithTitle:@&#34;提示&#34; message:@&#34;你点击了导航栏左按钮&#34; delegate:self  cancelButtonTitle:@&#34;确定&#34; otherButtonTitles:nil, nil];
    [alter show];
}

-(void)selectRightAction:(id)sender
{
    UIAlertView *alter = [[UIAlertView alloc] initWithTitle:@&#34;提示&#34; message:@&#34;你点击了导航栏右按钮&#34; delegate:self  cancelButtonTitle:@&#34;确定&#34; otherButtonTitles:nil, nil];
    [alter show];
}
</code></pre><h2 id=tab-bar-controller>Tab Bar Controller</h2><p>![Tab Bar Controller][12]</p><h2 id=custom-controller>Custom Controller</h2><ul><li><p>添加 View</p><p>```</p></li><li><p>(void) displayContentController: (UIViewController*) content;</p></li></ul><p>{</p><p>[self addChildViewController:content]; // 1</p><p>content.view.frame = [self frameForContentController]; // 2</p><p>[self.view addSubview:self.currentClientView];</p><p>[content didMoveToParentViewController:self]; // 3</p><p>}</p><pre tabindex=0><code>- 删除View
</code></pre><ul><li>(void) hideContentController: (UIViewController*) content</li></ul><p>{</p><p>[content willMoveToParentViewController:nil]; // 1</p><p>[content.view removeFromSuperview]; // 2</p><p>[content removeFromParentViewController]; // 3</p><p>}</p><pre tabindex=0><code>- 页面切换
</code></pre><ul><li><p>(void) cycleFromViewController: (UIViewController*) oldC</p><pre tabindex=0><code>      toViewController: (UIViewController*) newC
</code></pre></li></ul><p>{</p><pre tabindex=0><code>[oldC willMoveToParentViewController:nil];                        // 1

[self addChildViewController:newC];



newC.view.frame = [self newViewStartFrame];                       // 2

CGRect endFrame = [self oldViewEndFrame];



[self transitionFromViewController: oldC toViewController: newC   // 3

      duration: 0.25 options:0

      animations:^{

         newC.view.frame = oldC.view.frame;                       // 4

         oldC.view.frame = endFrame;

       }

       completion:^(BOOL finished) {

         [oldC removeFromParentViewController];                   // 5

         [newC didMoveToParentViewController:self];

        }];
</code></pre><p>}</p><pre tabindex=0><code># Theme

## MaterialDesign

### [CosmicMind - Material For Swift](https://github.com/CosmicMind/Material)

![MaterialSideNavigationViewController](https://camo.githubusercontent.com/e59bda52e7855a55268011a05b8a181b5d23d83b/687474703a2f2f7777772e636f736d69636d696e642e696f2f4d4b2f4d6174657269616c536964654e617669676174696f6e56696577436f6e74726f6c6c65722e676966)

[1]: http://img.blog.csdn.net/20150701233641345?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2F1Y2h5d2VpZXJzdHJhc3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center
[2]: http://img.blog.csdn.net/20150701234834234?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2F1Y2h5d2VpZXJzdHJhc3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center
[3]: http://www.ziqiangxuetang.com/ios/ios-action-outlet.html
[4]: http://img.blog.csdn.net/20150701234853010?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2F1Y2h5d2VpZXJzdHJhc3M=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center
[5]: http://i.stack.imgur.com/fzu7d.jpg
[6]: http://blog.csdn.net/yongyinmg/article/details/39315829
[7]: https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/Art/nav_object_diagram_2x.png
[8]: http://blog.csdn.net/totogo2010/article/details/7681879
[9]: http://my.csdn.net/uploads/201206/21/1340245120_7325.png
[10]: http://my.csdn.net/uploads/201206/21/1340243604_5347.png
[11]: http://my.csdn.net/uploads/201206/21/1340247778_6942.png
[12]: https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/Art/tab_bar_diagram_2x.png
</code></pre></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/uitableview/ rel=next>UITableView</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/frontend-series/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8/ios/%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/%E4%BA%8B%E4%BB%B6%E4%B8%8E%E6%89%8B%E5%8A%BF/ rel=prev>事件与手势</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>