<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="# Event ## Online/Offline Detection 使用标准 HTML5 APIs 可以实现在线和离线事件的探测，就像以下例子： main.js var app = require(&#34;app&#34;); var BrowserWindow = require(&#34;browser-window&#34;); var onlineStatusWindow; app.on(&#34;ready&#34;, function() { onlineStatusWindow = new BrowserWindow({ width: 0, height: 0, show: false }); onlineStatusWindow.loadUrl(&#34;file://&#34; + __dirname + &#34;/online-status.html&#34;); }); online-status.html <!DOCTYPE html> <html> <body> <script> var alertOnlineStatus = function() { window.alert(navigator.onLine ? 'online' : 'offline'); }; window.addEventListener('online', alertOnlineStatus); window.addEventListener('offline', alertOnlineStatus); alertOnlineStatus(); </script> </body> </html> 也会有人想要在主进程也"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/"><meta property="og:title" content="事件处理 | Next-gen Tech Edu"><meta property="og:description" content="# Event ## Online/Offline Detection 使用标准 HTML5 APIs 可以实现在线和离线事件的探测，就像以下例子： main.js var app = require(&#34;app&#34;); var BrowserWindow = require(&#34;browser-window&#34;); var onlineStatusWindow; app.on(&#34;ready&#34;, function() { onlineStatusWindow = new BrowserWindow({ width: 0, height: 0, show: false }); onlineStatusWindow.loadUrl(&#34;file://&#34; + __dirname + &#34;/online-status.html&#34;); }); online-status.html <!DOCTYPE html> <html> <body> <script> var alertOnlineStatus = function() { window.alert(navigator.onLine ? 'online' : 'offline'); }; window.addEventListener('online', alertOnlineStatus); window.addEventListener('offline', alertOnlineStatus); alertOnlineStatus(); </script> </body> </html> 也会有人想要在主进程也"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>事件处理 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=bdca72bef77704af073be5ecdc18ccbd><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">Electron</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3b9ba0b3a4530832721d53dd03a574e4")' href=#id3b9ba0b3a4530832721d53dd03a574e4 aria-expanded=false aria-controls=id3b9ba0b3a4530832721d53dd03a574e4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/>4.跨端开发</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id3b9ba0b3a4530832721d53dd03a574e4 aria-expanded=false aria-controls=id3b9ba0b3a4530832721d53dd03a574e4><i class="fa-solid fa-angle-down" id=caret-id3b9ba0b3a4530832721d53dd03a574e4></i></a></div><ul class="nav docs-sidenav collapse show" id=id3b9ba0b3a4530832721d53dd03a574e4><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id4d0f625bc5ae7cf575b6318fa43ce587")' href=#id4d0f625bc5ae7cf575b6318fa43ce587 aria-expanded=false aria-controls=id4d0f625bc5ae7cf575b6318fa43ce587 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/chrome-extension/>Chrome Extension</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id4d0f625bc5ae7cf575b6318fa43ce587 aria-expanded=false aria-controls=id4d0f625bc5ae7cf575b6318fa43ce587><i class="fa-solid fa-angle-right" id=caret-id4d0f625bc5ae7cf575b6318fa43ce587></i></a></div><ul class="nav docs-sidenav collapse" id=id4d0f625bc5ae7cf575b6318fa43ce587><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/chrome-extension/%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E4%B8%8E%E4%BA%A4%E4%BA%92/>脚本执行与交互</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/chrome-extension/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%AD%98%E5%82%A8/>网络请求与存储</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/chrome-extension/%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%95%8C%E9%9D%A2/>应用配置与界面</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id816a6b780c67bd9af2e7926c97ff9c5a")' href=#id816a6b780c67bd9af2e7926c97ff9c5a aria-expanded=false aria-controls=id816a6b780c67bd9af2e7926c97ff9c5a aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/>Electron</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id816a6b780c67bd9af2e7926c97ff9c5a aria-expanded=false aria-controls=id816a6b780c67bd9af2e7926c97ff9c5a><i class="fa-solid fa-angle-down" id=caret-id816a6b780c67bd9af2e7926c97ff9c5a></i></a></div><ul class="nav docs-sidenav collapse show" id=id816a6b780c67bd9af2e7926c97ff9c5a><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb757da62c8dba62e46997f2eca4e0cf5")' href=#idb757da62c8dba62e46997f2eca4e0cf5 aria-expanded=false aria-controls=idb757da62c8dba62e46997f2eca4e0cf5 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/ipc-%E8%B0%83%E7%94%A8/>IPC 调用</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb757da62c8dba62e46997f2eca4e0cf5 aria-expanded=false aria-controls=idb757da62c8dba62e46997f2eca4e0cf5><i class="fa-solid fa-angle-right" id=caret-idb757da62c8dba62e46997f2eca4e0cf5></i></a></div><ul class="nav docs-sidenav collapse" id=idb757da62c8dba62e46997f2eca4e0cf5><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/ipc-%E8%B0%83%E7%94%A8/%E4%B8%BA%E4%BD%95-remote-%E6%A8%A1%E5%9D%97%E6%98%AF%E6%9C%89%E5%AE%B3%E7%9A%84/>为何 remote 模块是有害的</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idfffea7cc3e76a34890e6020e8127f31e")' href=#idfffea7cc3e76a34890e6020e8127f31e aria-expanded=false aria-controls=idfffea7cc3e76a34890e6020e8127f31e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%8A%9F%E8%83%BD%E6%89%A9%E5%B1%95/>功能扩展</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idfffea7cc3e76a34890e6020e8127f31e aria-expanded=false aria-controls=idfffea7cc3e76a34890e6020e8127f31e><i class="fa-solid fa-angle-right" id=caret-idfffea7cc3e76a34890e6020e8127f31e></i></a></div><ul class="nav docs-sidenav collapse" id=idfffea7cc3e76a34890e6020e8127f31e><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%8A%9F%E8%83%BD%E6%89%A9%E5%B1%95/%E6%88%AA%E5%9B%BE%E4%B8%8E%E8%A7%86%E9%A2%91/>截图与视频</a></li></ul></div><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E6%88%AA%E5%9B%BE%E4%B8%8E%E8%A7%86%E9%A2%91/>截图与视频</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3ef6bc6358c6a78225aee601d3f22458")' href=#id3ef6bc6358c6a78225aee601d3f22458 aria-expanded=false aria-controls=id3ef6bc6358c6a78225aee601d3f22458 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%B8%8E%E9%80%9A%E4%BF%A1/>进程模型与通信</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id3ef6bc6358c6a78225aee601d3f22458 aria-expanded=false aria-controls=id3ef6bc6358c6a78225aee601d3f22458><i class="fa-solid fa-angle-right" id=caret-id3ef6bc6358c6a78225aee601d3f22458></i></a></div><ul class="nav docs-sidenav collapse" id=id3ef6bc6358c6a78225aee601d3f22458><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%B8%8E%E9%80%9A%E4%BF%A1/%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%9E%8B%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1-%E4%B8%8E-node%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/>进程模型、进程间通信 与 Node模块使用</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%9E%8B%E4%B8%8E%E9%80%9A%E4%BF%A1/%E4%B8%BA%E4%BD%95-remote-%E6%A8%A1%E5%9D%97%E6%98%AF%E6%9C%89%E5%AE%B3%E7%9A%84/>为何 remote 模块是有害的</a></li></ul></div><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/>开发基础</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98/>内存调优</a></li><li class="child level active"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/>事件处理</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%BA%94%E7%94%A8%E5%8F%91%E5%B8%83/>应用发布</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ide4bbbc5dec78e5c87bb818ff822549f1")' href=#ide4bbbc5dec78e5c87bb818ff822549f1 aria-expanded=false aria-controls=ide4bbbc5dec78e5c87bb818ff822549f1 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd52cff58fe11a2cbf30858f6e3b45ab4")' href=#idd52cff58fe11a2cbf30858f6e3b45ab4 aria-expanded=false aria-controls=idd52cff58fe11a2cbf30858f6e3b45ab4 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/>Taro</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd52cff58fe11a2cbf30858f6e3b45ab4 aria-expanded=false aria-controls=idd52cff58fe11a2cbf30858f6e3b45ab4><i class="fa-solid fa-angle-right" id=caret-idd52cff58fe11a2cbf30858f6e3b45ab4></i></a></div><ul class="nav docs-sidenav collapse" id=idd52cff58fe11a2cbf30858f6e3b45ab4><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idffa957fc0a504f3d57976c41e0ed79aa")' href=#idffa957fc0a504f3d57976c41e0ed79aa aria-expanded=false aria-controls=idffa957fc0a504f3d57976c41e0ed79aa aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idf9073a98dd1a1d29e8f7aaeaa7653c71")' href=#idf9073a98dd1a1d29e8f7aaeaa7653c71 aria-expanded=false aria-controls=idf9073a98dd1a1d29e8f7aaeaa7653c71 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%A4%9A%E7%AB%AF%E5%BC%80%E5%8F%91/>多端开发</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idf9073a98dd1a1d29e8f7aaeaa7653c71 aria-expanded=false aria-controls=idf9073a98dd1a1d29e8f7aaeaa7653c71><i class="fa-solid fa-angle-right" id=caret-idf9073a98dd1a1d29e8f7aaeaa7653c71></i></a></div><ul class="nav docs-sidenav collapse" id=idf9073a98dd1a1d29e8f7aaeaa7653c71><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%A4%9A%E7%AB%AF%E5%BC%80%E5%8F%91/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91/>跨平台开发</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-ida2df686453ad2beabeeaa2bf313cb5fe")' href=#ida2df686453ad2beabeeaa2bf313cb5fe aria-expanded=false aria-controls=ida2df686453ad2beabeeaa2bf313cb5fe aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/>工程实践</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#ida2df686453ad2beabeeaa2bf313cb5fe aria-expanded=false aria-controls=ida2df686453ad2beabeeaa2bf313cb5fe><i class="fa-solid fa-angle-right" id=caret-ida2df686453ad2beabeeaa2bf313cb5fe></i></a></div><ul class="nav docs-sidenav collapse" id=ida2df686453ad2beabeeaa2bf313cb5fe><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C/>权限校验</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/>最佳实践</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb66a93b1fc0e4472e60f44d84c5bda3e")' href=#idb66a93b1fc0e4472e60f44d84c5bda3e aria-expanded=false aria-controls=idb66a93b1fc0e4472e60f44d84c5bda3e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/>开发基础</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb66a93b1fc0e4472e60f44d84c5bda3e aria-expanded=false aria-controls=idb66a93b1fc0e4472e60f44d84c5bda3e><i class="fa-solid fa-angle-right" id=caret-idb66a93b1fc0e4472e60f44d84c5bda3e></i></a></div><ul class="nav docs-sidenav collapse" id=idb66a93b1fc0e4472e60f44d84c5bda3e><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/>静态资源</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/>快速开始</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/%E6%A1%86%E6%9E%B6%E4%B8%8E%E9%85%8D%E7%BD%AE/>框架与配置</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/%E7%BB%84%E4%BB%B6%E4%B8%8E%E9%A1%B5%E9%9D%A2/>组件与页面</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idbb5759d77dabdd4c50c41d28f4b55846")' href=#idbb5759d77dabdd4c50c41d28f4b55846 aria-expanded=false aria-controls=idbb5759d77dabdd4c50c41d28f4b55846 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7/>语法特性</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idbb5759d77dabdd4c50c41d28f4b55846 aria-expanded=false aria-controls=idbb5759d77dabdd4c50c41d28f4b55846><i class="fa-solid fa-angle-right" id=caret-idbb5759d77dabdd4c50c41d28f4b55846></i></a></div><ul class="nav docs-sidenav collapse" id=idbb5759d77dabdd4c50c41d28f4b55846><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/taro/%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7/%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F/>组件样式</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id3178df167f197efafdec5b61198f71a2")' href=#id3178df167f197efafdec5b61198f71a2 aria-expanded=false aria-controls=id3178df167f197efafdec5b61198f71a2 aria-hidden=false data-toggle=collapse></div></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id083e56efd55679b234805f6eb2544a5f")' href=#id083e56efd55679b234805f6eb2544a5f aria-expanded=false aria-controls=id083e56efd55679b234805f6eb2544a5f aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/>小程序</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id083e56efd55679b234805f6eb2544a5f aria-expanded=false aria-controls=id083e56efd55679b234805f6eb2544a5f><i class="fa-solid fa-angle-right" id=caret-id083e56efd55679b234805f6eb2544a5f></i></a></div><ul class="nav docs-sidenav collapse" id=id083e56efd55679b234805f6eb2544a5f><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/w3c-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A0%87%E5%87%86/>W3C 小程序标准</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E6%A1%86%E6%9E%B6%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/>框架语法对比</a></li><li class="child level"><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E8%BD%AC%E8%AF%91%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%97%B6/>转译与运行时</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>事件处理</h1><div class=article-style><p># Event</p><p>## Online/Offline Detection</p><p>使用标准  HTML5 APIs  可以实现在线和离线事件的探测，就像以下例子：</p><p><em>main.js</em></p><pre tabindex=0><code class=language-js  data-lang=js >var app = require(&#34;app&#34;);
var BrowserWindow = require(&#34;browser-window&#34;);
var onlineStatusWindow;

app.on(&#34;ready&#34;, function() {
  onlineStatusWindow = new BrowserWindow({ width: 0, height: 0, show: false });
  onlineStatusWindow.loadUrl(&#34;file://&#34; + __dirname + &#34;/online-status.html&#34;);
});
</code></pre><p><em>online-status.html</em></p><pre tabindex=0><code class=language- html data-lang= html>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script&gt;
      var alertOnlineStatus = function() {
        window.alert(navigator.onLine ? &#39;online&#39; : &#39;offline&#39;);
      };

      window.addEventListener(&#39;online&#39;,  alertOnlineStatus);
      window.addEventListener(&#39;offline&#39;,  alertOnlineStatus);

      alertOnlineStatus();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>也会有人想要在主进程也有回应这些事件的实例。然后主进程没有  <code>navigator</code>  对象因此不能直接探测在线还是离线。使用  Electron  的进程间通讯工具，事件就可以在主进程被使，就像下面的例子：</p><p><em>main.js</em></p><pre tabindex=0><code class=language-  data-lang= >var app = require(&#39;app&#39;);
var ipc = require(&#39;ipc&#39;);
var BrowserWindow = require(&#39;browser-window&#39;);
var onlineStatusWindow;

app.on(&#39;ready&#39;, function() {
  onlineStatusWindow = new BrowserWindow({ width: 0, height: 0, show: false });
  onlineStatusWindow.loadUrl(&#39;file://&#39; + __dirname + &#39;/online-status.html&#39;);
});

ipc.on(&#39;online-status-changed&#39;, function(event, status) {
  console.log(status);
});
</code></pre><p><em>online-status.html</em></p><pre tabindex=0><code class=language-  data-lang= >&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script&gt;
      var ipc = require(&#39;ipc&#39;);
      var updateOnlineStatus = function() {
        ipc.send(&#39;online-status-changed&#39;, navigator.onLine ? &#39;online&#39; : &#39;offline&#39;);
      };

      window.addEventListener(&#39;online&#39;,  updateOnlineStatus);
      window.addEventListener(&#39;offline&#39;,  updateOnlineStatus);

      updateOnlineStatus();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><p># SysProc</p><p>## IPC</p><p>在主进程使用<code>ipc</code>模块时,<code>ipc</code>负责捕获从渲染进程(网页)发送的同步或者是异步消息.</p><p>发送消息</p><p>主进程也可以向渲染进程发送信息,具体可以看<a href=https://wangdashuaihenshuai.gitbooks.io/electron-zh-document/content/api/web-contents.md#webcontentssendchannel-args target=_blank rel=noopener>WebContents.send</a>.</p><p>-  当发送消息的时候,事件名字为&rsquo;channel&rsquo;.
-  回复一个同步消息的时候,你需要使用<code>event.returnValue</code>
-  回复一个异步消息的时候,使用<code>event.sender.send(...)</code></p><p>下面是一个主进程和渲染进程的通信例子.</p><pre tabindex=0><code class=language-  data-lang= >// 在主进程中.
var ipc = require(&#39;ipc&#39;);
ipc.on(&#39;asynchronous-message&#39;, function(event, arg) {
  console.log(arg);  // 打印 &#34;ping&#34;
  event.sender.send(&#39;asynchronous-reply&#39;, &#39;pong&#39;);
});

ipc.on(&#39;synchronous-message&#39;, function(event, arg) {
  console.log(arg);  // 打印 &#34;ping&#34;
  event.returnValue = &#39;pong&#39;;
});

// 在渲染进程(网页).
var ipc = require(&#39;ipc&#39;);
console.log(ipc.sendSync(&#39;synchronous-message&#39;, &#39;ping&#39;)); // 打印 &#34;pong&#34;

ipc.on(&#39;asynchronous-reply&#39;, function(arg) {
  console.log(arg); // 打印 &#34;pong&#34;
});
ipc.send(&#39;asynchronous-message&#39;, &#39;ping&#39;);
</code></pre><p>监听消息</p><p><code>ipc</code>模块有下列几种方法来监听事件.</p><p><code>ipc.on(channel, callback)</code></p><p>- <code>channel</code> -  事件名称.
- <code>callback</code> -  回调函数.</p><p>当事件发生的时候,会传入<code>callback</code> <code>event</code>和<code>arg</code>参数.</p><p>IPC  事件</p><p>传入<code>callback</code>的<code>event</code>对象含有下列方法.</p><p>- <code>Event.returnValue</code></p><p>在同步消息中,设置这个值将会被返回.</p><p><code>Event.sender</code></p><p>返回一个可以发送消息的<code>WebContents</code>.</p><p><code>Event.sender.send(channel[.arg1][,arg2][,...])</code></p><p>- <code>channel</code> -  事件名称.
- <code>arg</code> (选用)</p><p>这个可以发送一个可带参数的异步消息回渲染进程.</p><p>## Shell</p><p><code>shell</code>  模块提供了集成其他桌面客户端的关联功能.</p><p>在用户默认浏览器中打开 URL 的示例:</p><pre tabindex=0><code class=language-  data-lang= >var shell = require(&#39;shell&#39;);

shell.openExternal(&#39;https://github.com&#39;);
</code></pre><p>Methods</p><p><code>shell</code>  模块包含以下函数:</p><p><code>shell.showItemInFolder(fullPath)</code></p><p>- <code>fullPath</code> String</p><p>打开文件所在文件夹,一般情况下还会选中它.</p><p><code>shell.openItem(fullPath)</code></p><p>- <code>fullPath</code> String</p><p>以默认打开方式打开文件.</p><p><code>shell.openExternal(url)</code></p><p>- <code>url</code> String</p><p>以系统默认设置打开外部协议.(例如,mailto: somebody@somewhere.io 会打开用户默认的邮件客户端)</p><p><code>shell.moveItemToTrash(fullPath)</code></p><p>- <code>fullPath</code> String</p><p>删除指定路径文件,并返回此操作的状态值(boolean 类型).</p><p><code>shell.beep()</code></p><p>播放  beep  声音.</p><p># Extension</p><p>## <a href=https://github.com/jiahaog/nativefier target=_blank rel=noopener>nativefier</a>:Wrap any web page natively</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=https://raw.githubusercontent.com/jiahaog/nativefier/master/screenshots/Dock%20Screenshot.png alt=Dock Screenshot loading=lazy data-zoomable></div></div></figure></p><p>You want to make a native wrapper for Google Maps (or any web page).</p><pre tabindex=0><code class=language-  data-lang= >$ nativefier maps.google.com
</code></pre><p>You&rsquo;re done.</p><p>- Introduction</p><p>Nativefier is a command line tool that allows you to easily create a desktop application for any web site with succinct and minimal configuration. Apps are wrapped by <a href=http://electron.atom.io target=_blank rel=noopener>Electron</a> in an OS executable (<code>.app</code>, <code>.exe</code>, etc.) for use on Windows, OSX and Linux.</p><p>I did this because I was tired of having to <code>⌘-tab</code> or <code>alt-tab</code> to my browser and then search through the numerous open tabs when I was using <a href=http://messenger.com target=_blank rel=noopener>Facebook Messenger</a> or <a href=http://web.whatsapp.com target=_blank rel=noopener>Whatsapp Web</a>.</p><p>View the changelog <a href=https://github.com/jiahaog/nativefier/blob/master/History.md target=_blank rel=noopener>here</a>.</p><p>- Installation</p><p>With <a href=https://nodejs.org/ target=_blank rel=noopener>Node.js</a> installed,</p><pre tabindex=0><code class=language-  data-lang= ># for use from the command line
$ npm install nativefier -g
</code></pre><p>- Usage</p><p>Creating a native desktop app for <a href=http://medium.com target=_blank rel=noopener>medium.com</a>:</p><pre tabindex=0><code class=language-  data-lang= >$ nativefier &#34;http://medium.com&#34;
</code></pre><p>Nativefier will intelligently attempt to determine the app name, your OS and processor architecture, among other options. If desired, the app name or other options can be overwritten by specifying the <code>--app-name "Medium"</code> as part of the command line options, as such.</p><pre tabindex=0><code class=language-  data-lang= >$ nativefier --app-name &#34;Some Awesome App&#34; &#34;http://medium.com&#34;
</code></pre><p><strong>For Windows Users:</strong> Take note that the application menu is automatically hidden by default, you can press <code>alt</code> on your keyboard to access it.</p><p>- Options</p><pre tabindex=0><code class=language-  data-lang= >$ nativefier [options] &lt;targetUrl&gt; [dest]
</code></pre><p>Command line options are listed below.</p><p>Target Url</p><p>The url to point the application at.</p><p>[dest]</p><p>Specifies the destination directory to build the app to, defaults to the current working directory.</p><p>Help</p><pre tabindex=0><code class=language-  data-lang= >-h, --help
</code></pre><p>Prints the usage information.</p><p>[app-name]</p><pre tabindex=0><code class=language-  data-lang= >-n, --app-name &lt;value&gt;
</code></pre><p>The name of the application, which will affect strings in titles and the icon.</p><p>[platform]</p><pre tabindex=0><code class=language-  data-lang= >-p, --platform &lt;value&gt;
</code></pre><p>Automatically determined based on the current OS. Can be overwritten by specifying either <code>linux</code>, <code>win32</code>, or <code>darwin</code>.</p><p>[arch]</p><pre tabindex=0><code class=language-  data-lang= >-a, --arch &lt;value&gt;
</code></pre><p>Processor architecture, automatically determined based on the current OS. Can be overwritten by specifying either <code>ia32</code> or <code>x64</code>.</p><p>[electron-version]</p><pre tabindex=0><code class=language-  data-lang= >-e, --electron-version &lt;value&gt;
</code></pre><p>Electron version without the <code>v</code>, see <a href=https://github.com/atom/electron/releases target=_blank rel=noopener>https://github.com/atom/electron/releases</a>.</p><p>[overwrite]</p><pre tabindex=0><code class=language-  data-lang= >-o, --overwrite
</code></pre><p>Specifies if the destination directory should be overwritten.</p><p>[conceal]</p><pre tabindex=0><code class=language-  data-lang= >-c, --conceal
</code></pre><p>Specifies if the source code within the nativefied app should be packaged into an archive, defaults to false, <a href=http://electron.atom.io/docs/v0.36.0/tutorial/application-packaging/ target=_blank rel=noopener>read more</a>.</p><p>[icon]</p><pre tabindex=0><code class=language-  data-lang= >-i, --icon &lt;path&gt;
</code></pre><p>On OSX, the icon parameter should be a path to an <code>.icns</code> file. <a href=https://iconverticons.com/online/ target=_blank rel=noopener>iConvertIcons</a> can be used to convert <code>.pngs</code>, though it can be quite cumbersome.</p><p>To retrieve the <code>.icns</code> file from the downloaded file, extract it first and press File > Get Info. Then select the icon in the top left corner of the info window and press <code>⌘-C</code>. Open Preview and press File > New from clipboard and save the <code>.icns</code> file. It took me a while to figure out how to do that and question why a <code>.icns</code> file was not simply provided in the downloaded archive.</p><p>[badge]</p><pre tabindex=0><code class=language-  data-lang= >-b, --badge
</code></pre><p>On OSX, it is desired for the App dock icon to show a badge on the receipt of a desktop notification.</p><p>There is no known way to intercept and set an event listener for a desktop notification triggered by the [<code>](https://github.com/atom/electron/blob/master/docs/api/web-view-tag.md), the current workaround is to listen for `document.title` changes within the </code>. Typical web apps like Facebook Messenger will change the <code>document.title</code> to &ldquo;John sent a message&mldr;&rdquo; on the receipt of a desktop notification, and this is what we will listen for to trigger the app badge on the dock.</p><p>However, this would cause issues when the command line argument <code>target</code> is set to a external page which is not a single page app, because clicking on hyperlinks and switching pages would naturally change the <code>document.title</code>. Hence, <code>--badge</code> is an optional command argument that can be set by the user if the side effect of this workaround is understood.</p><p>[counter]</p><pre tabindex=0><code class=language-  data-lang= >--counter
</code></pre><p>Use a counter that persists even with window focus for the application badge for sites that use an &ldquo;(X)&rdquo; format counter in the page title (i.e. Gmail).  Same limitations as the badge option (above).</p><p>[width]</p><pre tabindex=0><code class=language-  data-lang= >--width &lt;value&gt;
</code></pre><p>Width of the packaged application, defaults to <code>1280px</code>.</p><p>[height]</p><pre tabindex=0><code class=language-  data-lang= >--height &lt;value&gt;
</code></pre><p>Height of the packaged application, defaults to <code>800px</code>.</p><p>[show-menu-bar]</p><pre tabindex=0><code class=language-  data-lang= >-m, --show-menu-bar
</code></pre><p>Specifies if the menu bar should be shown.</p><p>[user-agent]</p><pre tabindex=0><code class=language-  data-lang= >-u, --user-agent &lt;value&gt;
</code></pre><p>Set the user agent to run the created app with.</p><p>[honest]</p><pre tabindex=0><code class=language-  data-lang= >--honest
</code></pre><p>By default, nativefier uses a preset user agent string for your OS and masquerades as a regular Google Chrome browser, so that sites like WhatsApp Web will not say that the current browser is unsupported.</p><p>If this flag is passed, it will not override the user agent.</p><p>[insecure]</p><pre tabindex=0><code class=language-  data-lang= >--insecure
</code></pre><p>Forces the packaged app to ignore certificate errors.</p></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98/ rel=next>内存调优</a></div><div class="col-6 post-nav-item"><div class=meta-nav>下一页</div><a href=/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/electron/%E5%BA%94%E7%94%A8%E5%8F%91%E5%B8%83/ rel=prev>应用发布</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>