<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>小程序 | Next-gen Tech Edu</title><link>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/</link><atom:link href="https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.xml" rel="self" type="application/rss+xml"/><description>小程序</description><generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><image><url>https://ng-tech.icu/media/sharing.png</url><title>小程序</title><link>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/</link></image><item><title>W3C 小程序标准</title><link>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/w3c-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A0%87%E5%87%86/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/w3c-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A0%87%E5%87%86/</guid><description>&lt;h1 id="小程序框架设计">小程序框架设计&lt;/h1>
&lt;h1 id="小程序构造">小程序构造&lt;/h1>
&lt;p>为了获得与原生应用程序相似的用户体验，小程序资源通常打包在一起。下载并安装小程序软件包后，用来显示应用程序页面所需的所有静态页面模板 /CSS/JavaScript 文件都已经在用户的设备上就绪了。在下次更新之前，这些资源始终可用，无需任何额外下载内容。&lt;/p>
&lt;p>小程序包是压缩格式（例如 zip）存档，包括：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>一个配置文档，位于包的根目录下。配置文件应包括：整个小程序的概述；页面描述及其对应路径，用于页面定位和开启。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一个包含 JavaScript 代码的应用级逻辑文件，处理应用级生命周期回调。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一个或多个页面文件，包含页面结构的模板代码、页面样式的 CSS 代码和页面逻辑的 JavaScript 代码。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>支持数字签名验证。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>为了在搜索和执行时定位特定的小程序，小程序必须在平台上具有包名或 ID。还需要一个小程序图标帮助用户识别。&lt;/p>
&lt;h2 id="分离视图层与逻辑层">分离视图层与逻辑层&lt;/h2>
&lt;p>在小程序中，视图层通常与逻辑层分离。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/10/06/ucFO9x.png" alt="视图与逻辑分离示意" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>视图层负责渲染小程序页面，包括 Web 组件和原生组件渲染，可以将其视为混合渲染。例如，Web 组件渲染可以由 WebView 处理，但 WebView 不支持某些 Web 组件渲染，或者是性能受限；小程序还依赖于某些原生组件，例如地图、视频等。逻辑层是用 JS Worker 实现的。Worker 负责小程序的事件处理、API 调用和生命周期管理。&lt;/p>
&lt;p>扩展的原生功能通常来自宿主原生应用程序或操作系统，这些功能包括支付、文件处理、扫描、电话等。它们通过某些 API 调用。当小程序调用原生 API 时，它会将 API 调用传递给扩展的原生功能，以便通过 JS Bridge 进一步处理，并通过 JS Bridge 从扩展的原生功能获取结果。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/10/06/uck82V.jpg" alt="调用 API 时小程序的数据流" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>Worker 为每个 Render 建立连接，传输需要渲染的数据以进一步处理。如果事件由小程序页面中的组件触发，则此页面的 Render 将向 Worker 发送事件以进一步处理。同时，Render 将等待 Worker 发送的数据来重新渲染小程序页面。渲染过程可被视为无状态，并且所有状态都将存储在 Worker 中。&lt;/p>
&lt;p>视图层和逻辑层分离有很多好处：&lt;/p>
&lt;ul>
&lt;li>方便多个小程序页面之间的数据共享和交互。&lt;/li>
&lt;li>在小程序的生命周期中具有相同的上下文可以为具备原生应用程序开发背景的开发人员提供熟悉的编码体验。&lt;/li>
&lt;li>Render 和 JS worker 的分离和并行实现可以防止 JS 执行影响或减慢页面渲染，这有助于提高渲染性能。&lt;/li>
&lt;/ul>
&lt;h1 id="生命周期">生命周期&lt;/h1>
&lt;h2 id="实例">实例&lt;/h2>
&lt;p>用来发现、打开和访问小程序的入口众多。与多 WebView 的 Web 应用不同，同一个小程序只会创建一个实例，因此小程序以全局一致的方式保持其状态和数据。例如，在一个用户通过二维码入口第一次打开并登录小程序后，当用户从小程序商店等另一个入口返回应用时仍将保持登录状态。&lt;/p>
&lt;h1 id="性能与用户体验">性能与用户体验&lt;/h1>
&lt;h2 id="打包体加载">打包体加载&lt;/h2>
&lt;p>使用小程序的构造器，用户只需在首次打开小程序时下载软件包即可，之后无需再次下载小程序中的静态资源（页面 /JavaScript/CSS），这样加载和跳转页面就会更快。此功能可改善用户操作体验并节省网络流量。&lt;/p>
&lt;p>同时，小程序有一个预下载机制，可以提前下载小程序软件包，或者单独预载第一页，并在下载过程中并行执行流解压，以最大限度地减少小程序启动阶段和耗时，提升初次打开首页的性能表现。&lt;/p>
&lt;h2 id="多重渲染环境">多重渲染环境&lt;/h2>
&lt;p>小程序在渲染环境之间使用原生页面堆栈管理，页面切换由原生代码驱动。因此，在页面中的手势操作和页面之间的切换可以实现与原生应用完全相同的流畅体验。&lt;/p>
&lt;p>由于视图层和逻辑层的隔离，视图层可以独立渲染。不受 JavaScript 逻辑代码的阻碍，可以大大提高页面的渲染速度。&lt;/p>
&lt;h2 id="预构建和复用运行时环境">预构建和复用运行时环境&lt;/h2>
&lt;p>小程序的运行时环境通常在启动应用程序之前预先构建，从而缩短了启动时间。预构建的内容包括渲染环境、静态资源、开发人员定义的预取请求和小程序运行时容器。小程序激活后，它将接管预构建的渲染环境，然后我们继续为缓存池预构建新的渲染环境以备下一次使用。渲染环境数量有一个限制，当任何渲染环境关闭或超出数量限制时，最早打开的渲染环境将被销毁。当小程序退出时其运行时将被销毁，而应用程序环境和资源可以复用。&lt;/p>
&lt;h1 id="辅助功能">辅助功能&lt;/h1>
&lt;h2 id="小程序小部件">小程序小部件&lt;/h2>
&lt;p>除了以小程序页面的形式渲染之外，小程序还能以信息片段的形式显示，亦即小程序小部件。在这种形式下，开发人员可以将他们的服务和 / 或内容放到各种宿主场景（称为宿主环境）中，内容可以是助手、搜索页面等。此功能将小程序的服务与场景关联起来，为用户提供更多便利。&lt;/p>
&lt;p>例如，当用户购买火车票时，智能助手上的小程序小部件立即显示列车的最新状态。用户可以单击这个小部件并跳转到全屏小程序页面以获取更多详细信息。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/10/06/ucA2lV.jpg" alt="从主屏幕到小程序的小部件" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>与小程序页面相同，小部件也由 URI scheme 描述。宿主环境指定小程序包和对应的小部件通过 URI 路径加载，并通过 URI 查询参数将数据传递给小部件。小部件加载后，它将在宿主环境中显示和渲染。来自宿主和小部件的数据以及来自其他小部件的数据会被隔离，以确保安全性和独立性。&lt;/p>
&lt;p>在许多情况下，小部件可以打开小程序页面以执行更复杂的操作。在这种情况下，小部件通常需要与其对应的小程序共享数据，例如保持一致的登录状态。因此小部件和小程序的数据可以互通。换句话说，小程序小部件和页面具有相同的数据访问权限。&lt;/p>
&lt;p>小部件的一个目标是让用户忘记传统的应用程序概念，并以服务的形式真正满足用户的需求。因此，除了所有传统的应用程序调用路径之外，小部件还可以在各种场景下由多种方法触发，例如文本关键字、语音分析、图片识别、扫描代码、事件意图等。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/10/06/ucEf3t.jpg" alt="小程序小部件交互" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>小部件的一个目标是让用户忘记传统的应用程序概念，并以服务的形式真正满足用户的需求。因此，除了所有传统的应用程序调用路径之外，小部件还可以在各种场景下由多种方法触发，例如文本关键字、语音分析、图片识别、扫描代码、事件意图等。&lt;/p></description></item><item><title>框架语法对比</title><link>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E6%A1%86%E6%9E%B6%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E6%A1%86%E6%9E%B6%E8%AF%AD%E6%B3%95%E5%AF%B9%E6%AF%94/</guid><description>&lt;h1 id="小程序使用对比">小程序使用对比&lt;/h1>
&lt;h1 id="微信小程序">微信小程序&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">project.config.json -- 小程序项目配置文件：比如构建方式（es6、postcss等）、appid、项目名称等
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.json -- app.json 是当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages&amp;#34;&lt;/span>:&lt;span class="o">[&lt;/span> // 路径
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages/index/index&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages/logs/logs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;window&amp;#34;&lt;/span>:&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;backgroundTextStyle&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;light&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarBackgroundColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#fff&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTitleText&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;WeChat&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTextStyle&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;tabBar&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#999999&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;selectedColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#000000&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;backgroundColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#ffffff&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;list&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pagePath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;pages/index/index&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;信息流&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;iconPath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/static/feedUnselected.png&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;selectedIconPath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/static/feed.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.js -- 小程序入口，调用App&lt;span class="o">()&lt;/span>函数注册小程序
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * App&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * onLaunch: &lt;span class="k">function&lt;/span> &lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="o">}&lt;/span> // 监听小程序初始化，全局只触发一次
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.wxss -- wxss 在css上面扩充了一个自适应单位 rpx，整个屏幕宽度为750rpx；扩展了 @import &lt;span class="s2">&amp;#34;common.wxss&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> 方法可引入wxss文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /index -- 页面目录，这就比较随意了，直接放在pages下面也是阔以的；一个小程序页面包含 js/wxml/wxss/json 四个文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.js -- 在其中调用Page&lt;span class="o">()&lt;/span>方法初始化页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Page&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * data: &lt;span class="o">{&lt;/span> -- data 是页面第一次渲染使用的初始数据。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list: &lt;span class="o">[]&lt;/span> -- 在wxml中可使用 &lt;span class="o">{{&lt;/span> list &lt;span class="o">}}&lt;/span> 来获取
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * onLoad: &lt;span class="k">function&lt;/span> &lt;span class="o">(&lt;/span>query&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span> -- 页面加载时触发。一个页面只会调用一次，可通过query对象获取传递过来的参数
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * wx.showToast&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * title: &lt;span class="s1">&amp;#39;鹊桥测试&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * icon: &lt;span class="s1">&amp;#39;none&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * duration: &lt;span class="m">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * categoryChange: &lt;span class="k">function&lt;/span>&lt;span class="o">(&lt;/span>event&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * this.setData&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * noIndex: event.detail.value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.wxml -- 自定义的一套页面模板
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.wxss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.json -- 页面配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTitleText&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;自定义导航标题&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;usingComponents&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span> // 自定义组件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;Content&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/pages/index/components/content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/utils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> utils.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="自定义组件">自定义组件&lt;/h2>
&lt;p>微信小程序中的自定义组件也需要包含 js、wxml、wxcss【非必须】、json【非必须】四部分，JS 中需要调用 Component()方法进行初始化，例如：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// pages/index/components/content.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Component&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">properties&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="nx">对外暴露的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="nx">每个参数包含type&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">类型&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">初始值&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">observer&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">值变化时响应函数三部分&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">observer&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">oldVal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">changedPath&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setData&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">newVal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">config&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="nx">暴露的参数在wxml中可以通过&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="nx">content&lt;/span>&lt;span class="p">}}&lt;/span> &lt;span class="nx">来获取&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">observer&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">oldVal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">changedPath&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setData&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">config&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">newVal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="nx">组件内部数据&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="nx">组件中的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>自小程序基础库版本 2.2.3 版本开始，组件的的生命周期也可以在 lifetimes 字段中定义，且优先级最高。&lt;/p>
&lt;ul>
&lt;li>created 组件实例刚刚被创建时执行，此时不能调用 setData&lt;/li>
&lt;li>attached 在组件实例进入页面节点树时执行&lt;/li>
&lt;li>ready 在组件布局完成后执行&lt;/li>
&lt;li>moved 在组件实例被移动到节点树另一个位置时执行&lt;/li>
&lt;li>detached 在组件实例被从页面节点树移除时执行&lt;/li>
&lt;/ul>
&lt;p>在组件中可通过 pageLifetimes 来定义页面生命周期触发时组件的行为：&lt;/p>
&lt;ul>
&lt;li>show 组件所在的页面被展示时执行&lt;/li>
&lt;li>hide 组件所在的页面被隐藏时执行&lt;/li>
&lt;li>resize 组件所在的页面尺寸变化时执行，会传入 size&lt;/li>
&lt;/ul>
&lt;p>将组件传入自定义组件作为子组件，在 wxml 中提供了 slot 组件来替代传入的子组件（对应 react 中的 this.props.children），如果有多个 slot，则需要在组件的配置文件中 options 字段中开启 multipleSlots 为 true。&lt;/p>
&lt;h1 id="淘宝小程序">淘宝小程序&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">app.json -- app.json 是当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages&amp;#34;&lt;/span>:&lt;span class="o">[&lt;/span> // 路径
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages/index/index&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages/logs/logs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;window&amp;#34;&lt;/span>:&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;backgroundTextStyle&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;light&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarBackgroundColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#fff&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTitleText&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;WeChat&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTextStyle&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;tabBar&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#999999&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;selectedColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#000000&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;backgroundColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#ffffff&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;list&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pagePath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;pages/index/index&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;信息流&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;iconPath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/static/feedUnselected.png&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;selectedIconPath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/static/feed.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.js -- 小程序入口，调用App&lt;span class="o">()&lt;/span>函数注册小程序
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * App&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * onLaunch: &lt;span class="k">function&lt;/span> &lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="o">}&lt;/span> // 监听小程序初始化，全局只触发一次
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.acss -- acss 在css上面扩充了一个自适应单位 rpx，整个屏幕宽度为750rpx；
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /index -- 页面目录，这就比较随意了，直接放在pages下面也是阔以的；一个小程序页面包含 js/axml/acss/json 四个文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.js -- 在其中调用Page&lt;span class="o">()&lt;/span>方法初始化页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Page&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * data: &lt;span class="o">{&lt;/span> -- data 是页面第一次渲染使用的初始数据。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list: &lt;span class="o">[]&lt;/span> -- 在axml中可使用 &lt;span class="o">{{&lt;/span> list &lt;span class="o">}}&lt;/span> 来获取
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * categoryChange: &lt;span class="k">function&lt;/span>&lt;span class="o">(&lt;/span>event&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * this.setData&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * noIndex: event.detail.value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.axml -- 自定义的一套页面模板
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.acss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.json -- 页面配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTitleText&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;自定义导航标题&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;usingComponents&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span> // 自定义组件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;Content&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/pages/index/components/content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="支付宝小程序">支付宝小程序&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">app.json -- app.json 是当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages&amp;#34;&lt;/span>:&lt;span class="o">[&lt;/span> // 路径
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages/index/index&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pages/logs/logs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;window&amp;#34;&lt;/span>:&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;backgroundTextStyle&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;light&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarBackgroundColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#fff&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTitleText&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;WeChat&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTextStyle&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;tabBar&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#999999&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;selectedColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#000000&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;backgroundColor&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#ffffff&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;list&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;pagePath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;pages/index/index&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;text&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;信息流&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;iconPath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/static/feedUnselected.png&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;selectedIconPath&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/static/feed.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.js -- 小程序入口，调用App&lt;span class="o">()&lt;/span>函数注册小程序
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * App&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * onLaunch: &lt;span class="k">function&lt;/span> &lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="o">}&lt;/span> // 监听小程序初始化，全局只触发一次
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.acss -- acss 在css上面扩充了一个自适应单位 rpx，整个屏幕宽度为750rpx；
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /index -- 页面目录，这就比较随意了，直接放在pages下面也是阔以的；一个小程序页面包含 js/axml/acss/json 四个文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.js -- 在其中调用Page&lt;span class="o">()&lt;/span>方法初始化页面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Page&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * data: &lt;span class="o">{&lt;/span> -- data 是页面第一次渲染使用的初始数据。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list: &lt;span class="o">[]&lt;/span> -- 在axml中可使用 &lt;span class="o">{{&lt;/span> list &lt;span class="o">}}&lt;/span> 来获取
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * categoryChange: &lt;span class="k">function&lt;/span>&lt;span class="o">(&lt;/span>event&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * this.setData&lt;span class="o">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * noIndex: event.detail.value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.axml -- 自定义的一套页面模板
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.acss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.json -- 页面配置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /** 文件内容示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;navigationBarTitleText&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;自定义导航标题&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;usingComponents&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span> // 自定义组件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="s2">&amp;#34;Content&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/pages/index/components/content&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="自定义组件-1">自定义组件&lt;/h2>
&lt;p>支付宝小程序中的自定义组件也需要包含 js、axml、acss【非必须】、json【非必须】四部分，JS 中需要调用 Component()方法进行初始化，例如：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// pages/index/components/content.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Component&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mixins&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span> &lt;span class="nx">didMount&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">props&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">didUpdate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">prevProps&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">prevData&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">didUnmount&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">onMyClick&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ev&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">my&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">alert&lt;/span>&lt;span class="p">({});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">props&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onXX&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">ev&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e2&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>自定义的组件的生命周期：&lt;/p>
&lt;ul>
&lt;li>didMount 首次被渲染，通常在这时请求服务端数据&lt;/li>
&lt;li>didUpdate 组件被更新，一般是组件数据变更&lt;/li>
&lt;li>didUnmount 自定义组件被卸载&lt;/li>
&lt;/ul></description></item><item><title>转译与运行时</title><link>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E8%BD%AC%E8%AF%91%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%97%B6/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ng-tech.icu/books/web-series/4.%E8%B7%A8%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E8%BD%AC%E8%AF%91%E4%B8%8E%E8%BF%90%E8%A1%8C%E6%97%B6/</guid><description>&lt;h1 id="跨端解决方案">跨端解决方案&lt;/h1>
&lt;p>目前业界跨多端小程序统一开发框架已经有多种方案了，例如美团点评的 mpvue，京东的 Taro，去哪儿的 anu，淘宝的 Rax。&lt;/p>
&lt;h1 id="taro">Taro&lt;/h1>
&lt;p>Taro 遵循 React 语法规范，它采用与 React 一致的组件化思想，组件生命周期与 React 保持一致，同时支持使用 JSX 语法，让代码具有更丰富的表现力，使用 Taro 进行开发可以获得和 React 一致的开发体验。核心部分为编译工具，主要的功能是代码本身的转译以及各个平台 API 层面和自身组件的抹平。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/09/11/nw5Nxe.png" alt="Taro 组成" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>代码转译即借助于编译原理的力量是能够明确做到将 React 转成小程序代码的。将代码按照对应语法规则转换过去后，还远远不够，因为不同端会有自己的原生组件，端能力 API 等等，代码直接转换过去后，可能不能直接执行。为了弥补不同端的差异，他们订制好了一个统一的组件库标准，以及统一的 API 标准，同时还为不同的端编写相应的运行时框架，负责初始化等等操作。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/09/11/nw5rIP.png" alt="Taro 代码转译" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>这一套标准主要以三个部分组成，包括标准运行时框架、标准基础组件库、标准端能力 API，其中运行时框架和 API 对应 @taro/taro，组件库对应 @tarojs/components，通过在不同端实现这些标准，从而达到去差异化的目的。类比于手淘的 Rax，提供很多组件，大部分组件的能力都可以分别映射到 H5 和 weex 两端。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/09/11/nw5cRS.png" alt="Taro 库标准" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p>
&lt;p>结合组件库和 API 的能力，本地开发源码，经过代码编译成为目标代码，结合各端的运营时就可以达到了在多端适配的目的，真正的一套代码，多端运行。&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >&lt;img src="https://s2.ax1x.com/2019/09/11/nw5gxg.md.png" alt="Taro 多端运行时" loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>&lt;/p></description></item></channel></rss>