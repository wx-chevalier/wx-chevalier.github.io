<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="函数声明与闭包 参数 arguments JavaScript 的函数里面的 arguments 对象有 .lengh 属性和可以通过 [] 访问，但是确实从 Object.prototype 继承的。很多时候都会用 Array.prototype.slice.call(arguments) 或者 Array.from(arguments) 转成数组。Brendan Eich 本人也承认 arguments 的设计是因为当时只花了十天所以整得太糙了。在正式规范化" />

  
  <link rel="alternate" hreflang="zh" href="https://ng-tech.icu/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-40NYXJ8823");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://ng-tech.icu/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@wx-chevalier" />
    <meta property="twitter:creator" content="@wx-chevalier" />
  
  <meta property="og:site_name" content="Next-gen Tech Edu" />
  <meta property="og:url" content="https://ng-tech.icu/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E/" />
  <meta property="og:title" content="函数声明 | Next-gen Tech Edu" />
  <meta property="og:description" content="函数声明与闭包 参数 arguments JavaScript 的函数里面的 arguments 对象有 .lengh 属性和可以通过 [] 访问，但是确实从 Object.prototype 继承的。很多时候都会用 Array.prototype.slice.call(arguments) 或者 Array.from(arguments) 转成数组。Brendan Eich 本人也承认 arguments 的设计是因为当时只花了十天所以整得太糙了。在正式规范化" /><meta property="og:image" content="https://ng-tech.icu/media/sharing.png" />
    <meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
    
  

  



  

  

  





  <title>函数声明 | Next-gen Tech Edu</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="2f1f8bcee091b0f5d76697e0afdda484" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Next-gen Tech Edu</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/books-gallery"><span>笔记（万篇）</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#knowledge-map"><span>知识图谱</span></a>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>实验室</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/galaxy-home/gh-craft"><span>Craft 方块世界</span></a>
              
                <a class="dropdown-item" href="/galaxy-home/glossary-cards"><span>3D 知识卡牌</span></a>
              
            </div>
          </li>

          
          

          
          <style>
            .dropdown-item{
              display: inline-flex;
            }
          </style>
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>其他阅读渠道</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png"></img><span>知乎</span></a>
              
                <a class="dropdown-item" href="https://segmentfault.com/blog/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png"></img><span>SegmentFault</span></a>
              
                <a class="dropdown-item" href="https://zhuanlan.zhihu.com/wxyyxc1992"><img style="width:16px;height:16px;display:inline-block;margin-right:8px" src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png"></img><span>掘金</span></a>
              
            </div>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/wx-chevalier" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        
        
        <div></div>
        
        <style>
        @media only screen and (max-width: 600px) {
          .jimmysong-template {
            display: none!important;
          }
        }
        </style>
        
        <li class="jimmysong-template" style="color: white;font-size: 12px;">
          <a href="https://jimmysong.io" style="color: white">By Jimmy Song's Template</a>
        </li>
      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">
<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          函数
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      <ul class="nav docs-sidenav">
        <li style="display: inline-flex">
          <a style="cursor: pointer;" onclick="window.history.back()">
            <i class="fas fa-arrow-left pr-1"></i>
            Back
          </a>
          <span>|</span>
          <a href="/books/">
            <i class="fa-solid fa-house" style="margin-right: 4px"></i>
            Books
          </a>
        </li>
      </ul>

      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id96c5edf64b704dc3addfaa66c5372cad&#34;)" href="#id96c5edf64b704dc3addfaa66c5372cad" aria-expanded="false" aria-controls="id96c5edf64b704dc3addfaa66c5372cad" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/">语法基础</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id96c5edf64b704dc3addfaa66c5372cad" aria-expanded="false" aria-controls="id96c5edf64b704dc3addfaa66c5372cad">
    
    <i class="fa-solid fa-angle-down" id="caret-id96c5edf64b704dc3addfaa66c5372cad"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id96c5edf64b704dc3addfaa66c5372cad">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id5d3b6a29ab9b777cf4e1ec1619d53612&#34;)" href="#id5d3b6a29ab9b777cf4e1ec1619d53612" aria-expanded="false" aria-controls="id5d3b6a29ab9b777cf4e1ec1619d53612" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/">ECMAScript</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id5d3b6a29ab9b777cf4e1ec1619d53612" aria-expanded="false" aria-controls="id5d3b6a29ab9b777cf4e1ec1619d53612">
    
        <i class="fa-solid fa-angle-right" id="caret-id5d3b6a29ab9b777cf4e1ec1619d53612"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id5d3b6a29ab9b777cf4e1ec1619d53612">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es10-%E7%89%B9%E6%80%A7/">ES10 特性</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es6-%E7%89%B9%E6%80%A7/">ES6 特性</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es8-%E7%89%B9%E6%80%A7/">ES8 特性</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es9-%E7%89%B9%E6%80%A7/">ES9 特性</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-iddb127bdde76d500942c08167cad6cfc8&#34;)" href="#iddb127bdde76d500942c08167cad6cfc8" aria-expanded="false" aria-controls="iddb127bdde76d500942c08167cad6cfc8" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/">变量操作</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#iddb127bdde76d500942c08167cad6cfc8" aria-expanded="false" aria-controls="iddb127bdde76d500942c08167cad6cfc8">
    
        <i class="fa-solid fa-angle-right" id="caret-iddb127bdde76d500942c08167cad6cfc8"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="iddb127bdde76d500942c08167cad6cfc8">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/">变量赋值</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E6%8B%B7%E8%B4%9D/">变量拷贝</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E/">变量声明</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F/">变量作用域</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E6%8F%90%E5%8D%87/">执行上下文与提升</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0a65f9942ed5e034550b53d6df6e1f3d&#34;)" href="#id0a65f9942ed5e034550b53d6df6e1f3d" aria-expanded="false" aria-controls="id0a65f9942ed5e034550b53d6df6e1f3d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/">函数</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0a65f9942ed5e034550b53d6df6e1f3d" aria-expanded="false" aria-controls="id0a65f9942ed5e034550b53d6df6e1f3d">
    
    <i class="fa-solid fa-angle-down" id="caret-id0a65f9942ed5e034550b53d6df6e1f3d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id0a65f9942ed5e034550b53d6df6e1f3d">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E9%97%AD%E5%8C%85/">闭包</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8/">迭代器与生成器</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8E-this-%E7%BB%91%E5%AE%9A/">函数调用与 this 绑定</a></li>




  <li class="child level active"><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E/">函数声明</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E9%99%90%E6%B5%81/">限流</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E8%A3%85%E9%A5%B0%E5%99%A8/">装饰器</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id6488b3e3a914a9296e2658cf2b9aa0c1&#34;)" href="#id6488b3e3a914a9296e2658cf2b9aa0c1" aria-expanded="false" aria-controls="id6488b3e3a914a9296e2658cf2b9aa0c1" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/">类与对象</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id6488b3e3a914a9296e2658cf2b9aa0c1" aria-expanded="false" aria-controls="id6488b3e3a914a9296e2658cf2b9aa0c1">
    
        <i class="fa-solid fa-angle-right" id="caret-id6488b3e3a914a9296e2658cf2b9aa0c1"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id6488b3e3a914a9296e2658cf2b9aa0c1">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/es6-class/">ES6 Class</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E7%B1%BB%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E5%AE%9E%E4%BE%8B%E5%8C%96/">类的封装与实例化</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF/">原型链与类的继承</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id00821db9670793f71f56fa812b5ae614&#34;)" href="#id00821db9670793f71f56fa812b5ae614" aria-expanded="false" aria-controls="id00821db9670793f71f56fa812b5ae614" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">流程控制</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id00821db9670793f71f56fa812b5ae614" aria-expanded="false" aria-controls="id00821db9670793f71f56fa812b5ae614">
    
        <i class="fa-solid fa-angle-right" id="caret-id00821db9670793f71f56fa812b5ae614"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id00821db9670793f71f56fa812b5ae614">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">流程控制</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/">条件判断</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">异常处理</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc28e1feab6e85ccb3f64f4e293a116c7&#34;)" href="#idc28e1feab6e85ccb3f64f4e293a116c7" aria-expanded="false" aria-controls="idc28e1feab6e85ccb3f64f4e293a116c7" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A8%A1%E5%9D%97%E5%8C%96/">模块化</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc28e1feab6e85ccb3f64f4e293a116c7" aria-expanded="false" aria-controls="idc28e1feab6e85ccb3f64f4e293a116c7">
    
        <i class="fa-solid fa-angle-right" id="caret-idc28e1feab6e85ccb3f64f4e293a116c7"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idc28e1feab6e85ccb3f64f4e293a116c7">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A8%A1%E5%9D%97%E5%8C%96/es-modules/">ES Modules</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A8%A1%E5%9D%97%E5%8C%96/%E6%A8%A1%E5%9D%97%E6%BC%94%E5%8C%96/">模块演化</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd872b7dab95e00da6c707a2fa4b0cd95&#34;)" href="#idd872b7dab95e00da6c707a2fa4b0cd95" aria-expanded="false" aria-controls="idd872b7dab95e00da6c707a2fa4b0cd95" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd872b7dab95e00da6c707a2fa4b0cd95" aria-expanded="false" aria-controls="idd872b7dab95e00da6c707a2fa4b0cd95">
    
        <i class="fa-solid fa-angle-right" id="caret-idd872b7dab95e00da6c707a2fa4b0cd95"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd872b7dab95e00da6c707a2fa4b0cd95">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/">基本类型</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E4%B8%8E%E8%BD%AC%E6%8D%A2/">类型判断与转换</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id6286a221e8b17f171f718879574d6bfe&#34;)" href="#id6286a221e8b17f171f718879574d6bfe" aria-expanded="false" aria-controls="id6286a221e8b17f171f718879574d6bfe" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/">时间与日期</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id6286a221e8b17f171f718879574d6bfe" aria-expanded="false" aria-controls="id6286a221e8b17f171f718879574d6bfe">
    
        <i class="fa-solid fa-angle-right" id="caret-id6286a221e8b17f171f718879574d6bfe"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id6286a221e8b17f171f718879574d6bfe">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/date/">Date</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/dayjs/">Dayjs</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/moment.js/">Moment.js</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E8%A7%86%E5%9B%BE%E7%B1%BB%E5%9E%8B/">视图类型</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd6a2fb9647df9534af3fe8010772081e&#34;)" href="#idd6a2fb9647df9534af3fe8010772081e" aria-expanded="false" aria-controls="idd6a2fb9647df9534af3fe8010772081e" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E7%BC%96%E7%A0%81/">字符串与编码</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd6a2fb9647df9534af3fe8010772081e" aria-expanded="false" aria-controls="idd6a2fb9647df9534af3fe8010772081e">
    
        <i class="fa-solid fa-angle-right" id="caret-idd6a2fb9647df9534af3fe8010772081e"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd6a2fb9647df9534af3fe8010772081e">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E7%BC%96%E7%A0%81/%E7%BC%96%E8%A7%A3%E7%A0%81/">编解码</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd237b1a103009bc63624a9f45d78d1c6&#34;)" href="#idd237b1a103009bc63624a9f45d78d1c6" aria-expanded="false" aria-controls="idd237b1a103009bc63624a9f45d78d1c6" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/">元编程</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd237b1a103009bc63624a9f45d78d1c6" aria-expanded="false" aria-controls="idd237b1a103009bc63624a9f45d78d1c6">
    
        <i class="fa-solid fa-angle-right" id="caret-idd237b1a103009bc63624a9f45d78d1c6"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd237b1a103009bc63624a9f45d78d1c6">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idb07145a6b61c37592ec58c7350ea7485&#34;)" href="#idb07145a6b61c37592ec58c7350ea7485" aria-expanded="false" aria-controls="idb07145a6b61c37592ec58c7350ea7485" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/proxy/">Proxy</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idb07145a6b61c37592ec58c7350ea7485" aria-expanded="false" aria-controls="idb07145a6b61c37592ec58c7350ea7485">
    
        <i class="fa-solid fa-angle-right" id="caret-idb07145a6b61c37592ec58c7350ea7485"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idb07145a6b61c37592ec58c7350ea7485">
      



  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/proxy/%E6%A1%88%E4%BE%8B-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/">案例-状态管理工具</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/reflect/">Reflect</a></li>




  <li class="child level "><a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/">数据绑定</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#arguments">arguments</a></li>
  </ul>

  <ul>
    <li><a href="#将异步获取值保留到新增的闭包中">将异步获取值保留到新增的闭包中</a></li>
    <li><a href="#将变量值保留到作用域之外">将变量值保留到作用域之外</a></li>
  </ul>

  <ul>
    <li><a href="#参数-1">参数</a>
      <ul>
        <li><a href="#arguments-自动注入的参数对象">Arguments: 自动注入的参数对象</a></li>
        <li><a href="#默认参数与可选参数">默认参数与可选参数</a></li>
        <li><a href="#required-parameters-必要参数">Required Parameters: 必要参数</a></li>
      </ul>
    </li>
    <li><a href="#anonymous匿名函数">Anonymous：匿名函数</a></li>
  </ul>

  <ul>
    <li><a href="#applycall">apply&amp;call</a>
      <ul>
        <li><a href="#使用-callapply-来用-array-的方法处理-array-like-对象">使用 call/apply 来用 Array 的方法处理 Array-Like 对象</a></li>
      </ul>
    </li>
    <li><a href="#iife---immediately-invoked-function-expression">IIFE - Immediately Invoked Function Expression</a></li>
    <li><a href="#不使用括号调用函数">不使用括号调用函数</a></li>
    <li><a href="#lambdaarrow-function">Lambda:Arrow Function</a></li>
  </ul>
</nav>

      
<div class="subscribe-module col-24 mt-1">
    <img src="https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png" alt="image" title="王下邀月熊的微信公众号"/>
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>函数声明</h1>

          <div class="article-style">
            <h1 id="函数声明与闭包">函数声明与闭包</h1>
<h1 id="参数">参数</h1>
<h2 id="arguments">arguments</h2>
<p>JavaScript 的函数里面的 arguments 对象有 .lengh 属性和可以通过 [] 访问，但是确实从 Object.prototype 继承的。很多时候都会用 Array.prototype.slice.call(arguments) 或者 Array.from(arguments) 转成数组。Brendan Eich 本人也承认 arguments 的设计是因为当时只花了十天所以整得太糙了。在正式规范化 JavaScript 的时候，Microsoft 曾经有人提出把 arguments 改成真正的 Array，BE 本人甚至都打算动手改实现了，但是 MS 那边回去商量了下又回来觉得多一事不如少一事，不改了。于是这个糟糕的设计就从此成为了规范 &hellip; 这是 1997 年的第一版 ES 规范。</p>
<p>除了 arguments.callee 之外，还有一个神奇的 quirk，那就是 arguments 和实际的参数变量之间的迷之绑定。规范里是这么说的：</p>
<p>In the case when iarg is less than the number of formal parameters for the function object, this property shares its value with the corresponding property of the activation object. This means that changing this property changes the corresponding property of the activation object and vice versa. The value sharing mechanism depends on the implementation.</p>
<p>换言之，假设一个函数的第一个参数是 a，当你修改 a 的值的时候，arguments[0] 也会同步变化：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">a</span><span class="p">);</span> <span class="c1">// -&gt; true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// -&gt; 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 修改 arguments
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// -&gt; 10
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 修改参数变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">a</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// -&gt; 20
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span></code></pre></div><p>后面的事情你也知道了，ES 规范是要向后兼容的，而且上面的这个 quirk 使得它在引擎实现中需要很多特殊处理，一旦改动，兼容性影响巨大，所以它永远也改不了了。据说在 ES5 讨论时也有人提出要把 arguments 改成 Array 的 subclass，但是很快就不了了之，只是在 strict mode 下对 arguments.callee 和上面的绑定 quirk 进行了限制。直到 ES6 终于对 arguments 提供了一个替代品 - rest parameters:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">foo</span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 这里 args 终于是真正的 Array 了！
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>BE 本人并没有提到为什么一开始会把 arguments 设计成对象，因此我们也只能做猜测。但一个合理的推测是，ES1 里面的 Array.prototype 其实很弱，只有四个方法：toString, join, reverse 和 sort - 连 push, pop, shift, unshift, splice 都没有！而 forEach, filter, map, reduce 这些有用的方法更是 ES5 才添加进来的。所以当时 arguments 就算真的继承自 Array 貌似也没什么大用，所以就这样被放过了 &hellip; 当然，这只是我们的猜测，估计 BE 自己今天也说不清自己当时为什么这么干的了吧。</p>
<h1 id="closure-闭包">Closure: 闭包</h1>
<ul>
<li>
<p>A closure is a function that has access to the parent scope, even after the scope has closed.</p>
</li>
<li>
<p>A closure is the combination of a function and the lexical environment within which that function was declared.</p>
</li>
</ul>
<h1 id="closure">Closure</h1>
<p>闭包本身是含有自由变量的代码块，在 JavaScript 中我们常用的闭包则是本身的词法作用域与变量保留相结合的表现，首先回顾下一个基本的词法作用域的用法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;Mozilla&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">displayName</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">displayName</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">init</span><span class="p">();</span>
</span></span></code></pre></div><p>函数 init() 创建了一个局部变量 name，然后定义了名为 displayName() 的函数。displayName() 是一个内部函数：定义于 init() 之内且仅在该函数体内可用。displayName() 没有任何自己的局部变量，然而它可以访问到外部函数的变量，即可以使用父函数中声明的 name 变量。注意，这里是直接执行外部的 init 函数，下面看一个闭包的例子</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">makeFunc</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;Mozilla&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">displayName</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">displayName</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">myFunc</span> <span class="o">=</span> <span class="nx">makeFunc</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">myFunc</span><span class="p">();</span>
</span></span></code></pre></div><p>运行这段代码的效果和之前的 init() 示例完全一样：字符串 &ldquo;Mozilla&rdquo; 将被显示在一个 JavaScript 警告框中。其中的不同 — 也是有意思的地方 — 在于 displayName() 内部函数在执行前被从其外围函数中返回了。这段代码看起来别扭却能正常运行。通常，函数中的局部变量仅在函数的执行期间可用。一旦 makeFunc() 执行过后，我们会很合理的认为 name 变量将不再可用。虽然代码运行的没问题，但实际并不是这样的。这个谜题的答案是 myFunc 变成一个闭包了。闭包是一种特殊的对象。它由两部分构成：函数，以及创建该函数的环境。环境由闭包创建时在作用域中的任何局部变量组成。在我们的例子中，myFunc 是一个闭包，由 displayName 函数和闭包创建时存在的 &ldquo;Mozilla&rdquo; 字符串形成。</p>
<h1 id="避免闭包">避免闭包</h1>
<p>在真实的开发中我们常常会使用闭包这一变量保留的特性来传递变量到异步函数中，不过闭包也往往会使程序出乎我们的控制，譬如在下面这个简单的循环中，我们本希望能够打印出 0~9 这几个数</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">),</span> <span class="mi">1000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>不过所有输入的 i 的值都是 10，这与我们的期望产生了很大的偏差。因此我们在部分情况下需要破坏闭包而获取真实的变量值。</p>
<h2 id="将异步获取值保留到新增的闭包中">将异步获取值保留到新增的闭包中</h2>
<p>我们可以考虑加一层闭包，将 i 以函数参数形式传递给内层函数：</p>
<pre tabindex="0"><code>    function init3() {
      const pAry = document.getElementsByTagName(&#34;p&#34;);
      for( const i=0; i&lt;pAry.length; i++ ) {
       (function(arg){
           pAry[i].onclick = function() {
              alert(arg);
           };
       })(i);//调用时参数
      }
    }
</code></pre><p>或者在新增的闭包中将<code>i</code>以局部变量形式传递给内部函数中</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">init4</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pAry</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pAry</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span> <span class="c1">//调用时局部变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">pAry</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">alert</span><span class="p">(</span><span class="nx">temp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">})();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="将变量值保留到作用域之外">将变量值保留到作用域之外</h2>
<p>在 DOM 环境中，我们可以将变量值存储到要操作的 DOM 对象中</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pAry</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pAry</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pAry</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pAry</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>也可以将变量<code>i</code>保存在匿名函数本身</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">init2</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">pAry</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pAry</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">pAry</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">alert</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}).</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">fun</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">fun</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">fun</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nx">fun</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">//undefined,0,1,2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/*一开始fun(n=undefined,o=undefined)*/</span>
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">    const b = fun(n=0,o=undefined); 执行后,相对应改变局部变量n和o.
</span></span></span><span class="line"><span class="cl"><span class="cm">    执行console.log(undefined),返回:
</span></span></span><span class="line"><span class="cl"><span class="cm">    const b={
</span></span></span><span class="line"><span class="cl"><span class="cm">        fun:执行fun(n=1,o=0);console.log(0),返回:{
</span></span></span><span class="line"><span class="cl"><span class="cm">            fun:执行fun(n=2,o=1);console.log(1),返回:{
</span></span></span><span class="line"><span class="cl"><span class="cm">                fun:执行fun(n=3,o=2);console.log(2),返回:{
</span></span></span><span class="line"><span class="cl"><span class="cm">                    fun:function(3){
</span></span></span><span class="line"><span class="cl"><span class="cm">                        return fun(m,3)由于没有执行所以n不会赋值为undefined,o也不会赋值为3
</span></span></span><span class="line"><span class="cl"><span class="cm">                    }
</span></span></span><span class="line"><span class="cl"><span class="cm">                }
</span></span></span><span class="line"><span class="cl"><span class="cm">            }
</span></span></span><span class="line"><span class="cl"><span class="cm">        }
</span></span></span><span class="line"><span class="cl"><span class="cm">    }
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></div><h1 id="javascript-function">JavaScript Function</h1>
<p>在 ES5 中，可以利用<code>function</code>关键字声明一个函数。<code>(function() {})()</code> 这种定义方式，完全等价于 <code>(function() {}).call(window [ES5-strict: undefined)</code>这种方式。注意，在 ES5 以及之前的语法中，经常将 Function 作为类或者类的某种实现手段，不过鉴于 ES6 中已经引入了完整的 Class 的概念，所以这里将全部的 Function 以及相关概念放到了本章。</p>
<h1 id="function-params-函数参数">Function Params: 函数参数</h1>
<blockquote>
</blockquote>
<h2 id="参数-1">参数</h2>
<h3 id="arguments-自动注入的参数对象">Arguments: 自动注入的参数对象</h3>
<p>在 NodeJS 中，会自动在函数内注入一个 arguments 对象：</p>
<pre tabindex="0"><code>(() =&gt; arguments)(1, 2, 3) // =&gt; uncaught reference error (function() { return arguments; })(1, 2, 3) // [1, 2, 3]
</code></pre><p>而在 ES6 中，可以使用扩展运算符来方便地获取全部的参数：</p>
<pre tabindex="0"><code>((...args) =&gt; args)(1, 2, 3) // =&gt; [1,2,3]
</code></pre><h3 id="默认参数与可选参数">默认参数与可选参数</h3>
<p>当我们构造一个提供配置的对象，并且需要这个对象的属性携带默认值时，解构特性就派上用场了。举个例子，jQuery 的<code>ajax</code>函数使用一个配置对象作为它的第二参数，我们可以这样重写函数定义：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">url</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">beforeSend</span> <span class="o">=</span> <span class="nx">noop</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cache</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">complete</span> <span class="o">=</span> <span class="nx">noop</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">crossDomain</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">global</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... 更多配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ... do stuff
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></div><p>同样，解构也可以应用在函数的多重返回值中，可以类似于其他语言中的元组的特性：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">returnMultipleValues</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">[</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">]</span> <span class="o">=</span> <span class="nx">returnMultipleValues</span><span class="p">();</span>
</span></span></code></pre></div><h4 id="单纯可选参数">单纯可选参数</h4>
<ul>
<li><a href="https://github.com/loverajoel/jstips/blob/gh-pages/_posts/en/2016-05-06-use-optional-arguments.md" target="_blank" rel="noopener">2016-05-06-use-optional-arguments</a></li>
</ul>
<p>上面所讲的，都是基于默认参数构造出的可选参数，而如果需要使用扁平化的可选参数，可以借鉴如下实现：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">example</span><span class="p">(</span> <span class="nx">err</span><span class="p">,</span> <span class="nx">optionalA</span><span class="p">,</span> <span class="nx">optionalB</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// retrieve arguments as arrayvar args = new Array(arguments.length);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span><span class="p">(</span><span class="kr">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// first argument is the error object// shift() removes the first item from the// array and returns it
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">err</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// if last argument is a function then its the callback function.// pop() removes the last item in the array// and returns itif (typeof args[args.length-1] === &#39;function&#39;) {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// if args still holds items, these are// your optional items which you could// retrieve one by one like this:if (args.length &gt; 0) optionalA = args.shift(); else optionalA = null;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">optionalB</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="k">else</span> <span class="nx">optionalB</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// continue as usual: check for errorsif (err) {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// for tutorial purposes, log the optional parametersconsole.log(&#39;optionalA:&#39;, optionalA);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;optionalB:&#39;</span><span class="p">,</span> <span class="nx">optionalB</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;callback:&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="cm">/* do your thing */</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ES6 with shorter, more terse codefunction example(...args) {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// first argument is the error objectconst err = args.shift();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// if last argument is a function then its the callback functionconst callback = (typeof args[args.length-1] === &#39;function&#39;) ? args.pop() : null;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">// if args still holds items, these are your optional items which you could retrieve one by one like this:const optionalA = (args.length &gt; 0) ? args.shift() : null;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">const</span> <span class="nx">optionalB</span> <span class="o">=</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ... repeat for more itemsif (err &amp;&amp; callback) return callback(err);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* do your thing */</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// invoke example function with and without optional argumentsexample(null, &#39;AA&#39;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="nx">example</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>   <span class="cm">/* do something */</span>    <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">example</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;AA&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">example</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;AAAA&#39;</span><span class="p">,</span> <span class="s1">&#39;BBBB&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{});</span>
</span></span></code></pre></div><h3 id="required-parameters-必要参数">Required Parameters: 必要参数</h3>
<p>在 ECMAScript 5 中，如果你希望函数调用者填入一个必要参数，那么你可能会手动判断参数对象的长度等：</p>
<pre tabindex="0"><code>function foo(mustBeProvided) {
    if (arguments.length &lt; 1) {
        throw new Error();
    }
    if (! (0 in arguments)) {
        throw new Error();
    }
    if (mustBeProvided === undefined) {
        throw new Error();
    }
    ···
}
</code></pre><p>而在 ECMAScript 6 中，你可以使用默认值机制，即将某个参数的默认值定义为抛出异常的函数，即如下：</p>
<pre tabindex="0"><code>/**
 * Called if a parameter is missing and
 * the default value is evaluated.
 */
function mandatory() {
    throw new Error(&#39;Missing parameter&#39;);
}
function foo(mustBeProvided = mandatory()) {
    return mustBeProvided;
}
</code></pre><p>Interaction:</p>
<pre tabindex="0"><code>&gt; foo()
Error: Missing parameter
&gt; foo(123)
123
</code></pre><h2 id="anonymous匿名函数">Anonymous：匿名函数</h2>
<p>在 ES5 中，可以用<code>myFunction = function(){}</code>的方式来声明一个匿名函数，而 ES6 中，可以用类似于 Lambda 的 Arrow 方式来声明一个匿名表达式。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Expression bodies
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">odds</span> <span class="o">=</span> <span class="nx">evens</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="nx">evens</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">v</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">pairs</span> <span class="o">=</span> <span class="nx">evens</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span> <span class="nx">even</span><span class="o">:</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">odd</span><span class="o">:</span> <span class="nx">v</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Statement bodies
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">nums</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">fives</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>不过不同于 ES5 中的以 function 关键字声明的方式，Arrow 方式是会与外层共享 this 指针的，其效果如下所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Lexical this
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">bob</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_name</span><span class="o">:</span> <span class="s2">&#34;Bob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">_friends</span><span class="o">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">printFriends</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_friends</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">f</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">+</span> <span class="s2">&#34; knows &#34;</span> <span class="o">+</span> <span class="nx">f</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h1 id="invoke-函数调用-">Invoke( 函数调用 )</h1>
<pre tabindex="0"><code>常见的Function调用方式即是```FunctionName(args)```，也可以利用apply与call方式进行调用。
</code></pre><h2 id="applycall">apply&amp;call</h2>
<ul>
<li>Function.apply(obj,args) 方法能接收两个参数</li>
</ul>
<blockquote>
<p>obj：这个对象将代替 Function 类里 this 对象</p>
<p>args：这个是数组，它将作为参数传给 Function(args&ndash;&gt;arguments )</p>
</blockquote>
<ul>
<li>Function.call(obj,[param1[,param2[,…[,paramN]]]])</li>
</ul>
<blockquote>
<p>obj：这个对象将代替 Function 类里 this 对象</p>
<p>params：这个是一个参数列表</p>
</blockquote>
<p>在 JavaScript 中函数也是对象，对象则有方法，apply 和 call 就是函数对象的方法。这两个方法异常强大，他们允许切换函数执行的上下文环境(context )，即 this 绑定的对象。很多 JavaScript 中的技巧以及类库都用到了该方法。让我们看一个具体的例子：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">moveTo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">以Math</span><span class="p">.</span><span class="nx">max为例</span><span class="err">：</span>
</span></span></code></pre></div><p>Math.max(arr[0],arr[1]); Math.prototype.max.call(Math,arr[0],arr[1]); Math.prototype.max.apply(Math,arr);</p>
<pre tabindex="0"><code> const p1 = new Point(0, 0);
 const p2 = {x: 0, y: 0};
 p1.moveTo(1, 1);
 p1.moveTo.apply(p2, [10, 10]);
</code></pre><h3 id="使用-callapply-来用-array-的方法处理-array-like-对象">使用 call/apply 来用 Array 的方法处理 Array-Like 对象</h3>
<p>笔者之前一直有个疑问，就是从面向对象的思路上来说，调用对象的某个方法应该是用 obj.function()，但是在 JS 的很多类库中，笔者是发现更多人愿意用 <code>obj.Prototype.function.call(obj)</code>这种方式，为此笔者还特意在<a href="https://www.reddit.com/r/javascript/comments/4ijyxm/why_use_functioncall_rather_than_direct_invoke/" target="_blank" rel="noopener">Reddit</a>上问了个问题，在这里把大概的解释如下。这种情况更多的是出现在对于非 Array 对象而类似于 Array 对象的 Object 上使用一系列 Array 的函数，譬如：</p>
<pre tabindex="0"><code>const items = {  length: 2,  0: &#39;bob&#39;,  1: &#39;joe&#39; };
console.log(items.forEach); // =&gt; undefined
[].forEach.call(items, x =&gt; console.log(x)) // =&gt; bob =&gt; joe
</code></pre><p>而在具体的编程中，这种 Array-Like 的数组大概有如下几种情况：( 1)函数调用时的 arguments</p>
<pre tabindex="0"><code>// arguments.length is an integer, this doesn&#39;t leak the arguments object itself
const args = new Array(arguments.length);
for(const i = 0; i &lt; args.length; ++i) {
   // i is always valid index in the arguments object, preventing another deoptimization.
   args[i] = arguments[i];
}
</code></pre><p>(2 )在 DOM 编程中的 NodeList 可以参考<a href="http://codepen.io/anon/pen/RaveMO?editors=1010" target="_blank" rel="noopener">CodePen</a>：</p>
<pre tabindex="0"><code>console.clear();

const divs = document.getElementsByTagName(&#34;DIV&#34;);
console.dir(divs.__proto__); //HTMLCollection
//If it were an array, then proto would be &#34;Array&#34;

const arr = [1, 2, 3, 4];
console.dir(arr.__proto__); //Array[0]
//Yep.

//And the slice method won&#39;t even work with divs because the HTMLCollection prototype doesn&#39;t have that method

//divs.slice(); //Uncaught TypeError: divs.slice is not a function
//:(

//Now, through the magic of [].slice.call(), we can make divs an array...

divs = [].slice.call(divs);
console.dir(divs.__proto__); //Array[0]
//Bingo!

//Now...

const lastCouple = divs.slice(2);
console.dir(lastCouple); //Array[2]
//slice works now!
</code></pre><h2 id="iife---immediately-invoked-function-expression">IIFE - Immediately Invoked Function Expression</h2>
<p>Called as &ldquo;Iffy&rdquo; ( IIFE - immediately invoked function expression) is an anonymous function expression that is immediately invoked and has some important uses in Javascript.</p>
<pre tabindex="0"><code>(function() {
 // Do something
 }
)()
</code></pre><p>It is an anonymous function expression that is immediately invoked, and it has some particularly important uses in JavaScript.</p>
<p>The pair of parenthesis surrounding the anonymous function turns the anonymous function into a function expression or variable expression. So instead of a simple anonymous function in the global scope, or wherever it was defined, we now have an unnamed function expression.</p>
<p>Similarly, we can even create a named, immediately invoked function expression:</p>
<pre tabindex="0"><code>(someNamedFunction = function(msg) {
    console.log(msg || &#34;Nothing for today !!&#34;)
    }) (); // Output --&gt; Nothing for today !!

someNamedFunction(&#34;Javascript rocks !!&#34;); // Output --&gt; Javascript rocks !!
someNamedFunction(); // Output --&gt; Nothing for today !!
</code></pre><p>不过 IIFE 最常见的用法就是希望能够将变量的作用范围限定在块作用域内，而在 ES6 中我们已经可以使用<code>let</code>关键字来创建块级别的作用域而不需要再使用这种 IIFE 的方式：</p>
<pre tabindex="0"><code>(function () {
    const food = &#39;Meow Mix&#39;;
}());

console.log(food); // Reference Error
</code></pre><p>使用 ES6 的块</p>
<pre tabindex="0"><code>{
    let food = &#39;Meow Mix&#39;;
}

console.log(food); // Reference Error
</code></pre><h2 id="不使用括号调用函数">不使用括号调用函数</h2>
<p>(1 )作为构造器调用利用<code>new</code>关键字可以不带括号地调用函数：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Greet</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;hello&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">new</span> <span class="nx">Greet</span><span class="p">();</span> <span class="c1">// parentheses are optional in this construct.
</span></span></span></code></pre></div><p><code>new</code>操作符的语法为：</p>
<pre tabindex="0"><code>new constructor[([arguments])]
</code></pre><p>( 2)隐性实现 toString 或者 valueOf 的调用另一个例子就可以隐性调用<code>toString</code>或者<code>valueOf</code>方法</p>
<pre tabindex="0"><code>const greet = {
    toString: function() {
         return &#39;hello&#39;;
    }
}

greet + &#39;&#39;; // 字符串连接会强制性转化到String类型，这样就隐性调用了toString
</code></pre><p>可以利用这种方式调用任意的函数</p>
<pre tabindex="0"><code>function func() {
    console.log(&#39;hello&#39;);
}

const greet = {
    toString: func
}

greet + &#39;&#39;;
</code></pre><p>或者使用 <code>valueOf</code>:</p>
<pre tabindex="0"><code>function func() {
    console.log(&#39;hello&#39;);
}

const greet = {
    valueOf: func
}

+greet;
</code></pre><p>如果要使用 valueOf 的话，可以在 Function 的原型中完成复写，这样也能完成一个函数的传递：</p>
<pre tabindex="0"><code>Function.prototype.valueOf = function() {
    this.call(this);
    // Optional improvement: avoid `NaN` issues when used in expressions.
    return 0;
};
</code></pre><pre tabindex="0"><code>function greet() {
    console.log(&#39;hello&#39;);
}

+greet;
</code></pre><p>( 3)Iterators 可以利用 * 操作符创建一个迭代器，然后在下一个元素被遍历的时候就会被自动调用了：</p>
<pre tabindex="0"><code>function* func() {
    console.log(&#39;hello&#39;);
}

const greet = {};
greet[Symbol.iterator] = func;

[...greet];
</code></pre><p>一般来说用迭代器的时候都会附带一个<code>yield</code>语句，但是在这边希望调用某个函数的时候不一定要加上这个语句。上述代码中是最后一个语句调用了函数，同时也可以利用解构赋值来进行调用</p>
<pre tabindex="0"><code>[,] = greet;
</code></pre><p>或者使用 for &hellip; of 结构</p>
<pre tabindex="0"><code>for ({} of greet);
</code></pre><p>(4 ) Getters</p>
<pre tabindex="0"><code>function func() {
    console.log(&#39;hello&#39;);
}

Object.defineProperty(window, &#39;greet&#39;, { get: func });

greet;
</code></pre><p>也可以利用<code>Object.assign</code>:</p>
<pre tabindex="0"><code>Object.assign(window, { get greet() {
    console.log(&#39;hello&#39;);
}});
greet;
</code></pre><p>全局将 <code>window</code> 对象替换成一个你自定义的全局对象。</p>
<ol start="5">
<li>Tagged Template Literals</li>
</ol>
<p>ES6 中可以利用模板字符串的方式调用：</p>
<pre tabindex="0"><code>function greet() {
    console.log(&#39;hello&#39;);
}

greet``;
</code></pre><h2 id="lambdaarrow-function">Lambda:Arrow Function</h2>
<p>Arrow Function 是 ES6 新增的特性，很类似于 Java 或者 C# 中的 Lambda 表达式。Arrow 函数中的 this 指针在创建时就被绑定到了闭合的作用域内，不会受到 new、bind、call 以及 apply 这些方法的影响。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">traditionalFunc</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Normal function, bound as expected
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;traditionalFunc this === o?&#34;</span><span class="p">,</span> <span class="k">this</span> <span class="o">===</span> <span class="nx">o</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">arrowFunc</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Arrow function, bound to scope where it&#39;s created
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;arrowFunc this === o?&#34;</span><span class="p">,</span> <span class="k">this</span> <span class="o">===</span> <span class="nx">o</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;arrowFunc this === window?&#34;</span><span class="p">,</span> <span class="k">this</span> <span class="o">===</span> <span class="nb">window</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">o</span><span class="p">.</span><span class="nx">traditionalFunc</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// traditionalFunc this === o? true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">o</span><span class="p">.</span><span class="nx">arrowFunc</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// arrowFunc this === o? false
</span></span></span><span class="line"><span class="cl"><span class="c1">// arrowFunc this === window? true
</span></span></span></code></pre></div><p>上述代码中的 arrowFunc 隶属于 o 对象，但是在 window 的作用域中被创建，因此，最终 arrow 函数中的 this 指针的值等于 window 对象。ES5 中的对于 this 的控制已然非常复杂，特别是在处理异步代码中如何传入合适的 this 对象也是一件麻烦事，如下文所示</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">asyncFunction</span> <span class="o">=</span> <span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">callback</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// With a traditional function if we don&#39;t control
</span></span></span><span class="line"><span class="cl"><span class="c1">// the context then can we lose control of `this`.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">doSomething</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Here we pass `o` into the async function,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// expecting it back as `param`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">asyncFunction</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">param</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// We made a mistake of thinking `this` is
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// the instance of `o`.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;param === this?&#34;</span><span class="p">,</span> <span class="nx">param</span> <span class="o">===</span> <span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">o</span><span class="p">.</span><span class="nx">doSomething</span><span class="p">();</span> <span class="c1">// param === this? false
</span></span></span></code></pre></div>
          </div>

          



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">上一页</div>
    <a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8E-this-%E7%BB%91%E5%AE%9A/" rel="next">函数调用与 this 绑定</a>
  </div>
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">下一页</div>
    <a href="/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E9%99%90%E6%B5%81/" rel="prev">限流</a>
  </div>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 0001-01-01</p>

          



          


  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); 
    s.async = true;
    
    s.src = "https://ngte-website.oss-accelerate.aliyuncs.com/disqus/embed.js";
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2022 NGTE all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>
<script src="//unpkg.com/heti/umd/heti-addon.min.js"></script>
<script>
  const heti = new Heti('.article');
  heti.autoSpacing();
</script>
<script type="text/javascript">
  window.$crisp = [];
  window.CRISP_WEBSITE_ID = "12adcc35-9621-4313-8262-62dc654b29d8";
  (function () {
    setTimeout(function() {
      d = document;
      s = d.createElement("script");
      s.src = "https://client.crisp.chat/l.js";
      s.async = 1;
      d.getElementsByTagName("head")[0].appendChild(s);
    }, 2500);
  })();
</script>
  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
      

    

    
    
    

    
    
    
      
      <script id="search-hit-algolia-template" type="text/html">
        <div class="search-hit">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a>
            </div>
            <div class="article-metadata search-hit-type">{{type}}</div>
            <p class="search-hit-description">{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js" crossorigin="anonymous"></script>
      
      
    

    
    

    
    
    
    
      
      <script id="dsq-count-scr" src="https://ngte-website.oss-accelerate.aliyuncs.com/disqus/count.js" async></script>
    

    
    
      
      
      
      
      
      
      
    

    
    <script src="/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js" type="module"></script>
    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
    
    <script src="/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js"></script>

    
    
    
    
    
    
    <script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>


    

    
    
    <script src="https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    <script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>

    


</body>
</html>
