<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.5.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=google-site-verification content="google69a5cccb61297807"><meta name=baidu-site-verification content="cqmZHEleVh"><meta name=description content="原型链与类的继承 Prototype Chaining | 原型链 原型 与继承是 ECMAScript 5.1 中明晰的，彼时 JavaScript 不包含传统的类继承模型，而是使用 prototypal 原型模型。继承方面，JavaScript 中的每个对象都有一个内部私有的链接指向另一个对象，这个对象就是原对"><link rel=alternate hreflang=zh href=https://ng-tech.icu/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF/><meta name=theme-color content="#0a55a7"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css crossorigin=anonymous title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark media=print onload='this.media="all"' disabled><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin=anonymous><link rel=stylesheet href=/css/wowchemy.63df6ae9fc2b4cc71b83f1774d780209.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-40NYXJ8823"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-40NYXJ8823")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?56df1177bce405601b0ecdd7208f75c6",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://ng-tech.icu/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@wx-chevalier"><meta property="twitter:creator" content="@wx-chevalier"><meta property="og:site_name" content="Next-gen Tech Edu"><meta property="og:url" content="https://ng-tech.icu/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF/"><meta property="og:title" content="原型链与类的继承 | Next-gen Tech Edu"><meta property="og:description" content="原型链与类的继承 Prototype Chaining | 原型链 原型 与继承是 ECMAScript 5.1 中明晰的，彼时 JavaScript 不包含传统的类继承模型，而是使用 prototypal 原型模型。继承方面，JavaScript 中的每个对象都有一个内部私有的链接指向另一个对象，这个对象就是原对"><meta property="og:image" content="https://ng-tech.icu/media/sharing.png"><meta property="twitter:image" content="https://ng-tech.icu/media/sharing.png"><meta property="og:locale" content="zh"><title>原型链与类的继承 | Next-gen Tech Edu</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=9f1450124258f677129d076225eded76><button onclick=topFunction() id=backTopBtn title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden=true></i></button>
<script src=/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class="col-6 search-title"><p>搜索</p></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=关闭><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box></div></section><section class=section-search-results><div id=search-hits></div><div id=search-common-queries></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Next-gen Tech Edu</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/books-gallery><span>笔记（万篇）</span></a></li><li class=nav-item><a class=nav-link href=/#knowledge-map><span>知识图谱</span></a></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>实验室</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/galaxy-home/gh-craft><span>Craft 方块世界</span></a>
<a class=dropdown-item href=/galaxy-home/glossary-cards><span>3D 知识卡牌</span></a></div></li><style>.dropdown-item{display:inline-flex}</style><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>其他阅读渠道</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230218234451.png></img><span>知乎</span></a>
<a class=dropdown-item href=https://segmentfault.com/blog/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113556.png></img><span>SegmentFault</span></a>
<a class=dropdown-item href=https://zhuanlan.zhihu.com/wxyyxc1992><img style=width:16px;height:16px;display:inline-block;margin-right:8px src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230219113519.png></img><span>掘金</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class=nav-link href=https://github.com/wx-chevalier aria-label=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a></li><div></div><style>@media only screen and (max-width:600px){.jimmysong-template{display:none!important}}</style><li class=jimmysong-template style=color:#fff;font-size:12px><a href=https://jimmysong.io style=color:#fff>By Jimmy Song's Template</a></li></ul></div></nav></header></div><div class=page-body><link rel=stylesheet href=//unpkg.com/heti/umd/heti.min.css><div class="container-xl docs"><div class="row flex-xl-nowrap"><div class=docs-sidebar><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">类与对象</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li style=display:inline-flex><a style=cursor:pointer onclick=window.history.back()><i class="fas fa-arrow-left pr-1"></i>
Back</a>
<span>|</span>
<a href=/books/><i class="fa-solid fa-house" style=margin-right:4px></i>
Books</a></li></ul><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id96c5edf64b704dc3addfaa66c5372cad")' href=#id96c5edf64b704dc3addfaa66c5372cad aria-expanded=false aria-controls=id96c5edf64b704dc3addfaa66c5372cad aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/>语法基础</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id96c5edf64b704dc3addfaa66c5372cad aria-expanded=false aria-controls=id96c5edf64b704dc3addfaa66c5372cad><i class="fa-solid fa-angle-down" id=caret-id96c5edf64b704dc3addfaa66c5372cad></i></a></div><ul class="nav docs-sidenav collapse show" id=id96c5edf64b704dc3addfaa66c5372cad><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id5d3b6a29ab9b777cf4e1ec1619d53612")' href=#id5d3b6a29ab9b777cf4e1ec1619d53612 aria-expanded=false aria-controls=id5d3b6a29ab9b777cf4e1ec1619d53612 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/>ECMAScript</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id5d3b6a29ab9b777cf4e1ec1619d53612 aria-expanded=false aria-controls=id5d3b6a29ab9b777cf4e1ec1619d53612><i class="fa-solid fa-angle-right" id=caret-id5d3b6a29ab9b777cf4e1ec1619d53612></i></a></div><ul class="nav docs-sidenav collapse" id=id5d3b6a29ab9b777cf4e1ec1619d53612><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es10-%E7%89%B9%E6%80%A7/>ES10 特性</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es6-%E7%89%B9%E6%80%A7/>ES6 特性</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es8-%E7%89%B9%E6%80%A7/>ES8 特性</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/ecmascript/es9-%E7%89%B9%E6%80%A7/>ES9 特性</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-iddb127bdde76d500942c08167cad6cfc8")' href=#iddb127bdde76d500942c08167cad6cfc8 aria-expanded=false aria-controls=iddb127bdde76d500942c08167cad6cfc8 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/>变量操作</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#iddb127bdde76d500942c08167cad6cfc8 aria-expanded=false aria-controls=iddb127bdde76d500942c08167cad6cfc8><i class="fa-solid fa-angle-right" id=caret-iddb127bdde76d500942c08167cad6cfc8></i></a></div><ul class="nav docs-sidenav collapse" id=iddb127bdde76d500942c08167cad6cfc8><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/>变量赋值</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E6%8B%B7%E8%B4%9D/>变量拷贝</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E/>变量声明</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F/>变量作用域</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E6%8F%90%E5%8D%87/>执行上下文与提升</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id0a65f9942ed5e034550b53d6df6e1f3d")' href=#id0a65f9942ed5e034550b53d6df6e1f3d aria-expanded=false aria-controls=id0a65f9942ed5e034550b53d6df6e1f3d aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/>函数</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id0a65f9942ed5e034550b53d6df6e1f3d aria-expanded=false aria-controls=id0a65f9942ed5e034550b53d6df6e1f3d><i class="fa-solid fa-angle-right" id=caret-id0a65f9942ed5e034550b53d6df6e1f3d></i></a></div><ul class="nav docs-sidenav collapse" id=id0a65f9942ed5e034550b53d6df6e1f3d><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E9%97%AD%E5%8C%85/>闭包</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8/>迭代器与生成器</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E4%B8%8E-this-%E7%BB%91%E5%AE%9A/>函数调用与 this 绑定</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E/>函数声明</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E9%99%90%E6%B5%81/>限流</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0/%E8%A3%85%E9%A5%B0%E5%99%A8/>装饰器</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6488b3e3a914a9296e2658cf2b9aa0c1")' href=#id6488b3e3a914a9296e2658cf2b9aa0c1 aria-expanded=false aria-controls=id6488b3e3a914a9296e2658cf2b9aa0c1 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/>类与对象</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id6488b3e3a914a9296e2658cf2b9aa0c1 aria-expanded=false aria-controls=id6488b3e3a914a9296e2658cf2b9aa0c1><i class="fa-solid fa-angle-down" id=caret-id6488b3e3a914a9296e2658cf2b9aa0c1></i></a></div><ul class="nav docs-sidenav collapse show" id=id6488b3e3a914a9296e2658cf2b9aa0c1><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/es6-class/>ES6 Class</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E7%B1%BB%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E5%AE%9E%E4%BE%8B%E5%8C%96/>类的封装与实例化</a></li><li class="child level active"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF/>原型链与类的继承</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id00821db9670793f71f56fa812b5ae614")' href=#id00821db9670793f71f56fa812b5ae614 aria-expanded=false aria-controls=id00821db9670793f71f56fa812b5ae614 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/>流程控制</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id00821db9670793f71f56fa812b5ae614 aria-expanded=false aria-controls=id00821db9670793f71f56fa812b5ae614><i class="fa-solid fa-angle-right" id=caret-id00821db9670793f71f56fa812b5ae614></i></a></div><ul class="nav docs-sidenav collapse" id=id00821db9670793f71f56fa812b5ae614><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/>流程控制</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/>条件判断</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/>异常处理</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idc28e1feab6e85ccb3f64f4e293a116c7")' href=#idc28e1feab6e85ccb3f64f4e293a116c7 aria-expanded=false aria-controls=idc28e1feab6e85ccb3f64f4e293a116c7 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A8%A1%E5%9D%97%E5%8C%96/>模块化</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idc28e1feab6e85ccb3f64f4e293a116c7 aria-expanded=false aria-controls=idc28e1feab6e85ccb3f64f4e293a116c7><i class="fa-solid fa-angle-right" id=caret-idc28e1feab6e85ccb3f64f4e293a116c7></i></a></div><ul class="nav docs-sidenav collapse" id=idc28e1feab6e85ccb3f64f4e293a116c7><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A8%A1%E5%9D%97%E5%8C%96/es-modules/>ES Modules</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%A8%A1%E5%9D%97%E5%8C%96/%E6%A8%A1%E5%9D%97%E6%BC%94%E5%8C%96/>模块演化</a></li></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd872b7dab95e00da6c707a2fa4b0cd95")' href=#idd872b7dab95e00da6c707a2fa4b0cd95 aria-expanded=false aria-controls=idd872b7dab95e00da6c707a2fa4b0cd95 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/>数据结构</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd872b7dab95e00da6c707a2fa4b0cd95 aria-expanded=false aria-controls=idd872b7dab95e00da6c707a2fa4b0cd95><i class="fa-solid fa-angle-right" id=caret-idd872b7dab95e00da6c707a2fa4b0cd95></i></a></div><ul class="nav docs-sidenav collapse" id=idd872b7dab95e00da6c707a2fa4b0cd95><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/>基本类型</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD%E4%B8%8E%E8%BD%AC%E6%8D%A2/>类型判断与转换</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-id6286a221e8b17f171f718879574d6bfe")' href=#id6286a221e8b17f171f718879574d6bfe aria-expanded=false aria-controls=id6286a221e8b17f171f718879574d6bfe aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/>时间与日期</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#id6286a221e8b17f171f718879574d6bfe aria-expanded=false aria-controls=id6286a221e8b17f171f718879574d6bfe><i class="fa-solid fa-angle-right" id=caret-id6286a221e8b17f171f718879574d6bfe></i></a></div><ul class="nav docs-sidenav collapse" id=id6286a221e8b17f171f718879574d6bfe><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/date/>Date</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/dayjs/>Dayjs</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F/moment.js/>Moment.js</a></li></ul></div><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E8%A7%86%E5%9B%BE%E7%B1%BB%E5%9E%8B/>视图类型</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/>正则表达式</a></li><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd6a2fb9647df9534af3fe8010772081e")' href=#idd6a2fb9647df9534af3fe8010772081e aria-expanded=false aria-controls=idd6a2fb9647df9534af3fe8010772081e aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E7%BC%96%E7%A0%81/>字符串与编码</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd6a2fb9647df9534af3fe8010772081e aria-expanded=false aria-controls=idd6a2fb9647df9534af3fe8010772081e><i class="fa-solid fa-angle-right" id=caret-idd6a2fb9647df9534af3fe8010772081e></i></a></div><ul class="nav docs-sidenav collapse" id=idd6a2fb9647df9534af3fe8010772081e><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E7%BC%96%E7%A0%81/%E7%BC%96%E8%A7%A3%E7%A0%81/>编解码</a></li></ul></div></ul></div><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idd237b1a103009bc63624a9f45d78d1c6")' href=#idd237b1a103009bc63624a9f45d78d1c6 aria-expanded=false aria-controls=idd237b1a103009bc63624a9f45d78d1c6 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/>元编程</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idd237b1a103009bc63624a9f45d78d1c6 aria-expanded=false aria-controls=idd237b1a103009bc63624a9f45d78d1c6><i class="fa-solid fa-angle-right" id=caret-idd237b1a103009bc63624a9f45d78d1c6></i></a></div><ul class="nav docs-sidenav collapse" id=idd237b1a103009bc63624a9f45d78d1c6><div class="docs-toc-item has-child"><div class="parent-node d-flex justify-content-between" onclick='Collapse("caret-idb07145a6b61c37592ec58c7350ea7485")' href=#idb07145a6b61c37592ec58c7350ea7485 aria-expanded=false aria-controls=idb07145a6b61c37592ec58c7350ea7485 aria-hidden=false data-toggle=collapse><a class="d-inline docs-toc-link" href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/proxy/>Proxy</a>
<a class="nav-toogle d-inline level" aria-hidden=false data-toggle=collapse href=#idb07145a6b61c37592ec58c7350ea7485 aria-expanded=false aria-controls=idb07145a6b61c37592ec58c7350ea7485><i class="fa-solid fa-angle-right" id=caret-idb07145a6b61c37592ec58c7350ea7485></i></a></div><ul class="nav docs-sidenav collapse" id=idb07145a6b61c37592ec58c7350ea7485><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/proxy/%E6%A1%88%E4%BE%8B-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/>案例-状态管理工具</a></li></ul></div><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/reflect/>Reflect</a></li><li class="child level"><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%85%83%E7%BC%96%E7%A8%8B/%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/>数据绑定</a></li></ul></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>目录</a></li></ul><nav id=TableOfContents><ul><li><a href=#继承属性>继承属性</a></li><li><a href=#继承方法>继承方法</a></li></ul><ul><li><a href=#原型链继承>原型链继承</a></li><li><a href=#利用构造函数继承>利用构造函数继承</a></li><li><a href=#组合继承>组合继承</a></li><li><a href=#寄生组合继承>寄生组合继承</a></li></ul><ul><li><a href=#属性丢失现象>属性丢失现象</a></li></ul></nav><div class="subscribe-module col-24 mt-1"><img src=https://ngte-superbed.oss-cn-beijing.aliyuncs.com/item/20230220172727.png alt=image title=王下邀月熊的微信公众号></div></div><main class="py-md-3 pl-md-3 docs-content col-xl-8" role=main><article class=article><h1>原型链与类的继承</h1><div class=article-style><h1 id=原型链与类的继承>原型链与类的继承</h1><h1 id=prototype-chaining--原型链>Prototype Chaining | 原型链</h1><p>原型 与继承是 ECMAScript 5.1 中明晰的，彼时 JavaScript 不包含传统的类继承模型，而是使用 prototypal 原型模型。继承方面，JavaScript 中的每个对象都有一个内部私有的链接指向另一个对象，这个对象就是原对象的<strong>原型</strong>。这个原型对象也有自己的原型，直到对象的原型为 <code>null</code> 为止(也就是没有原型)。这种一级一级的链结构就称为<strong>原型链</strong>。通俗来理解，一个对象 A 的<code>__proto__</code>属性所指向的那个对象 B 就是它的原型对象(或者叫上级对象、父对象)，对象 A 可以使用对象 B 中定义的属性和方法，同时也可以使用对象 B 的原型对象 C 的属性与方法，以此递归，这也就是所谓的原型链。JavaScript 中任何对象在原型领域有两个属性，<code>__proto__</code>与<code>prototype</code>，需要明晰的是，js 中的继承是指对<code>__proto__</code>的继承，而不是 prototype。它们二者的区分如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Foo</span><span class=p>(</span><span class=mi>20</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>c</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Foo</span><span class=p>(</span><span class=mi>30</span><span class=p>);</span>
</span></span></code></pre></div><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://i.stack.imgur.com/UfXRZ.png alt loading=lazy data-zoomable></div></div></figure></p><p><code>prototype</code> 是一个 Function 的属性，在使用 new 运算符从构造函数中生成新的对象时，会自动将新对象的<code>__proto__</code>指向 Function.prototype。</p><blockquote><p><strong>proto</strong> is the actual object that is used in the lookup chain to resolve methods, etc. prototypeis the object that is used to build <strong>proto</strong> when you create an object with new:</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>(</span><span class=k>new</span> <span class=nx>Foo</span><span class=p>().</span><span class=nx>__proto__</span> <span class=o>===</span> <span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span><span class=p>(</span><span class=k>new</span> <span class=nx>Foo</span><span class=p>()).</span><span class=nx>prototype</span><span class=p>)</span> <span class=o>===</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span></code></pre></div><p>更直观的表述方式是，在 JavaScript 中，仅有 Function 有内置的 prototype 属性，而 Object 没有。而 JavaScript 的引用类型大部分是 Object。</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img src=http://images.cnitblog.com/blog/476499/201310/10141012-dcee2678158a4c95a1338d358144403a.jpg alt loading=lazy data-zoomable></div></div></figure></p><h2 id=继承属性>继承属性</h2><p>JavaScript 对象有两种不同的属性，一种是对象自身的属性，另外一种是继承于原型链上的属性。下面的代码则演示了当访问一个对象的属性时发生的行为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 假定我们有个对象o,并且o所在的原型链如下:
</span></span></span><span class=line><span class=cl><span class=c1>// {a:1, b:2} ---&gt; {b:3, c:4} ---&gt; null
</span></span></span><span class=line><span class=cl><span class=c1>// &#39;a&#39;和&#39;b&#39;是o自身的属性.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 该例中,用&#34;对象.[[Prototype]]&#34;来表示这个对象的原型.
</span></span></span><span class=line><span class=cl><span class=c1>// 这只是一个纯粹的符号表示(ECMAScript标准中也这样使用),不能在实际代码中使用.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>o</span><span class=p>.</span><span class=nx>a</span><span class=p>);</span> <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1>// a是o的自身属性吗?是的,该属性的值为1
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>o</span><span class=p>.</span><span class=nx>b</span><span class=p>);</span> <span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1>// b是o的自身属性吗?是的,该属性的值为2
</span></span></span><span class=line><span class=cl><span class=c1>// o.[[Prototype]]上还有一个&#39;b&#39;属性,但是它不会被访问到.这种情况称为&#34;属性遮蔽&#34;.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>o</span><span class=p>.</span><span class=nx>c</span><span class=p>);</span> <span class=c1>// 4
</span></span></span><span class=line><span class=cl><span class=c1>// c是o的自身属性吗?不是,那看看o.[[Prototype]]上有没有.
</span></span></span><span class=line><span class=cl><span class=c1>// c是o.[[Prototype]]的自身属性吗?是的,该属性的值为4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>o</span><span class=p>.</span><span class=nx>d</span><span class=p>);</span> <span class=c1>// undefined
</span></span></span><span class=line><span class=cl><span class=c1>// d是o的自身属性吗?不是,那看看o.[[Prototype]]上有没有.
</span></span></span><span class=line><span class=cl><span class=c1>// d是o.[[Prototype]]的自身属性吗?不是,那看看o.[[Prototype]].[[Prototype]]上有没有.
</span></span></span><span class=line><span class=cl><span class=c1>// o.[[Prototype]].[[Prototype]]为null,原型链已到顶端,没有d属性,返回undefined
</span></span></span></code></pre></div><h2 id=继承方法>继承方法</h2><p>JavaScript 并没有真正的方法，JavaScript 只有函数，而且任何函数都可以添加到对象上作为对象的属性。继承的函数与其他的属性是基本没有差别的，包括 “ 属性遮蔽 ”(这种情况相当于其他语言的方法重写)。当继承的函数被调用时，<code>this</code> 指向的是当前继承原型的对象，而不是继承的函数所在的原型对象。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>o</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>m</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>a</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>o</span><span class=p>.</span><span class=nx>m</span><span class=p>());</span> <span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1>// 当调用 o.m 时,&#39;this&#39;指向了o.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>o</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// p是一个对象, p.[[Prototype]]是o.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>p</span><span class=p>.</span><span class=nx>a</span> <span class=o>=</span> <span class=mi>12</span><span class=p>;</span> <span class=c1>// 创建p的自身属性a.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p</span><span class=p>.</span><span class=nx>m</span><span class=p>());</span> <span class=c1>// 13
</span></span></span><span class=line><span class=cl><span class=c1>// 调用p.m时, &#39;this&#39;指向 p. &#39;this.a&#39;则是12.
</span></span></span></code></pre></div><p>在原型链上查找属性比较耗时，对性能有副作用，这在性能要求苛刻的情况下很重要。另外，试图访问不存在的属性时会遍历整个原型链。遍历对象的属性时，原型链上的每个属性都是可枚举的。检测对象的属性是定义在自身上还是在原型链上，有必要使用 <a href=https://developer.mozilla.org/zh-CN/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty target=_blank rel=noopener>hasOwnProperty</a> 方法，该方法由所有对象继承自 <code>Object.proptotype</code>。<a href=https://developer.mozilla.org/zh-CN/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty target=_blank rel=noopener>hasOwnProperty</a> 是 JavaScript 中唯一一个只涉及对象自身属性而不会遍历原型链的方法。</p><h1 id=prototype-operation原型操作>Prototype Operation（原型操作）</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s A#say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>B</span> <span class=kr>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s B#say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>run</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>B</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>b</span><span class=p>.</span><span class=nx>run</span><span class=p>.</span><span class=nx>call</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;call&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;===&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s obj.say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>run</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>Object</span><span class=p>.</span><span class=nx>setPrototypeOf</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s proto.say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>obj</span><span class=p>.</span><span class=nx>run</span><span class=p>();</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>A</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>B</span> <span class=kr>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>new</span> <span class=nx>B</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=c1>// 删去 return {}，则会报异常 ReferenceError: this is not defined
</span></span></span></code></pre></div><p>super(…); is basically sugar for this = new ParentConstructor(…);. Where ParentConstructor is the extended class, and this = is the initialisation of the this keyword (well, given that that&rsquo;s forbidden syntax, there&rsquo;s a bit more than sugar to it). And actually it will inherit from the proper new.target.prototype instead of ParentConstructor.prototype like it would from new. So no, how it works under the hood does not compare to ES5 at all, this is really a new feature in ES6 classes (and finally enables us to properly subclass builtins).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>getName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Foo</span><span class=p>.</span><span class=nx>getName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>getName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getName</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getName</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Foo</span><span class=p>.</span><span class=nx>getName</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>getName</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Foo</span><span class=p>().</span><span class=nx>getName</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>getName</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=nx>Foo</span><span class=p>.</span><span class=nx>getName</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=nx>Foo</span><span class=p>().</span><span class=nx>getName</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>new</span> <span class=k>new</span> <span class=nx>Foo</span><span class=p>().</span><span class=nx>getName</span><span class=p>();</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s A#say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>B</span> <span class=kr>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s B#say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>run</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>B</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>b</span><span class=p>.</span><span class=nx>run</span><span class=p>.</span><span class=nx>call</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;call&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;===&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s obj.say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>run</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>Object</span><span class=p>.</span><span class=nx>setPrototypeOf</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>say</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;It&#39;s proto.say.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>obj</span><span class=p>.</span><span class=nx>run</span><span class=p>();</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>A</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>B</span> <span class=kr>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>new</span> <span class=nx>B</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 删去 return {}，则会报异常 ReferenceError: this is not defined
</span></span></span></code></pre></div><p>super(…); is basically sugar for this = new ParentConstructor(…);. Where ParentConstructor is the extended class, and this = is the initialisation of the this keyword (well, given that that&rsquo;s forbidden syntax, there&rsquo;s a bit more than sugar to it). And actually it will inherit from the proper new.target.prototype instead of ParentConstructor.prototype like it would from new. So no, how it works under the hood does not compare to ES5 at all, this is really a new feature in ES6 classes (and finally enables us to properly subclass builtins).</p><h1 id=继承方式>继承方式</h1><h2 id=原型链继承>原型链继承</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=nx>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>say</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;hello, my name is &#34;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Man</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=nx>Man</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>(</span><span class=s2>&#34;pursue&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>man1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>man1</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span> <span class=c1>//hello, my name is pursue
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>man2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>say</span> <span class=o>===</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>say</span><span class=p>);</span> <span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>//true
</span></span></span></code></pre></div><p>这种继承方式很直接，为了获取 Person 的所有属性方法 ( 实例上的和原型上的 )，直接将父类的实例 new Person(&lsquo;pursue&rsquo;) 赋给了子类的原型，其实子类的实例 man1,man2 本身是一个完全空的对象，所有的属性和方法都得去原型链上去找，因而找到的属性方法都是同一个。所以直接利用原型链继承是不现实的。</p><h2 id=利用构造函数继承>利用构造函数继承</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=nx>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>say</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;hello, my name is &#34;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Man</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Person</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//Man.prototype = new Person(&#39;pursue&#39;);
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>man1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>(</span><span class=s2>&#34;joe&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>man2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>(</span><span class=s2>&#34;david&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>//false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>man1</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span> <span class=c1>//say is not a function
</span></span></span></code></pre></div><p>这里子类的在构造函数里利用了 apply 去调用父类的构造函数，从而达到继承父类属性的效果，比直接利用原型链要好的多，至少每个实例都有自己那一份资源，但是这种办法只能继承父类的实例属性，因而找不到 say 方法，为了继承父类所有的属性和方法，则就要修改原型链，从而引入了组合继承方式。</p><h2 id=组合继承>组合继承</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=nx>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>say</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;hello, my name is &#34;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Man</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Person</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Man</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Person</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>man1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>(</span><span class=s2>&#34;joe&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>man2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>(</span><span class=s2>&#34;david&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>//false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>say</span> <span class=o>===</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>say</span><span class=p>);</span> <span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>man1</span><span class=p>.</span><span class=nx>say</span><span class=p>();</span> <span class=c1>//hello, my name is joe
</span></span></span></code></pre></div><p>需要注意的是 man1 和 man2 的实例属性其实是覆盖了原型属性，但是并没要覆盖掉原型上的 say 方法(因为它们没有)，所以这里 man1.say === man2.say 依然返回 true，因而需要十分小心没有覆盖掉的原型属性，因为它是所有实例共有的。</p><h2 id=寄生组合继承>寄生组合继承</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>age</span> <span class=o>=</span> <span class=nx>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>say</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;hello, my name is &#34;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Man</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Person</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>Man</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>Person</span><span class=p>.</span><span class=nx>prototype</span><span class=p>);</span> <span class=c1>//a.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Man</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>Man</span><span class=p>;</span> <span class=c1>//b.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>man1</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>(</span><span class=s2>&#34;pursue&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>man2</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Man</span><span class=p>(</span><span class=s2>&#34;joe&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>say</span> <span class=o>==</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>say</span><span class=p>);</span> <span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>man1</span><span class=p>.</span><span class=nx>name</span> <span class=o>==</span> <span class=nx>man2</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>//false
</span></span></span></code></pre></div><p>其实寄生组合继承和上面的组合继承区别仅在于构造子类原型对象的方式上(a. 和 b.)，这里用到了 Object.creat(obj) 方法，该方法会对传入的 obj 对象进行浅拷贝，类似于：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>create</span><span class=p>(</span><span class=nx>obj</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nx>T</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=nx>T</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nx>obj</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nx>T</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>因此，a. 会将子类的原型对象与父类的原型对象进行很好的连接，而并不像一般的组合继承那样直接对子类的原型进行复制(如 Man.prototype = new Person();), 这样只是很暴力的在对属性进行覆盖。而寄生组合继承方式则对实例属性和原型属性分别进行了继承，在实现上更加合理。注意 : 代码 b. 并不会改变 instanceof 的结果，但是对于需要用到 construcor 的场景，这么做更加严谨。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>A</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>varA</span> <span class=o>=</span> <span class=nx>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 以上函数 A 的定义中，既然 A.prototype.varA 总是会被 this.varA 遮蔽，
</span></span></span><span class=line><span class=cl><span class=c1>// 那么将 varA 加入到原型(prototype)中的目的是什么？
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>A</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>varA</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span> <span class=c1>// 既然它没有任何作用，干嘛不将 varA 从原型(prototype)去掉？
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 也许作为一种在隐藏类中优化分配空间的考虑？
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// https://developers.google.com/speed/articles/optimizing-javascript#Initializing instance variables
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 将会验证如果 varA 在每个实例不被特别初始化会是什么情况。
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>doSomething</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>B</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>A</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>varB</span> <span class=o>=</span> <span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>B</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>A</span><span class=p>.</span><span class=nx>prototype</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>varB</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>enumerable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>configurable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>writable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>doSomething</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// override
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>A</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>doSomething</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>arguments</span><span class=p>);</span> <span class=c1>// call super
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>enumerable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>configurable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>writable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>B</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>constructor</span> <span class=o>=</span> <span class=nx>B</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>B</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>b</span><span class=p>.</span><span class=nx>doSomething</span><span class=p>();</span>
</span></span></code></pre></div><h1 id=类继承技巧>类继承技巧</h1><h2 id=属性丢失现象>属性丢失现象</h2><p>在 ES6 中，我们常常采用实体类方式来表示数据对象：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Object</span><span class=p>.</span><span class=nx>assign</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>A</span> <span class=kr>extends</span> <span class=nx>Base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>A</span><span class=p>({</span> <span class=nx>a</span><span class=o>:</span> <span class=mi>1</span> <span class=p>});</span> <span class=c1>// { a: null }
</span></span></span></code></pre></div><p>但是这种方式会发现，传入的参数值是在父类中被赋值到当前实例，而又被子类的默认值给覆盖了。在 TypeScript 中，我们可以通过自定义 props 的方式来解决：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>_defineProps</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>_defineProps</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>props</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(([</span><span class=nx>prop</span><span class=p>,</span> <span class=nx>value</span><span class=p>])</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nb>Object</span><span class=p>.</span><span class=nx>defineProperty</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>prop</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>get</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=kr>set</span><span class=p>(</span><span class=nx>newValue</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nx>newValue</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>value</span> <span class=o>=</span> <span class=nx>newValue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>A</span> <span class=kr>extends</span> <span class=nx>Base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>new</span> <span class=nx>A</span><span class=p>({</span> <span class=nx>a</span>: <span class=kt>1</span> <span class=p>}));</span>
</span></span></code></pre></div></div><div class=article-widget><div class="container-xl row post-nav"><div class="col-6 post-nav-item"><div class=meta-nav>上一页</div><a href=/books/javascript-series/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/%E7%B1%BB%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E5%AE%9E%E4%BE%8B%E5%8C%96/ rel=next>类的封装与实例化</a></div></div></div><div class=body-footer><p>最近更新于 0001-01-01</p><section id=comments class="mb-3 pt-0"><div id=disqus_thread></div><script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="https://ngte.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></article><footer class=site-footer><div class="copyright py-4 bg-footer"><div class="row justify-content-center"><div class="text-center footer-color"><p class=mb-0>© 2017-2022 NGTE all rights reserved</p></div></div></div></footer></main></div></div><script src=//unpkg.com/heti/umd/heti-addon.min.js></script>
<script>const heti=new Heti(".article");heti.autoSpacing()</script><script type=text/javascript>window.$crisp=[],window.CRISP_WEBSITE_ID="12adcc35-9621-4313-8262-62dc654b29d8",function(){setTimeout(function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)},2500)}()</script></div><div class=page-footer></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin=anonymous></script>
<script id=search-hit-algolia-template type=text/html><div class=search-hit><div class=search-hit-content><div class=search-hit-name><a href={{relpermalink}}>{{#helpers.highlight}}{ "attribute": "title" }{{/helpers.highlight}}</a></div><div class="article-metadata search-hit-type">{{type}}</div><p class=search-hit-description>{{#helpers.highlight}}{ "attribute": "summary" }{{/helpers.highlight}}</p></div></div></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js crossorigin=anonymous></script>
<script id=dsq-count-scr src=https://ngte.disqus.com/count.js async></script>
<script src=/zh/js/algolia-search-built.min.4387d694ca1258194aaf562b8cd1c400.js type=module></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.d1673c7a11d1238516cbe12a1e84257f.js></script>
<script>var mybutton=document.getElementById("backTopBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script>(function(){"use strict";if(!document.queryCommandSupported("copy"))return;function e(e,t){e.className="highlight-copy-btn",e.textContent=t,setTimeout(function(){e.textContent="",e.className="highlight-copy-btn fa fa-copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,s=document.createElement("button");s.className="highlight-copy-btn fa fa-copy",s.textContent="",o=n.firstElementChild,s.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(s,"已复制")}catch(t){console&&console.log(t),e(s,"Failed :'(")}}),n.appendChild(s)}var s=document.getElementsByClassName("highlight");Array.prototype.forEach.call(s,n)})()</script></body></html>